

//==// WELCOME TO CART LIFE'S OPEN SORES. //==//
//   This is the global script, where most of the nonsense happens.
//   For cart life, the GlobalScript is mainly used for the following general processes:
//   • Setting up the game with the "game_start" function.
//   • Responding to mouseclicks.
//      - Things like menu buttons, inventory items, the cash register, all Vinny's cooking stuff, etc.
//   • Time Math (time of day, day of week, speed adjustments, etc).
//   • Debug functions!
//   • Lots of other junk.

//==// IF YOU HAVEN'T BEEN SCARED OFF YET //==//
//Try exploring the game with the debug functions. Set "cheatbiking" to "true" in the global variables pane to the right,
//and then press the "Z" key in the game to activate the debug menu (warping, money and time adjustments, etc).
//You can also enable debug functions in the game by pressing the plus key and then typing the secret word.

//==// THANKS FOR TAKING A PEEK INTO THIS MESS //==//
// It's clear that, at the time of making this game and writing all of this mind-cancer-inducing code, I was
// new to scripting and was only guessing at how to make things work. What takes cart life hundreds of thousands
// of lines of scripting could be done in a few dozen by a more astute author. But, despite the immeasurable shame
// I feel when I glance back over this shit, I remember that I only learned what I know through looking at the
// attempts made by other authors. If they hadn't granted me the chance to peek under the hoods of their creations,
// I could never have even started to forge my own. It's my dearest hope that any of this is of use to someone.
// BEST OF LUCK, PIONEER!
// -Richard

//DECLARING SOME VARIABLES
    int tommybug;
    int walkcounter;
    bool cellalarmed_go2school;
    bool cellalarmed_pickup;
    bool cellalarmed_custody;

    bool cranked;
    int cranko;
    bool paycranked;
    int paycranko;
    float billclimbing;
    float changeclimbing;
    int changebillslot[];
    int changeslot[];
    bool drawerisslid;
    bool drawerbounced;
    int drawerdestino;
    bool donecranko;
    int donecranked;
    bool kachinging;
    bool exacting;


    float tiprecord[];




function game_start() {  //DAWN

    //Display("Haribol!");
    //Debug (0, 0);
    Overlay.CreateTextual(0, 0, 640, eFontFont0, 65535, "Haribol ...");
    debug = true;

    readytosell = false;
    queposition = 0;//Starts at zero
    chowhand.Visible=false;
    sgw_buy.Visible=false;
    top_reveal.Visible=false;
    top_reveal.Visible=false;
    invMain.ItemWidth = 21;
    invMain.ItemHeight = 20;
    SetMusicMasterVolume(100);
    SetDigitalMasterVolume(100);
    game.skip_display=0;
    SetSkipSpeech(0);
    game.text_speed=50;

    cranked=false;
    paycranked=false;
    donecranked=false;
    kachinging=false;
    cranko=0;
    paycranko=0;
    donecranko=0;
    billclimbing=(0.00);
    changeclimbing=(0.00);
    drawerisslid=false;
    drawerbounced=false;
    drawerdestino=-308;
    exacting=false;

    changebillslot = new int[5];
    int o = 0; 
    while (o < 5) {
      changebillslot[o]=0;
      o++;
    }

    changeslot = new int[9];
    o = 0; 
    while (o < 9){
      changeslot[o]=0;
      o++;
    }


    tiprecord = new float[Game.CharacterCount];

    // DEBUG //
    //==// Uncomment this to Set all Playstatus variables back to Zed //==//
    //     [0: unfinished -- 1: In Progress -- 2: Skipped Town -- 3: Left -- 4: Won]
    //NewScores(0, 0);//Andrus 
    //NewScores(1, 0);//Melanie
    //NewScores(2, 0);//Vinny
    //NewScores(3, 1);//Bonus //==// Everything Edition should be set to "1", regular version to zero

    ReadScores();//Need this

    //DialogOptionsRenderingInfo.Width=50;
    game.max_dialogoption_width = 200;


    /////////===//////// USE THE FOLLOWING FOR A TEST COMPILE FIRST, THEN REMOVE THE NEWSCORES(X,X); COMMANDS AND COMPILE AGAIN //===/////
    //==// MEGA-BONUS EVERYTHING EDITION //==//
    end_restart.NormalGraphic=8005;//Author's Site (instead of "Buy the Mega-Bonus Everything Edition)
    NewScores(3, 1); //Unlock Vinny!

    //==// MEGA-BORING FREEWARE EDITION //==//
    //end_restart.NormalGraphic=9372;//"Buy the Mega-Bonus Everything Edition" button
    //NewScores(3, 0); //Lock Vinny!



    //=====================   INTERFACE DISABLERY  ======================================================
    gui[0].Visible = false;
    gui[1].Visible = false;
    gui[2].Visible = false;
    gItemDesc.Visible = false;
    gCook2.Visible = false;
    gTopics2.Visible = false;
    gThirstex.Visible = false;
    gMake.Visible = false;
    gGui2.Visible = false;
    gDialog.Visible = false;
    mouse.Visible = false;
    nameplate.Visible = false;

    gDemokill.Visible = false;
    gNotify.Visible = false;
    gPick.Visible = false;
    gInfo.Visible = false;
    creamcheese_slider.Visible = false;
    lox_slider.Visible = false;
    pbj_slider.Visible=false;
    toasted_slider.Visible=false;
    info_image.Visible=false;
    Topbar.Visible=false;
    TopInfo.Visible=false;


    prev_button.Visible=false;
    next_button.Visible=false;


    mouse.Mode = eModeLookat;
    //=====================   CHARACTER IDLE VIEWS  =====================================================
    cEgo.SetIdleView (9, 2);
    cAndrus.SetIdleView(3, 0);
    //=====================   Inventory Items Start at Zero  ============================================
    withdrawel = 0;
    permitted = 0;

    repmod = (0.00);
    rep = 0;
    //repfloat=(0.00);

    coffee_s_remaining=0;
    coffee_a_remaining=0;
    coffee_b_remaining=0;
    coffee_c_remaining=0;
    coffee_d_remaining=0;

    rinse_remaining=0;

    flour_remaining=0;
    salt_remaining=0;
    yeast_remaining=0;
    buttermilk_remaining=0;

    vcheese_remaining=0;
    creamcheese_remaining=0;
    creamcheesex = 0;

    jelly_remaining=0;
    peanutbutter_remaining=0;
    pbjx = 0;

    toastedx = 0;

    cigarettes_remaining=0;
    catfood_remaining=0;
    cups_remaining=0;
    napkins_remaining=0;

    capers_remaining=0;
    lox_remaining=0;
    loxx = 0;

    chai_remaining=0;
    cocoa_remaining=0;
    milk_remaining=0;
    bagel_plain_remaining=0;

    crest_remaining=0;


    hour=7;
    isclockrunning=1;
    dayofweek=1;
    dayspassed=0;

    saleitem=("nothing");
    salebuyer=("nobody");

    upCoffee=("None");
    keyword=("Nothing");
    keytype=0;

    //=====================   GLOBALS   ======    GLOBALS    ===========================================================
    SetGlobalInt(1,0); // Player Character Not Yet Chosen
    SetGlobalInt(108,0); // Nutrition Tickdown

    //===========ROOM CHANGING===============///
    SetGlobalInt(90, 0); // 0:Matty's & Dompactor    1:Eddie's & Pawnshop
    //Note: If 90==0, it's a restaurant. If not, it's a retailer.

    SetGlobalInt(411, 0);  //Barneys Plot Meter
        //1: Plot given to the player
        //2: Eddie's mad.
        //3: Eddie's coming to talk it over.
        //4: Player declines Eddie's offer / turns him away [Eddie's always mad, from now on.]
        //5: Player's got the fakes
        //6: Player tells Barneys about fakes / betrays Eddie
        //7: Bookstore's busted - Barneys get the book
        //8: Roastierry is now addictive!
        //9: Fake delivered
        //10: Fake has taken effect - Roast coffee's terrible!
        //11: Roastierry closes, coffee C now available at Barney's.

    SetGlobalInt(422, 0); //Faith's Relationship Meter (1:Cholestol  2:Test?NoThanks 3:Test?Sure/Pending 5:TestAwaitingGrade 6:TestFail 7:TestPass)
    SetGlobalInt(423, 0); //Eddie's Relationship Meter (2: angries 4: NO MORE EDDIE!)

    SetGlobalInt(409,0);  //Bigby sign (0:Unseen  1:Seen 2:Graffiti)

    SetGlobalInt(410,0);  //O'Fagan Notes (1:First 2:Second Chance 3:Banned!)

    SetGlobalInt(26,0);   //Suchin Hungry
    SetGlobalInt(426, 0); //Suchin Relationship

    SetGlobalInt(14,0);   // Toney Hungry
    SetGlobalInt(414, 0); // Toney Talked

    SetGlobalInt(15,0);   // Jenny Hungry
    SetGlobalInt(415, 0); //Jenny Talked

    SetGlobalInt(16,0);   // Richard Hungry
    SetGlobalInt(416, 0); //Richard Talked

    SetGlobalInt(17,0);   // Troy Hungry
    SetGlobalInt(417, 0); //Troy Talked

    SetGlobalInt(18, 0);  //George Hungry
    SetGlobalInt(418, 0); //George Talked

    SetGlobalInt(25, 0);  //Thales: Hungry
    SetGlobalInt(325, 0); //0: Permit needs checking. 1:A-OK!
    SetGlobalInt(425, 0); //Old Times Fined Method

    SetGlobalInt(32, 0);  //Chris Hungry
    SetGlobalInt(432, 0); //Chris Talked

    SetGlobalInt(434, 0); //Bramford State
        //0:Stasis 1:GraffitiLooked 2:Bribeready

    SetGlobalInt(35, 0);  //Ward Hungry

    SetGlobalInt(442, 0); //Omar State
        //0:Stranger 1:Familiar 2:Angry

    SetGlobalInt(436, 0); //Stephanie State
        //0:New Face 1:Repeat Customer

    SetGlobalInt(43, 0);  //Basinski - Hungry?
    SetGlobalInt(443, 0); //Baskinski - Plot State
        //0: Stranger.
        //1: Real Name
        //2: Cran Burstington
        //3: Monterrius Lovette.
        //4: Granite McMeadows.
        //5: Vasya Pupkin.
        //6: Jim.
    SetGlobalInt(343, 0); //Basinski - Done for the day?

    SetGlobalInt(37, 0);  //The Three - Hungry?
    SetGlobalInt(437, 0); //The Three - Who's turn is it?
    SetGlobalInt(313, 0); //The Three - Done for the day?

    SetGlobalInt(38, 0);  //Is Dick Hungry?
    SetGlobalInt(438, 0); //Dick's State: 0:Default 1:NoCoffeeWalkby 2:MoreCoffeePlease 4:SmellsGood?

    SetGlobalInt(39, 0);  //Christin Hungry
    SetGlobalInt(439, 0); //Christin Talke

    SetGlobalInt(45, 0);  //Jessi- Hungry?
    SetGlobalInt(445, 0); //Jessi - Plot State

    SetGlobalInt(56,0);   // Winston Hungry
    SetGlobalInt(456, 0); //Winston Talked

    SetGlobalInt(90,0); // 0:Matty's / 1:Eddie's
    SetGlobalInt(94,0); // 0:Bigby's / 1:Fivestar
    SetGlobalInt(95,0); // 0:Commercial / 1:Residential

    SetGlobalInt(98,0); // TRAVEL Origin
    SetGlobalInt(99,0); // TRAVEL Destination


    SetGlobalInt(100,0); // Inventory Screen ON/OFF
    SetGlobalInt(101,0); // Andrus Progress
    SetGlobalInt(102,0); // Mel Progress
    SetGlobalInt(103,0); // Vinny Progress
    SetGlobalInt(104,0); // Logan Progress
    SetGlobalInt(106,0); // Andrus Apartment IN / OUT
    SetGlobalInt(107,0); // Tutorial
    SetGlobalInt(50, 0); //Stand Location
    SetGlobalInt(51, 0); //Stand Type
    SetGlobalInt(52, 0); //Operating cart?
    SetGlobalInt(10, 0); //Andrus Enters Hotel from Outside / Inside
    SetGlobalInt(11, 0); //Andrus Cat View
    SetGlobalInt(12, 0); //Georgetonian Contract Paid? (1:Tim paid 2:paid 3:Unpaid)

    //200-224 are for Music Unlockdom
    SetGlobalInt(201, 0); //HollowStump (Bridge Day)
    SetGlobalInt(202, 0); //Domenz79 (Nothing Yet)
    SetGlobalInt(203, 0); //NoisePulse (Map)
    SetGlobalInt(204, 0); //CBM Master (Dompactor)
    SetGlobalInt(205, 0); //Crystaline Caves (Nothing Yet)
    SetGlobalInt(206, 0); //Commodorish(Franklin)
    SetGlobalInt(207, 0); //Elements_Earth(Dream)
    SetGlobalInt(208, 0); //Elements_Air(Dream)
    SetGlobalInt(209, 0); //Elements_Water(Dream)
    SetGlobalInt(210, 0); //Elements_Fire(Dream)
    SetGlobalInt(211, 0); //Urban Ratz(Load Screen)
    SetGlobalInt(212, 0); //ComeToNothing(Downtown)
    SetGlobalInt(213, 1); //Joggers(Open)
    SetGlobalInt(214, 0); //Roboghosts(Roastierry)
    SetGlobalInt(215, 0); //Ninjamaggots(13th)
    SetGlobalInt(216, 0); //BigScratch(Machinery)
    SetGlobalInt(217, 0); //GoodMorning(Dream)
    SetGlobalInt(218, 0); //Roborevolt(Collins)
    SetGlobalInt(219, 0); //Barbara(Florin)
    SetGlobalInt(220, 0); //Chip.Munk(Mall)
    SetGlobalInt(221, 0); //SaltoMortale(Love)
    SetGlobalInt(222, 0); //Brennan(BridgeNight)
    SetGlobalInt(223, 0); //CommerceUnread(Main)
    SetGlobalInt(224, 0); //Condiments(Credits)

    SetGlobalInt(250, 0); //Nelly's Hungermeter

    SetGlobalInt(300, 1); //Lift Destination

    //=====================   USING GLOBALS FOR NPC CONV STATES =========================================
    SetGlobalInt(2, 0); // Alice Miles Conversation State
    SetGlobalInt(200, 0); // Marcus 0:Nothing 1:Drank Coffee 2:Told about Comics 3:Gave Comics 4:Let's meet 2morrow 5:Pending 6:Finished
    SetGlobalInt(201, 0); // George Conv State  FIXME int 201 is already used for the first unlockable song!!!

    //=====================   BIG WHEEL-SPIN RANDOMANTY   ===============================================
    //int ran=Random(5);
    //if (ran==0) SetGlobalInt(333,1);
    //else if (ran==1) SetGlobalInt(333,2);
    //else if (ran==2) SetGlobalInt(333,3);
    //else if (ran==3) SetGlobalInt(333,4);
    //else if (ran==4) SetGlobalInt(333,5);
    //else if (ran==5) SetGlobalInt(333,6);
    //=====================   CHARACTER STARTING INVENTORY ASSIGNMENTS   ================================
    //CANCELLED - DECIDED TO ADD "STARTING ITEMS" AFTER/DURING INITIAL STAND AQUISITION.
    //cEgo.AddInventory(iKey);
    //cEgo.AddInventory(iPoster);
    //cEgo.AddInventory(CoffeeB);
    //cAndrus.AddInventory(CoffeeC);
    //cMelanie.AddInventory(CoffeeA);


    //=====================   STORE / MERCHANT INVENTORY ASSIGNMENTS   ================================
    //Using AGS's character-specific inventories to stock the store shelves.

    //Troy's Inv is the Pawnshop's CD Rack.
    Troy.AddInventory(bLobat); Troy.AddInventory(bMat64); Troy.AddInventory(bPocket);Troy.AddInventory(bStu);Troy.AddInventory(bThirsty);

    //Tim's inv is Tim's Inv is Tim's Inv.
    cTimothy.AddInventory(bMilk); cTimothy.AddInventory(bButtermilk); 
    cTimothy.AddInventory(bCream); 
    cTimothy.AddInventory(bCreamCheese); cTimothy.AddInventory(bWhipped); 
    cTimothy.AddInventory(bBuns); cTimothy.AddInventory(bHD24);
    cTimothy.AddInventory(bKetchup); cTimothy.AddInventory(bMustard);  cTimothy.AddInventory(bRelish);
    cTimothy.AddInventory(bSauerkraut); cTimothy.AddInventory(bChilli); 
    cTimothy.AddInventory(bJalapenos); cTimothy.AddInventory(bCapers); 
    cTimothy.AddInventory(bPeanutbutter); cTimothy.AddInventory(bJelly);
    cTimothy.AddInventory(bCocoa); cTimothy.AddInventory(bSugar); 
    cTimothy.AddInventory(bFlour); cTimothy.AddInventory(bSalt);
    cTimothy.AddInventory(bYeast); 
    cTimothy.AddInventory(bCoffee_D); 
    cTimothy.AddInventory(bRinse);
    cTimothy.AddInventory(bCigarettes); cTimothy.AddInventory(bCatfood); cTimothy.AddInventory(bLightercheap);
    cTimothy.AddInventory(bBigwich); cTimothy.AddInventory(bBigwichv); 

    //Barneys are the Roastierry Inv (Surprised? Nay? SHOCKED?!)
    cBarneys.AddInventory(bCoffee_A); cBarneys.AddInventory(bCoffee_B); 
    cBarneys.AddInventory(bCoffee_C); cBarneys.AddInventory(bSyrups); 
    cBarneys.AddInventory(bChai); 

    //FIXME Using character inventories for the superstore items is really confusing, should be changed 
    // Toney is Superstore Equipment's Inv
    Toney.AddInventory(bEspressomachine); Toney.AddInventory(bMaker); Toney.AddInventory(bCups); 
    Toney.AddInventory(bNapkins); Toney.AddInventory(bHeadunit);


    // Jenny is Superstore Ingredient's Inv
    Jenny.AddInventory(bCrest); Jenny.AddInventory(bRinse);
    Jenny.AddInventory(bCocoa); Jenny.AddInventory(bCoffee_D); Jenny.AddInventory(bMilk); Jenny.AddInventory(bCream); 
    Jenny.AddInventory(bChai); 
    Jenny.AddInventory(bSyrups); Jenny.AddInventory(bWhipped); Jenny.AddInventory(bSugar); Jenny.AddInventory(bCreamCheese); Jenny.AddInventory(bJelly);
    Jenny.AddInventory(bPeanutbutter); Jenny.AddInventory(bFlour); Jenny.AddInventory(bSalt); Jenny.AddInventory(bYeast);
    Jenny.AddInventory(bGondolas);
    Jenny.AddInventory(bBuns); Jenny.AddInventory(bLox); Jenny.AddInventory(bChilli);  Jenny.AddInventory(bJalapenos); 
    Jenny.AddInventory(bKetchup); Jenny.AddInventory(bMustard); Jenny.AddInventory(bRelish); Jenny.AddInventory(bSauerkraut);
    Jenny.AddInventory(bHD24);


    // Richard is Superstore Item's Inv
    Richard.AddInventory(bApaptol);
    Richard.AddInventory(bGelcaps);
    Richard.AddInventory(bMoonroom);
    Richard.AddInventory(bSunroom);
    Richard.AddInventory(bUrinary);
    Richard.AddInventory(bPainrelief);
    Richard.AddInventory(bMultivitamin);
    Richard.AddInventory(bSpellunflav);
    Richard.AddInventory(bSpelllemon);
    Richard.AddInventory(bFreshener);
    Richard.AddInventory(bPerfume); 
    Richard.AddInventory(bCatfood); 
    Richard.AddInventory(bTowels); 
    Richard.AddInventory(bLightercheap);
    Richard.AddInventory(bCigarettes);
    Richard.AddInventory(bVoliton1); 
    Richard.AddInventory(bVoliton2); 
    Richard.AddInventory(bKuddletoy); 
    Richard.AddInventory(bWatchD);
    Richard.AddInventory(bMultitool);
    Richard.AddInventory(bCandle);
    Richard.AddInventory(bLobat); 
    Richard.AddInventory(bMat64); 
    Richard.AddInventory(bPocket);
    Richard.AddInventory(bStu);
    Richard.AddInventory(bThirsty);

    Nelly.AddInventory(bMaker);//Nelly is Organique's Equipment Inv
    Julian.AddInventory(bCatfood);// Julian is Organique's Item Inv

    Jessi.AddInventory(bMilk); Jessi.AddInventory(bButtermilk); Jessi.AddInventory(bCream); 
    Jessi.AddInventory(bCreamCheese); Jessi.AddInventory(bSugar); 
    Jessi.AddInventory(bJelly); Jessi.AddInventory(bPeanutbutter); Jessi.AddInventory(bLox); Jessi.AddInventory(bSalt);
    Jessi.AddInventory(bYeast); Jessi.AddInventory(bBuns); Jessi.AddInventory(bCoffee_B); Jessi.AddInventory(bChai);
    Jessi.AddInventory(bCocoa); 
    // Jessi is Organique's Inventory

    //TJ.AddInventory(xxx); 
    TJ.AddInventory(bHeadunit);// TJ is Pawnshop's Item's Inv (surprise)

    Marcus.AddInventory(bpingpong); Marcus.AddInventory(bCalamity); // Marcus' inv is Eddie's Comics
    Eddie.AddInventory(bCarbon); Eddie.AddInventory(bTigers);// Eddie is Eddie's Fiction
    Eddie.AddInventory(bScandalrag); Eddie.AddInventory(bAcrocircus);
    Eddie.AddInventory(bDragonfeet); Eddie.AddInventory(bFatalsteps);
    Eddie.AddInventory(bIndianlore);

    Melody.AddInventory(bLox); Melody.AddInventory(bHD24);Melody.AddInventory(bHD48); Melody.AddInventory(bHD100);// Melody is The Ice Box

    //while loop for adding all inventory to Winston.
    int wi = 1;
    while (wi < (Game.InventoryItemCount + 1)) {
        if (Winston.InventoryQuantity[wi] == 0) {
            //if (inventory[wi].Name.StartsWith("b",true))
            Winston.AddInventory(inventory[ wi ]);
        }
        wi++;
    }


    //Zedding Society's Values
    deliveryday=0;
    HotdogCost=(0.03);
    CoffeeNetS=(0.00);
    CoffeeNetA=(0.00);
    CoffeeNetB=(0.00);
    CoffeeNetC=(0.00);
    CoffeeNetD=(0.00);
    ChaiNet=(0.00);
    CocoaNet=(0.00);
    MilkNet=(0.00);
    AmericanoNet=(0.00);
    LatteNet=(0.00);
    CappuccinoNet=(0.00);
    MochaNet=(0.00);
    ChailatteNet=(0.00);
    CoffeeGrossS=(0.00);
    CoffeeGrossA=(0.00);
    CoffeeGrossB=(0.00);
    CoffeeGrossC=(0.00);
    CoffeeGrossD=(0.00);
    ChaiGross=(0.00);
    CocoaGross=(0.00);
    MilkGross=(0.00);
    Bagel_PlainGross=(0.00);
    AmericanoGross=(0.00);
    LatteGross=(0.00);
    CappuccinoGross=(0.00);
    MochaGross=(0.00);
    ChailatteGross=(0.00);
    // End Game Start Variable Sets

    // FIXME move the dish randomizer somewhere appropriate (should run every day)
    int beccabaker1=Random(5);
      if (beccabaker1==0){becca_dish1=("Scrambled eggs");}
      if (beccabaker1==1){becca_dish1=("Breakfast burritos");}
      if (beccabaker1==2){becca_dish1=("Pancakes");}
      if (beccabaker1==3){becca_dish1=("Biscuits and Gravy");}
      if (beccabaker1==4){becca_dish1=("Quiches");}
      if (beccabaker1==5){becca_dish1=("Mini Donuts");}
    int beccabaker2=Random(5);
      if (beccabaker2==0){becca_dish2=("Phad Thai");}
      if (beccabaker2==1){becca_dish2=("Spaghetti");}
      if (beccabaker2==2){becca_dish2=("Pumpkin Curry");}
      if (beccabaker2==3){becca_dish2=("Veggie Burgers");}
      if (beccabaker2==4){becca_dish2=("Mushroom Wellingtons");}
      if (beccabaker2==5){becca_dish2=("Lettuce Wraps");}

    // DEBUG //
    //============// Superdirect flight pre-emption //==================//
    //Set the "superd" global variable to bypass the opening screen and get right into testing specifics.
    if (superd != 0){ //We're going straight to it.
        cheatbiking = true;  //"cheatbiking" is debug mode.
        
        if (superd == 1){  // ANDRUS VERSION
            SetGlobalInt(1, 1);
            music_slider.Value=5;  musique=0; SetMusicVolume(-3); cheatbiking=true; txtspd_slider.Value=180;
            npcAndrus_location=0; npcLogan_location=13; npcMelanie_location=17; npcVinny_location=22;
            Andrus.ChangeRoom(25, 0, 0);
            SetGlobalInt(1,1); FadeOut(1); cAndrus.SetAsPlayer(); gGui1.BackgroundGraphic=15;
            upgrade_4.NormalGraphic=1278; upgrade_D.NormalGraphic=1273;//Start with Battery
            small_Bigby=1; boxadd("Tim Bigby"); boxadd("Breezy's Motel");
            m_newcart.NormalGraphic=3794; m_newcart.MouseOverGraphic=3795;
            cSlot2.AddInventory(WatchD); //Buy your watch at the Superstore!
            cSlot2.AddInventory(Lighter); cSlot2.AddInventory(Pocketknife);
            TJ.AddInventory(bDiamond); TJ.AddInventory(bWatchC); stand_look=0;
            gStand_Gui.BackgroundGraphic=180; Money=2250.00; balance_start=2250.00;//Why the difference?
            gPrice_Gui.BackgroundGraphic=184; gUpgrades_Gui.BackgroundGraphic=194;
            cLogan.ChangeRoom(24, 80, 82); cMelanie.ChangeRoom(24, 136, 82); cEgo.ChangeRoom(24, 190, 82); bmood.Visible=false;
            cigarettes_remaining+=2; cSlot2.AddInventory(Cigarettes);//Add Smokes
            Stand.ChangeRoom(5, 335, 160); // Move Newsstand to Franklin
            SetGlobalInt(52, 1); vitality.Width=110; caffeine.Width=110; nutrition.Width=110; kibbles.Width=110;
            ////Wait(5); gPick.Visible=false; pick.X=38; pick.Y=16; close_pick.Visible=true; Wait(5);
            ////player.ChangeRoom(23,179, 197);}//ANDRUS REGULAR START! = 1 (Teal) 
            ////=========== DEBUG START CONDITIONS  ===========///
            cheatbiking=true;//Debug Commands
            SetGlobalInt(101, 20); //7: Glem gets out!
            SetGlobalInt(10, 0); //0:Outside  - 1:Inside
            cSlot2.AddInventory(A3Key); StandImage.NormalGraphic=165;//Basics
            SetGlobalInt(12, 1);//Basics
            cSlot2.AddInventory(Contract_G); cSlot2.AddInventory(Permit_franklin); //Basics
            cSlot2.AddInventory(BigBox); boxadd("Comics");
            SetGlobalInt(50, 5); SetGlobalInt(51, 1);//Stand Location + Type
            Stack.ChangeRoom((Stand.Room), (Stand.x-50),  (Stand.y+3)); Stack.Baseline=999; Stack.Transparency=0;//Stackness
            npcVinny_location=5;//Vinny at Franklin?
            Money=50.00;//Money Adjust
            kickedout=0; //Kickedout?
            SuchinLove=2;//Suchinlove Adjust
            dayspassed=7; dayofweek=7;//Day adjust
            hour=10; minute=00; ampm=1;//Time Adjust
            SetGlobalInt(201, 1);//Got key from George
            //=========== DIRECT FLIGHTS  ===========///
            //georgeisnorthbound=true; player.ChangeRoom(15, 150, 160);//endgame direct flight
            player.ChangeRoom(5,200, 113); //Franklin Direct Flight (outside)
            //player.ChangeRoom(7,200, 113); SetGlobalInt(10, 0);//Breezy's Direct Flight (outside)
        }

        if (superd==2){////////////////////////MELANIE DIRECT FLIGHT
            SetGlobalInt(1, 2);
            music_slider.Value=5;  musique=0; SetMusicVolume(-3); cheatbiking=true; txtspd_slider.Value=180;
            npcAndrus_location=5; npcLogan_location=13; npcMelanie_location=0; npcVinny_location=22;
            Melanie.ChangeRoom(4, 10, 10); small_laura=1; small_rebecca=1;
            SetGlobalInt(1,2); FadeOut(1); cMelanie.SetAsPlayer(); gGui1.BackgroundGraphic=6;  
            cSlot2.AddInventory(WatchB); cSlot2.AddInventory(Cellphone);//Starting Inventory
            cSlot2.AddInventory(Divorcepapers); cSlot2.AddInventory(Diamondring);//Starting Inventory
            TJ.AddInventory(bLighter);
            upgrade_4.NormalGraphic=1278; upgrade_D.NormalGraphic=1273;//Start with Battery
            small_rebecca=1;
            melplot=0;
            gStand_Gui.BackgroundGraphic=182;
            gPrice_Gui.BackgroundGraphic=186; gUpgrades_Gui.BackgroundGraphic=196; SetGlobalInt(52, 1);
            cLogan.ChangeRoom(24, 80, 82); cAndrus.ChangeRoom(24, 25, 82); cEgo.ChangeRoom(24, 190, 82); kibbles.Visible=false; stand_look=0; TJ.AddInventory(bWatchC); 
            lockup.FollowCharacter(Stand,FOLLOW_EXACTLY, 100); lockup.LockView(88); bmood.Visible=false; 
            gPick.Visible=false; pick.X=38; pick.Y=16; close_pick.Visible=true;
            Money=1560.00; balance_start=1560.00;
            //
            //
            ////==// Reg. Start: Sunday Night //==//
            //dayspassed=-1;
            //dayofweek=0;
            //hour=6; minute=21; ampm=1;//Set Time: 8:30am
            //SetGlobalInt(102, 1); 
            ////melplot=1;//0:Tutorial/Intro --- 1: Tutorial Already Over
            //cMelanie.ChangeRoom(2, 275,  58);

            //==// Starting Monday 4:00//==//
            //dayspassed=0;
            //dayofweek=1;
            //melplot=1;
            //hour=10; minute=05; ampm=0; milhour=10;//TimeSet
            //boxadd("Permits"); //throwing this in to check bug in Bramford askabout
            //Laura.ChangeRoom(4, 370, 192);//Setting up laura in Limbo
            //player.ChangeRoom(26, 300, 140);//Starting Melanie in Collins

            //==// Starting Tuesday Morning//==//
            cSlot3.AddInventory(espressomachine);
            boxadd("Coffee");
            boxadd("Vegetarianism");
            dayspassed=2;
            dayofweek=2;
            melplot=2;
            SchoolTalk=3;
            hour=7; minute=30; ampm=0; milhour=9;//TimeSet
            //mel_vinnyplot=1; mel_vinnylove=1;
            rep=50;//Like Whoah.
            Laura.ChangeRoom(2, 370, 192);//Setting up laura at the door
            player.ChangeRoom(2, 275, 80);//Melanie! = 2 (Coffee Color) 
        }

        if (superd==3){//Vinny
            SetGlobalInt(1, 3);
            music_slider.Value=5;  musique=0; SetMusicVolume(-3); cheatbiking=true; txtspd_slider.Value=180;
            npcAndrus_location=5; npcLogan_location=13; npcMelanie_location=17; npcVinny_location=0;
            Vinny.ChangeRoom(25, 0, 0); small_Mel=1;
            SetGlobalInt(1,3); FadeOut(1); Money=202.60; balance_start=202.60;
            small_Alice=1; topicbox.AddItem("Alice"); topicbox.AddItem("Georgetown Machinery");
            cSlot2.AddInventory(WatchC); TJ.AddInventory(bDiamond); TJ.AddInventory(bLighter); stand_look=0;
            gUpgrades_Gui.BackgroundGraphic=197; cSlot2.AddInventory(Recipebook_V); kibbles.Visible=false;
            cLogan.ChangeRoom(24, 80, 82); cMelanie.ChangeRoom(24, 136, 82); cAndrus.ChangeRoom(24, 25, 82); 
            vitality.Width=110; caffeine.Width=110; nutrition.Width=110; bmood.Visible=false; player.AddInventory(CoffeeD); coffee_d_remaining=5;
            //Wait(5); gPick.Visible=false; pick.X=38; pick.Y=16; close_pick.Visible=true; Wait(5);
            //player.ChangeRoom(23,179, 197);} //VINNY Reg Start
            //DEBUG VERSIONS
            upgrade_4.NormalGraphic=1278;//Battery!
            coffee_a_remaining=100; player.AddInventory(CoffeeA);//Coffee A!
            rep=0;
            hour=6; minute=30; ampm=1; milhour=18;//TIME SET
            //player.ChangeRoom(5,  100, 160); hour=4; minute=20; ampm=0;}//Franklin Flight
            //player.ChangeRoom(6,  331, 131);}//Home room
            //player.ChangeRoom(31,100, 141);} //Matty's
            //player.ChangeRoom(16,100, 141);} //Fagan's
            //player.ChangeRoom(26, 350, 155); hour=11; minute=52; ampm=0;} //Dompactor Raxby
            //SetGlobalInt(411, 8); player.ChangeRoom(14, 175, 155); hour=5; minute=55; ampm=0;//Downtown Direct Flight
            //SetGlobalInt(95, 0); player.ChangeRoom(36, 175, 155); hour=7; minute=40; ampm=0;//Walkthru Direct Flight
            ///==// Downtown with stand and bagels (priced) ready to play //==//
            //cSlot1.AddInventory(Cups); cups_remaining+=100;
            //milk_remaining=1; cSlot2.AddInventory(Milk); MilkPrice=0.99; Slider_Milk.Value=99; Menu.AddItem("Milk");
            //rinse_remaining=10; cSlot2.AddInventory(Rinse); RinsePrice=0.99; Slider_Rinse.Value=99;
            bagel_plain_remaining=100; cSlot2.AddInventory(Bagel_Plain); Bagel_PlainPrice=1.50; Slider_Bagel_Plain.Value=150;
            //cSlot2.AddInventory(Permit_downtown);
            StandImage.NormalGraphic=806;  Stand.ChangeView(51); Stand.LockView(51); Stand.ChangeRoom(14,  17, 161); player.ChangeRoom(14,  17, 161);//Downtown w/Stand Direct Flight
        }


        if (superd==13){//////////////////////TRAILER VERSION
            SetGlobalInt(1, 1);
            small_Toney=1;
            cSlot1.AddInventory(maker); cSlot2.AddInventory(CoffeeC); coffee_c_remaining+=100; PaperPrice=1.00;
            CoffeePriceA=1.50; CoffeePriceB=1.50; CoffeePriceC=1.50; CoffeePriceD=1.50; CoffeePriceS=1.50;
            cSlot1.AddInventory(Cups); cups_remaining+=100;
            music_slider.Value=5;  musique=0; SetMusicVolume(-3); cheatbiking=true; txtspd_slider.Value=180;
            npcAndrus_location=0; npcLogan_location=13; npcMelanie_location=17; npcVinny_location=22;
            Andrus.ChangeRoom(25, 0, 0);
            SetGlobalInt(1,1); FadeOut(1); cAndrus.SetAsPlayer(); gGui1.BackgroundGraphic=15;
            upgrade_4.NormalGraphic=1278; upgrade_D.NormalGraphic=1273;//Start with Battery
            small_Bigby=1; boxadd("Tim Bigby"); boxadd("Breezy's Motel");
            m_newcart.NormalGraphic=3794; m_newcart.MouseOverGraphic=3795;
            cSlot2.AddInventory(WatchD); //Buy your watch at the Superstore!
            cSlot2.AddInventory(Lighter); cSlot2.AddInventory(Pocketknife);
            TJ.AddInventory(bDiamond); TJ.AddInventory(bWatchC); stand_look=0;
            gStand_Gui.BackgroundGraphic=180; Money=2250.00; balance_start=2250.00;//Why the difference?
            gPrice_Gui.BackgroundGraphic=184; gUpgrades_Gui.BackgroundGraphic=194;
            cLogan.ChangeRoom(24, 80, 82); cMelanie.ChangeRoom(24, 136, 82); cEgo.ChangeRoom(24, 190, 82); bmood.Visible=false;
            cigarettes_remaining+=2; cSlot2.AddInventory(Cigarettes);//Add Smokes
            Stand.ChangeRoom(5, 335, 160); // Move Newsstand to Franklin
            SetGlobalInt(52, 1); vitality.Width=110; caffeine.Width=110; nutrition.Width=110; kibbles.Width=110;
            ////Wait(5); gPick.Visible=false; pick.X=38; pick.Y=16; close_pick.Visible=true; Wait(5);
            ////player.ChangeRoom(23,179, 197);}//ANDRUS REGULAR START! = 1 (Teal) 
            ////=========== DEBUG START CONDITIONS  ===========///
            cheatbiking=true;//Debug Commands
            SetGlobalInt(101, 20); //7: Glem gets out!
            SetGlobalInt(10, 0); //0:Outside  - 1:Inside
            cSlot2.AddInventory(A3Key); StandImage.NormalGraphic=165;//Basics
            SetGlobalInt(12, 1);//Basics
            cSlot2.AddInventory(Contract_G); cSlot2.AddInventory(Permit_franklin); //Basics
            cSlot2.AddInventory(BigBox); boxadd("Comics");
            SetGlobalInt(50, 5); SetGlobalInt(51, 1);//Stand Location + Type
            Stack.ChangeRoom((Stand.Room), (Stand.x-50),  (Stand.y+3)); Stack.Baseline=999; Stack.Transparency=0;//Stackness
            //vinny_location=5;//Vinny at Franklin?
            Money=81.12;//Money Adjust
            kickedout=0; //Kickedout?
            SuchinLove=2;//Suchinlove Adjust
            dayspassed=7; dayofweek=7;//Day adjust
            hour=10; minute=00; ampm=1;//Time Adjust
            SetGlobalInt(201, 1);//Got key from George
            //=========== DIRECT FLIGHTS  ===========///
            //georgeisnorthbound=true; player.ChangeRoom(15, 150, 160);//endgame direct flight
            player.ChangeRoom(5,200, 113); //Franklin Direct Flight (outside)
            //player.ChangeRoom(7,200, 113); SetGlobalInt(10, 0);//Breezy's Direct Flight (outside)
        }

    }//End Superdirectflights

    ////ARCADE VERSION:
    //cheatbiking=false;
    //txtspd_slider.Value=180;
    //music_slider.Value=5;

    //PUBLIC VERSION:
    if (superd==0){
        cheatbiking=false;
        txtspd_slider.Value=150;
        music_slider.Value=80;
    }

    //DEBUG VERSION:
    //cheatbiking=true;
    //txtspd_slider.Value=180;
    //music_slider.Value=100;

}

// FIXME used when customer pays the exact amount
// FIXME really convoluted
function exactchange() {

    exacting = true;
    float spare=(saleprice-(IntToFloat(FloatToInt(saleprice, eRoundDown))));
    //Display("Exact change![Saleprice: $%.2f[\"Spare\": $%.2f",saleprice, spare);

    //Invisible, by default.
    cr_change0.Visible=false;
    cr_change1.Visible=false;
    cr_change2.Visible=false;
    cr_change3.Visible=false;
    cr_change4.Visible=false;
    cr_change5.Visible=false;
    cr_change6.Visible=false;
    cr_change7.Visible=false;
    cr_change8.Visible=false;

    //Invisible by Default, too.
    cr_Paybill0.Visible=false;
    cr_Paybill1.Visible=false;
    cr_Paybill2.Visible=false;
    cr_Paybill3.Visible=false;
    cr_Paybill4.Visible=false;


    if ((billvalue>=1.00)&&(billvalue<2.00)) {
        cr_Paybill0.Visible=true; cr_Paybill0.NormalGraphic=(9838+Random(7));  //$1
        changebillslot[0]=1;
    }
    else if ((billvalue >= 2.00) && (billvalue < 3.00)) {
        cr_Paybill0.Visible=true; cr_Paybill0.NormalGraphic=(9838+Random(7));  //$1
        cr_Paybill1.Visible=true; cr_Paybill1.NormalGraphic=(9838+Random(7));  //$1
        changebillslot[0]=1;
        changebillslot[1]=1;
    }
    else if ((billvalue>=3.00)&&(billvalue<4.00)){
        cr_Paybill0.Visible=true; cr_Paybill0.NormalGraphic=(9838+Random(7));  //$1
        cr_Paybill1.Visible=true; cr_Paybill1.NormalGraphic=(9838+Random(7));  //$1
        cr_Paybill2.Visible=true; cr_Paybill2.NormalGraphic=(9838+Random(7));  //$1
        changebillslot[0]=1;
        changebillslot[1]=1;
        changebillslot[2]=1;
    }
    else if ((billvalue>=4.00)&&(billvalue<5.00)){
        cr_Paybill0.Visible=true; cr_Paybill0.NormalGraphic=(9838+Random(7));  //$1
        cr_Paybill1.Visible=true; cr_Paybill1.NormalGraphic=(9838+Random(7));  //$1
        cr_Paybill2.Visible=true; cr_Paybill2.NormalGraphic=(9838+Random(7));  //$1
        cr_Paybill3.Visible=true; cr_Paybill3.NormalGraphic=(9838+Random(7));  //$1
        changebillslot[0]=1;
        changebillslot[1]=1;
        changebillslot[2]=1;
        changebillslot[3]=1;
    }
    else if ((billvalue>=5.00)&&(billvalue<6.00)){
        if (Random(1)) {  //Five Ones
            cr_Paybill0.Visible=true; cr_Paybill0.NormalGraphic=(9838+Random(7));  //$1
            cr_Paybill1.Visible=true; cr_Paybill1.NormalGraphic=(9838+Random(7));  //$1
            cr_Paybill2.Visible=true; cr_Paybill2.NormalGraphic=(9838+Random(7));  //$1
            cr_Paybill3.Visible=true; cr_Paybill3.NormalGraphic=(9838+Random(7));  //$1
            cr_Paybill4.Visible=true; cr_Paybill4.NormalGraphic=(9838+Random(7));  //$1
            changebillslot[0]=1;
            changebillslot[1]=1;
            changebillslot[2]=1;
            changebillslot[3]=1;
            changebillslot[4]=1;
        }
        else {  //One Five
            cr_Paybill0.Visible=true; cr_Paybill0.NormalGraphic=(9822+Random(7));  //$5
            changebillslot[0]=1;
        }
   } //End EXACT CHANGE: BILLS


    //EXACT CHANGE: COINS
    if ((spare>=0.01)&&(spare<0.05)){
        cr_change0.Visible=true; changeslot[0]=1; cr_change0.NormalGraphic=9878+Random(3);  //Penny
        if (spare>=0.02){cr_change1.Visible=true; cr_change1.NormalGraphic=9878+Random(3);}
        if (spare>=0.03){cr_change2.Visible=true; cr_change2.NormalGraphic=9878+Random(3);}
        if (spare>=0.04){cr_change3.Visible=true; cr_change3.NormalGraphic=9878+Random(3);}
    }
    else if ((spare>=0.05)&&(spare<0.10)){
        cr_change0.Visible=true; changeslot[0]=1; cr_change0.NormalGraphic=9875+Random(2);  //Nickel
        if (spare>=0.06){cr_change1.Visible=true; cr_change1.NormalGraphic=9878+Random(3);}
        if (spare>=0.07){cr_change2.Visible=true; cr_change2.NormalGraphic=9878+Random(3);}
        if (spare>=0.08){cr_change3.Visible=true; cr_change3.NormalGraphic=9878+Random(3);}
        if (spare>=0.09){cr_change4.Visible=true; cr_change4.NormalGraphic=9878+Random(3);}
    }
    else if ((spare>=0.10)&&(spare<0.15)){
        cr_change0.Visible=true; changeslot[0]=1; cr_change0.NormalGraphic=9870+Random(4);  //Dime
        if (spare>=0.11){cr_change1.Visible=true; cr_change1.NormalGraphic=9878+Random(3);}
        if (spare>=0.12){cr_change2.Visible=true; cr_change2.NormalGraphic=9878+Random(3);}
        if (spare>=0.13){cr_change3.Visible=true; cr_change3.NormalGraphic=9878+Random(3);}
        if (spare>=0.14){cr_change4.Visible=true; cr_change4.NormalGraphic=9878+Random(3);}
    }
    else if ((spare>=0.15)&&(spare<0.20)){
        cr_change0.Visible=true; changeslot[0]=1; cr_change0.NormalGraphic=9870+Random(4);  //Dime
        cr_change1.Visible=true; cr_change1.NormalGraphic=9875+Random(2);  //Nickel
        if (spare>=0.16){cr_change2.Visible=true; cr_change2.NormalGraphic=9878+Random(3);}
        if (spare>=0.17){cr_change3.Visible=true; cr_change3.NormalGraphic=9878+Random(3);}
        if (spare>=0.18){cr_change4.Visible=true; cr_change4.NormalGraphic=9878+Random(3);}
        if (spare>=0.19){cr_change5.Visible=true; cr_change5.NormalGraphic=9878+Random(3);}
    }
    else if ((spare>=0.20)&&(spare<0.25)){
        cr_change0.Visible=true; changeslot[0]=1; cr_change0.NormalGraphic=9870+Random(4);  //Dime
        cr_change1.Visible=true; cr_change1.NormalGraphic=9870+Random(4);  //Dime
        if (spare>=0.21){cr_change2.Visible=true; cr_change2.NormalGraphic=9878+Random(3);}
        if (spare>=0.22){cr_change3.Visible=true; cr_change3.NormalGraphic=9878+Random(3);}
        if (spare>=0.23){cr_change4.Visible=true; cr_change4.NormalGraphic=9878+Random(3);}
        if (spare>=0.24){cr_change5.Visible=true; cr_change5.NormalGraphic=9878+Random(3);}
    }
    else if ((spare>=0.25)&&(spare<0.30)){
        cr_change0.Visible=true; changeslot[0]=1; cr_change0.NormalGraphic=9882+Random(4);  //Quarter
        if (spare>=0.26){cr_change1.Visible=true; cr_change1.NormalGraphic=9878+Random(3);}
        if (spare>=0.27){cr_change2.Visible=true; cr_change2.NormalGraphic=9878+Random(3);}
        if (spare>=0.28){cr_change3.Visible=true; cr_change3.NormalGraphic=9878+Random(3);}
        if (spare>=0.29){cr_change4.Visible=true; cr_change4.NormalGraphic=9878+Random(3);}
    }
    else if ((spare>=0.30)&&(spare<0.35)){
        cr_change0.Visible=true; changeslot[0]=1; cr_change0.NormalGraphic=9882+Random(4);  //Quarter
        cr_change1.Visible=true; cr_change1.NormalGraphic=9875+Random(2);  //Nickel
        if (spare>=0.31){cr_change2.Visible=true; cr_change2.NormalGraphic=9878+Random(3);}
        if (spare>=0.32){cr_change3.Visible=true; cr_change3.NormalGraphic=9878+Random(3);}
        if (spare>=0.33){cr_change4.Visible=true; cr_change4.NormalGraphic=9878+Random(3);}
        if (spare>=0.34){cr_change5.Visible=true; cr_change5.NormalGraphic=9878+Random(3);}
    }
    else if ((spare>=0.35)&&(spare<0.40)){
        cr_change0.Visible=true; changeslot[0]=1; cr_change0.NormalGraphic=9882+Random(4);  //Quarter
        cr_change1.Visible=true; cr_change1.NormalGraphic=9870+Random(4);  //Dime
        if (spare>=0.36){cr_change2.Visible=true; cr_change2.NormalGraphic=9878+Random(3);}
        if (spare>=0.37){cr_change3.Visible=true; cr_change3.NormalGraphic=9878+Random(3);}
        if (spare>=0.38){cr_change4.Visible=true; cr_change4.NormalGraphic=9878+Random(3);}
        if (spare>=0.39){cr_change5.Visible=true; cr_change5.NormalGraphic=9878+Random(3);}
    }
    else if ((spare>=0.40)&&(spare<0.45)){
        cr_change0.Visible=true; changeslot[0]=1; cr_change0.NormalGraphic=9882+Random(4);  //Quarter
        cr_change1.Visible=true; cr_change1.NormalGraphic=9870+Random(4);  //Dime
        cr_change2.Visible=true; cr_change2.NormalGraphic=9875+Random(2);  //Nickel
        if (spare>=0.41){cr_change3.Visible=true; cr_change3.NormalGraphic=9878+Random(3);}
        if (spare>=0.42){cr_change4.Visible=true; cr_change4.NormalGraphic=9878+Random(3);}
        if (spare>=0.43){cr_change5.Visible=true; cr_change5.NormalGraphic=9878+Random(3);}
        if (spare>=0.44){cr_change6.Visible=true; cr_change6.NormalGraphic=9878+Random(3);}
    }
    else if ((spare>=0.45)&&(spare<0.50)){
        cr_change0.Visible=true; changeslot[0]=1; cr_change0.NormalGraphic=9882+Random(4);  //Quarter
        cr_change1.Visible=true; cr_change1.NormalGraphic=9870+Random(4);  //Dime
        cr_change2.Visible=true; cr_change2.NormalGraphic=9870+Random(4);  //Dime
        if (spare>=0.46){cr_change3.Visible=true; cr_change3.NormalGraphic=9878+Random(3);}
        if (spare>=0.47){cr_change4.Visible=true; cr_change4.NormalGraphic=9878+Random(3);}
        if (spare>=0.48){cr_change5.Visible=true; cr_change5.NormalGraphic=9878+Random(3);}
        if (spare>=0.49){cr_change6.Visible=true; cr_change6.NormalGraphic=9878+Random(3);}
    }
    else if ((spare>0.49)&&(spare<0.55)){
        cr_change0.Visible=true; changeslot[0]=1; cr_change0.NormalGraphic=9882+Random(4);  //Quarter
        cr_change1.Visible=true; cr_change1.NormalGraphic=9882+Random(4);  //Quarter
        if (spare>=0.51){cr_change2.Visible=true; cr_change2.NormalGraphic=9878+Random(3);}
        if (spare>=0.52){cr_change3.Visible=true; cr_change3.NormalGraphic=9878+Random(3);}
        if (spare>=0.53){cr_change4.Visible=true; cr_change4.NormalGraphic=9878+Random(3);}
        if (spare>=0.54){cr_change5.Visible=true; cr_change5.NormalGraphic=9878+Random(3);}
    }
    else if ((spare>=0.55)&&(spare<0.60)){
        cr_change0.Visible=true; changeslot[0]=1; cr_change0.NormalGraphic=9882+Random(4);  //Quarter
        cr_change1.Visible=true; cr_change1.NormalGraphic=9882+Random(4);  //Quarter
        cr_change2.Visible=true; cr_change2.NormalGraphic=9875+Random(2);  //Nickel
        if (spare>=0.56){cr_change3.Visible=true; cr_change3.NormalGraphic=9878+Random(3);}
        if (spare>=0.57){cr_change4.Visible=true; cr_change4.NormalGraphic=9878+Random(3);}
        if (spare>=0.58){cr_change5.Visible=true; cr_change5.NormalGraphic=9878+Random(3);}
        if (spare>=0.59){cr_change6.Visible=true; cr_change6.NormalGraphic=9878+Random(3);}
    }
    else if ((spare>=0.60)&&(spare<0.65)){
        cr_change0.Visible=true; changeslot[0]=1; cr_change0.NormalGraphic=9882+Random(4);  //Quarter
        cr_change1.Visible=true; cr_change1.NormalGraphic=9882+Random(4);  //Quarter
        cr_change2.Visible=true; cr_change2.NormalGraphic=9870+Random(4);  //Dime
        if (spare>=0.61){cr_change3.Visible=true; cr_change3.NormalGraphic=9878+Random(3);}
        if (spare>=0.62){cr_change4.Visible=true; cr_change4.NormalGraphic=9878+Random(3);}
        if (spare>=0.63){cr_change5.Visible=true; cr_change5.NormalGraphic=9878+Random(3);}
        if (spare>=0.64){cr_change6.Visible=true; cr_change6.NormalGraphic=9878+Random(3);}
    }
    else if ((spare>=0.65)&&(spare<0.70)){
        cr_change0.Visible=true; changeslot[0]=1; cr_change0.NormalGraphic=9882+Random(4);//Quarter
        cr_change1.Visible=true; cr_change1.NormalGraphic=9882+Random(4);//Quarter
        cr_change2.Visible=true; cr_change2.NormalGraphic=9870+Random(4);//Dime
        cr_change3.Visible=true; cr_change3.NormalGraphic=9875+Random(2);//Nickel
        if (spare>=0.66){cr_change4.Visible=true; cr_change4.NormalGraphic=9878+Random(3);}
        if (spare>=0.67){cr_change5.Visible=true; cr_change5.NormalGraphic=9878+Random(3);}
        if (spare>=0.68){cr_change6.Visible=true; cr_change6.NormalGraphic=9878+Random(3);}
        if (spare>=0.69){cr_change7.Visible=true; cr_change7.NormalGraphic=9878+Random(3);}
    }
    else if ((spare>=0.70)&&(spare<0.75)){
        cr_change0.Visible=true; changeslot[0]=1; cr_change0.NormalGraphic=9882+Random(4);//Quarter
        cr_change1.Visible=true; cr_change1.NormalGraphic=9882+Random(4);//Quarter
        cr_change2.Visible=true; cr_change2.NormalGraphic=9870+Random(4);//Dime
        cr_change3.Visible=true; cr_change3.NormalGraphic=9870+Random(4);//Dime
        if (spare>=0.71){cr_change4.Visible=true; cr_change4.NormalGraphic=9878+Random(3);}
        if (spare>=0.72){cr_change5.Visible=true; cr_change5.NormalGraphic=9878+Random(3);}
        if (spare>=0.73){cr_change6.Visible=true; cr_change6.NormalGraphic=9878+Random(3);}
        if (spare>=0.74){cr_change7.Visible=true; cr_change7.NormalGraphic=9878+Random(3);}
    }
    else if ((spare>=0.75)&&(spare<0.80)){
        cr_change0.Visible=true; changeslot[0]=1; cr_change0.NormalGraphic=9882+Random(4);//Quarter
        cr_change1.Visible=true; cr_change1.NormalGraphic=9882+Random(4);//Quarter
        cr_change2.Visible=true; cr_change2.NormalGraphic=9882+Random(4);//Quarter
        if (spare>=0.76){cr_change3.Visible=true; cr_change3.NormalGraphic=9878+Random(3);}
        if (spare>=0.77){cr_change4.Visible=true; cr_change4.NormalGraphic=9878+Random(3);}
        if (spare>=0.78){cr_change5.Visible=true; cr_change5.NormalGraphic=9878+Random(3);}
        if (spare>=0.79){cr_change6.Visible=true; cr_change6.NormalGraphic=9878+Random(3);}
    }
    else if ((spare>=0.80)&&(spare<0.85)){
        cr_change0.Visible=true; changeslot[0]=1; cr_change0.NormalGraphic=9882+Random(4);//Quarter
        cr_change1.Visible=true; cr_change1.NormalGraphic=9882+Random(4);//Quarter
        cr_change2.Visible=true; cr_change2.NormalGraphic=9882+Random(4);//Quarter
        cr_change3.Visible=true; cr_change3.NormalGraphic=9875+Random(2);//Nickel
        if (spare>=0.81){cr_change4.Visible=true; cr_change4.NormalGraphic=9878+Random(3);}
        if (spare>=0.82){cr_change5.Visible=true; cr_change5.NormalGraphic=9878+Random(3);}
        if (spare>=0.83){cr_change6.Visible=true; cr_change6.NormalGraphic=9878+Random(3);}
        if (spare>=0.84){cr_change7.Visible=true; cr_change7.NormalGraphic=9878+Random(3);}
    }
    else if ((spare>=0.85)&&(spare<0.90)){
        cr_change0.Visible=true; changeslot[0]=1; cr_change0.NormalGraphic=9882+Random(4);//Quarter
        cr_change1.Visible=true; cr_change1.NormalGraphic=9882+Random(4);//Quarter
        cr_change2.Visible=true; cr_change2.NormalGraphic=9882+Random(4);//Quarter
        cr_change3.Visible=true; cr_change3.NormalGraphic=9870+Random(4);//Dime
        if (spare>=0.86){cr_change4.Visible=true; cr_change4.NormalGraphic=9878+Random(3);}
        if (spare>=0.87){cr_change5.Visible=true; cr_change5.NormalGraphic=9878+Random(3);}
        if (spare>=0.88){cr_change6.Visible=true; cr_change6.NormalGraphic=9878+Random(3);}
        if (spare>=0.89){cr_change7.Visible=true; cr_change7.NormalGraphic=9878+Random(3);}
    }
    else if ((spare>=0.90)&&(spare<0.95)){
        cr_change0.Visible=true; changeslot[0]=1; cr_change0.NormalGraphic=9882+Random(4);//Quarter
        cr_change1.Visible=true; cr_change1.NormalGraphic=9882+Random(4);//Quarter
        cr_change2.Visible=true; cr_change2.NormalGraphic=9882+Random(4);//Quarter
        cr_change3.Visible=true; cr_change3.NormalGraphic=9870+Random(4);//Dime
        cr_change4.Visible=true; cr_change4.NormalGraphic=9875+Random(2);//Nickel
        if (spare>=0.91){cr_change5.Visible=true; cr_change5.NormalGraphic=9878+Random(3);}
        if (spare>=0.92){cr_change6.Visible=true; cr_change6.NormalGraphic=9878+Random(3);}
        if (spare>=0.93){cr_change7.Visible=true; cr_change7.NormalGraphic=9878+Random(3);}
        if (spare>=0.94){cr_change8.Visible=true; cr_change8.NormalGraphic=9878+Random(3);}
    }
    else if ((spare>=0.95)&&(spare<1.00)){
        cr_change0.Visible=true; changeslot[0]=1; cr_change0.NormalGraphic=9882+Random(4);//Quarter
        cr_change1.Visible=true; cr_change1.NormalGraphic=9882+Random(4);//Quarter
        cr_change2.Visible=true; cr_change2.NormalGraphic=9882+Random(4);//Quarter
        cr_change3.Visible=true; cr_change3.NormalGraphic=9870+Random(4);//Dime
        cr_change4.Visible=true; cr_change4.NormalGraphic=9870+Random(4);//Dime
        if (spare>=0.96){cr_change5.Visible=true; cr_change5.NormalGraphic=9878+Random(3);}
        if (spare>=0.97){cr_change6.Visible=true; cr_change6.NormalGraphic=9878+Random(3);}
        if (spare>=0.98){cr_change7.Visible=true; cr_change7.NormalGraphic=9878+Random(3);}
        if (spare>=0.99){cr_change8.Visible=true; cr_change8.NormalGraphic=9878+Random(3);}
    }
      
    if (cr_change0.Visible==true) {changeslot[0]=1;}
    if (cr_change1.Visible==true) {changeslot[1]=1;}
    if (cr_change2.Visible==true) {changeslot[2]=1;}
    if (cr_change3.Visible==true) {changeslot[3]=1;}
    if (cr_change4.Visible==true) {changeslot[4]=1;}
    if (cr_change5.Visible==true) {changeslot[5]=1;}
    if (cr_change6.Visible==true) {changeslot[6]=1;}
    if (cr_change7.Visible==true) {changeslot[7]=1;}
    if (cr_change8.Visible==true) {changeslot[8]=1;}
      
    //Display("cr_change0.X: %d[cr_change0.Y: %d[cr_change0.visible: %d",cr_change0.X, cr_change0.Y, cr_change0.Visible);
}


/**
 *
 */
function payup() {
    //Invisible by Default
    cr_Paybill0.Visible=false;
    cr_Paybill1.Visible=false;
    cr_Paybill2.Visible=false;
    cr_Paybill3.Visible=false;
    cr_Paybill4.Visible=false;
    //Display("Pay up!");
    int strokes=Random(4);

    //if (cheatbiking==true){strokes=15;}//Take this Out - testing Exactchange

    if (strokes==15) {

        exactchange();

    } else {
        //if ((strokes<10)&&(FloatToInt(billvalue, eRoundDown)==0)){
        if (billvalue<=1.00){
            cr_Paybill0.Visible=true; cr_Paybill0.NormalGraphic=(9838+Random(7));//$1
            changebillslot[0]=1;
        } else if (billvalue<=2.00){
            cr_Paybill0.Visible=true; cr_Paybill0.NormalGraphic=(9838+Random(7));//$1
            cr_Paybill1.Visible=true; cr_Paybill1.NormalGraphic=(9838+Random(7));//$1
            changebillslot[0]=1;
            changebillslot[1]=1;
        } else if (billvalue<=3.00){
            cr_Paybill0.Visible=true; cr_Paybill0.NormalGraphic=(9838+Random(7));//$1
            cr_Paybill1.Visible=true; cr_Paybill1.NormalGraphic=(9838+Random(7));//$1
            cr_Paybill2.Visible=true; cr_Paybill2.NormalGraphic=(9838+Random(7));//$1
            changebillslot[0]=1;
            changebillslot[1]=1;
            changebillslot[2]=1;
        } else if (billvalue<=4.00){
            cr_Paybill0.Visible=true; cr_Paybill0.NormalGraphic=(9838+Random(7));//$1
            cr_Paybill1.Visible=true; cr_Paybill1.NormalGraphic=(9838+Random(7));//$1
            cr_Paybill2.Visible=true; cr_Paybill2.NormalGraphic=(9838+Random(7));//$1
            cr_Paybill3.Visible=true; cr_Paybill3.NormalGraphic=(9838+Random(7));//$1
            changebillslot[0]=1;
            changebillslot[1]=1;
            changebillslot[2]=1;
            changebillslot[3]=1;

        } else {

            if (Random(1)) {
                cr_Paybill0.Visible=true; cr_Paybill0.NormalGraphic=(9838+Random(7));//$1
                cr_Paybill1.Visible=true; cr_Paybill1.NormalGraphic=(9838+Random(7));//$1
                cr_Paybill2.Visible=true; cr_Paybill2.NormalGraphic=(9838+Random(7));//$1
                cr_Paybill3.Visible=true; cr_Paybill3.NormalGraphic=(9838+Random(7));//$1
                cr_Paybill4.Visible=true; cr_Paybill4.NormalGraphic=(9838+Random(7));//$1
                changebillslot[0]=1;
                changebillslot[1]=1;
                changebillslot[2]=1;
                changebillslot[3]=1;
                changebillslot[4]=1;
            }
            else {
                cr_Paybill0.Visible=true; cr_Paybill0.NormalGraphic=(9822+Random(7));//$5
                changebillslot[0]=1;
            }
        }
    }
}


function kaching() {
    cr_Drawer.NormalGraphic=9779 + GetGlobalInt(1);
    paycranked=false;
    donecranked=false;
    cranked=false;

    int o = 0;
    while (o < 9) {
        //changeslot[o]=0;//Condition-Dependent
        // gCashRegister.Controls[(changeslot-21)].X=-102;
        Button *changemove = gCashRegister.Controls[o+21].AsButton;

        if (exacting==false) {
            changemove.Visible=false; //Invisible by default
        }

        //if (exacting==false){changeslot[o]=0;}
        changemove.X=-50;
        o++;
    }

    drawerbounced=false;
    drawerisslid=false;
    cr_Lock.PushedGraphic=9805;
    cr_Lock.MouseOverGraphic=9887;
    cr_Lock.NormalGraphic=9804;
    billclimbing=(0.00);
    cr_Printleft.Text=(" ");
    cr_Printright.Text=(" ");
    //changeclimbing=(0.00);
    cr_Lock.NormalGraphic=9804;
    cr_Lock.Animate(296, 0, 2, eOnce);//Keyswing
    //cr_Keys.Visible=true;
    cr_Lock.Y=0;//cr_Lock.Y=17;//Origin:17, Destino:164;
    //cr_Keys.Y=300;//Origin:300, Destino: 147;
    cr_Left.X=-147;//Origin:-147, Destino: 0.
    cr_Right.X=387;//Origin:387, Destino: 240//old was 628 -> 481.
    cr_Bottom.Y=297;//Origin:297, Destino: 150?//Not 300
    cr_Drawer.Y=-308;//Origin: -308, Destino: -143.
    drawerdestino=-308;
    cr_Cashclip.Y=-92;//Origin: -182, Destino: -17.
    cr_20.Y=-90;//Origin:-179, Destino: -14.
    cr_10.Y=-90;//Origin: -179, Destino: -14.
    cr_5.Y=-90;//Origin: -179, Destino: -14.
    cr_1.Y=-90;//Origin: -179, Destino: -14.
    cr_drawerQ.Y=-40;
    cr_drawerD.Y=-40;
    cr_drawerN.Y=-40;
    cr_drawerP.Y=-39;
    cr_Paybill0.X=-102;//Origin: -205, Destino: 344
    cr_Paybill1.X=-102;//Origin: -205, Destino: 344
    cr_Paybill2.X=-102;//Origin: -205, Destino: 344
    cr_Paybill3.X=-102;//Origin: -205, Destino: 344
    cr_Paybill4.X=-102;//Origin: -205, Destino: 344

    cr_change0.Y=163+(Random(6)-3); cr_change0.X=-102;
    cr_change1.Y=163+(Random(6)-3); cr_change1.X=-102;
    cr_change2.Y=163+(Random(6)-3); cr_change2.X=-102;
    cr_change3.Y=163+(Random(6)-3); cr_change3.X=-102;
    cr_change4.Y=163+(Random(6)-3); cr_change4.X=-102;
    cr_change5.Y=163+(Random(6)-3); cr_change5.X=-102;
    cr_change6.Y=163+(Random(6)-3); cr_change6.X=-102;
    cr_change7.Y=163+(Random(6)-3); cr_change7.X=-102;
    cr_change8.Y=163+(Random(6)-3); cr_change8.X=-102;
    cr_Paybill0.Y=158+(Random(4)-2);
    cr_Paybill1.Y=158+(Random(4)-2);
    cr_Paybill2.Y=158+(Random(4)-2);
    cr_Paybill3.Y=158+(Random(4)-2);
    cr_Paybill4.Y=158+(Random(4)-2);

    step1.Visible=false; step2.Visible=false; step3.Visible=false;
    gCashRegister.Visible=true;

    cr_Lock.Animate(296, 0, 2, eOnce);//Keyswing
    Mouse.Visible=true;
    while (cr_Left.X<-10){cr_Left.X+=10; cr_Right.X-=10; cr_Bottom.Y-=10; cr_Drawer.Y+=10; Wait(1);}
    while (cr_Left.X<-5){cr_Left.X+=5; cr_Right.X-=5; cr_Bottom.Y-=5; cr_Drawer.Y+=5; Wait(1);}
    while (cr_Left.X<0){cr_Left.X+=1; cr_Right.X-=1; cr_Bottom.Y-=1; cr_Drawer.Y+=1; Wait(1);}
    while (cr_Bottom.Y>150){cr_Bottom.Y-=1; Wait(1);}
    //paycranked=true;//Moving to drawerslide
}


/**
 * Update Happy Meter Graphic according to happiness level?
 */
function happyupdate(){
    if (happiness<=0)
        happymeter.NormalGraphic=5522;
    if ((happiness>0) && (happiness<=10))
        happymeter.NormalGraphic=5523;
    if ((happiness>10) && (happiness<=20))
        happymeter.NormalGraphic=5524;
    if ((happiness>20) && (happiness<=30))
        happymeter.NormalGraphic=5525;
    if ((happiness>30) && (happiness<=40))
        happymeter.NormalGraphic=5526;
    if ((happiness>40) && (happiness<=50))
        happymeter.NormalGraphic=5527;
    if ((happiness>50) && (happiness<=60))
        happymeter.NormalGraphic=5528;
    if ((happiness>60) && (happiness<=70))
        happymeter.NormalGraphic=5529;
    if ((happiness>70) && (happiness<=80))
        happymeter.NormalGraphic=5530;
    if (happiness>80)
        happymeter.NormalGraphic=5531;
}


// Function used when selling goods to customers to calculate earnings and update inventory
function checkout(){

    //checkout
    step3.NormalGraphic=5521; step3.MouseOverGraphic=5521;
    countingdown=0;
    //WaitMouseKey(20);
    gMake.Visible=false;
    gm_changeamt.Visible=false;
    step1.NormalGraphic=5517; step1.MouseOverGraphic=5519;
    step2.NormalGraphic=5518; step2.MouseOverGraphic=5518;
    step3.NormalGraphic=5518; step3.MouseOverGraphic=5518;
    changebox.Text=(" ");
    if (makercheer.Y!=1){makercheer.Y=1;}

    relationshipcheck();

    String incomestamp;
    if (small_customer>0)
        incomestamp = String.Format("%.2f - Sold %s to %s",saleprice, saleitem, salebuyer);
    else
        incomestamp = String.Format("%.2f - Sold %s",saleprice, saleitem);

    incomelist.AddItem(String.Format("%s",incomestamp));

    /* DRINKS */
    if (saleitem==("Coffee")) {

        cups_remaining-=1; Areatick(); total_solditems+=1;
        PlaySound(4); vitality.Width-=1; rep+=1;

        if (upCoffee==("S")){
            Money +=(CoffeePriceS); income_total+=(CoffeePriceS); income_today+=(CoffeePriceS);
            TopSale("Sold a Coffee: Grade S!",String.Format("Made $%.2f!", CoffeePriceS),13);
            coffee_s_remaining-=1; CoffeeSoldS+=1; CoffeeNetS+=(CoffeePriceS); CoffeeGrossS+=(CoffeePriceS);
        }
        if (upCoffee==("A")){
            Money +=(CoffeePriceA);  income_total+=(CoffeePriceA); income_today+=(CoffeePriceA);
            TopSale("Sold a Coffee: Grade A!",String.Format("Made $%.2f!", CoffeePriceA),7);
            coffee_a_remaining-=1; CoffeeSoldA+=1; CoffeeNetA+=(CoffeePriceA); CoffeeGrossA+=(CoffeePriceA);
        }
        if (upCoffee==("B")){
            Money +=(CoffeePriceB); income_total+=(CoffeePriceB); income_today+=(CoffeePriceB);
            TopSale("Sold a Coffee: Grade B!",String.Format("Made $%.2f!", CoffeePriceB),9);
            coffee_b_remaining-=1; CoffeeSoldB+=1; CoffeeNetB+=(CoffeePriceB); CoffeeGrossB+=(CoffeePriceB);
        }
        if (upCoffee==("C")){
            Money +=(CoffeePriceC); income_total+=(CoffeePriceC); income_today+=(CoffeePriceC);
            TopSale("Sold a Coffee: Grade C!",String.Format("Made $%.2f!", CoffeePriceC),11);
            coffee_c_remaining-=1; CoffeeSoldC+=1; CoffeeNetC+=(CoffeePriceC); CoffeeGrossC+=(CoffeePriceC);
        }
        if (upCoffee==("D")){
            Money +=(CoffeePriceD); income_total+=(CoffeePriceD); income_today+=(CoffeePriceD);
            TopSale("Sold a Coffee: Grade D!",String.Format("Made $%.2f!", CoffeePriceD),163);
            coffee_d_remaining-=1; CoffeeSoldD+=1; CoffeeNetD+=(CoffeePriceD); CoffeeGrossD+=(CoffeePriceD);
        }
    }

    if (saleitem==("Americano")){

        cups_remaining-=1; Areatick(); total_solditems+=1;
        PlaySound(4); vitality.Width-=1;

        Money +=(AmericanoPrice); income_total+=(AmericanoPrice); income_today+=(AmericanoPrice);
        TopSale("Sold an Americano!",String.Format("Made $%.2f!", AmericanoPrice),1762);
        AmericanoSold+=1; AmericanoNet+=(AmericanoPrice); AmericanoGross+=(AmericanoProfit);

        if (upCoffee == ("S"))
            { rep+=5; coffee_s_remaining-=1; }
        if (upCoffee == ("A"))
            { rep+=4; coffee_a_remaining-=1; }
        if (upCoffee == ("B"))
            { rep+=2; coffee_b_remaining-=1; }
        if (upCoffee == ("C"))
            { rep+=1; coffee_c_remaining-=1; }
        if (upCoffee == ("D"))
            { rep+=1; coffee_d_remaining-=1; }
    }

    if (saleitem==("Cappuccino")){

        cups_remaining-=1; Areatick(); total_solditems+=1;
        PlaySound(4); vitality.Width-=1;

        Money +=(CappuccinoPrice); income_total+=(CappuccinoPrice); income_today+=(CappuccinoPrice);
        TopSale("Sold a cappuccino!",String.Format("Made $%.2f!", CappuccinoPrice),1771);
        CappuccinoSold+=1; CappuccinoNet+=(CappuccinoPrice); CappuccinoGross+=(CappuccinoProfit);

        if (upCoffee == ("S"))
            { rep+=5; coffee_s_remaining-=1; }
        if (upCoffee == ("A"))
            { rep+=4; coffee_a_remaining-=1; }
        if (upCoffee == ("B"))
            { rep+=2; coffee_b_remaining-=1; }
        if (upCoffee == ("C"))
            { rep+=1; coffee_c_remaining-=1; }
        if (upCoffee == ("D"))
            { rep+=1; coffee_d_remaining-=1; }
    }

    if (saleitem==("Latte")){

        cups_remaining-=1; Areatick(); total_solditems+=1;
        PlaySound(4); vitality.Width-=1;

        Money +=(LattePrice); income_total+=(LattePrice); income_today+=(LattePrice);
        TopSale("Sold a latte!",String.Format("Made $%.2f!", LattePrice),1783);
        LatteSold+=1; LatteNet+=(LattePrice); LatteGross+=(LatteProfit);

        if (upCoffee == ("S"))
            { rep+=5; coffee_s_remaining-=1; milk_remaining-=1; }
        if (upCoffee == ("A"))
            { rep+=4; coffee_a_remaining-=1; milk_remaining-=1; }
        if (upCoffee == ("B"))
            { rep+=2; coffee_b_remaining-=1; milk_remaining-=1; }
        if (upCoffee == ("C"))
            { rep+=1; coffee_c_remaining-=1; milk_remaining-=1; }
        if (upCoffee == ("D"))
            { rep+=1; coffee_d_remaining-=1; milk_remaining-=1; }
    }

    if (saleitem==("Mocha")){

        cups_remaining-=1; Areatick(); total_solditems+=1;
        PlaySound(4); vitality.Width-=1;

        Money +=(MochaPrice); income_total+=(MochaPrice); income_today+=(MochaPrice);
        TopSale("Sold a mocha!",String.Format("Made $%.2f!", MochaPrice),1777);
        MochaSold+=1; MochaNet+=(MochaPrice); MochaGross+=(MochaProfit);

        if (upCoffee == ("S"))
            { rep+=5; coffee_s_remaining-=1; }
        if (upCoffee == ("A"))
            { rep+=4; coffee_a_remaining-=1; }
        if (upCoffee == ("B"))
            { rep+=2; coffee_b_remaining-=1; }
        if (upCoffee == ("C"))
            { rep+=1; coffee_c_remaining-=1; }
        if (upCoffee == ("D"))
            { rep+=1; coffee_d_remaining-=1; }
    }

    if (saleitem==("Chai Latte")){

        cups_remaining-=1; Areatick(); total_solditems+=1;
        PlaySound(4); vitality.Width-=1;

        Money +=(ChailattePrice); income_total+=(ChailattePrice); income_today+=(ChailattePrice);
        TopSale("Sold a chai latte!",String.Format("Made $%.2f!", ChailattePrice),1774);
        ChailatteSold+=1; ChailatteNet+=(ChailattePrice); ChailatteGross+=(ChailatteProfit);

        rep+=3; chai_remaining-=1; milk_remaining-=1;
    }

    if (saleitem==("Chai Tea")){

        cups_remaining-=1; Areatick(); total_solditems+=1;
        PlaySound(4); vitality.Width-=1;

        Money +=(ChaiPrice); income_total+=(ChaiPrice); income_today+=(ChaiPrice);
        TopSale("Sold a chai tea!",String.Format("Made $%.2f!", ChaiPrice),408);
        ChaiSold+=1; ChaiNet+=(ChaiPrice); ChaiGross+=(ChaiPrice);

        rep+=1; chai_remaining-=1;
    }

    if (saleitem==("Hot Cocoa")){

        cups_remaining-=1; Areatick(); total_solditems+=1;
        PlaySound(4); vitality.Width-=1;

        Money +=(CocoaPrice); income_total+=(CocoaPrice); income_today+=(CocoaPrice);
        TopSale("Sold a hot cocoa!",String.Format("Made $%.2f!", CocoaPrice),409);
        CocoaSold+=1; CocoaNet+=(CocoaPrice); CocoaGross+=(CocoaPrice);
    
        rep+=1; cocoa_remaining-=1;
    }

    if (saleitem==("Milk")){

        cups_remaining-=1; Areatick(); total_solditems+=1;
        PlaySound(4); vitality.Width-=1;

        Money +=(MilkPrice); income_total+=(MilkPrice); income_today+=(MilkPrice);
        TopSale("Sold a cup of milk!",String.Format("Made $%.2f!", MilkPrice),411);
        MilkSold+=1; MilkNet+=(MilkPrice); MilkGross+=(MilkPrice);

        milk_remaining-=1;
    }

    if (saleitem==("Pipeline Crest")){

        Areatick(); total_solditems+=1;
        PlaySound(4); vitality.Width-=1;

        Money +=(CrestPrice); income_total+=(CrestPrice); income_today+=(CrestPrice);
        TopSale("Sold a pipeline crest!",String.Format("Made $%.2f!", CrestPrice),1262);
        CrestSold+=1; CrestNet+=(CrestPrice); CrestGross+=(CrestPrice);

        crest_remaining-=1;
    }

    if (saleitem==("Pipeline Rinse")){

        Areatick(); total_solditems+=1;
        PlaySound(4); vitality.Width-=1;

        Money +=(RinsePrice); income_total+=(RinsePrice); income_today+=(RinsePrice);
        TopSale("Sold a pipeline rinse!",String.Format("Made $%.2f!", RinsePrice),1261);
        RinseSold+=1; RinseNet+=(RinsePrice); RinseGross+=(RinsePrice);
        
        rinse_remaining-=1;
    }

    /* BAGELS */
    if (saleitem==("Plain Bagel")){

        Areatick(); total_solditems+=1;
    
        Money +=(Bagel_PlainPrice); income_total+=(Bagel_PlainPrice); income_today+=(Bagel_PlainPrice);
        TopSale("Sold a plain bagel!",String.Format("Made $%.2f!", Bagel_PlainPrice),1178);
        Bagel_PlainSold+=1; Bagel_PlainNet+=(Bagel_PlainPrice); Bagel_PlainGross+=(Bagel_PlainPrice);

        bagel_plain_remaining-=1;
    }

    if (saleitem==("Toasted Bagel")){

        Areatick(); total_solditems+=1;

        Money +=(Bagel_PlainPrice+Toasted_Price); income_total+=(Bagel_PlainPrice+Toasted_Price); income_today+=(Bagel_PlainPrice+Toasted_Price);
        TopSale("Sold a toasted bagel!",String.Format("Made $%.2f!", (Bagel_PlainPrice+Toasted_Price)),1178);
        Bagel_PlainSold+=1; Bagel_PlainNet+=(Bagel_PlainPrice+Toasted_Price); Bagel_PlainGross+=(Bagel_PlainPrice+Toasted_Price);

        bagel_plain_remaining-=1;
    }

    if (saleitem==("Bagel with Cream Cheese")){

        Areatick(); total_solditems+=1;

        Money +=(Bagel_PlainPrice+Creamcheese_Price); income_total+=(Bagel_PlainPrice+Creamcheese_Price); income_today+=(Bagel_PlainPrice+Creamcheese_Price);
        TopSale("Sold a bagel with cheese!",String.Format("Made $%.2f!", (Bagel_PlainPrice+Creamcheese_Price)),1178);
        Bagel_PlainSold+=1; Bagel_PlainNet+=(Bagel_PlainPrice+Creamcheese_Price); Bagel_PlainGross+=(Bagel_PlainPrice+Creamcheese_Price);

        bagel_plain_remaining-=1;
        if (vcheese_remaining>0)
            vcheese_remaining-=1;
        else if (cream_remaining>0)
            creamcheese_remaining-=1;
        CreamSold+=1;
    }

    if (saleitem==spcBagels1.Name){  // special bagels

        Areatick(); total_solditems+=1;

        Money +=(spc1BagelPrice); income_total+=(spc1BagelPrice); income_today+=(spc1BagelPrice);
        TopSale(String.Format("Sold a %s!",spcBagels1.Name), String.Format("Made $%.2f!",spc1BagelPrice),1178);
        spcbagels_sold+=1; spcbagels_Net+=(spc1BagelPrice); spcbagels_Gross+=(spc1BagelPrice);

        spcbagels1_remaining-=1;
    }
    
    if (saleitem==spcBagels2.Name){

        Areatick(); total_solditems+=1;

        Money +=(spc1BagelPrice); income_total+=(spc2BagelPrice); income_today+=(spc2BagelPrice);
        TopSale(String.Format("Sold a %s!",spcBagels2.Name),String.Format("Made $%.2f!",spc2BagelPrice),1178);
        spcbagels_sold+=1; spcbagels_Net+=(spc2BagelPrice); spcbagels_Gross+=(spc2BagelPrice);

        spcbagels2_remaining-=1;
    }

    if (saleitem==spcBagels3.Name){

        Areatick(); total_solditems+=1;

        Money +=(spc3BagelPrice); income_total+=(spc3BagelPrice); income_today+=(spc3BagelPrice);
        TopSale(String.Format("Sold a %s!",spcBagels3.Name),String.Format("Made $%.2f!",spc3BagelPrice),1178);
        spcbagels_sold+=1; spcbagels_Net+=(spc3BagelPrice); spcbagels_Gross+=(spc3BagelPrice);

        spcbagels3_remaining-=1;
    }

    if (saleitem==spcBagels4.Name){

        Areatick(); total_solditems+=1;

        Money +=(spc4BagelPrice); income_total+=(spc4BagelPrice); income_today+=(spc4BagelPrice);
        TopSale(String.Format("Sold a %s!",spcBagels4.Name),String.Format("Made $%.2f!",spc4BagelPrice),1178);
        spcbagels_sold+=1; spcbagels_Net+=(spc4BagelPrice); spcbagels_Gross+=(spc4BagelPrice);

        spcbagels4_remaining-=1;
    }

    /* HOT DOGS */
    if (saleitem==("Hot Dog")){

        Areatick(); total_solditems+=1;

        Money +=(saleprice); income_total+=(saleprice); income_today+=(saleprice);  //FIXME check how saleprice is calculated
        TopSale("Sold a plain hot dog!",String.Format("Made $%.2f!", saleprice),5216);
        HotdogSold+=1; HotdogNet+=(saleprice); HotdogGross+=(saleprice);

        hotdogs_remaining-=1;
    }
    
    if (saleitem==("Red Dog")){

        Areatick(); total_solditems+=1;

        Money +=(saleprice); income_total+=(saleprice); income_today+=(saleprice);
        TopSale("Sold a hot dog with Ketchup!",String.Format("Made $%.2f!", saleprice),5216);
        HotdogSold+=1; KetchupSold+=1; HotdogNet+=(saleprice); HotdogGross+=(saleprice);

        hotdogs_remaining-=1; ketchup_remaining-=1;
    }

    if (saleitem==("Yellow Dog")){

        Areatick(); total_solditems+=1;

        Money +=(saleprice); income_total+=(saleprice); income_today+=(saleprice);
        TopSale("Sold a hot dog with Mustard!",String.Format("Made $%.2f!", saleprice),5216);
        HotdogSold+=1; MustardSold+=1; HotdogNet+=(saleprice); HotdogGross+=(saleprice);

        hotdogs_remaining-=1; mustard_remaining-=1;
    }
    
    if (saleitem==("Orange Dog")){

        Areatick(); total_solditems+=1;

        Money +=(saleprice); income_total+=(saleprice); income_today+=(saleprice);
        TopSale("Sold a hot dog with Ketchup+Mustard!",String.Format("Made $%.2f!", saleprice),5216);
        HotdogSold+=1; KetchupSold+=1; MustardSold+=1; HotdogNet+=(saleprice); HotdogGross+=(saleprice);

        hotdogs_remaining-=1; ketchup_remaining-=1; mustard_remaining-=1;
    }

    if (saleitem==("Chili Dog")){

        Areatick(); total_solditems+=1;

        Money +=(saleprice); income_total+=(saleprice); income_today+=(saleprice);
        TopSale("Sold a hot dog with chili!",String.Format("Made $%.2f!", saleprice),5216);
        HotdogSold+=1; ChilliSold+=1; HotdogNet+=(saleprice); HotdogGross+=(saleprice);

        hotdogs_remaining-=1; chilli_remaining-=1;
    }

    if (saleitem==("Kraut Dog")){

        Areatick(); total_solditems+=1;

        Money +=(saleprice); income_total+=(saleprice); income_today+=(saleprice);
        TopSale("Sold a hot dog with sauerkraut!",String.Format("Made $%.2f!", saleprice),5216);
        HotdogSold+=1; KrautSold+=1; HotdogNet+=(saleprice); HotdogGross+=(saleprice);

        hotdogs_remaining-=1; sauerkraut_remaining-=1;
    }

    if (saleitem==("Everything Dog")){

        Areatick(); total_solditems+=1;

        Money +=(saleprice); income_total+=(saleprice); income_today+=(saleprice);
        TopSale("Sold a hot dog with everything!",String.Format("Made $%.2f!", saleprice),5216);
        HotdogSold+=1; HotdogNet+=(saleprice); HotdogGross+=(saleprice);
        
        hotdogs_remaining-=1;
        //tickdowns FIXME why the others don't consider the player inventory?
        if ((chilli_remaining!=0) && (player.InventoryQuantity[Chilli.ID]!=0)){
            chilli_remaining-=1; ChilliSold+=1;
        }
        if ((jalapenos_remaining!=0) && (player.InventoryQuantity[Jalapenos.ID]!=0)){
            jalapenos_remaining-=1; JalapenosSold+=1;
        }
        if ((ketchup_remaining!=0) && (player.InventoryQuantity[Ketchup.ID]!=0)){
            ketchup_remaining-=1; KetchupSold+=1;
        }
        if ((mustard_remaining!=0) && (player.InventoryQuantity[Mustard.ID]!=0)){
            mustard_remaining-=1; MustardSold+=1;
        }
        if ((relish_remaining!=0) && (player.InventoryQuantity[Relish.ID]!=0)){
            relish_remaining-=1; RelishSold+=1;
        }
    }

    /* NEWSPAPER */
    if (saleitem==("Georgetonian")){

        Areatick(); total_solditems+=1;
        PlaySound(4); vitality.Width-=1;

        Money +=(PaperPrice); income_total+=(PaperPrice); income_today+=(PaperPrice);
        TopSale("Sold a copy of the georgetonian!",String.Format("Made $%.2f!", PaperPrice),199);
        PaperSold+=1; PaperNet+=(PaperPrice); PaperGross+=(PaperPrice);

        rep+=1;
        paper_remaining-=1;
    }

    orderremaining-=1;

    //Time Updates / Modulo!
    //FIXME these calculations seem weird
    times_done+=1;
    newtime=((cd_seconds * 60)+cd_miliseconds);
    nt_miliseconds = (newtime - ((newtime / 60) * 60));//new
    //nt_seconds = ((newtime / 60)-((newtime/60)*60));//old
    nt_seconds = (newtime / 60);

    total_time=(total_time+newtime);

    //FIXME Why show the message only if slower than best time?
    //FIXME should show the message in any case, and then if better than
    //FIXME best time, show that message too
    if (newtime > besttime){  //Not the best time
        if (newtime<60)  //Less than 1 second
            TopUp((String.Format("Time: %s",cd_display)),"That was unbelievably fast! You're incredible!");
        if ((newtime<=120) && (newtime>60))  //1-2 seconds
            TopUp((String.Format("Time: %s",cd_display)),"Wow! That was fast!");
        if ((newtime<=180) && (newtime>120))  //2-3 seconds
            TopUp((String.Format("Time: %s",cd_display)),"Excellent speed!");
        if ((newtime<=240) && (newtime>180))  //3-4 seconds
            TopUp((String.Format("Time: %s",cd_display)),"Great speed!");
        if ((newtime<=300) && (newtime>240))  //4-5 seconds
            TopUp((String.Format("Time: %s",cd_display)),"Good job!");
        if ((newtime<=360) && (newtime>300))  //5-6 seconds
            TopUp((String.Format("Time: %s",cd_display)),"Nice!");
        if ((newtime<=420) && (newtime>360))  //6-7 seconds
            TopUp((String.Format("Time: %s",cd_display)),"Not bad.");
        if ((newtime>420) && (newtime<=600))  //10 or less
            TopUp((String.Format("Time: %s",cd_display)),"Good enough.");
    }

    if (newtime < besttime){  //Sets the best time, if needed.
        TopUp((String.Format("New Best Time: %s",cd_display)),"Your New Best Time! Good Job!");
        happiness=100; happyupdate();
        besttime=newtime;
        bt_miliseconds=nt_miliseconds;
        bt_seconds=nt_seconds;
    }

    /* CUSTOMER TIPS */
    if (orderremaining<=0){  //Make Sure Order is Filled

        float tipamount=0.00;
        bool keepthechange=false;

        if (!orderbotched){  //Make sure: no botches.

            int tipslip=Random(4);
            if (happiness>=90){  //Whoa, excellent job!
                if (tipslip==0) tipamount=1.00;
                if (tipslip==1) tipamount=1.25;
                if (tipslip==2) tipamount=1.50;
                if (tipslip==3) tipamount=2.00;
                if (tipslip==4) tipamount=3.00;
            }
            else if ((happiness>=80) && (happiness<90)){  //Outstanding!
                if (tipslip==0) tipamount=1.00;
                if (tipslip==1) tipamount=0.75;
                if (tipslip==2) tipamount=0.50;
                if (tipslip==3) tipamount=1.25;
                if (tipslip==4) tipamount=0.55;
            }
            else if ((happiness>=60) && (happiness<80)){  //Great!
                if (tipslip==0) tipamount=0.00;
                if (tipslip==1) tipamount=0.00;
                if (tipslip==2) tipamount=0.75;
                if (tipslip==3) tipamount=0.50;
                if (tipslip==4) tipamount=0.25;
            }
            else if ((happiness>=40) && (happiness<60)){  //OK.
                if (tipslip==0)tipamount=0.00;
                if (tipslip==1)tipamount=0.00;
                if (tipslip==2)tipamount=0.00;
                if (tipslip==3)tipamount=0.50;
                if (tipslip==4)tipamount=0.25;
            }

            if (salebuyer==("The Three"))
                tipamount=5.00;
            if (salebuyer==("Basinski"))
                tipamount=5.00;
            if (salebuyer==("Toney"))
                tipamount=0.00;
            if (salebuyer==("George"))
                tipamount=0.00;
            if (salebuyer==("Jenny")){
                float spare=(saleprice-(IntToFloat(FloatToInt(saleprice, eRoundDown))));
                if (ChangeAnswer<2.01){
                    tipamount=ChangeAnswer; keepthechange=true;
                }
                else {
                    tipamount=spare; keepthechange=false;
                }
            }
            if (salebuyer==("Suchin")){
                tipamount=1.00; SuchinLove+=1;
            }
            if ((salebuyer==("Thales")) && (GetGlobalInt(1)!=2))
                tipamount=0.00;
            if ((salebuyer==("Thales")) && (GetGlobalInt(1)==2))  //Mel
                tipamount=2.00;
        }
        else  // order botched
            tipamount=0.00;

        if ((!orderbotched) && (tipamount < 0.01) && (ChangeAnswer<=(2.00)) && (small_customer>0)){  //Keep the change?
            if(Random(3)==0) {
                keepthechange=true; tipamount=ChangeAnswer;
            }
        }

        if (tipamount>0.00){
            PlaySound(99);
            if (keepthechange)
                topitm_desc.Text=String.Format("Keep the change! $%.2f!",tipamount);
            else
                topitm_desc.Text=String.Format("Got a $%.2f tip!",tipamount);
    
            if (small_customer>0)
                incomelist.AddItem(String.Format("%.2f  - tip from %s",tipamount, salebuyer));
            else
                incomelist.AddItem(String.Format("%.2f  - tip from customer",tipamount, salebuyer));

            Money+=tipamount; income_tipstoday+=tipamount; income_total+=tipamount;

            //charID-based "Best Tipper" determination
            tiprecord[Customer.ID]+=tipamount;
            int bt=0;
            bool highest=true;  //True by default - turns to false when somebody else is higher
            while ( (bt<(Game.CharacterCount-1)) && highest ){
                if (tiprecord[bt] > tiprecord[Customer.ID])
                    highest=false;
                bt++;
            }
            if (highest)
                biggest_tipper=String.Format("%s",Customer.Name);  //If nobody else has a higher amount

            //Display("Customer: %s [Salebuyer: %s [ Tipamout: $%.2f [Biggest_tipper: %s",Customer.Name, salebuyer, tipamount, biggest_tipper); Wait(20);

            topcost.Text=(" ");  //FIXME is this stuff supposed to be here inside the tips>0 if?
            topitm.Visible=false;
            topitm_sale.Visible=false;
            top_reveal.Visible=true;
            top_reveal.NormalGraphic=5630;
            Infobg.NormalGraphic=5617;
            TopInfo.Centre();
            TopInfo.Visible=true;
            Infobg.Animate(192, 4, 1, eOnce);
            top_reveal.Animate(207, 1, 1, eOnce);
            WaitMouseKey(barspeed);  //Variable Attribute depends on text speed
            TopInfo.Visible=false;  topitm_desc.Text=(" ");  topcost.Text=(" "); top_reveal.Visible=false;
        }

        //End Checkout, run Priceisright...
        if (salebuyer!=(" ")){
            infolocker.NormalGraphic=5558;
            orderbotched=0;
            priceisright();
        }
    }

    //The Three, Basinksi, and other folks buying more than one thing at a time...
    if (orderremaining>=1)
        Make();

    //Killpapers is set to true every night at midnight, so that the stand isn't stripped in the middle of a sale.
    if (killpapers){
        killpapers=false;
        if(player.InventoryQuantity[Oldpapers.ID]==0)
            player.AddInventory(Oldpapers);
        oldpapers_remaining+=(paper_remaining);
        paper_remaining=0;
    }

}//end checkout


//Bonus: A? Called in gBonus GUI for trivia answers, see Bonus() in CustomFunctions
function bonusbutton_a_OnClick(GUIControl *control, MouseButton button) {
    if (BonusAnswer==("A")) {
        PlaySound(4);
        incomelist.AddItem("10.00 - Answered Trivia question");
        Money+=10.00; income_misc+=10.00; income_total+=10.00;
        TopUp("That's right!", "Good job! That's worth ten bucks!");
    }
    else {
        PlaySound(60);
        TopUp("That's incorrect!", "Sorry, that's incorrect!");
    }

    bonussed=0; gBonus.Visible=false; mouse.Visible=false;
    StopAmbientSound(1); PlayMusic(cued); music_slider.Value=musicfallback;
}


//Bonus: B?
function bonusbutton_b_OnClick(GUIControl *control, MouseButton button){
    if (BonusAnswer==("B")) {
        PlaySound(4);
        incomelist.AddItem("10.00 - Answered Trivia question");
        Money+=10.00; income_misc+=10.00; income_total+=10.00;
        TopUp("That's right!", "Good job! That's worth ten bucks!");
    }
    else {
        PlaySound(60);
        TopUp("That's incorrect!", "Sorry, that's incorrect!");
    }

    bonussed=0; gBonus.Visible=false; mouse.Visible=false;
    StopAmbientSound(1); PlayMusic(cued); music_slider.Value=musicfallback;
}


//Bonus: C?
function bonusbutton_c_OnClick(GUIControl *control, MouseButton button){
    if (BonusAnswer==("C")) {
        PlaySound(4);
        incomelist.AddItem("10.00 - Answered Trivia question");
        Money+=10.00; income_misc+=10.00; income_total+=10.00;
        TopUp("That's right!", "Good job! That's worth ten bucks!");
    }
    else {
        PlaySound(60);
        TopUp("That's incorrect!", "Sorry, that's incorrect!");
    }

    bonussed=0; gBonus.Visible=false; mouse.Visible=false;
    StopAmbientSound(1); PlayMusic(cued); music_slider.Value=musicfallback;
}


//Bonus: D?
function bonusbutton_d_OnClick(GUIControl *control, MouseButton button){
    if (BonusAnswer==("D")) {
        PlaySound(4);
        incomelist.AddItem("10.00 - Answered Trivia question");
        Money+=10.00; income_misc+=10.00; income_total+=10.00;
        TopUp("That's right!", "Good job! That's worth ten bucks!");
    }
    else {
        PlaySound(60);
        TopUp("That's incorrect!", "Sorry, that's incorrect!");
    }

    bonussed=0; gBonus.Visible=false; mouse.Visible=false;
    StopAmbientSound(1); PlayMusic(cued); music_slider.Value=musicfallback;
}


//GUI: gMake - Process customer order
function step1_OnClick(GUIControl *control, MouseButton button){

    if (step1.NormalGraphic==5517){  //button "start"

        PlaySound(41); 
        //countingdown=1;  //Started Counting Immediately (?)

        if ((saleitem==("Coffee")) || (saleitem==("Americano")) || (saleitem==("Cappuccino")) || (saleitem==("Latte")) || (saleitem==("Mocha"))){
            if (upCoffee==("S"))
                happiness+=50;
            if (upCoffee==("A"))
                happiness+=40;
            if (upCoffee==("B"))
                happiness+=30;
            if (upCoffee==("C"))
                happiness+=15;
            if (upCoffee==("D"))
                happiness+=5;
        }

        if (saleitem==("Chai Latte"))
            happiness+=30;
        if (saleitem==("Chai Tea"))
            happiness+=25;
        if (saleitem==("Hot Cocoa"))
            happiness+=25;
        if (saleitem==("Milk"))
            happiness+=20;

        if ((saleitem==("Pipeline Rinse")) || (saleitem==("Pipeline Crest")))
            happiness+=15;

        if (saleitem==("Plain Bagel"))
            happiness+=40;
        if ((saleitem==spcBagels1.Name) || (saleitem==spcBagels2.Name) || (saleitem==spcBagels3.Name) || (saleitem==spcBagels4.Name))
            happiness+=Random(80);

        if (saleitem==("Georgetonian"))
            happiness+=5;

        if (saleitem==("Hot Dog")){
            happiness+=30;
            if (upgrade_2.NormalGraphic==6084)  // FIXME this is the pic of the uninstalled grill?
                happiness+=15;
        }

        happyupdate();  //update happiness icon
        step1.NormalGraphic=5521; step1.MouseOverGraphic=5521;  //change button to "done"

        if ((saleitem==("Americano")) || (saleitem==("Cappuccino")) || (saleitem==("Mocha")) || (saleitem==("Latte"))){
            gBarista.Visible=true; mouse.Visible=false;  // for espresso preparations, display Barista screen
            baristarrow.Animate(264,2, 1, eRepeat);  //Downarrow Anim for GRIND
        }
        else{ //Shows a 4-choice quiz where you need to pick what the customer asked
              //items are randomized from your menu, if not enough items are present, placeholders are used.

            //create a temporary list of wrong answers
            tmp_list.Clear();
            tmp_list.AddItem("Sloppy Joes"); tmp_list.AddItem("One Grey Cat"); tmp_list.AddItem("Appletini");
            tmp_list.AddItem("Egg Salad"); tmp_list.AddItem("Scotch"); tmp_list.AddItem("Breakfast Burrito");
            tmp_list.AddItem("Blue Jeans"); tmp_list.AddItem("Giant Lollipop"); tmp_list.AddItem("Cat Food");
            tmp_list.AddItem("Juice"); tmp_list.AddItem("A Carrot");
            String choices[4];
            for (int i=0; i<4 ;i++) {
                if( i < (Menu.ItemCount-1) && Menu.Items[i]!=saleitem )  // use a menu entry, if there are enough
                    choices[i]=Menu.Items[i];
                else{   // otherwise pick a random item from the wrongs list
                    int rnd_wrong;
                    rnd_wrong=Random(tmp_list.ItemCount-1);
                    choices[i]=tmp_list.Items[rnd_wrong];
                    tmp_list.RemoveItem(rnd_wrong);  //remove entry to avoid duplicates
                }
            }

            switch(Random(3)) {

                case 0: OrderAnswer=("A");  //correct answer in location A
                        confirm_ac.Text=String.Format("%s[%s",saleitem, choices[2]);
                        confirm_bd.Text=String.Format("%s[%s",choices[1], choices[3]);
                        break;
                case 1: OrderAnswer=("C");  //etc.
                        confirm_ac.Text=String.Format("%s[%s",choices[0], saleitem);
                        confirm_bd.Text=String.Format("%s[%s",choices[1], choices[3]);
                        break;
                case 2: OrderAnswer=("B");
                        confirm_ac.Text=String.Format("%s[%s",choices[0], choices[2]);
                        confirm_bd.Text=String.Format("%s[%s",saleitem, choices[3]);
                        break;
                case 3: OrderAnswer=("D");
                        confirm_ac.Text=String.Format("%s[%s",choices[0], choices[2]);
                        confirm_bd.Text=String.Format("%s[%s",choices[1], saleitem);
            }

            gConfirm.Centre(); gConfirm.Visible=true;  //display "confirm order" window
            mouse.Visible=false;
        }
    }
}


//GUI: gConfirm - Confirm the Order - Asks to enter the customer request by keyboard
function confirmbox_OnActivate(GUIControl *control){
    String input = confirmbox.Text;
    Parser.ParseText(input);

    if ((input.UpperCase())==(OrderAnswer.UpperCase())){  //Good?
        PlaySound(41);
        step2.NormalGraphic=5517; step2.MouseOverGraphic=5519;  // change second button to "start"
        gConfirm.Visible=false;
        //TopUp("Got it!","Keep going!");
        //InfoPop(6407, 20);
        makercheer.Visible=true;
        makercheer.Animate(26, 5, 0, eOnce);  // show "nice!" popup

        happiness+=5;
        if (cd_seconds<=1)  // happiness bonus for quick service
            happiness+=20;
        else if ((cd_seconds<=2))
            happiness+=10;
        else if ((cd_seconds<=3))  //BUGFIX removed broken condition
            happiness+=5;
        happyupdate();

        if (saleitem!=("Georgetonian")){  // any sale, except the newspapers
            step2.NormalGraphic=5521; step2.MouseOverGraphic=5521;  // FIXME why change to "done"?
            phrase_display.Text=String.Format("%s",Phrase);  //Prep Phrase Display

            infolocker.Animate(208, 2, 2, eOnce);  //Go!
            step3.NormalGraphic=5517; step3.MouseOverGraphic=5519;  //change third button to "start"
            gAssemble.Centre(); gAssemble.Visible=true;  // show "assemble the order" window
            emble_anim.Animate(208, 1, 2, eOnce);}

        else {  //Georgetonian skips a step... no assembly, move immediately to payment calculation FIXME duplicated
            infolocker.Animate(208, 2, 2, eOnce);

            int billsize=Random(5);  //randomize which bill the customer uses to pay (if "5", exact amount, no need for change)
            //if (cheatbiking==true){billsize=5;}  //DEBUG to force exactchange

            if (billsize==0){
                billvalue=5.00;  //show a random bill picture, of the proper value
                cr_Paybill0.NormalGraphic=(Random(7)+9822); changebillslot[0]=1; cr_Paybill0.Visible=true; cr_Paybill1.Visible=false; cr_Paybill2.Visible=false; cr_Paybill3.Visible=false; cr_Paybill4.Visible=false;
            }
            if (billsize==1){
                billvalue=10.00;
                cr_Paybill0.NormalGraphic=(Random(7)+9806); changebillslot[0]=1; cr_Paybill0.Visible=true;  cr_Paybill1.Visible=false; cr_Paybill2.Visible=false; cr_Paybill3.Visible=false; cr_Paybill4.Visible=false;
            }
            if (billsize==2){
                billvalue=20.00;
                cr_Paybill0.NormalGraphic=(Random(7)+9792); changebillslot[0]=1; cr_Paybill0.Visible=true; cr_Paybill1.Visible=false; cr_Paybill2.Visible=false; cr_Paybill3.Visible=false; cr_Paybill4.Visible=false;
            }
            if ((billsize==3)||(billsize==4)){  //customer pays with multiple bills, call payup routine
                billvalue=IntToFloat(FloatToInt(saleprice, eRoundUp));//Rounding Up
                payup();
                //cr_Paybill0.NormalGraphic=(Random(7)+9792);//Not sure how to assign graphics to the bills right now?
                //cr_Paybill1.Visible=false; cr_Paybill2.Visible=false; cr_Paybill3.Visible=false; cr_Paybill4.Visible=false;
            }
            if (billsize==5){  //Exact Change - call routine
                billvalue=saleprice;
                exactchange();
                 //cr_Paybill0.NormalGraphic=(Random(7)+9792);//Not sure how to assign graphics to the bills right now?
                 //cr_Paybill1.Visible=false; cr_Paybill2.Visible=false; cr_Paybill3.Visible=false; cr_Paybill4.Visible=false;
            }

            changeclimbing=billvalue;  // FIXME ?
            ChangeAnswer=((billvalue)-(saleprice));
            change_label.Text=String.Format("$%.2f - $%.2f = ?",billvalue, saleprice);
            gChange.Centre(); // show "how much is the change?" question
            if (upgrade_1.NormalGraphic==6083)  //Cash Register fills it in automatically.
                changebox.Text=String.Format("%.2f",ChangeAnswer);

            if (saleprice>=0.01){
                //Display("Sale price: %f",saleprice);
                kaching();
                //==// OLD TEST VERION //==// (Good catch, Jenny.)
                //if (cheatbiking==false){gChange.Visible=true;}
                //else{kaching();}
            }
            else {
                checkout();
            }
        }  //No change needed for free georgetonian
    }//End Good
    else if ((input.UpperCase())!=(Phrase.UpperCase()))  //FIXME why Phrase instead of OrderAnswer ?
        Botch();
}


//GUI: gAssemble - Assemble the Order - same as before
function typebox_OnActivate(GUIControl *control){
    String input = typebox.Text;
    Parser.ParseText(input);

    if ((input.UpperCase())==(Phrase.UpperCase())){  //Good?
        PlaySound(41);
        step3.NormalGraphic=5517; step3.MouseOverGraphic=5519;
        gAssemble.Visible=false;
        //TopUp("Got it!","Keep going!");
        //InfoPop(6408, 20);
        makercheer.Animate(26, 6, 0, eOnce);

        happiness+=15;
        if (cd_seconds<=1)
            happiness+=30;
        else if (cd_seconds<=2)
            happiness+=20;
        else if (cd_seconds<=3)  //BUGFIX removed broken condition
            happiness+=10;
        happyupdate();

        int billsize=Random(5);
        //if (cheatbiking==true){billsize=5;}  //DEBUG to force exactchange
        if (billsize==0){
            billvalue=5.00;
            cr_Paybill0.NormalGraphic=(Random(7)+9822); changebillslot[0]=1; cr_Paybill0.Visible=true; cr_Paybill1.Visible=false; cr_Paybill2.Visible=false; cr_Paybill3.Visible=false; cr_Paybill4.Visible=false;
        }
        if (billsize==1){
            billvalue=10.00;
            cr_Paybill0.NormalGraphic=(Random(7)+9806); changebillslot[0]=1; cr_Paybill0.Visible=true; cr_Paybill1.Visible=false; cr_Paybill2.Visible=false; cr_Paybill3.Visible=false; cr_Paybill4.Visible=false;
        }
        if (billsize==2){
            billvalue=20.00; cr_Paybill0.NormalGraphic=(Random(7)+9792); changebillslot[0]=1; cr_Paybill0.Visible=true; cr_Paybill1.Visible=false; cr_Paybill2.Visible=false; cr_Paybill3.Visible=false; cr_Paybill4.Visible=false;
        }
        if ((billsize==3)||(billsize==4)){
            billvalue=IntToFloat(FloatToInt(saleprice, eRoundUp));  //Rounding Up
            payup();
            //cr_Paybill0.NormalGraphic=(Random(7)+9792);//Not sure how to assign graphics to the bills right now?
            //cr_Paybill1.Visible=false; cr_Paybill2.Visible=false; cr_Paybill3.Visible=false; cr_Paybill4.Visible=false;
        }
        if (billsize==5){  //Exact Change
            billvalue=saleprice;
            exactchange();
            //cr_Paybill0.NormalGraphic=(Random(7)+9792);//Not sure how to assign graphics to the bills right now?
            //cr_Paybill1.Visible=false; cr_Paybill2.Visible=false; cr_Paybill3.Visible=false; cr_Paybill4.Visible=false;
        }

        changeclimbing=billvalue;
        ChangeAnswer=((billvalue)-(saleprice));
        change_label.Text=String.Format("$%.2f - $%.2f = ?",billvalue, saleprice);
        //Go!
        //gChange.Centre();
        if (saleprice>=0.01){
            //Display("Sale price: %f",saleprice);
            kaching();
            //==// OLD TEST VERSION (Good catch, Jenny.) //==//
            // if (cheatbiking==false){
            //    gChange.Centre();  //No change needed for free georgetonian
            //    //Cash Register fills it in automatically.
            //    if (upgrade_1.NormalGraphic==6083){
            //            changebox.Text=String.Format("%.2f",ChangeAnswer);
            //    }
            //    gChange.Visible=true;
            // }
            // else
            //    kaching();
        }
        else
            checkout();  //Free Shit passes go.
  
        //if (saleprice>0.00){gChange.Visible=true;}
        //else if (saleprice==0.00){checkout();}//No change needed for free shit.
    }
    else  // input != phrase
        Botch();
}


//GUI: gChange - input the required change for the customer's money
function changebox_OnActivate(GUIControl *control){
    String input = changebox.Text;
    Parser.ParseText(input);

    change_label.Text=String.Format("$%.2f - $%.2f = %.2f",billvalue, saleprice, ChangeAnswer);  //Display on Answer on Botch
    if (input.AsFloat==ChangeAnswer){  // Good
        PlaySound(4);
        vitality.Width-=1;
        gChange.Visible=false;
        checkout();
    }
    else  // input!=value
        Botch();
}


// Called after closing the breakdown screen, going back to sleep after a nightmare, or passing out at the pub
function sleep(){

    //if (dayspassed==2){StopMusic(); PlaySound(75); FadeOut(3);Wait(80); PlayMusic(12); gDemokill.Visible=true; Wait(10); FadeIn(3); Wait(500); QuitGame(0);}

    //Bonus Countdown Resets
    bagel_bonus_countdown=10;
    coffee_bonus_countdown=10;
    hotdog_bonus_countdown=10;
    paper_bonus_countdown=10;
    misc_bonus_countdown=10;
    soda_bonus_countdown=10;

    //else if (dayspassed!=2){
    //Misc Var Resets
    pizzasbought=0; Teejanger=0; income_today=0.00; caffthresh=80; disaster.NormalGraphic=3212; income_tipstoday=0.00;

    drunkenness=0;

    //Stephanie Romance - enable option on dialogue
    if (GetGlobalInt(1)==P_VINNY)
        dSteph_1.SetOptionState(3, eOptionOn);

    //==Sandwich Shuffle!== turns current sandwiches in inv (if any) 1-day older
    if (cSlot2.InventoryQuantity[Dayold.ID]!=0)
        {cSlot2.LoseInventory(Dayold); cSlot2.AddInventory(Oldsand);}
    if (cSlot2.InventoryQuantity[Bigwich.ID]!=0)
        {cSlot2.LoseInventory(Bigwich); cSlot2.AddInventory(Dayold);}
    if (cSlot2.InventoryQuantity[Bigwichv.ID]!=0)
        {cSlot2.LoseInventory(Bigwichv); cSlot2.AddInventory(Dayold);}

    Stand.FollowCharacter(null, 0, 0); close_pick.Visible=false;

    Omar.ChangeRoom(34, 217, 161); Omar.UnlockView();

    if (deliveryday){  // Delivery Day

        if (deliverydrop==5)  //franklin
            Stand.ChangeRoom(5, 337, 158);
        if (deliverydrop==19)  //mall
            Stand.ChangeRoom(19, 311, 159);
        if (deliverydrop==14){  //downtown
            Stand.ChangeRoom(14, 695, 159); moved_Alice=true; Alice_2.ChangeRoom(14, 650, 160);
        }
        if (deliverydrop==26)  //collins
            Stand.ChangeRoom(26, 415, 160);
        if (deliverydrop==20){  //florin
            Stand.ChangeRoom(20, 311, 159); moved_Alice=true; Alice_2.ChangeRoom(20, 275, 150);
        }
        if (deliverydrop==22){  //13th
            Stand.ChangeRoom(22, 645, 160); moved_Alice=true; Alice_2.ChangeRoom(22, 595, 160);
        }
    
        //standimagefix (?) stand style
        if (deliveryitem==21)
            StandImage.NormalGraphic=1700;  //Ash Wood
        if (deliveryitem==22)
            StandImage.NormalGraphic=1701;  //Grisaille
        if (deliveryitem==23)
            StandImage.NormalGraphic=1699;  //Acromat
        if (deliveryitem==24)
            StandImage.NormalGraphic=1702;

        deliveryday=0;
        //deliverydrop=0; //Leaving this for progress checks / location checks / etc
        deliveryitem=0;
    }

    if (player.Room==16){  // Pass Out Napkin Notes (fagan's)

        if (GetGlobalInt(410)==0){
            cSlot2.AddInventory(Barnote1); SetGlobalInt(410, 1);
        }
        else if (GetGlobalInt(410)==1){
            if ((GetGlobalInt(1)==P_MEL) || (GetGlobalInt(1)==P_VINNY)){
                cSlot2.AddInventory(Barnote2); SetGlobalInt(410, 2);
            }
            if ((GetGlobalInt(1)==P_ANDRUS) || (GetGlobalInt(1)==P_LOGAN)){
                cSlot2.AddInventory(Barnote3); SetGlobalInt(410, 3);
            }
        }
        else if (GetGlobalInt(410)==2){
            cSlot2.AddInventory(Barnote3); SetGlobalInt(410, 3);
        }
    }

    //Marcus Plot Advancer
    if (GetGlobalInt(200)==4)
        SetGlobalInt(200, 5);  //Ready to trade

    //if (GetGlobalInt(1)==1){if (kibbles.Width>=20){kibbles.Width=15;}}//Glembovski Gets Hungry Old Method

    if (GetGlobalInt(313)==1) SetGlobalInt(313, 0);  //The Three Will Ride Again!
    if (GetGlobalInt(325)==1) SetGlobalInt(325, 0);  //Thales needs to see your permit again.
    if (GetGlobalInt(343)==1) SetGlobalInt(343, 0);  //Basinski'll be back.

    //Andrus Overnight Plot Advancement
    if (GetGlobalInt(101)==10) SetGlobalInt(101, 11);  //Andrus Plot Advance
    if (GetGlobalInt(101)==12) SetGlobalInt(101, 13);
    if (GetGlobalInt(101)==14) SetGlobalInt(101, 15);
    if (GetGlobalInt(101)==16) SetGlobalInt(101, 17);
    if (GetGlobalInt(101)==18) SetGlobalInt(101, 19);
    if (GetGlobalInt(101)==20) SetGlobalInt(101, 21);
    if (GetGlobalInt(101)==21) SetGlobalInt(101, 21);  //Loop at 20/21 until player provides gift

    if (GetGlobalInt(409)==1) SetGlobalInt(409, 2);  //Advance Bigby sign to Graffiti

    if (GetGlobalInt(411)==7) SetGlobalInt(411, 8); SetGlobalInt(423, 0);  //Advance Cafe Arcano Plot: Bookstore repairs - Barneys have new machine.
    if (GetGlobalInt(411)==6) SetGlobalInt(411, 7); SetGlobalInt(423, 0);  //Advance Cafe Arcano Plot: PC betrayed Eddie! Bookstore is busted!
    if (GetGlobalInt(411)==2) SetGlobalInt(411, 3); SetGlobalInt(423, 0);  //Advance Cafe Arcano Plot: Eddie's ready to talk about this.

    if (GetGlobalInt(422)==5){  //Test: Pass or fail?
        if (testright<=4)
            SetGlobalInt(422, 6);
        else
            SetGlobalInt(422, 7);
    }

    if (GetGlobalInt(1)==P_ANDRUS)
        if (player.Room==7){
            pick.NormalGraphic=3746; gPick.Centre(); gPick.Visible=true; pick.Animate(144, 1, 6, eOnce); Wait(150);
        }

    if (GetGlobalInt(1)==P_VINNY){
        caffeine.Width=90; SetGlobalInt(52, 0);
        if (player.Room==6){
            pick.NormalGraphic=1920; gPick.Centre(); gPick.Visible=true; pick.Animate(98, 1, 3, eOnce); Wait(150);
        }
    }

    StopMusic(); PlaySound(75); FadeOut(3); Wait(200);

    clockspeed=2;  //RAMMING SPEED!  FIXME check clock speed
    isclockrunning=false;  //New method
    player.ChangeRoom(29, 182, 149);
}


// Salutations - Various NPC greetings
function salutation(){
  if ((gDialog.Visible==false)&&(SaleInProgress==0)){
SaleInProgress=1;
TalkPop(); Wait(40);
PCListen(); 
if (salebuyer==("Tim")){customertalk();dText.Text=("Look who it is!");blab1();}
if (salebuyer==("Nelly")){customertalk();dText.Text=("Ahoy, vendor!");blab1();}
if (salebuyer==("Toney")){customertalk(); dText.Text=("What's up?");blab1();}
if (salebuyer==("Matts")){customertalk(); dText.Text=("Uhh... Hey. What's up?");blab1();}
if (salebuyer==("Jenny")){customertalk();dText.Text=("Hi!");blab1();}
if (salebuyer==("Stephen")){customertalk();dText.Text=("Yeah, hello.");blab1();}
if (salebuyer==("Seth")){customertalk();dText.Text=("Hey there!");blab1();}
if (salebuyer==("Winston")){customertalk();dText.Text=("Hey, man...");blab1();}
if (salebuyer==("DC")){customertalk();dText.Text=("Hey. What's up?");blab1();}
if (salebuyer==("Richard")){
    if (GetGlobalInt(16)==0){ SetGlobalInt(16, 1);
        if (GetGlobalInt(1)==1){
        customertalk(); PCListen (); dText.Text=("Hello."); blab1();
        customerlisten();  PCTalk(); dText.Text=("Yes, hello."); blab1();
        customertalk(); PCListen (); dText.Text=("You must be new, here. This stand hasn't been open for a long time."); blab4();
        customerlisten(); PCTalk(); dText.Text=("Yes, that's correct."); blab2();
        customertalk(); PCListen (); dText.Text=("That's great. This is right along my walk to work every day."); blab4();
        customerlisten(); PCTalk(); dText.Text=("Oh, okay."); blab1();}
    if (GetGlobalInt(1)==2){
        customertalk(); PCListen (); dText.Text=("Hello."); blab1();
        customerlisten();  PCTalk(); dText.Text=("Hey there."); blab1();
        customertalk(); PCListen (); dText.Text=("I haven't seen this stand before."); blab2();
        customerlisten(); PCTalk(); dText.Text=("Yep! It's new!"); blab1();
        customertalk(); PCListen (); dText.Text=("I'm so happy - it's right along my walk to work."); blab4();
        customerlisten(); PCTalk(); dText.Text=("Great!"); blab1();}
    if (GetGlobalInt(1)==3){
        customertalk(); PCListen (); dText.Text=("Hello."); blab1();
        customertalk(); PCListen (); dText.Text=("It's Vinny, right?"); blab1();
        customertalk(); PCListen (); dText.Text=("You used to sell bagels on 13th, right?"); blab4();
        customerlisten(); PCTalk(); dText.Text=("Yep, that's me."); blab1();
        customertalk(); PCListen (); dText.Text=("I, uhh.. I like the beard. It kind of suits you."); blab4();
        customerlisten(); PCTalk(); dText.Text=("Oh."); blab1();
        customerlisten(); PCTalk(); dText.Text=("Thanks."); blab1();}
    if (GetGlobalInt(1)==4){
        customertalk(); PCListen (); dText.Text=("Hello."); blab1();
        customerlisten();  PCTalk(); dText.Text=("Yeah, what's up?"); blab1();}
        }
    else if (GetGlobalInt(16)!=0){  
        customertalk();dText.Text=("Hello!");blab1();}}

if (salebuyer==("George")){customertalk();dText.Text=("Grrr?");blab1();}
if (salebuyer==("Faith")){customertalk();dText.Text=("Hi there!");blab1();}
if (salebuyer==("Clarence")){customertalk();dText.Text=("*grunt*");blab1();}
if (salebuyer==("Betsy")){customertalk();dText.Text=("What's up?");blab1();}
if (salebuyer==("Thales")){customertalk();dText.Text=("Excuse me, vendor.");blab1();}
if (salebuyer==("Johns")){customertalk();dText.Text=("Excuse me, vendor.");blab1();}
if (salebuyer==("Suchin")){customertalk();dText.Text=("Hi!");blab1();}

if (salebuyer==("Kyam")){
  if ((GetGlobalInt(428)==0)&&(GetGlobalInt(1)==3)){
customertalk(); PCListen (); dText.Text=("Hello."); blab1();
customerlisten();  PCTalk(); dText.Text=("Hey there."); blab1();
customertalk(); PCListen (); dText.Text=("You're that bagel guy, right?"); blab3();
customerlisten(); PCTalk(); dText.Text=("Yep, that's me."); blab1();
customertalk(); PCListen (); dText.Text=("Dude."); blab1();
customertalk(); PCListen (); dText.Text=("That's cool."); blab1();
customerlisten(); PCTalk(); dText.Text=("Oh, okay."); blab1();
customerlisten(); PCListen (); dText.Text=("..."); dName.Text=("Vinny: "); blab1();}
else{customertalk();dText.Text=("What's up, dude?");blab1();}}

if (salebuyer==("Meadow")){customertalk();dText.Text=("Hi there!");blab1();}
if (salebuyer==("TJ")){customertalk();dText.Text=("How's it goin'?");blab1();}
if (salebuyer==("Chris")){customertalk();dText.Text=("What's up?");blab1();}
if (salebuyer==("Sebastian")){customertalk();dText.Text=("How's it going?");blab1();}
if (salebuyer==("Bramford")){customertalk();dText.Text=("Excuse me?");blab1();}
if (salebuyer==("Ward")){customertalk();dText.Text=("Yellooow.");blab1();}
if (salebuyer==("Stephanie")){customertalk();dText.Text=("Hello?");blab1();}
if (salebuyer==("Dick")){customertalk();dText.Text=("Howdy!");blab1();}
if (salebuyer==("Christin")){customertalk();dText.Text=("Hello.");blab1();}
if (salebuyer==("Basinski")){customertalk();dText.Text=("Hey there!");blab1();}
if (salebuyer==("Dwayne")){
  //Display("Stand up, Dwayne!");
  Dwayne.Animate(3, 0, eOnce, eNoBlock, eForwards);
  customertalk();dText.Text=("Umm, hi?");blab1();
  }
if (salebuyer==("Jessi")){customertalk();dText.Text=("Hello!");blab1();}
if (salebuyer==("Julian")){customertalk();dText.Text=("Well, hello!");blab1();}
if (salebuyer==("Melody")){customertalk();dText.Text=("Good day to ya!");blab1();}
if (salebuyer==("Marcus")){customertalk();dText.Text=("What's up, gov'nor?");blab1();}
if (salebuyer==("The Three")){
Threetalk_P(); PCListen(); dText.Text=("Hello."); blab1(); 
if (GetGlobalInt(1)==1){customerlisten(); PCTalk(); dText.Text=("Hello, three men."); blab1();}
if (GetGlobalInt(1)==2){customerlisten(); PCTalk(); dText.Text=("Hello, sirs."); blab1();}
if (GetGlobalInt(1)==3){customerlisten(); PCTalk(); dText.Text=("Hello, sirs."); blab1();}
if (GetGlobalInt(1)==4){customerlisten(); PCTalk(); dText.Text=("Hey fellas."); blab1();}
Threetalk_M(); PCListen(); dText.Text=("Yes, hello. "); blab1();
Threetalk_S(); dText.Text=("Hi, there."); blab1();}

if (salebuyer==("Omar")){
   PCListen(); customertalk(); dText.Text=("Hey yo."); blab1();
 PCTalk(); customerlisten(); dText.Text=("Hello."); blab1();}

if (salebuyer==("Troy")){
if ((GetGlobalInt(1)==3)&&(GetGlobalInt(417)==0)){
customertalk(); PCListen (); dText.Text=("Hello."); blab1();
customerlisten();  PCTalk(); dText.Text=("Hey there."); blab1();
customertalk(); PCListen (); dText.Text=("Hey, man, is your name Vinny?"); blab1();
customerlisten(); PCTalk(); dText.Text=("Yep, that's me."); blab1();
customertalk(); PCListen (); dText.Text=("Yeah, I used to get your bagels over on..."); blab1();
customertalk(); PCListen (); dText.Text=("What, thirteenth street?"); blab1();
customerlisten(); PCTalk(); dText.Text=("Oh, okay."); blab1();
customertalk(); PCListen (); dText.Text=("Good to see you back."); blab2();}
else{customertalk();dText.Text=("What's up, man?");blab1();}}
 
if (salebuyer==("Alice")){customertalk(); dText.Text=("Well, hey!");blab1();}

if (salebuyer==("Eddie")){
if (GetGlobalInt(423)==4){
  PCListen(); customertalk(); dText.Text=("I have nothing to say to you."); blab2();
  PCListen(); customertalk(); dText.Text=("Please leave!"); blab1();
  dName.Text=(" "); dText.Text=(" "); customerlisten();}
else{
  if ((GetGlobalInt(411)!=5)&&(GetGlobalInt(411)!=6)&&(GetGlobalInt(411)!=7)&&(GetGlobalInt(411)!=8)&&(GetGlobalInt(411)!=9)){
  if (GetGlobalInt(423)==2){//Angry!
  PCListen(); customertalk(); dText.Text=("I'm sorry, but I'd like you to leave."); blab3();
  PCTalk(); customerlisten();  dText.Text=("But I--"); blab1(); 
  PCListen(); customertalk(); dText.Text=("Please leave!"); blab1();
  dName.Text=(" "); dText.Text=(" "); customerlisten();}
  if ((GetGlobalInt(423!=2)&&(GetGlobalInt(423)!=4))){
  customertalk();dText.Text=("Hello, vendor.");blab1();
  dName.Text=(" "); dText.Text=(" "); customerlisten();}}}}

if (salebuyer==("Andrus")){customertalk(); dText.Text=("Yes - Hello.");blab1();}
if (salebuyer==("Melanie")){customertalk(); dText.Text=("Hi!");blab1();}
if (salebuyer==("Logan")){customertalk(); dText.Text=("Hey. What's up?");blab1();}
if (salebuyer==("Vinny")){customertalk(); dText.Text=("Hi there! How's it going?");blab1();}


PCTalk(); customerlisten(); 
if (GetGlobalInt(1)==1){dText.Text=("Yes. Hello."); blab1();}
if (GetGlobalInt(1)==2){dText.Text=("Hi there!"); blab1();}
if (GetGlobalInt(1)==3){dText.Text=("Hey."); blab1();}
if (GetGlobalInt(1)==4){dText.Text=("Yes. Hello."); blab1();}

dText.Text=(" "); dName.Text=(" "); //Blank
PCListen(); customerlisten();//Shut up
BuyorTalk();//Let's Go!
}}//End Salutation



//=========="TopChef" aka CookFunctions =============//
int xMilk=0;
int xChai=0;
int xCocoa=0;
int xSyrup=0;
int xSugar=0;
int xCreamcheese=0;
int xJelly=0;
int xPb=0;
int xLox=0;
int xCapers=0;
int xFlour=0;
int xYeast=0;
int xSalt=0;
int xButtermilk=0;
int xVittle=0;
int xRinse=0;
int xCrest=0;
int xCoffee=0;

int batch=0;//Represents Ingredient Amount Before Adding

function chefblank(){ 
xMilk=0;
xChai=0;
xCocoa=0;
xSyrup=0;
xSugar=0;
xCreamcheese=0;
xJelly=0;
xPb=0;
xLox=0;
xCapers=0;
xFlour=0;
xYeast=0;
xSalt=0;
xButtermilk=0;
xVittle=0;
xRinse=0;
xCrest=0;
xCoffee=0;}
  

function UpdateQuants(){
//Round 1!
if (themix.ItemAtIndex[0]==Milk){quant_1.Text=String.Format("%d",xMilk);}
else if (themix.ItemAtIndex[0]==Chai){quant_1.Text=String.Format("%d",xChai);}
else if (themix.ItemAtIndex[0]==Cocoa){quant_1.Text=String.Format("%d",xCocoa);}
else if (themix.ItemAtIndex[0]==Syrups){quant_1.Text=String.Format("%d",xSyrup);}
else if (themix.ItemAtIndex[0]==Sugar){quant_1.Text=String.Format("%d",xSugar);}
else if (themix.ItemAtIndex[0]==CreamCheese){quant_1.Text=String.Format("%d",xCreamcheese);}
else if (themix.ItemAtIndex[0]==Jelly){quant_1.Text=String.Format("%d",xJelly);}
else if (themix.ItemAtIndex[0]==Peanutbutter){quant_1.Text=String.Format("%d",xPb);}
else if (themix.ItemAtIndex[0]==Lox){quant_1.Text=String.Format("%d",xLox);}
else if (themix.ItemAtIndex[0]==Capers){quant_1.Text=String.Format("%d",xCapers);}
else if (themix.ItemAtIndex[0]==Flour){quant_1.Text=String.Format("%d",xFlour);}
else if (themix.ItemAtIndex[0]==Yeast){quant_1.Text=String.Format("%d",xYeast);}
else if (themix.ItemAtIndex[0]==Salt){quant_1.Text=String.Format("%d",xSalt);}
else if (themix.ItemAtIndex[0]==Buttermilk){quant_1.Text=String.Format("%d",xButtermilk);}
else if (themix.ItemAtIndex[0]==Catfood){quant_1.Text=String.Format("%d",xVittle);}
else if (themix.ItemAtIndex[0]==Rinse){quant_1.Text=String.Format("%d",xRinse);}
else if (themix.ItemAtIndex[0]==Crest){quant_1.Text=String.Format("%d",xCrest);}
else if (themix.ItemAtIndex[0]==CoffeeA){quant_1.Text=String.Format("%d",xCoffee);}
else if (themix.ItemAtIndex[0]==CoffeeB){quant_1.Text=String.Format("%d",xCoffee);}
else if (themix.ItemAtIndex[0]==CoffeeC){quant_1.Text=String.Format("%d",xCoffee);}
else if (themix.ItemAtIndex[0]==CoffeeD){quant_1.Text=String.Format("%d",xCoffee);}
//Round 2!
if (themix.ItemAtIndex[1]==Milk){quant_2.Text=String.Format("%d",xMilk);}
else if (themix.ItemAtIndex[1]==Chai){quant_2.Text=String.Format("%d",xChai);}
else if (themix.ItemAtIndex[1]==Cocoa){quant_2.Text=String.Format("%d",xCocoa);}
else if (themix.ItemAtIndex[1]==Syrups){quant_2.Text=String.Format("%d",xSyrup);}
else if (themix.ItemAtIndex[1]==Sugar){quant_2.Text=String.Format("%d",xSugar);}
else if (themix.ItemAtIndex[1]==CreamCheese){quant_2.Text=String.Format("%d",xCreamcheese);}
else if (themix.ItemAtIndex[1]==Jelly){quant_2.Text=String.Format("%d",xJelly);}
else if (themix.ItemAtIndex[1]==Peanutbutter){quant_2.Text=String.Format("%d",xPb);}
else if (themix.ItemAtIndex[1]==Lox){quant_2.Text=String.Format("%d",xLox);}
else if (themix.ItemAtIndex[1]==Capers){quant_2.Text=String.Format("%d",xCapers);}
else if (themix.ItemAtIndex[1]==Flour){quant_2.Text=String.Format("%d",xFlour);}
else if (themix.ItemAtIndex[1]==Yeast){quant_2.Text=String.Format("%d",xYeast);}
else if (themix.ItemAtIndex[1]==Salt){quant_2.Text=String.Format("%d",xSalt);}
else if (themix.ItemAtIndex[1]==Buttermilk){quant_2.Text=String.Format("%d",xButtermilk);}
else if (themix.ItemAtIndex[1]==Catfood){quant_2.Text=String.Format("%d",xVittle);}
else if (themix.ItemAtIndex[1]==Rinse){quant_2.Text=String.Format("%d",xRinse);}
else if (themix.ItemAtIndex[1]==Crest){quant_2.Text=String.Format("%d",xCrest);}
else if (themix.ItemAtIndex[1]==CoffeeA){quant_2.Text=String.Format("%d",xCoffee);}
else if (themix.ItemAtIndex[1]==CoffeeB){quant_2.Text=String.Format("%d",xCoffee);}
else if (themix.ItemAtIndex[1]==CoffeeC){quant_2.Text=String.Format("%d",xCoffee);}
else if (themix.ItemAtIndex[1]==CoffeeD){quant_2.Text=String.Format("%d",xCoffee);}
//Round 3!
if (themix.ItemAtIndex[2]==Milk){quant_3.Text=String.Format("%d",xMilk);}
else if (themix.ItemAtIndex[2]==Chai){quant_3.Text=String.Format("%d",xChai);}
else if (themix.ItemAtIndex[2]==Cocoa){quant_3.Text=String.Format("%d",xCocoa);}
else if (themix.ItemAtIndex[2]==Syrups){quant_3.Text=String.Format("%d",xSyrup);}
else if (themix.ItemAtIndex[2]==Sugar){quant_3.Text=String.Format("%d",xSugar);}
else if (themix.ItemAtIndex[2]==CreamCheese){quant_3.Text=String.Format("%d",xCreamcheese);}
else if (themix.ItemAtIndex[2]==Jelly){quant_3.Text=String.Format("%d",xJelly);}
else if (themix.ItemAtIndex[2]==Peanutbutter){quant_3.Text=String.Format("%d",xPb);}
else if (themix.ItemAtIndex[2]==Lox){quant_3.Text=String.Format("%d",xLox);}
else if (themix.ItemAtIndex[2]==Capers){quant_3.Text=String.Format("%d",xCapers);}
else if (themix.ItemAtIndex[2]==Flour){quant_3.Text=String.Format("%d",xFlour);}
else if (themix.ItemAtIndex[2]==Yeast){quant_3.Text=String.Format("%d",xYeast);}
else if (themix.ItemAtIndex[2]==Salt){quant_3.Text=String.Format("%d",xSalt);}
else if (themix.ItemAtIndex[2]==Buttermilk){quant_3.Text=String.Format("%d",xButtermilk);}
else if (themix.ItemAtIndex[2]==Catfood){quant_3.Text=String.Format("%d",xVittle);}
else if (themix.ItemAtIndex[2]==Rinse){quant_3.Text=String.Format("%d",xRinse);}
else if (themix.ItemAtIndex[2]==Crest){quant_3.Text=String.Format("%d",xCrest);}
else if (themix.ItemAtIndex[2]==CoffeeA){quant_3.Text=String.Format("%d",xCoffee);}
else if (themix.ItemAtIndex[2]==CoffeeB){quant_3.Text=String.Format("%d",xCoffee);}
else if (themix.ItemAtIndex[2]==CoffeeC){quant_3.Text=String.Format("%d",xCoffee);}
else if (themix.ItemAtIndex[2]==CoffeeD){quant_3.Text=String.Format("%d",xCoffee);}
//Round 4!
if (themix.ItemAtIndex[3]==Milk){quant_4.Text=String.Format("%d",xMilk);}
else if (themix.ItemAtIndex[3]==Chai){quant_4.Text=String.Format("%d",xChai);}
else if (themix.ItemAtIndex[3]==Cocoa){quant_4.Text=String.Format("%d",xCocoa);}
else if (themix.ItemAtIndex[3]==Syrups){quant_4.Text=String.Format("%d",xSyrup);}
else if (themix.ItemAtIndex[3]==Sugar){quant_4.Text=String.Format("%d",xSugar);}
else if (themix.ItemAtIndex[3]==CreamCheese){quant_4.Text=String.Format("%d",xCreamcheese);}
else if (themix.ItemAtIndex[3]==Jelly){quant_4.Text=String.Format("%d",xJelly);}
else if (themix.ItemAtIndex[3]==Peanutbutter){quant_4.Text=String.Format("%d",xPb);}
else if (themix.ItemAtIndex[3]==Lox){quant_4.Text=String.Format("%d",xLox);}
else if (themix.ItemAtIndex[3]==Capers){quant_4.Text=String.Format("%d",xCapers);}
else if (themix.ItemAtIndex[3]==Flour){quant_4.Text=String.Format("%d",xFlour);}
else if (themix.ItemAtIndex[3]==Yeast){quant_4.Text=String.Format("%d",xYeast);}
else if (themix.ItemAtIndex[3]==Salt){quant_4.Text=String.Format("%d",xSalt);}
else if (themix.ItemAtIndex[3]==Buttermilk){quant_4.Text=String.Format("%d",xButtermilk);}
else if (themix.ItemAtIndex[3]==Catfood){quant_4.Text=String.Format("%d",xVittle);}
else if (themix.ItemAtIndex[3]==Rinse){quant_4.Text=String.Format("%d",xRinse);}
else if (themix.ItemAtIndex[3]==Crest){quant_4.Text=String.Format("%d",xCrest);}
else if (themix.ItemAtIndex[3]==CoffeeA){quant_4.Text=String.Format("%d",xCoffee);}
else if (themix.ItemAtIndex[3]==CoffeeB){quant_4.Text=String.Format("%d",xCoffee);}
else if (themix.ItemAtIndex[3]==CoffeeC){quant_4.Text=String.Format("%d",xCoffee);}
else if (themix.ItemAtIndex[3]==CoffeeD){quant_4.Text=String.Format("%d",xCoffee);}
}


//AddIngredient
function mixdeny(){PlaySound(60);
TopUp("Ingredient Limit!","Maximum number of ingredients reached.");}

function mixthis(String thing){
if (gAdd.Visible==true){return;}
batch=0; addtotal.Text=String.Format("%d",batch); gAdd.Centre();
addaddlabel.Text=String.Format("%s Added: ",thing); addremlabel.Text=String.Format("%s Remaining: ",thing);

     if (thing==("Milk")){if ((themix.ItemCount >=4)&&(Stand.InventoryQuantity[Milk.ID]==0)){mixdeny();}
                          else {addrem.Text=String.Format("%d",milk_remaining); addpic.NormalGraphic=411;
                          if (milk_remaining>0){gAdd.Visible=true;}
                          else if (milk_remaining<=0){gAdd.Visible=false;TopUp("Can't add more!",String.Format("You are out of %s!",thing));}
                          PlaySound(41);}}

else if (thing==("Chai Tea")){if ((themix.ItemCount >=4)&&(Stand.InventoryQuantity[Chai.ID]==0)){mixdeny();}
                          else {addrem.Text=String.Format("%d",chai_remaining); addpic.NormalGraphic=408;
                          if (chai_remaining>0){gAdd.Visible=true;}
                          else if (chai_remaining<=0){gAdd.Visible=false;TopUp("Can't add more!",String.Format("You are out of %s!",thing));}
                          PlaySound(41);}}

else if (thing==("Cocoa")){if ((themix.ItemCount >=4)&&(Stand.InventoryQuantity[Cocoa.ID]==0)){mixdeny();}
                          else {addrem.Text=String.Format("%d",cocoa_remaining); addpic.NormalGraphic=409;
                          if (cocoa_remaining>0){gAdd.Visible=true;}
                          else if (cocoa_remaining<=0){gAdd.Visible=false;TopUp("Can't add more!",String.Format("You are out of %s!",thing));}
                          PlaySound(41);}}

else if (thing==("Syrup")){if ((themix.ItemCount >=4)&&(Stand.InventoryQuantity[Syrups.ID]==0)){mixdeny();}
                          else {addrem.Text=("N/A"); addpic.NormalGraphic=410;
                          gAdd.Visible=true; PlaySound(41);}}

else if (thing==("Sugar")){if ((themix.ItemCount >=4)&&(Stand.InventoryQuantity[Sugar.ID]==0)){mixdeny();}
                          else {addrem.Text=String.Format("%d",sugar_remaining); addpic.NormalGraphic=1195;
                          if (sugar_remaining>0){gAdd.Visible=true;}
                          else if (sugar_remaining<=0){gAdd.Visible=false;TopUp("Can't add more!",String.Format("You are out of %s!",thing));}
                          PlaySound(41);}}

else if (thing==("Cream Cheese")){if ((themix.ItemCount >=4)&&(Stand.InventoryQuantity[CreamCheese.ID]==0)){mixdeny();}
                          else {addrem.Text=String.Format("%d",creamcheese_remaining); addpic.NormalGraphic=1211;
                          if (creamcheese_remaining>0){gAdd.Visible=true;}
                          else if (creamcheese_remaining<=0){gAdd.Visible=false;TopUp("Can't add more!",String.Format("You are out of %s!",thing));}
                          PlaySound(41);}}

else if (thing==("Grape Jelly")){if ((themix.ItemCount >=4)&&(Stand.InventoryQuantity[Jelly.ID]==0)){mixdeny();}
                          else {addrem.Text=String.Format("%d",jelly_remaining); addpic.NormalGraphic=1214;
                          if (jelly_remaining>0){gAdd.Visible=true;}
                          else if (jelly_remaining<=0){gAdd.Visible=false;TopUp("Can't add more!",String.Format("You are out of %s!",thing));}
                           PlaySound(41);}}

else if (thing==("Peanut Butter")){if ((themix.ItemCount >=4)&&(Stand.InventoryQuantity[Peanutbutter.ID]==0)){mixdeny();}
                          else {addrem.Text=String.Format("%d",peanutbutter_remaining); addpic.NormalGraphic=1216;
                          if (peanutbutter_remaining>0){gAdd.Visible=true;}
                          else if (peanutbutter_remaining<=0){gAdd.Visible=false;TopUp("Can't add more!",String.Format("You are out of %s!",thing));}
                          PlaySound(41);}}

else if (thing==("Lox")){if ((themix.ItemCount >=4)&&(Stand.InventoryQuantity[Lox.ID]==0)){mixdeny();}
                          else {addrem.Text=String.Format("%d",lox_remaining); addpic.NormalGraphic=1218; 
                          if (lox_remaining>0){gAdd.Visible=true;}
                          else if (lox_remaining<=0){gAdd.Visible=false;TopUp("Can't add more!",String.Format("You are out of %s!",thing));}
                          PlaySound(41);}}

else if (thing==("Capers")){if ((themix.ItemCount >=4)&&(Stand.InventoryQuantity[Capers.ID]==0)){mixdeny();}
                          else {addrem.Text=String.Format("%d",capers_remaining); addpic.NormalGraphic=1220; 
                          if (capers_remaining>0){gAdd.Visible=true;}
                          else if (capers_remaining<=0){gAdd.Visible=false;TopUp("Can't add more!",String.Format("You are out of %s!",thing));}
                           PlaySound(41);}}

else if (thing==("Flour")){if ((themix.ItemCount >=4)&&(Stand.InventoryQuantity[Flour.ID]==0)){mixdeny();}
                          else {addrem.Text=String.Format("%d",flour_remaining); addpic.NormalGraphic=1222; 
                          if (flour_remaining>0){gAdd.Visible=true;}
                          else if (flour_remaining<=0){gAdd.Visible=false;TopUp("Can't add more!",String.Format("You are out of %s!",thing));}
                          PlaySound(41);}}

else if (thing==("Yeast")){if ((themix.ItemCount >=4)&&(Stand.InventoryQuantity[Yeast.ID]==0)){mixdeny();}
                          else {addrem.Text=String.Format("%d",yeast_remaining); addpic.NormalGraphic=1223; 
                          if (yeast_remaining>0){gAdd.Visible=true;}
                          else if (yeast_remaining<=0){gAdd.Visible=false;TopUp("Can't add more!",String.Format("You are out of %s!",thing));}
                          PlaySound(41);}}

else if (thing==("Salt")){if ((themix.ItemCount >=4)&&(Stand.InventoryQuantity[Salt.ID]==0)){mixdeny();}
                          else {addrem.Text=String.Format("%d",salt_remaining); addpic.NormalGraphic=1226; 
                          if (salt_remaining>0){gAdd.Visible=true;}
                          else if (salt_remaining<=0){gAdd.Visible=false;TopUp("Can't add more!",String.Format("You are out of %s!",thing));}
                          PlaySound(41);}}

else if (thing==("Buttermilk")){if ((themix.ItemCount >=4)&&(Stand.InventoryQuantity[Buttermilk.ID]==0)){mixdeny();}
                          else {addrem.Text=String.Format("%d",buttermilk_remaining); addpic.NormalGraphic=1228; 
                          if (buttermilk_remaining>0){gAdd.Visible=true;}
                          else if (buttermilk_remaining<=0){gAdd.Visible=false;TopUp("Can't add more!",String.Format("You are out of %s!",thing));}
                          PlaySound(41);}}

else if (thing==("Cat Vittle")){if ((themix.ItemCount >=4)&&(Stand.InventoryQuantity[Catfood.ID]==0)){mixdeny();}
                          else {addrem.Text=String.Format("%d",catfood_remaining); addpic.NormalGraphic=1539; 
                          if (catfood_remaining>0){gAdd.Visible=true;}
                          else if (catfood_remaining<=0){gAdd.Visible=false;TopUp("Can't add more!",String.Format("You are out of %s!",thing));}
                          PlaySound(41);}}

else if (thing==("Pipeline Rinse")){if ((themix.ItemCount >=4)&&(Stand.InventoryQuantity[Rinse.ID]==0)){mixdeny();}
                          else {addrem.Text=String.Format("%d",rinse_remaining); addpic.NormalGraphic=1261; 
                          if (rinse_remaining>0){gAdd.Visible=true;}
                          else if (rinse_remaining<=0){gAdd.Visible=false;TopUp("Can't add more!",String.Format("You are out of %s!",thing));}
                          PlaySound(41);}}

else if (thing==("Pipeline Crest")){if ((themix.ItemCount >=4)&&(Stand.InventoryQuantity[Crest.ID]==0)){mixdeny();}
                          else {addrem.Text=String.Format("%d",crest_remaining); addpic.NormalGraphic=1262; 
                          if (crest_remaining>0){gAdd.Visible=true;}
                          else if (crest_remaining<=0){gAdd.Visible=false;TopUp("Can't add more!",String.Format("You are out of %s!",thing));}
                          PlaySound(41);}}

else if (thing==("Coffee A")){if ((themix.ItemCount >=4)&&(Stand.InventoryQuantity[CoffeeA.ID]==0)){mixdeny();}
                          else {addrem.Text=String.Format("%d",coffee_a_remaining); addpic.NormalGraphic=7; 
                          if (coffee_a_remaining>0){gAdd.Visible=true;}
                          else if (coffee_a_remaining<=0){gAdd.Visible=false;TopUp("Can't add more!",String.Format("You are out of %s!",thing));}
                          PlaySound(41);}}

else if (thing==("Coffee B")){if ((themix.ItemCount >=4)&&(Stand.InventoryQuantity[CoffeeB.ID]==0)){mixdeny();}
                          else {addrem.Text=String.Format("%d",coffee_b_remaining); addpic.NormalGraphic=9; 
                          if (coffee_b_remaining>0){gAdd.Visible=true;}
                          else if (coffee_b_remaining<=0){gAdd.Visible=false;TopUp("Can't add more!",String.Format("You are out of %s!",thing));}
                          PlaySound(41);}}

else if (thing==("Coffee C")){if ((themix.ItemCount >=4)&&(Stand.InventoryQuantity[CoffeeC.ID]==0)){mixdeny();}
                          else {addrem.Text=String.Format("%d",coffee_c_remaining); addpic.NormalGraphic=11; 
                          if (coffee_c_remaining>0){gAdd.Visible=true;}
                          else if (coffee_c_remaining<=0){gAdd.Visible=false;TopUp("Can't add more!",String.Format("You are out of %s!",thing));}
                          PlaySound(41);}}

else if (thing==("Coffee D")){if ((themix.ItemCount >=4)&&(Stand.InventoryQuantity[CoffeeD.ID]==0)){mixdeny();}
                          else {addrem.Text=String.Format("%d",coffee_d_remaining); addpic.NormalGraphic=163; 
                          if (coffee_d_remaining>0){gAdd.Visible=true;}
                          else if (coffee_d_remaining<=0){gAdd.Visible=false; TopUp("Can't add more!",String.Format("You are out of %s!",thing));}
                          PlaySound(41);}}

else {PlaySound(60); Wait(5);}//None of the Above
}//END!


function AddIt() {//Called on "OK" (or Ingredient runout).
    if (gCook2.Visible==true){//==============---This is here because "AddIt" is called every time an item runs out.
      if (batch!=0){//Do nothing if servings aren't added.
         if (addpic.NormalGraphic==411){xMilk+=batch; if (Stand.InventoryQuantity[Milk.ID]==0)Stand.AddInventory(Milk);}
    else if (addpic.NormalGraphic==408){xChai+=batch; if (Stand.InventoryQuantity[Chai.ID]==0)Stand.AddInventory(Chai); }
    else if (addpic.NormalGraphic==409){xCocoa+=batch; if (Stand.InventoryQuantity[Cocoa.ID]==0)Stand.AddInventory(Cocoa); }
    else if (addpic.NormalGraphic==410){xSyrup+=batch; if (Stand.InventoryQuantity[Syrups.ID]==0)Stand.AddInventory(Syrups); }
    else if (addpic.NormalGraphic==1195){xSugar+=batch; if (Stand.InventoryQuantity[Sugar.ID]==0)Stand.AddInventory(Sugar); }
    else if (addpic.NormalGraphic==1211){xCreamcheese+=batch; if (Stand.InventoryQuantity[CreamCheese.ID]==0)Stand.AddInventory(CreamCheese); }
    else if (addpic.NormalGraphic==1214){xJelly+=batch; if (Stand.InventoryQuantity[Jelly.ID]==0)Stand.AddInventory(Jelly); }
    else if (addpic.NormalGraphic==1216){xPb+=batch; if (Stand.InventoryQuantity[Peanutbutter.ID]==0)Stand.AddInventory(Peanutbutter); }
    else if (addpic.NormalGraphic==1218){xLox+=batch; if (Stand.InventoryQuantity[Lox.ID]==0)Stand.AddInventory(Lox); }
    else if (addpic.NormalGraphic==1220){xCapers+=batch; if (Stand.InventoryQuantity[Capers.ID]==0)Stand.AddInventory(Capers); }
    else if (addpic.NormalGraphic==1222){xFlour+=batch; if (Stand.InventoryQuantity[Flour.ID]==0)Stand.AddInventory(Flour); }
    else if (addpic.NormalGraphic==1223){xYeast+=batch; if (Stand.InventoryQuantity[Yeast.ID]==0)Stand.AddInventory(Yeast); }
    else if (addpic.NormalGraphic==1226){xSalt+=batch; if (Stand.InventoryQuantity[Salt.ID]==0)Stand.AddInventory(Salt); }
    else if (addpic.NormalGraphic==1228){xButtermilk+=batch; if (Stand.InventoryQuantity[Buttermilk.ID]==0)Stand.AddInventory(Buttermilk); }
    else if (addpic.NormalGraphic==1539){xVittle+=batch; if (Stand.InventoryQuantity[Catfood.ID]==0)Stand.AddInventory(Catfood); }
    else if (addpic.NormalGraphic==1261){xRinse+=batch; if (Stand.InventoryQuantity[Rinse.ID]==0)Stand.AddInventory(Rinse); }
    else if (addpic.NormalGraphic==1262){xCrest+=batch; if (Stand.InventoryQuantity[Crest.ID]==0)Stand.AddInventory(Crest); }
    else if (addpic.NormalGraphic==7){xCoffee+=batch; if (Stand.InventoryQuantity[CoffeeA.ID]==0)Stand.AddInventory(CoffeeA); }
    else if (addpic.NormalGraphic==9){xCoffee+=batch; if (Stand.InventoryQuantity[CoffeeB.ID]==0)Stand.AddInventory(CoffeeB); }
    else if (addpic.NormalGraphic==11){xCoffee+=batch; if (Stand.InventoryQuantity[CoffeeC.ID]==0)Stand.AddInventory(CoffeeC); }
    else if (addpic.NormalGraphic==163){xCoffee+=batch; if (Stand.InventoryQuantity[CoffeeD.ID]==0)Stand.AddInventory(CoffeeD); }}
    PlaySound(28); gAdd.Visible=false;
    UpdateQuants();
    }
    else{}//Do nothing if gCook ain't visible.
}

function add_it_OnClick(GUIControl *control, MouseButton button){ AddIt(); }

function increase_mix_OnClick(GUIControl *control, MouseButton button){
    PlaySound(58);
    if (addpic.NormalGraphic==411){milk_remaining-=1; addrem.Text=String.Format("%d",milk_remaining);}
    else if (addpic.NormalGraphic==408){chai_remaining-=1; addrem.Text=String.Format("%d",chai_remaining);}
    else if (addpic.NormalGraphic==409){cocoa_remaining-=1; addrem.Text=String.Format("%d",cocoa_remaining);}
    else if (addpic.NormalGraphic==410){addrem.Text=("N/A");}
    else if (addpic.NormalGraphic==1195){sugar_remaining-=1; addrem.Text=String.Format("%d",sugar_remaining);}
    else if (addpic.NormalGraphic==1211){creamcheese_remaining-=1; addrem.Text=String.Format("%d",creamcheese_remaining);}
    else if (addpic.NormalGraphic==1214){jelly_remaining-=1; addrem.Text=String.Format("%d",jelly_remaining);}
    else if (addpic.NormalGraphic==1216){peanutbutter_remaining-=1; addrem.Text=String.Format("%d",peanutbutter_remaining);}
    else if (addpic.NormalGraphic==1218){lox_remaining-=1; addrem.Text=String.Format("%d",lox_remaining);}
    else if (addpic.NormalGraphic==1220){capers_remaining-=1; addrem.Text=String.Format("%d",capers_remaining);}
    else if (addpic.NormalGraphic==1222){flour_remaining-=1; addrem.Text=String.Format("%d",flour_remaining);}
    else if (addpic.NormalGraphic==1223){yeast_remaining-=1; addrem.Text=String.Format("%d",yeast_remaining);}
    else if (addpic.NormalGraphic==1226){salt_remaining-=1; addrem.Text=String.Format("%d",salt_remaining);}
    else if (addpic.NormalGraphic==1228){buttermilk_remaining-=1; addrem.Text=String.Format("%d",buttermilk_remaining);}
    else if (addpic.NormalGraphic==1539){catfood_remaining-=1; addrem.Text=String.Format("%d",catfood_remaining);}
    else if (addpic.NormalGraphic==1261){rinse_remaining-=1; addrem.Text=String.Format("%d",rinse_remaining);}
    else if (addpic.NormalGraphic==1262){crest_remaining-=1; addrem.Text=String.Format("%d",crest_remaining);}
    else if (addpic.NormalGraphic==7){coffee_a_remaining-=1; addrem.Text=String.Format("%d",coffee_a_remaining);}
    else if (addpic.NormalGraphic==9){coffee_b_remaining-=1; addrem.Text=String.Format("%d",coffee_b_remaining);}
    else if (addpic.NormalGraphic==11){coffee_c_remaining-=1; addrem.Text=String.Format("%d",coffee_c_remaining);}
    else if (addpic.NormalGraphic==163){coffee_d_remaining-=1; addrem.Text=String.Format("%d",coffee_d_remaining);}
    batch+=1; addtotal.Text=String.Format("%d",batch);
}
//======== END COOKING FUNCTIONS ====  //


function ThalesHunt(){

    if (player.Room==5){//Franklin
    Thales.ChangeRoom(player.Room, 0, (player.y+1)); Thales.Baseline=(Stand.y + 4); Thales.UnlockView();
    Thales.Walk(999, (Thales.y), eAnywhere);  SetGlobalInt(25, 1);}

    else if (player.Room==26){//Collins
    Thales.ChangeRoom(player.Room, 0, (player.y+1)); Thales.Baseline=(Stand.y + 4); Thales.UnlockView();
    Thales.Walk(999, (Thales.y), eAnywhere);  SetGlobalInt(25, 1);}

    if (player.Room==22){//13th
    Thales.ChangeRoom(player.Room, 0, (player.y+1)); Thales.Baseline=(Stand.y + 4); Thales.UnlockView();
    Thales.Walk(999, (Thales.y), eAnywhere);  SetGlobalInt(25, 1);}

}

int truque_gear;
//Kill zaniness ints
int mdkdir;
int mdkcntr;
int mdkreturn;
//Barista Ints
int barint;
int barkey;
int foam_added;
int watr_added;
int milk_added;
int syrp_added;
int coco_added;
//Toothbrushing Ints
int brushkey;

//R.E.A.!!!
function repeatedly_execute_always() {
    if (dName2.Text!=dName.Text){dName2.Text=dName.Text;}
    if ((dName2.Visible==true)&&(dName.Visible!=true)){dName2.Visible=false;}
    if ((dName2.Visible!=true)&&(dName.Visible==true)){dName2.Visible=true;}
    //Has to go above the "(gameover==false){" condition, because, well, the game is over when this is shown, I guess.
    if (gTruck.Visible==true){truque_gear++;
      if (truque_gear>=2){truque_gear=0;
        truquebg0.X+=2; if (truquebg0.X>=0){truquebg0.X=-459;}
        truquebg1.X+=4; if (truquebg1.X>=0){truquebg1.X=-1080;}
        if (GetGlobalInt(101)==78){the_truque.X-=1;}
        if (GetGlobalInt(101)==79){the_truque.X-=2;}
      }
    }

    if (gameover==false){

    if (gDebuggery.Visible==true){
      debuggery.Text=String.Format("queposition: %d  -  Customer: %s  -  maxque: %d[que(0): %s  -  que(1): %s  -  que(2): %s  -  que(3): %s  -  que(4): %s",queposition, Customer.Name, maxque, character[que[0]].Name, character[que[1]].Name, character[que[2]].Name, character[que[3]].Name, character[que[4]].Name);
      dbugtime.Text=String.Format("%2d:%2d[%2d:%2d[%d",milhour, minute, wakehour, wakeminute, wakeswitch);
    }

    //Toothbrushing
    if (gToothbrushing.Visible==true){
      if (brushesleft==15){brushkey=0;}
      if ((brushesleft>=1)&&(brushesleft<50)){
      if ((brushkey==0)&&(IsKeyPressed(eKeyRightArrow)==1)&&(IsKeyPressed(eKeyLeftArrow)==0)){brushkey=1;   toothbg.NormalGraphic++; brushesleft-=1;}//
      else if ((brushkey==1)&&(IsKeyPressed(eKeyLeftArrow)==1)&&(IsKeyPressed(eKeyRightArrow)==0)){brushkey=0;   toothbg.NormalGraphic++; brushesleft-=1;}
    }

       if ((brushesleft==0)&&(brusharrows.Graphic<=8230)){//Good!
            if (GetGlobalInt(1)==2){toothbg.NormalGraphic=9346;}//prevents mel bug
       aSound58.Play(); brushesleft=99; brusharrows.Animate(274, 0, 5, eRepeat);}//Arrow Anim
        if ((brushesleft>50)&&(brushesleft<999)){
          if ((GetGlobalInt(1)==1)&&(toothbg.NormalGraphic<8219)&&(IsKeyPressed(eKeyDownArrow)==1)){//Andrus
          toothbg.NormalGraphic++;}
          if ((GetGlobalInt(1)==2)&&(toothbg.NormalGraphic<9351)&&(IsKeyPressed(eKeyDownArrow)==1)){//Melanie
          toothbg.NormalGraphic++;}
          if ((GetGlobalInt(1)==1)&&(brushesleft>50)&&(toothbg.Graphic==8219)){//Andrus Spit: Good!
          aSound58.Play(); brusharrows.Visible=false; toothbg.Animate(275, 0, 8, eOnce);}
          if ((GetGlobalInt(1)==2)&&(brushesleft>50)&&(toothbg.Graphic>=9351)){//Melanie Spit: Good!
          aSound58.Play(); brusharrows.Visible=false; toothbg.Animate(275, 0, 8, eOnce); brushesleft=999; return;}}

          if ((toothbg.Graphic>=8227)&&(toothbg.Graphic<=8231)){toothbg.Animate(275, 0, 8, eOnce); return;}//malfunction

          if (toothbg.NormalGraphic==8232){donebrushing=true;}

    }

    //gBarista functions
    if (gBarista.Visible==true){
      if ((baraction.Graphic>=7855)&&(baraction.Graphic<=7874)){//Grind!
        if (IsKeyPressed(eKeyDownArrow)==1){barint++;
        if (barint>=2){barint=0; baraction.NormalGraphic++; aSound68.Play();
            if (baraction.NormalGraphic>=7875){Botch();}
            }}
        if ((baraction.Graphic>=7867)&&(baraction.Graphic<7875)&&(IsKeyPressed(eKeyDownArrow)!=1)){//Good!
        baristarrow.Animate(264, 6, 1, eRepeat);//Arrow Anim
        aSound58.Play(); baraction.NormalGraphic=7876; barint=0; barkey=0; barlist.NormalGraphic++;}//grind->tap
      }//End Grind
     if ((baraction.Graphic>=7876)&&(baraction.Graphic<=7891)){//Tap!
      if ((barkey==0)&&(IsKeyPressed(eKeyRightArrow)==1)&&(IsKeyPressed(eKeyLeftArrow)==0)){barkey=1; baraction.NormalGraphic++;}
      else if ((barkey==1)&&(IsKeyPressed(eKeyLeftArrow)==1)&&(IsKeyPressed(eKeyRightArrow)==0)){barkey=0; baraction.NormalGraphic++;}
      if (baraction.Graphic>=7891){//Good!
        baristarrow.Animate(264, 1, 1, eRepeat);//Arrow Anim
        aSound58.Play(); baraction.NormalGraphic=7892; barint=0; barkey=0; barlist.NormalGraphic++;}//tap->sweep
        }//End Tap
      if ((baraction.Graphic>=7892)&&(baraction.Graphic<=7915)){//Sweep!
          if (IsKeyPressed(eKeyRightArrow)==1){barint++;
          if (barint>=2){barint=0; baraction.NormalGraphic++;
            if (baraction.NormalGraphic>=7915){//Good!
            baristarrow.Animate(264, 2, 1, eRepeat);//Arrow Anim
            aSound58.Play(); baraction.NormalGraphic=7916; barint=0; barkey=0; barlist.NormalGraphic++;}//sweep->tamp
          }}}//End Sweep!
      if ((baraction.Graphic>=7916)&&(baraction.Graphic<=7939)){//Tamp!
          if (IsKeyPressed(eKeyDownArrow)==1){barint++;
          if (barint>=2){barint=0; baraction.NormalGraphic++;
              if (baraction.NormalGraphic>=7939){Botch();}}}//Too hard!
          if ((baraction.NormalGraphic>=7933)&&(baraction.NormalGraphic<7939)&&(IsKeyPressed(eKeyDownArrow)!=1)){//Good!
            baristarrow.Animate(264, 5, 1, eRepeat);//Arrow Anim
            aSound58.Play(); baraction.NormalGraphic=7940; barint=0; barkey=0; barlist.NormalGraphic++;}//tamp->twist
          }//End Tamp!
     if ((baraction.Graphic>=7940)&&(baraction.Graphic<=7949)){//Twist!
      if ((barkey==0)&&(IsKeyPressed(eKeyRightArrow)==1)&&(IsKeyPressed(eKeyLeftArrow)==0)){barkey=1; baraction.NormalGraphic++;}
      else if ((barkey==1)&&(IsKeyPressed(eKeyDownArrow)==1)&&(IsKeyPressed(eKeyUpArrow)==0)){barkey=2; baraction.NormalGraphic++;}
      else if ((barkey==2)&&(IsKeyPressed(eKeyLeftArrow)==1)&&(IsKeyPressed(eKeyRightArrow)==0)){barkey=3; baraction.NormalGraphic++;}
      else if ((barkey==3)&&(IsKeyPressed(eKeyUpArrow)==1)&&(IsKeyPressed(eKeyDownArrow)==0)){barkey=0; baraction.NormalGraphic++;}
      if (baraction.Graphic==7949){//Good!
        baristarrow.Animate(264, 3, 1, eRepeat);//Arrow Anim
        aSound58.Play(); baraction.NormalGraphic=7950; barint=0; barkey=0; barlist.NormalGraphic++;}//twist->lock
        }//End Twist
      if ((baraction.Graphic>=7950)&&(baraction.Graphic<=7974)){//Lock!
           if (baraction.Graphic<7966){//insert...
              if ((IsKeyPressed(eKeyLeftArrow)==1)&&(IsKeyPressed(eKeyUpArrow)==0)){barint++;
              if (barint>=2){barint=0; baraction.NormalGraphic++; barkey=0;}}}
          if (baraction.NormalGraphic>=7966){//Lock!
            if (barkey==0){barkey=1; baristarrow.Animate(264, 4, 1, eRepeat);}//Arrow Anim
            if ((IsKeyPressed(eKeyUpArrow)==1)&&(IsKeyPressed(eKeyLeftArrow)==0)){barint++;
            if (barint>=2){barint=0; baraction.NormalGraphic++;}}
          if (baraction.NormalGraphic==7974){//Good!
            baristarrow.Animate(264, 2, 1, eRepeat);//Arrow Anim
            aSound58.Play(); baraction.NormalGraphic=7975; barint=0; barkey=0; barlist.NormalGraphic++;}//lock->pour
          }}//End Lock!
      if ((baraction.Graphic>=7975)&&(baraction.Graphic<=7986)){//Pour!
          if (IsKeyPressed(eKeyDownArrow)==1){barint++;
          if (barint>=2){barint=0; baraction.NormalGraphic++;
            if (baraction.NormalGraphic>=7986){//Good!
            baristarrow.Animate(264, 3, 1, eRepeat);//Arrow Anim
            //aSound58.Play(); baraction.NormalGraphic=7987; barint=0; barkey=0; barlist.NormalGraphic++;}//pour->serve//Old
            aSound58.Play(); baraction.NormalGraphic=8098; barint=0; barkey=0;//pour->finish//New
            foam_added=0; watr_added=0; milk_added=0; syrp_added=0; coco_added=0;
            if (cocoa_remaining<=0)pour_coco.Visible=true;
            if (milk_remaining<=0){pour_foam.Visible=true; pour_milk.Visible=true;}
            if (player.InventoryQuantity[Syrups.ID]==0)pour_syrp.Visible=true;
            baristarrow.Animate(264, 6, 1, eRepeat);
            }
          }}}//End Pour!

      if ((baraction.Graphic>=8098)&&(baraction.Graphic<=8102)){//Finish the Drink
          if (IsKeyPressed(eKeyLeftArrow)==1){barint++;
            if (barint>=4){barint=0;
            if (barkey==0){barkey=1; baraction.NormalGraphic=8099; PlaySound(42);}
            else if (barkey==1){barkey=2; baraction.NormalGraphic=8100; PlaySound(42);}
            else if (barkey==2){barkey=3; baraction.NormalGraphic=8101; PlaySound(42);}
            else if (barkey==3){barkey=4; baraction.NormalGraphic=8102; PlaySound(42);}
            else if (barkey==4){}}}
          if (IsKeyPressed(eKeyRightArrow)==1){barint++;
            if (barint>=4){barint=0;
            if (barkey==2){barkey=1; baraction.NormalGraphic=8099; PlaySound(42);}
            else if (barkey==3){barkey=2; baraction.NormalGraphic=8100; PlaySound(42);}
            else if (barkey==4){barkey=3; baraction.NormalGraphic=8101; PlaySound(42);}
            else if (barkey==1){barkey=0; baraction.NormalGraphic=8098; PlaySound(42);}
            else if (barkey==0){}}}
          if (IsKeyPressed(eKeyUpArrow)==1){barint++;
            if (barint>=5){barint=0;
            if ((barkey==0)&&(milk_remaining>0)){baraction.Animate(268, 0, 1, eOnce); PlaySound(42); foam_added+=1;}//Add Foam
            if  (barkey==1){baraction.Animate(268, 1, 1, eOnce); PlaySound(42); watr_added+=1;}//Add Water
            if ((barkey==2)&&(milk_remaining>0)){baraction.Animate(268, 2, 1, eOnce); PlaySound(42); milk_added+=1;}//Add Milk
            if ((barkey==3)&&(player.InventoryQuantity[Syrups.ID]!=0)){baraction.Animate(268, 3, 1, eOnce); PlaySound(42); syrp_added+=1;}//Add Syrup
            if ((barkey==4)&&(cocoa_remaining>0)){baraction.Animate(268, 4, 1, eOnce); PlaySound(42); coco_added+=1;}//Add Cocoa
            }}
          if ((baraction.Graphic>=8098)&&(baraction.Graphic<=8102)){
          if (saleitem==("Americano")){
                      if (milk_added!=0){Botch();}if (syrp_added!=0){Botch();}if (coco_added!=0){Botch();}if (foam_added!=0){Botch();}//Wrong!
                      if (watr_added!=0){aSound58.Play(); baraction.NormalGraphic=8135; barint=0; barkey=0; barlist.NormalGraphic++; baristarrow.Animate(264, 2, 1, eRepeat);}}//Right!
          if (saleitem==("Latte")){
                      if (coco_added!=0){Botch();} if (foam_added>1){Botch();} if (watr_added!=0){Botch();}//Wrong!
                      if ((syrp_added!=0)&&(milk_added!=0)){aSound58.Play(); baraction.NormalGraphic=8135; barint=0; barkey=0; barlist.NormalGraphic++; baristarrow.Animate(264, 2, 1, eRepeat);}}//Right!
          if (saleitem==("Mocha")){
                      if (foam_added!=0){Botch();} if (watr_added!=0){Botch();} if (syrp_added!=0){Botch();}//Wrong!
                      if ((coco_added!=0)&&(milk_added!=0)){aSound58.Play(); baraction.NormalGraphic=8135; barint=0; barkey=0; barlist.NormalGraphic++; baristarrow.Animate(264, 2, 1, eRepeat);}}//Right!
          if (saleitem==("Cappuccino")){
                      if (coco_added!=0){Botch();} if (watr_added!=0){Botch();} if (syrp_added!=0){Botch();}//Wrong!
                      if ((milk_added!=0)&&(foam_added!=0)){aSound58.Play(); baraction.NormalGraphic=8135; barint=0; barkey=0; barlist.NormalGraphic++; baristarrow.Animate(264, 2, 1, eRepeat);}}//Right!
          }}//End Finish!

      if ((baraction.Graphic>=8135)&&(baraction.Graphic<=8141)){//Lid!
          pour_coco.Visible=false; pour_foam.Visible=false; pour_milk.Visible=false; pour_syrp.Visible=false; pour_watr.Visible=false;
          if (IsKeyPressed(eKeyDownArrow)==1){barint++;
            if (barint>=2){barint=0; baraction.NormalGraphic++;
              if (baraction.NormalGraphic>=8141){//Good!
              baristarrow.Animate(264, 3, 1, eRepeat);//Arrow Anim
              barint=0; barkey=0;
              aSound58.Play(); baraction.NormalGraphic=7987; barint=0; barkey=0; barlist.NormalGraphic++;//Lid->Serve!
            }
          }}}//End Pour!

      if ((baraction.Graphic>=7987)&&(baraction.Graphic<=7995)){//Serve!
          if (IsKeyPressed(eKeyLeftArrow)==1){barint++;
          if (barint>=2){barint=0; baraction.NormalGraphic++;
            if (baraction.NormalGraphic>=7995){//Good!
            baristarrow.NormalGraphic=7996;
            aSound58.Play(); baraction.NormalGraphic=7987; barint=0; barkey=0; barlist.NormalGraphic++;
            step3.NormalGraphic=5517; step3.MouseOverGraphic=5519;
            gBarista.Visible=false;
            //TopUp("Got it!","Keep going!");
            //InfoPop(6408, 20);
            makercheer.Animate(26, 6, 0, eOnce);
            PlaySound(41);
            happiness+=15; happyupdate();
            if (cd_seconds<=1)happiness+=30; happyupdate();
            if ((cd_seconds<=2)&&(cd_seconds>1))happiness+=20; happyupdate();
            if ((cd_seconds<=3)&&(cd_seconds>4))happiness+=10;
    //Math Prep
    int billsize=Random(5);
    //if (cheatbiking==true){billsize=5;}//Take this out - testing exactchange
    if (billsize==0){billvalue=5.00; cr_Paybill0.NormalGraphic=(Random(7)+9822); changebillslot[0]=1; cr_Paybill0.Visible=true; cr_Paybill1.Visible=false; cr_Paybill2.Visible=false; cr_Paybill3.Visible=false; cr_Paybill4.Visible=false;}
    if (billsize==1){billvalue=10.00; cr_Paybill0.NormalGraphic=(Random(7)+9806); changebillslot[0]=1; cr_Paybill0.Visible=true; cr_Paybill1.Visible=false; cr_Paybill2.Visible=false; cr_Paybill3.Visible=false; cr_Paybill4.Visible=false;}
    if (billsize==2){billvalue=20.00; cr_Paybill0.NormalGraphic=(Random(7)+9792); changebillslot[0]=1; cr_Paybill0.Visible=true; cr_Paybill1.Visible=false; cr_Paybill2.Visible=false; cr_Paybill3.Visible=false; cr_Paybill4.Visible=false;}
    if ((billsize==3)||(billsize==4)){
      billvalue=IntToFloat(FloatToInt(saleprice, eRoundUp));//Rounding Up
      payup();
      //cr_Paybill0.NormalGraphic=(Random(7)+9792);//Not sure how to assign graphics to the bills right now?
      //cr_Paybill1.Visible=false; cr_Paybill2.Visible=false; cr_Paybill3.Visible=false; cr_Paybill4.Visible=false;
    }
    if (billsize==5){//Exact Change
                     billvalue=saleprice;
                     exactchange();
                     //cr_Paybill0.NormalGraphic=(Random(7)+9792);//Not sure how to assign graphics to the bills right now?
                     //cr_Paybill1.Visible=false; cr_Paybill2.Visible=false; cr_Paybill3.Visible=false; cr_Paybill4.Visible=false;
        }
    changeclimbing=billvalue;
    ChangeAnswer=((billvalue)-(saleprice));//BRAGH!
    change_label.Text=String.Format("$%.2f - $%.2f = ?",billvalue, saleprice);
    //Go!
            gChange.Centre();
            //Cash Register fills it in automatically.
            if (upgrade_1.NormalGraphic==6083){changebox.Text=String.Format("%.2f",ChangeAnswer);}
              kachinging=true;
              //if (cheatbiking==false){gChange.Visible=true;}
              //else{kachinging=true;}
            //if (saleprice>0.00){gChange.Visible=true;}
            //else if (saleprice==0.00){checkout();}//No change needed for free shit.
            }
            }}}//End Serve!
    }//End Barista Stuff

    if ((readytosell==true)&&(Stand.Room!=player.Room)){readytosell=false;}

    if (gCredits.Visible==true){
      if ( ((GetGlobalInt(1)!=1)||(playstate_andrus!=3)) && (csprite.NormalGraphic!=9190)){csprite.NormalGraphic=9190;}
    }

    if ((GetGlobalInt(1)==2)&&(gStand_Gui.Visible==true)){
           if ((dayspassed==-1)&&(bmood.Text!=("Arriving tomorrow."))){bmood.Text=("Arriving tomorrow.");}
      else if (dayspassed==0){
        if ((hour<17)&&(bmood.Text!=("Arriving today."))){bmood.Text=("Arriving today.");}
        if ((mel_pickeduptoday==false)&&(hour>=17)&&(bmood.Text!=("Is Laura at home?"))){bmood.Text=("Is Laura at home?");}
        if ((mel_pickeduptoday==true)&&(hour>=17)&&(bmood.Text!=("Laura is at home."))){bmood.Text=("Laura is at home.");}
      }
        else if (dayspassed>0){
      if ((mel_lostcustody==true)&&(bmood.Text!=("Laura's with Seth, now."))){bmood.Text=("Laura's with Seth, now.");}
      if (mel_lostcustody==false){
        if ((mel_pickeduptoday==false)&&(hour>=8)&&(hour<17)&&(bmood.Text!=("Laura's at school."))){bmood.Text=("Laura's at school.");}
        if ((mel_pickeduptoday==false)&&(hour>=17)&&(bmood.Text!=("Is Laura at home?"))){bmood.Text=("Is Laura at home?");}
        if ((mel_pickeduptoday==true)&&(bmood.Text!=("Laura's at home."))){bmood.Text=("Laura's at home.");}
        if ((mel_pickeduptoday==false)&&(hour<8)&&(bmood.Text!=("Laura's at home."))){bmood.Text=("Laura's at home.");}
        }}
    }


    //mdk screenshaker
    //First making sure to go back to reg black
    if ((gStock.Visible==true)&&(georgeisnorthbound==true)&&(foldpapers.Visible==false)&&(gStock.BackgroundGraphic!=7807)){
      gStock.BackgroundGraphic=7807;}

    if ((gStock.Visible==true)&&(georgeisnorthbound==true)&&(foldpapers.Visible==true)){
      //mdkcntr++;}
    //if (mdkcntr>=2){
      mdkcntr=0;
      mdkreturn++;
        if (mdkreturn>=4){
          mdkreturn=0;
          podermover.X=40; podermover.Y=16;
          Walkbies.X=40; Walkbies.Y=16;
          putawaybg.X=40; putawaybg.Y=16;
          }
       else{
       mdkdir=Random(3);
       if (mdkdir==0){//Up
          podermover.Y-=1;
          Walkbies.Y-=1;
          putawaybg.Y-=1;}
       if (mdkdir==1){//Left
          podermover.X-=1;
          Walkbies.X-=1;
          putawaybg.X-=1;}
        if (mdkdir==2){//Down
          podermover.Y+=1;
          Walkbies.Y+=1;
          putawaybg.Y+=1;}
        if (mdkdir==1){//Right
          podermover.X-=1;
          Walkbies.X-=1;
          putawaybg.X-=1;}
      }
    }

    if (gUpgrade_m.Visible==true){Mouse.Visible=true;}
    if (gMachine.Visible==true){Mouse.Visible=true;}
    if (gBuyortalk.Visible==true){mouse.Visible=true;}
    if (gStand_Gui.Visible==true){mouse.Visible=true;}
    if (gPanel.Visible==true){mouse.Visible=true;}
    if (gItemDesc.Visible==true){mouse.Visible=true;}
    if (gBigbyMenu.Visible==true){mouse.Visible=true;}
    if (gMachine.Visible==true){mouse.Visible=true;}
    if (gFaganMenu.Visible==true){mouse.Visible=true;}
    if (gRoastierry.Visible==true){mouse.Visible=true;}
    if (gSuperstore.Visible==true){mouse.Visible=true;}
    if (gPawn.Visible==true){mouse.Visible=true;}
    if (gSavegame.Visible==true){mouse.Visible=true;}
    if (gLoadgame.Visible==true){mouse.Visible=true;}
    //if (gQuestion.Visible==true){mouse.Visible=false;}
    if (gQuestion.Visible==true){mouse.Visible=true;}//MouseQuestion

         musique=(music_slider.Value);
         if (musique<=17) SetMusicVolume(-3);
    else if ((musique>=18)&&(musique<=34))SetMusicVolume(-2);
    else if ((musique>=35)&&(musique<=50))SetMusicVolume(-1);
    else if ((musique>=51)&&(musique<=68))SetMusicVolume(0);
    else if ((musique>=69)&&(musique<=85))SetMusicVolume(1);
    else if ((musique>=86)&&(musique<=95))SetMusicVolume(2);
    else if (musique>=96)SetMusicVolume(3);
    SetMusicMasterVolume((music_slider.Value));

    if (ampm==0){
      if (hour==1){milhour=1;}
      if (hour==2){milhour=2;}
      if (hour==3){milhour=3;}
      if (hour==4){milhour=4;}
      if (hour==5){milhour=5;}
      if (hour==6){milhour=6;}
      if (hour==7){milhour=7;}
      if (hour==8){milhour=8;}
      if (hour==9){milhour=9;}
      if (hour==10){milhour=10;}
      if (hour==11){milhour=11;}
    if (hour==12){milhour=0;}}
    if (ampm==1){
      if (hour==1){milhour=13;}
      if (hour==2){milhour=14;}
      if (hour==3){milhour=15;}
      if (hour==4){milhour=16;}
      if (hour==5){milhour=17;}
      if (hour==6){milhour=18;}
      if (hour==7){milhour=19;}
      if (hour==8){milhour=20;}
      if (hour==9){milhour=21;}
      if (hour==10){milhour=22;}
      if (hour==11){milhour=23;}
      if (hour==12){milhour=12;}}

    //Text Speed
         if (txtspd_slider.Value<=65){readspeed=1; pbspeed=4; barspeed=200; txtspdimg.NormalGraphic=5015;}
    else if ((txtspd_slider.Value>=66)&&(txtspd_slider.Value<=132)){readspeed=4; pbspeed=1; barspeed=120; txtspdimg.NormalGraphic=5016;}
    else if (txtspd_slider.Value>=133){readspeed=7; pbspeed=0; barspeed=70; txtspdimg.NormalGraphic=5017;}

    //Notify Killer
    if (notification.Graphic==375){gNotify.Visible=false;}

    //==// Taking out these special "stopmoving" commands. Check "new poetry" for special exceptions to customer functionality //==//
    //if ((GetGlobalInt(52)==0) && (player.IsCollidingWithChar(Stand))&& (gStand_Gui.Visible==false)){ //Cart Is Set Up To Sell?
    ////Basinski:
    //if ((((Basinski.x - player.x) <= 30)&&(Basinski.x - player.x) >= 0)&&(Basinski.Room==player.Room)&&(GetGlobalInt(43)==1)&&(gDialog.Visible==true)){
    //Basinski.StopMoving();}
    ////Eddie:
    //if ((((Eddie.x - player.x) <= 10)&&(Eddie.x - player.x) >= -10)&&(Eddie.Room==player.Room)&&(player.Room!=31)&&(GetGlobalInt(411)==3)&&(gDialog.Visible==true)){
    //Eddie.StopMoving();}
    ////Suchin:
    //if ((((Suchin.x - player.x) <= 30)&&(Suchin.x - player.x) >= -2)&&(Suchin.Room==player.Room)&&(GetGlobalInt(26)==1)&&(gDialog.Visible==true)){
    //Suchin.StopMoving();}
    //The Three:
    //if (((TheThree.x - player.x) <= 20)&&((TheThree.x - player.x) >= -5)&&(TheThree.Room==player.Room)&&(GetGlobalInt(37)==1)&&(gDialog.Visible==true)){
    //TheThree.StopMoving();}
    ////Omar:
    //if (((Omar.x - player.x) <= 20)&&((Omar.x - player.x) >= -5)&&(Omar.Room==player.Room)&&(GetGlobalInt(442)==2)&&(gDialog.Visible==true)){
    //Omar.StopMoving();}
    ////Meadow: (Only once)
    //if (((Meadow.x - player.x) <= 20)&&((Meadow.x - player.x) >= -5)&&(Meadow.Room==player.Room)&&(isMeadowed==false)&&(gDialog.Visible==true)){
    //Meadow.StopMoving();}
    ////Vinny(NPC):
    ////if (GetGlobalInt(1)!=2){//Not Mel
    ////if (((Vinny.x - player.x) <= 20)&&((Vinny.x - player.x) >= -5)&&(Vinny.Room==player.Room)&&(npcvinny_offered==false)&&(gDialog.Visible==true)){
    ////Vinny.StopMoving();}}
    ////if (GetGlobalInt(1)==2){//Mel
    ////if (((Vinny.x - player.x) <= 20)&&((Vinny.x - player.x) >= -5)&&(Vinny.Room==player.Room)&&(mel_vinnyd==false)&&(gDialog.Visible==true)){
    ////Vinny.StopMoving();}}
    ////Thales
    //if (((Thales.x - player.x) <= 20)&&((Thales.x - player.x) >= -5)&&(Thales.Room==player.Room)&&(GetGlobalInt(25)==1)&&(gDialog.Visible==true)){
    //Thales.StopMoving();}
    ////Johns
    //if (((Johns.x - player.x) <= 20)&&((Johns.x - player.x) >= -5)&&(Johns.Room==player.Room)&&(GetGlobalInt(25)==1)&&(gDialog.Visible==true)){
    //Johns.StopMoving();}//Johns' Globals are the same as Thales' globals
    ////Winston
    //if (((Winston.x - player.x) <= 20)&&((Winston.x - player.x) >= -5)&&(Winston.Room==player.Room)&&(GetGlobalInt(56)==1)&&(gDialog.Visible==true)){
    //Winston.StopMoving();}
    ////Glenda
    //if (((Glenda.x - player.x) <= 20)&&((Glenda.x - player.x) >= -5)&&(Glenda.Room==player.Room)&&(glenda_puzzled==false)&&(gDialog.Visible==true)&&(player.Room!=18)){
    //Glenda.StopMoving();}
    //}

    //Itemrems
    if((saleitem==("Coffee"))||(saleitem==("Americano"))){itemremaining=upcoffee_remaining;}
    if(saleitem==("Georgetonian")) {itemremaining=paper_remaining;}
    if(saleitem==("Chai Tea")) {itemremaining=chai_remaining;}
    if(saleitem==("Pipeline Crest")) {itemremaining=crest_remaining;}
    if(saleitem==("Pipeline Rinse")) {itemremaining=rinse_remaining;}
    if(saleitem==("Hot Cocoa")) {itemremaining=cocoa_remaining;}
    if(saleitem==("Milk")) {itemremaining=milk_remaining;}
    if(saleitem==("Cappuccino")){ itemremaining=cappuccino_remaining;}
    if(saleitem==("Plain Bagel")) {itemremaining=bagel_plain_remaining;}
    if(saleitem==("Mocha")) {itemremaining=mocha_remaining;}
    if(saleitem==("Chai Latte")) {itemremaining=chailatte_remaining;}
    if(saleitem==("Latte")) {itemremaining=latte_remaining;}
    if(saleitem==("Hot Dog")) {
    if (hotdogs_remaining<=buns_remaining){itemremaining=hotdogs_remaining;}
    if (hotdogs_remaining>=buns_remaining){itemremaining=buns_remaining;}}

    //After the breakdown reveal, Show buttons
    if ((gBreakdown.Visible==true)&&(Reveal.Graphic==4595)){
    expense_btn.NormalGraphic=6141; expense_btn.MouseOverGraphic=6140;
    income_btn.NormalGraphic=6143; income_btn.MouseOverGraphic=6142;}

    if (GetGlobalInt(1)==1){//bigface coughing
    if ((gDialog.Visible==true)&&(DBG0.Graphic ==2184)&&(player.View==68)&&(player.Loop==0)){
    if (player.Frame==2){DBG1.NormalGraphic=5612;}
    if (player.Frame==3){DBG1.NormalGraphic=5613;}
    if (player.Frame==4){DBG1.NormalGraphic=5614;}
    if (player.Frame==5){DBG1.NormalGraphic=5615;}
    if (player.Frame==6){DBG1.NormalGraphic=5616;}
    if (player.Frame==7){DBG1.NormalGraphic=5615;}
    if (player.Frame>7){DBG1.NormalGraphic=52;}}
    else if ((gDialog.Visible==true)&&(DBG0.Graphic ==2184)&&(player.View==71)&&(player.Loop==3)){
    if (player.Frame==2){DBG1.NormalGraphic=5612;}
    if (player.Frame==3){DBG1.NormalGraphic=5613;}
    if (player.Frame==4){DBG1.NormalGraphic=5614;}
    if (player.Frame==5){DBG1.NormalGraphic=5615;}
    if (player.Frame==6){DBG1.NormalGraphic=5616;}
    if (player.Frame==7){DBG1.NormalGraphic=5615;}
    if (player.Frame>7){DBG1.NormalGraphic=52;}}
    //Andrus Restock Size Adjust
    if (gStock.Visible==true){
    if (putawayexample.Text.Length>=33){putawayexample.Font=5;}
    if ((putawayexample.Text.Length<33)&&(putawayexample.Text.Length>=10)){putawayexample.Font=3;}
    if (putawayexample.Text.Length<10){putawayexample.Font=3;}}}


    //walkscene
    if (gWalkscene.Visible==true){
    //  walkcounter++;
    //  if (walkcounter>=5){
    //    walkcounter=0;
        if (walkscene_direction==0){citybg.X-=1; foreground.X-=2;
                                    //if (foreground.X<=-3118){foreground.X=0;}}
                                    if (foreground.X<=-1559){foreground.X=0;}
                                    if (citybg.X<=-180){citybg.X=0;}}
        if (walkscene_direction==1){citybg.X+=1; foreground.X+=2;
                                     //if (citybg.X<=-360){citybg.X=0;}}
                                     if (foreground.X>=0){foreground.X=-1559;}
                                     if (citybg.X>=0){citybg.X=-200;}}
    //}
    }


    if ((melplot==1)&&(GetGlobalInt(1)==2)&&(dayofweek>=1)&&(milhour==17)&&(mel_pickeduptoday==false)){//Mel didn't pick up Laura: BAD MOM
    //Display("Declaring Melanie to be a bad mother by changing her global plot variable to a value of ninety nine.");
    melplot=99;}
    if ((melplot==1)&&(GetGlobalInt(1)==2)&&(dayofweek>=1)&&(milhour==17)&&(mel_pickeduptoday==true)){//Mel did pick up Laura: GUT MOM
    //Display("Declaring Melanie to be a good mother and increasing her global plot variable to a value of two.");
    melplot=2;}

    //////////  HUNGER CONQUEST!------------------------------ HUNGER CONQUEST!------//
    //NEW POETRY
    int pedestrianid;
    if (readytosell==true){
      while (pedestrianid<Game.CharacterCount){
      if ((pedestrianid!=12)&&(pedestrianid!=0)&&(pedestrianid!=1)&&(pedestrianid!=2)&&(pedestrianid!=3)){//Customer != Stand or PC
        if (((character[pedestrianid].x-player.x)<= 25)&&((character[pedestrianid].x-player.x)>=-5)&&(character[pedestrianid].Room==player.Room)){//Intersecting
          if ((hunger[pedestrianid]!=0)&&(character[pedestrianid].Moving==true)){//I'm Hungry
             bool worthwaiting=false;//If it's important enough, I'll wait in line.
                if (queposition<=maxque){worthwaiting=true; }
                else if (character[pedestrianid].GetProperty("willstopabovemaxcue")==1){worthwaiting=true;}
                if (worthwaiting==true){
                  que[queposition]=pedestrianid;
                  character[pedestrianid].StopMoving();
                  queposition+=1;//This might push the queposition over the maxcue, but that just means that people will walk by.
          }}

        }}
        pedestrianid++;
    }}


    }

          if (paycranked==true){
               paycranko++;
               if (paycranko>=1){
                 paycranko=0;
                       if (cr_Paybill0.X<30){
                        int diff=0;
                            if (cr_Paybill0.X<20){diff=10;}
                       else if (cr_Paybill0.X<25){diff=5;}
                       else if (cr_Paybill0.X<30){diff=1;}
                       //else if (cr_Paybill0.X<20){diff=10;}

                       cr_Paybill0.X+=diff;
                       cr_Paybill1.X+=FloatToInt((IntToFloat(diff)*1.25), eRoundNearest);
                       cr_Paybill2.X+=FloatToInt((IntToFloat(diff)*1.5), eRoundNearest);
                       cr_Paybill3.X+=FloatToInt((IntToFloat(diff)*1.75), eRoundNearest);
                       cr_Paybill4.X+=FloatToInt((IntToFloat(diff)*2.0), eRoundNearest);


                       int newdiff=FloatToInt((IntToFloat(diff)*2.0), eRoundNearest);
                       int o=0; while (o<9){gCashRegister.Controls[o+21].X+=newdiff+(Random(10)-5);
                       //gCashRegister.Controls[o+21].Visible=true; //Take this out!
                       o++;}

                       if (billclimbing<billvalue){
                         if (billclimbing<(billvalue-1.00)){billclimbing+=0.01; changeclimbing=billclimbing;}
                         else if (billclimbing<(billvalue-0.50)){billclimbing+=0.01; changeclimbing=billclimbing;}
                         else if (billclimbing<(billvalue-0.10)){billclimbing+=0.01; changeclimbing=billclimbing;}
                         else if (billclimbing<(billvalue-0.01)){billclimbing+=0.01; changeclimbing=billclimbing;}
                         else {billclimbing=billvalue; changeclimbing=billvalue;}
                       }
                       cr_Printleft.Text=String.Format("$%.2f[[[$%.2f[[[$%.2f",billclimbing,saleprice, changeclimbing);
                       cr_Printright.Text=String.Format("$%.2f[[[$%.2f[[[$%.2f",billclimbing,saleprice, changeclimbing);

                     }
            if (cr_Paybill0.X==30){
              paycranked=false;
              changeclimbing=billvalue;
              cr_Printleft.Text=String.Format("$%.2f[[[$%.2f[[[$%.2f",billvalue,saleprice, changeclimbing);
              cr_Printright.Text=String.Format("$%.2f[[[$%.2f[[[$%.2f",billvalue,saleprice, changeclimbing);
              if (upgrade_1.NormalGraphic==6083){gm_changeamt.Visible=true; gm_changeamt.Text=String.Format("Correct Change:[$%.2f",ChangeAnswer);}//Cash Register Upgraded
              //Display("cr_change0.X: %d[cr_change0.Y: %d[cr_change0.visible: %d",cr_change0.X, cr_change0.Y, cr_change0.Visible);
              //Display("Done paycranking!");
              }

            }
          }


          if (cranked==true){
            cranko++;
              if (cranko>=1){
                cranko=0;//Drawerslide
                //cr_Lock.NormalGraphic=9805;
                mouse.SaveCursorUntilItLeaves();
                mouse.Mode=eModeLookat;
                mouse.ChangeModeGraphic(eModeKeys, 9802);
                     //if (cr_Drawer.Y<-130){cr_Drawer.Y+=10; cr_Lock.Y+=10;}
                //else if (cr_Drawer.Y<-140){cr_Drawer.Y+=5; cr_Lock.Y+=5;}
                //else if (cr_Drawer.Y<-145){cr_Drawer.Y+=2; cr_Lock.Y+=2;}
                //else if (cr_Drawer.Y<-147){cr_Drawer.Y+=1; cr_Lock.Y+=1;}
                //else if (cr_Drawer.Y==-147){cranked=false; mouse.Mode=eModeLookat;}

               if ((cr_Drawer.Y<-60)&&(drawerbounced==false)){
                        int diff=0;
                            if (cr_Drawer.Y<-90){diff=14;}
                       else if (cr_Drawer.Y<-80){diff=7;}
                       else if (cr_Drawer.Y<-70){diff=4;}
                       else if (cr_Drawer.Y<-60){diff=2;
                                             if ((cr_Drawer.Y>=-62)&&(drawerbounced==false)){
                                               //Display("Setting \"drawerbounced\" to true.");
                                               aRegclick.Play();
                                               drawerbounced=true;
                                               }
                                             }

                       cr_Drawer.Y+=diff;
                       cr_Lock.Y+=diff;
                       cr_Cashclip.Y+=diff;
                       cr_20.Y+=diff;
                       cr_10.Y+=diff;
                       cr_5.Y+=diff;
                       cr_1.Y+=diff;
                       cr_drawerQ.Y+=diff;
                       cr_drawerD.Y+=diff;
                       cr_drawerN.Y+=diff;
                       cr_drawerP.Y+=diff;
                       //if (o==cr_1.ID){cr_Drawer.Y+=diff;}//Quarters
                       //if (o==cr_1.ID){cr_Drawer.Y+=diff;}//Dimes
                       //if (o==cr_1.ID){cr_Drawer.Y+=diff;}//Nickles
                       //if (o==cr_1.ID){cr_Drawer.Y+=diff;}//Pennies
                     }
               if ((cr_Drawer.Y>=-74)&&(drawerbounced==true)){
                            int diff=0;
                            if (cr_Drawer.Y>-70){diff=-2;}
                       else if (cr_Drawer.Y>=-74){diff=-1;
                                           if ((cr_Drawer.Y<=-74)&&(drawerisslid==false)){
                                                        drawerisslid=true;
                                                        //Display("Setting \"drawerisslid\" to true.");
                                                        }
                                           }

                       cr_Drawer.Y+=diff;
                       cr_Lock.Y+=diff;
                       cr_Cashclip.Y+=diff;
                       cr_20.Y+=diff;
                       cr_10.Y+=diff;
                       cr_5.Y+=diff;
                       cr_1.Y+=diff;
                       cr_drawerQ.Y+=diff;
                       cr_drawerD.Y+=diff;
                       cr_drawerN.Y+=diff;
                       cr_drawerP.Y+=diff;

                     }

                //if ((cr_Drawer.Y==-74)&&(drawerisslid==true)){
                  if ((drawerisslid==true)&&(cranked==true)){
                  cranked=false; mouse.Mode=eModeLookat;
                  paycranked=true;
                  //aRegclick.Play();
                }
              }
          }


          if (donecranked==true){
            cr_Printleft.Text=("");
            cr_Printright.Text=("");
            donecranko++;
              if (donecranko>=1){
                donecranko=0;//doneslide
             if ((cr_Drawer.Y>-308)){
                        int diff=0;
                            if (cr_Drawer.Y<250){diff=-10;}
                       else if (cr_Drawer.Y<-280){diff=-5;}
                       else if (cr_Drawer.Y<-300){diff=-2;}
                       else if (cr_Drawer.Y<-308){diff=-1;}

                       cr_Drawer.Y+=diff;
                       cr_Lock.Y+=diff;
                       cr_Cashclip.Y+=diff;
                       cr_20.Y+=diff;
                       cr_10.Y+=diff;
                       cr_5.Y+=diff;
                       cr_1.Y+=diff;
                       cr_drawerQ.Y+=diff;
                       cr_drawerD.Y+=diff;
                       cr_drawerN.Y+=diff;
                       cr_drawerP.Y+=diff;
                       if (cr_Drawer.Y<=-308){aRegclick.Play();}
                     }
             else if (cr_Left.X>-120){
                        int diff=0;
                            if (cr_Left.X>-80){diff=-14;}
                       else if (cr_Left.X>-95){diff=-7;}
                       else if (cr_Left.X>-110){diff=-4;}
                       else if (cr_Left.X>-120){diff=-2;}

                       cr_Left.X+=diff;
                       cr_Right.X-=diff;
                       cr_Bottom.Y-=diff;

                       diff=FloatToInt((IntToFloat(diff)*2.0), eRoundNearest);
                       cr_change0.Y+=diff;
                       cr_change1.Y+=diff;
                       cr_change2.Y+=diff;
                       cr_change3.Y+=diff;
                       cr_change4.Y+=diff;
                       cr_change5.Y+=diff;
                       cr_change6.Y+=diff;
                       cr_change7.Y+=diff;
                       cr_change8.Y+=diff;
                       cr_Paybill0.Y+=diff;
                       cr_Paybill1.Y+=diff;
                       cr_Paybill2.Y+=diff;
                       cr_Paybill3.Y+=diff;
                       cr_Paybill4.Y+=diff;
                       }
                       else{
                         gCashRegister.Visible=false;
                         donecranked=false;
                         mouse.Visible=false;
                         exacting=false;
                         int o=0; while (o<5){//clearing billslots
                            changebillslot[o]=0;
                            o++;
                            }
                        o=0; while (o<9){//clearing changeslots
                            //changeslot[o]=0;//Condition-Dependent
                            // gCashRegister.Controls[(changeslot-21)].X=-102;
                            Button *changemove = gCashRegister.Controls[o+21].AsButton;
                          changemove.Visible=false;//Invisible by default
                          changeslot[o]=0;
                          changemove.X=-50;
                          o++;
                        }
                       }}
          }

      if (mouse.Mode==eModeKeys){
        GUIControl *theControl = GUIControl.GetAtScreenXY(mouse.x, mouse.y);
        if ((theControl == cr_Lock)&&(mouse.x>150)&&(mouse.x<170)){
              if ((mouse.IsButtonDown(eMouseLeft)==true)&&(cranked==false)){
                cranked=true;
                if (GetGlobalInt(1)==1){aRegister3a.Play();}
                if (GetGlobalInt(1)==2){aRegister3b.Play();}
                if (GetGlobalInt(1)==3){aRegister3c.Play();}
                }
              else {
              mouse.SaveCursorUntilItLeaves();
              mouse.ChangeModeGraphic(eModeKeys, 9802);}
        }
        else {mouse.ChangeModeGraphic(eModeKeys, 9801);}
    }

    if (changebillslot[4]>0){
      cr_20.Visible=false;
      cr_10.Visible=false;
      cr_5.Visible=false;
      cr_1.Visible=false;
      }
    else {
      cr_20.Visible=true;
      cr_10.Visible=true;
      cr_5.Visible=true;
      cr_1.Visible=true;
    }
    if (changeslot[8]>0){
      cr_drawerQ.Visible=false;
      cr_drawerD.Visible=false;
      cr_drawerN.Visible=false;
      cr_drawerP.Visible=false;
      }
    else {
      cr_drawerQ.Visible=true;
      cr_drawerD.Visible=true;
      cr_drawerN.Visible=true;
      cr_drawerP.Visible=true;
    }

    if (cr_Lock.Graphic==9948){//End of first drop anim
      cr_Lock.NormalGraphic=9804;
      cr_Lock.MouseOverGraphic=9887;
    }
    if (cr_Lock.Graphic==9948){//End of second drop anim
      cr_Lock.NormalGraphic=9805;
      cr_Lock.MouseOverGraphic=9805;
    }

    //if ((Stack.PreviousRoom==5)&&(Stack.Room!=5)){Display("Stack has changed rooms!");}

    if ((gMake.Visible==true)&&(step1.Graphic==5517)&&(mouse.Visible==false)){mouse.Visible=true;}

}//End R.E.A.




function RemoveBoxItem(String nameofentry) {
int index;
   while (index < topicbox.ItemCount) {
      if (topicbox.Items[index].CompareTo(nameofentry) == 0) topicbox.RemoveItem(index);
      else index++;
      }
}


int dreampull_counter;
//export CoffeePriceS, CoffeePriceA, CoffeePriceB, CoffeePriceC, CoffeePriceD;
//BEGIN THE REPEX.
function repeatedly_execute() {
if (gameover==false){

//TalkHang Pre-emption::::::::::
if (topicbox.Contains("Collins District")){RemoveBoxItem("Collins District");}
if (topicbox.Contains("Catacombs")){RemoveBoxItem("Catacombs");}
if (topicbox.Contains("Downtown")){RemoveBoxItem("Downtown");}
if (topicbox.Contains("5th and Franklin")){RemoveBoxItem("5th and Franklin");}
if (topicbox.Contains("Florin's Gate Park")){RemoveBoxItem("Florin's Gate Park");}
if (topicbox.Contains("The Collins District")){RemoveBoxItem("The Collins District");}
if (topicbox.Contains("Crown Card")){RemoveBoxItem("Crown Card");}
if (topicbox.Contains("Trade")){RemoveBoxItem("Trade");}
if (topicbox.Contains("Seany O'Fagan's")){RemoveBoxItem("Seany O'Fagan's");}
if (topicbox.Contains("Palace Night")){RemoveBoxItem("Palace Night");}
if (topicbox.Contains("House of Cass")){RemoveBoxItem("House of Cass");}
if (topicbox.Contains("Catacombs Cooking Staff")){RemoveBoxItem("Catacombs Cooking Staff");}
if (topicbox.Contains("Kerchek's Reunion Story")){RemoveBoxItem("Kerchek's Reunion Story");}
if (topicbox.Contains("Rebecca")){RemoveBoxItem("Rebecca");}
if (topicbox.Contains("Kerchek's Reunion Story")){RemoveBoxItem("Kerchek's Reunion Story");}

if (topicbox.Contains("Georgetown Roastierry")){RemoveBoxItem("Georgetown Roastierry"); boxadd("The Georgetown Roastierry");}

//Maxcue adjustus
if (rep<=0){maxque=1;}
if ((rep>=1)&&(rep<=10)){maxque=2;}
if ((rep>=11)&&(rep<=20)){maxque=3;}
if ((rep>=21)&&(rep<=30)){maxque=4;}
if ((rep>=31)&&(rep<=40)){maxque=5;}
if ((rep>=41)&&(rep<=50)){maxque=6;}
if ((rep>=51)&&(rep<=60)){maxque=7;}
if ((rep>=61)&&(rep<=70)){maxque=8;}
if ((rep>=71)&&(rep<=80)){maxque=9;}
if ((rep>=81)&&(rep<=90)){maxque=9;}
if (rep>=91){maxque=9;}


//Want to fall back asleep....
if (gBadream.Visible==true){dreampull_counter++;
   if (dreampull_counter>=3){
    dreampull_counter=0;
    if (mouse.x>100){mouse.SetPosition(mouse.x-2, mouse.y);}
    if (mouse.x<60){mouse.SetPosition(mouse.x+2, mouse.y);}
    if (mouse.y<55){mouse.SetPosition(mouse.x, mouse.y+2);}
    if (mouse.y>56){mouse.SetPosition(mouse.x, mouse.y-2);}
    
    if (mouse.x>160){mouse.SetPosition(mouse.x-3, mouse.y);}
    if (mouse.x<10){mouse.SetPosition(mouse.x+3, mouse.y);}
    if (mouse.y<10){mouse.SetPosition(mouse.x, mouse.y+3);}
    if (mouse.y>150){mouse.SetPosition(mouse.x, mouse.y-3);}
}}

if ((donebrushing==true)&&(gToothbrushing.Visible==true)&&(toothbg.NormalGraphic==8232)){
    FadeOut(50); gToothbrushing.Visible=false; BreakItDown(); Wait(5); FadeIn(10); Mouse.Visible=true;}

if ((gBonus.Visible==false)&&(gGameover.Visible==false)&&(gBreakdown.Visible==false)&&(gStock.Visible==false)){
//Attempting to isolate special screens and prevent hang-ups by doing this step^^^

//if ((gBreakdown.Visible==true)&&(Reveal.Graphic==4595)){Reveal.

if (gRaxbymenu.Visible==true){rax_price.Text=String.Format("$%.2f",raxtotal);}

if (IsTimerExpired(18)==1){info_image.Visible=true; SetTimer(17, 80);}
if (IsTimerExpired(17)==1){InfoStop();}

if (info_anim.NormalGraphic==375){gInfo.Visible=false;}
if (info_anim.NormalGraphic==375){gInfo.Visible=false;}

if ((GetGlobalInt(11)==1)&&(player.Animating!=true)){player.LockViewFrame(31, 0, 0);}

if (Menu.ItemCount==0){dots=(" ");}else{
if (dice==14){dots=String.Format("%s",Menu.Items[14]);}
if (dice==13){dots=String.Format("%s",Menu.Items[13]);}
if (dice==12){dots=String.Format("%s",Menu.Items[12]);}
if (dice==11){dots=String.Format("%s",Menu.Items[11]);}
if (dice==10){dots=String.Format("%s",Menu.Items[10]);}
if (dice==9){dots=String.Format("%s",Menu.Items[9]);}
if (dice==8){dots=String.Format("%s",Menu.Items[8]);}
if (dice==7){dots=String.Format("%s",Menu.Items[7]);}
if (dice==6){dots=String.Format("%s",Menu.Items[6]);}
if (dice==5){dots=String.Format("%s",Menu.Items[5]);}
if (dice==4){dots=String.Format("%s",Menu.Items[4]);}
if (dice==3){dots=String.Format("%s",Menu.Items[3]);}
if (dice==2){dots=String.Format("%s",Menu.Items[2]);}
if (dice==1){dots=String.Format("%s",Menu.Items[1]);}
if (dice==0){if (Menu.ItemCount==0){} else {dots=String.Format("%s",Menu.Items[0]);}}}


//Shortening the text for "itemprice" relies on getting the text from a String first
//if (itemprice.Length<=6){itemprice.Font=3;}
//if (itemprice.Length>6){itemprice.Font=0;}
  
repmod = (IntToFloat(rep) * (0.01));

lockup.Baseline=(Stand.Baseline+1);

if ((GetGlobalInt(1)==1)&&(paper_remaining!=0)){Stand.LockView(39);
           if ((paper_remaining>=1)&&(paper_remaining<=5)){Stand.LockViewFrame(39, 3, 1);}
         if ((paper_remaining>=6)&&(paper_remaining<=10)){Stand.LockViewFrame(39, 2, 1);}
       if ((paper_remaining>=11)&&(paper_remaining<=15)){Stand.LockViewFrame(39, 1, 1);}
       if (paper_remaining>=16){Stand.LockViewFrame(39, 0, 1);}}
if ((GetGlobalInt(1)==1)&&(paper_remaining==0)){Stand.LockView(38);}

//=================  MATHS =======================

//Average Time Calculations:
if (times_done!=0){avg_time=(total_time / times_done);}
if (times_done!=0){avg_miliseconds = (avg_time - ((avg_time/60)*60));}
if (times_done!=0){//avg_seconds = ((avg_time / 60)-((avg_time/60)*60));}//old
avg_seconds = (avg_time / 60);}

if (upCoffee == ("S")){upcoffee_remaining=coffee_s_remaining;}
if (upCoffee == ("A")){upcoffee_remaining=coffee_a_remaining;}
if (upCoffee == ("B")){upcoffee_remaining=coffee_b_remaining;}
if (upCoffee == ("C")){upcoffee_remaining=coffee_c_remaining;}
if (upCoffee == ("D")){upcoffee_remaining=coffee_d_remaining;}

if (upcoffee_remaining>=milk_remaining){
cappuccino_remaining=milk_remaining;
latte_remaining=milk_remaining;}
if (upcoffee_remaining<milk_remaining){
latte_remaining=upcoffee_remaining;
cappuccino_remaining=upcoffee_remaining;}

if ((upcoffee_remaining<=milk_remaining)&&(upcoffee_remaining<=cocoa_remaining)){
mocha_remaining=upcoffee_remaining;}
if ((milk_remaining<=upcoffee_remaining)&&(milk_remaining<=cocoa_remaining)){
mocha_remaining=milk_remaining;}
if ((cocoa_remaining<=upcoffee_remaining)&&(cocoa_remaining<=milk_remaining)){
mocha_remaining=milk_remaining;}

coffeeGross_total=(CoffeeGrossA + CoffeeGrossB + CoffeeGrossC + CoffeeGrossD + CoffeeGrossS);
coffeeSoldTotal=(CoffeeSoldA+CoffeeSoldB+CoffeeSoldC+CoffeeSoldD+CoffeeSoldS);

if (purchased_coffeeA!=0){CoffeeCostA = ((spent_coffeeA) / (IntToFloat(purchased_coffeeA)));}
CoffeeProfitA = CoffeePriceA - CoffeeCostA;
if (CoffeePriceA>0.00){price_coffeeA.Text=String.Format("$%.2f",CoffeePriceA);}
if (CoffeePriceA<=0.00){price_coffeeA.Text=("FREE");}
cost_coffeeA.Text=String.Format("$%.2f",CoffeeCostA);
profit_coffeeA.Text=String.Format("$%.2f",CoffeeProfitA);
rem_coffeeA.Text=String.Format("%d",coffee_a_remaining);
sold_coffeeA.Text=String.Format("%d",CoffeeSoldA);
net_coffeeA.Text=String.Format("$%.2f",CoffeeNetA);
gross_coffeeA.Text=String.Format("$%.2f",CoffeeGrossA);

if (purchased_coffeeB!=0){CoffeeCostB = ((spent_coffeeB) / (IntToFloat(purchased_coffeeB)));}
CoffeeProfitB = CoffeePriceB - CoffeeCostB;
if (CoffeePriceB>0.00){price_coffeeB.Text=String.Format("$%.2f",CoffeePriceB);}
if (CoffeePriceB<=0.00){price_coffeeB.Text=("FREE");}
cost_coffeeB.Text=String.Format("$%.2f",CoffeeCostB);
profit_coffeeB.Text=String.Format("$%.2f",CoffeeProfitB);
rem_coffeeB.Text=String.Format("%d",coffee_b_remaining);
sold_coffeeB.Text=String.Format("%d",CoffeeSoldB);
net_coffeeB.Text=String.Format("$%.2f",CoffeeNetB);
gross_coffeeB.Text=String.Format("$%.2f",CoffeeGrossB);

if (purchased_coffeeC!=0){CoffeeCostC = ((spent_coffeeC) / (IntToFloat(purchased_coffeeC)));}
CoffeeProfitC = CoffeePriceC - CoffeeCostC;
price_coffeeC.Text=String.Format("$%.2f",CoffeePriceC);
if (CoffeePriceC>0.00){price_coffeeC.Text=String.Format("$%.2f",CoffeePriceC);}
if (CoffeePriceC<=0.00){price_coffeeC.Text=("FREE");}
cost_coffeeC.Text=String.Format("$%.2f",CoffeeCostC);
profit_coffeeC.Text=String.Format("$%.2f",CoffeeProfitC);
rem_coffeeC.Text=String.Format("%d",coffee_c_remaining);
sold_coffeeC.Text=String.Format("%d",CoffeeSoldC);
net_coffeeC.Text=String.Format("$%.2f",CoffeeNetC);
gross_coffeeC.Text=String.Format("$%.2f",CoffeeGrossC);

if (purchased_coffeeD!=0){CoffeeCostD = ((spent_coffeeD) / (IntToFloat(purchased_coffeeD)));}
CoffeeProfitD = CoffeePriceD - CoffeeCostD;
if (CoffeePriceD>0.00){price_coffeeD.Text=String.Format("$%.2f",CoffeePriceD);}
if (CoffeePriceD==0.00){price_coffeeD.Text=("FREE");}
cost_coffeeD.Text=String.Format("$%.2f",CoffeeCostD);
profit_coffeeD.Text=String.Format("$%.2f",CoffeeProfitD);
rem_coffeeD.Text=String.Format("%d",coffee_d_remaining);
sold_coffeeD.Text=String.Format("%d",CoffeeSoldD);
net_coffeeD.Text=String.Format("$%.2f",CoffeeNetD);
gross_coffeeD.Text=String.Format("$%.2f",CoffeeGrossD);

if (purchased_coffeeS!=0){CoffeeCostS = ((spent_coffeeS) / (IntToFloat(purchased_coffeeS)));}
CoffeeProfitS = CoffeePriceS - CoffeeCostS;
if (CoffeePriceS>0.00){price_coffeeS.Text=String.Format("$%.2f",CoffeePriceS);}
if (CoffeePriceS<=0.00){price_coffeeS.Text=("FREE");}
cost_coffeeS.Text=String.Format("$%.2f",CoffeeCostS);
profit_coffeeS.Text=String.Format("$%.2f",CoffeeProfitS);
rem_coffeeS.Text=String.Format("$%.2f",coffee_s_remaining);
sold_coffeeS.Text=String.Format("$%.2f",CoffeeSoldS);

if (purchased_chai!=0){ChaiCost = ((spent_chai) / (IntToFloat(purchased_chai)));}
ChaiProfit = ChaiPrice - ChaiCost;
if (ChaiPrice>0.00){price_chai.Text=String.Format("$%.2f",ChaiPrice);}
if (ChaiPrice<=0.00){price_chai.Text=("FREE");}
cost_chai.Text=String.Format("$%.2f",ChaiCost);
profit_chai.Text=String.Format("$%.2f",ChaiProfit);
rem_chai.Text=String.Format("%d",chai_remaining);
sold_chai.Text=String.Format("%d",ChaiSold);
net_chai.Text=String.Format("$%.2f",ChaiNet);
gross_chai.Text=String.Format("$%.2f",ChaiGross);

if (upCoffee==("S")){AmericanoCost = CoffeeCostS; rem_americano.Text=String.Format("%d",coffee_s_remaining);}
if (upCoffee==("A")){AmericanoCost = CoffeeCostA; rem_americano.Text=String.Format("%d",coffee_a_remaining);}
if (upCoffee==("B")){AmericanoCost = CoffeeCostB; rem_americano.Text=String.Format("%d",coffee_b_remaining);}
if (upCoffee==("C")){AmericanoCost = CoffeeCostC; rem_americano.Text=String.Format("%d",coffee_c_remaining);}
if (upCoffee==("D")){AmericanoCost = CoffeeCostD; rem_americano.Text=String.Format("%d",coffee_d_remaining);}
AmericanoProfit = AmericanoPrice - AmericanoCost;
if (AmericanoPrice>0.00){price_americano.Text=String.Format("$%.2f",AmericanoPrice);}
if (AmericanoPrice<=0.00){price_americano.Text=("FREE");}
cost_americano.Text=String.Format("$%.2f",AmericanoCost);
profit_americano.Text=String.Format("$%.2f",AmericanoProfit);
sold_americano.Text=String.Format("%d",AmericanoSold);
net_americano.Text=String.Format("$%.2f",AmericanoNet);
gross_americano.Text=String.Format("$%.2f",AmericanoGross);

if (upCoffee==("S")){LatteCost = (CoffeeCostS+MilkCost);}
if (upCoffee==("A")){LatteCost = (CoffeeCostA+MilkCost);}
if (upCoffee==("B")){LatteCost = (CoffeeCostB+MilkCost);}
if (upCoffee==("C")){LatteCost = (CoffeeCostC+MilkCost);}
if (upCoffee==("D")){LatteCost = (CoffeeCostD+MilkCost);}
rem_latte.Text=String.Format("%d",latte_remaining);
LatteProfit = LattePrice - LatteCost;
if (LattePrice>0.00){price_latte.Text=String.Format("$%.2f",LattePrice);}
if (LattePrice<=0.00){price_latte.Text=("FREE");}
cost_latte.Text=String.Format("$%.2f",LatteCost);
profit_latte.Text=String.Format("$%.2f",LatteProfit);
sold_latte.Text=String.Format("%d",LatteSold);
net_latte.Text=String.Format("$%.2f",LatteNet);
gross_latte.Text=String.Format("$%.2f",LatteGross);

ChailatteCost = ((MilkCost)+(ChaiCost));
if (chai_remaining>=milk_remaining){chailatte_remaining = chai_remaining;}
if (chai_remaining<milk_remaining){chailatte_remaining = milk_remaining;}
ChailatteProfit = ChailattePrice - ChailatteCost;
if (ChailattePrice>0.00){price_chailatte.Text=String.Format("$%.2f",ChailattePrice);}
if (ChailattePrice<=0.00){price_latte.Text=("FREE");}
cost_chailatte.Text=String.Format("$%.2f",ChailatteCost);
profit_chailatte.Text=String.Format("$%.2f",ChailatteProfit);
rem_chailatte.Text=String.Format("%d",chailatte_remaining);
sold_chailatte.Text=String.Format("%d",ChailatteSold);
net_chailatte.Text=String.Format("$%.2f",ChailatteNet);
gross_chailatte.Text=String.Format("$%.2f",ChailatteGross);

if (upCoffee==("S")){MochaCost = ((CoffeeCostS)+(MilkCost)+(CocoaCost));}
if (upCoffee==("A")){MochaCost = ((CoffeeCostA)+(MilkCost)+(CocoaCost));}
if (upCoffee==("B")){MochaCost = ((CoffeeCostB)+(MilkCost)+(CocoaCost));}
if (upCoffee==("C")){MochaCost = ((CoffeeCostC)+(MilkCost)+(CocoaCost));}
if (upCoffee==("D")){MochaCost = ((CoffeeCostD)+(MilkCost)+(CocoaCost));}
MochaProfit = MochaPrice - MochaCost;
rem_mocha.Text=String.Format("%d",mocha_remaining);
if (MochaPrice>0.00){price_mocha.Text=String.Format("$%.2f",MochaPrice);}
if (MochaPrice<=0.00){price_mocha.Text=("FREE");}
cost_mocha.Text=String.Format("$%.2f",MochaCost);
profit_mocha.Text=String.Format("$%.2f",MochaProfit);
sold_mocha.Text=String.Format("%d",MochaSold);
net_mocha.Text=String.Format("$%.2f",MochaNet);
gross_mocha.Text=String.Format("$%.2f",MochaGross);

if (upCoffee==("S")){CappuccinoCost = ((CoffeeCostS)+(MilkCost));}
if (upCoffee==("A")){CappuccinoCost = ((CoffeeCostA)+(MilkCost));}
if (upCoffee==("B")){CappuccinoCost = ((CoffeeCostB)+(MilkCost));}
if (upCoffee==("C")){CappuccinoCost = ((CoffeeCostC)+(MilkCost));}
if (upCoffee==("D")){CappuccinoCost = ((CoffeeCostD)+(MilkCost));}
rem_cappuccino.Text=String.Format("%d",cappuccino_remaining);
CappuccinoProfit = CappuccinoPrice - CappuccinoCost;
if (CappuccinoPrice>0.00){price_cappuccino.Text=String.Format("$%.2f",CappuccinoPrice);}
if (CappuccinoPrice<=0.00){price_cappuccino.Text=("FREE");}
cost_cappuccino.Text=String.Format("$%.2f",CappuccinoCost);
profit_cappuccino.Text=String.Format("$%.2f",CappuccinoProfit);
sold_cappuccino.Text=String.Format("%d",CappuccinoSold);
net_cappuccino.Text=String.Format("$%.2f",CappuccinoNet);
gross_cappuccino.Text=String.Format("$%.2f",CappuccinoGross);

if (purchased_cocoa!=0){CocoaCost = ((spent_cocoa) / (IntToFloat(purchased_cocoa)));}
CocoaProfit = CocoaPrice - CocoaCost;
if (CocoaPrice>0.00){price_cocoa.Text=String.Format("$%.2f",CocoaPrice);}
if (CocoaPrice<=0.00){price_cocoa.Text=("FREE");}
cost_cocoa.Text=String.Format("$%.2f",CocoaCost);
profit_cocoa.Text=String.Format("$%.2f",CocoaProfit);
rem_cocoa.Text=String.Format("%d",cocoa_remaining);
sold_cocoa.Text=String.Format("%d",CocoaSold);
net_cocoa.Text=String.Format("$%.2f",CocoaNet);
gross_cocoa.Text=String.Format("$%.2f",CocoaGross);

if (purchased_milk!=0){MilkCost = ((spent_milk) / (IntToFloat(purchased_milk)));}
MilkProfit = MilkPrice - MilkCost;
if (MilkPrice>0.00){price_milk.Text=String.Format("$%.2f",MilkPrice);}
if (MilkPrice<=0.00){price_milk.Text=("FREE");}
cost_milk.Text=String.Format("$%.2f",MilkCost);
profit_milk.Text=String.Format("$%.2f",MilkProfit);
rem_milk.Text=String.Format("%d",milk_remaining);
sold_milk.Text=String.Format("%d",MilkSold);
net_milk.Text=String.Format("$%.2f",MilkNet);
gross_milk.Text=String.Format("$%.2f",MilkGross);

if (purchased_crest!=0){CrestCost = ((spent_crest) / (IntToFloat(purchased_crest)));}
CrestProfit = CrestPrice - CrestCost;
if (CrestPrice>0.00){price_crest.Text=String.Format("$%.2f",CrestPrice);}
if (CrestPrice<=0.00){price_crest.Text=("FREE");}
cost_crest.Text=String.Format("$%.2f",CrestCost);
profit_crest.Text=String.Format("$%.2f",CrestProfit);
rem_crest.Text=String.Format("%d",crest_remaining);
sold_crest.Text=String.Format("%d",CrestSold);
net_crest.Text=String.Format("$%.2f",CrestNet);
gross_crest.Text=String.Format("$%.2f",CrestGross);

if (purchased_rinse!=0){RinseCost = ((spent_rinse) / (IntToFloat(purchased_rinse)));}
RinseProfit = RinsePrice - RinseCost;
if (RinsePrice>0.00){price_rinse.Text=String.Format("$%.2f",RinsePrice);}
if (RinsePrice<=0.00){price_rinse.Text=("FREE");}
cost_rinse.Text=String.Format("$%.2f",RinseCost);
profit_rinse.Text=String.Format("$%.2f",RinseProfit);
rem_rinse.Text=String.Format("%d",rinse_remaining);
sold_rinse.Text=String.Format("%d",RinseSold);
net_rinse.Text=String.Format("$%.2f",RinseNet);
gross_rinse.Text=String.Format("$%.2f",RinseGross);

Bagel_PlainCost = (0.15);
Bagel_PlainProfit = Bagel_PlainPrice - Bagel_PlainCost;
if (Bagel_PlainPrice>0.00){price_bagel_plain.Text=String.Format("$%.2f",Bagel_PlainPrice);}
if (Bagel_PlainPrice<=0.00){price_bagel_plain.Text=("FREE");}
cost_bagel_plain.Text=String.Format("$%.2f",Bagel_PlainCost);
profit_bagel_plain.Text=String.Format("$%.2f",Bagel_PlainProfit);
rem_bagel_plain.Text=String.Format("%d",bagel_plain_remaining);
sold_bagel_plain.Text=String.Format("%d",Bagel_PlainSold);
net_bagel_plain.Text=String.Format("$%.2f",Bagel_PlainNet);
gross_bagel_plain.Text=String.Format("$%.2f",Bagel_PlainGross);

float HotdogTotalCost=((HotdogCost)+(0.13));
HotdogProfit= HotdogPrice - HotdogCost;
breakdown_hotdog.Text=String.Format("Bun:$0.13  -  Hot Dog:$%.2f",HotdogCost);
if (HotdogPrice>0.00){price_hotdog.Text=String.Format("$%.2f",HotdogPrice);}
if (HotdogPrice<=0.00){price_hotdog.Text=("FREE");}
cost_hotdog.Text=String.Format("$%.2f",HotdogTotalCost);
profit_hotdog.Text=String.Format("$%.2f",HotdogProfit);
rem_hotdog.Text=String.Format("%d",hotdogs_remaining);
sold_hotdog.Text=String.Format("%d",HotdogSold);
net_hotdog.Text=String.Format("$%.2f",HotdogNet);
gross_hotdog.Text=String.Format("$%.2f",HotdogGross);


PaperCost = (0.25);
PaperProfit = PaperPrice - PaperCost;
if (PaperPrice>0.00){price_paper.Text=String.Format("$%.2f",PaperPrice);}
if (PaperPrice<=0.00){price_paper.Text=("FREE");}
cost_paper.Text=String.Format("$%.2f",PaperCost);
profit_paper.Text=String.Format("$%.2f",PaperProfit);
rem_paper.Text=String.Format("%d",paper_remaining);
sold_paper.Text=String.Format("%d",PaperSold);
net_paper.Text=String.Format("$%.2f",PaperNet);
gross_paper.Text=String.Format("$%.2f",PaperGross);

//GUI Money Balance Updates
bal_eqmenu.Text=String.Format("$%.2f",Money);
bal_standmenu.Text=String.Format("$%.2f",Money);
bal_bigby.Text=String.Format("You have: $%.2f",Money);
bal_fagan.Text=String.Format("You have: $%.2f",Money);
bal_roast.Text=String.Format("You have: $%.2f",Money);
pwnmoney.Text=String.Format("You have: $%.2f",Money);
bal_appearance.Text=String.Format("You have: $%.2f",Money);
bal_nolancroson.Text=String.Format("You have: $%.2f",Money);
bal_upgrade.Text=String.Format("You have: $%.2f",Money);

//Slider Updates
CoffeePriceS = (IntToFloat (Slider_CoffeeS.Value)) / (IntToFloat (100));
CoffeePriceA = (IntToFloat (Slider_CoffeeA.Value)) / (IntToFloat (100));
CoffeePriceB = (IntToFloat (Slider_CoffeeB.Value)) / (IntToFloat (100));
CoffeePriceC = (IntToFloat (Slider_CoffeeC.Value)) / (IntToFloat (100));
CoffeePriceD = (IntToFloat (Slider_CoffeeD.Value)) / (IntToFloat (100));
ChaiPrice = (IntToFloat (Slider_Chai.Value)) / (IntToFloat (100));
CrestPrice = (IntToFloat (Slider_Crest.Value)) / (IntToFloat (100));
RinsePrice = (IntToFloat (Slider_Rinse.Value)) / (IntToFloat (100));
CocoaPrice = (IntToFloat (Slider_Cocoa.Value)) / (IntToFloat (100));
MilkPrice = (IntToFloat (Slider_Milk.Value)) / (IntToFloat (100));
Bagel_PlainPrice = (IntToFloat (Slider_Bagel_Plain.Value)) / (IntToFloat (100));
PaperPrice = (IntToFloat (Slider_paper.Value)) / (IntToFloat (100));
AmericanoPrice = (IntToFloat (Slider_Americano.Value)) / (IntToFloat (100));
LattePrice = (IntToFloat (Slider_Latte.Value)) / (IntToFloat (100));
CappuccinoPrice = (IntToFloat (Slider_Cappuccino.Value)) / (IntToFloat (100));
ChailattePrice = (IntToFloat (Slider_Chailatte.Value)) / (IntToFloat (100));
MochaPrice = (IntToFloat (Slider_Mocha.Value)) / (IntToFloat (100));
HotdogPrice= (IntToFloat (Slider_Hotdog.Value)) / (IntToFloat (100));

if (purchased_chili!=0){ChiliCost= ((spent_chili) / (IntToFloat(purchased_chili)));}
sold_chilli.Text=String.Format("%d[%d",ChilliSold, chilli_remaining);
ChilliProfit = (ChilliPrice - ChiliCost);
if (ChilliPrice<0.001){price_chilli.Text=String.Format("%.2f               free             %.2f",ChiliCost,ChilliProfit);}
if (ChilliPrice>0.001){price_chilli.Text=String.Format("%.2f               %.2f              %.2f",ChiliCost,ChilliPrice,ChilliProfit);}
if ((chilli_slider.Value<=1)&&(player.InventoryQuantity[Chilli.ID]!=0)){ChilliPrice=0.00;}
else {ChilliPrice= (IntToFloat (chilli_slider.Value)) / (IntToFloat (100));}
if (player.InventoryQuantity[Chilli.ID]==0)lock_chilli.Visible=true;
if (player.InventoryQuantity[Chilli.ID]!=0)lock_chilli.Visible=false;

if (purchased_jalapeno!=0){JalapenoCost= ((spent_jalapeno) / (IntToFloat(purchased_jalapeno)));}
sold_jalepeno.Text=String.Format("%d[%d",JalapenosSold, jalapenos_remaining);
JalapenoProfit = (JalapenoPrice - JalapenoCost);
if (JalapenoPrice<0.001){price_jalepeno.Text=String.Format("%.2f              free             %.2f",JalapenoCost,JalapenoProfit);}
if (JalapenoPrice>0.001){price_jalepeno.Text=String.Format("%.2f              %.2f              %.2f",JalapenoCost,JalapenoPrice,JalapenoProfit);}
if ((jalapeno_slider.Value<=1)&&(player.InventoryQuantity[Jalapenos.ID]!=0)){JalapenoPrice=0.00;}
else {JalapenoPrice= (IntToFloat (jalapeno_slider.Value)) / (IntToFloat (100));}
if (player.InventoryQuantity[Jalapenos.ID]==0)lock_jalapeno.Visible=true;
if (player.InventoryQuantity[Jalapenos.ID]!=0)lock_jalapeno.Visible=false;

if (purchased_ketchup!=0){KetchupCost= ((spent_ketchup) / (IntToFloat(purchased_ketchup)));}
sold_ketchup.Text=String.Format("%d[%d",KetchupSold, ketchup_remaining);
KetchupProfit = (KetchupPrice - KetchupCost);
if (KetchupPrice<0.001){price_ketchup.Text=String.Format("%.2f               free             %.2f",KetchupCost,KetchupProfit);}
if (KetchupPrice>0.001){price_ketchup.Text=String.Format("%.2f               %.2f              %.2f",KetchupCost,KetchupPrice,KetchupProfit);}
if ((ketchup_slider.Value<=1)&&(player.InventoryQuantity[Ketchup.ID]!=0)){KetchupPrice=0.00;}
else {KetchupPrice= (IntToFloat (ketchup_slider.Value)) / (IntToFloat (100));}
if (player.InventoryQuantity[Ketchup.ID]==0)lock_ketchup.Visible=true;
if (player.InventoryQuantity[Ketchup.ID]!=0)lock_ketchup.Visible=false;

if (purchased_mustard!=0){MustardCost = ((spent_mustard) / (IntToFloat(purchased_mustard)));}
sold_mustard.Text=String.Format("%d[%d",MustardSold, mustard_remaining);
MustardProfit = (MustardPrice - MustardCost);
if (MustardPrice<0.01){price_mustard.Text=String.Format("%.2f              free             %.2f",MustardCost,MustardProfit);}
if (MustardPrice>0.01){price_mustard.Text=String.Format("%.2f              %.2f              %.2f",MustardCost,MustardPrice,MustardProfit);}
if ((mustard_slider.Value<=1)&&(player.InventoryQuantity[Mustard.ID]!=0)){MustardPrice=0.00;}
else {MustardPrice= (IntToFloat (mustard_slider.Value)) / (IntToFloat (100));}
if (player.InventoryQuantity[Mustard.ID]==0)lock_mustard.Visible=true;
if (player.InventoryQuantity[Mustard.ID]!=0)lock_mustard.Visible=false;

if (purchased_relish!=0){RelishCost = ((spent_relish) / (IntToFloat(purchased_relish)));}
sold_relish.Text=String.Format("%d[%d",RelishSold, relish_remaining);
RelishProfit = (RelishPrice - RelishCost);
if (RelishPrice<0.001){price_relish.Text=String.Format("%.2f               free             %.2f",RelishCost,RelishProfit);}
if (RelishPrice>0.001){price_relish.Text=String.Format("%.2f               %.2f              %.2f",RelishCost,RelishPrice,RelishProfit);}
if ((relish_slider.Value<=1)&&(player.InventoryQuantity[Relish.ID]!=0)){RelishPrice=0.00;}
else {RelishPrice= (IntToFloat (relish_slider.Value)) / (IntToFloat (100));}
if (player.InventoryQuantity[Relish.ID]==0)lock_relish.Visible=true;
if (player.InventoryQuantity[Relish.ID]!=0)lock_relish.Visible=false;

if (purchased_sauerkraut!=0){KrautCost = ((spent_sauerkraut) / (IntToFloat(purchased_sauerkraut)));}
sold_kraut.Text=String.Format("%d[%d",KrautSold, sauerkraut_remaining);
KrautProfit = (KrautPrice - KrautCost);
if (KrautPrice<0.001){price_kraut.Text=String.Format("%.2f              free             %.2f",KrautCost,KrautProfit);}
if (KrautPrice>0.001){price_kraut.Text=String.Format("%.2f              %.2f              %.2f",KrautCost,KrautPrice,KrautProfit);}
if ((kraut_slider.Value<=1)&&(player.InventoryQuantity[Sauerkraut.ID]!=0)){KrautPrice=0.00;}
else {KrautPrice= (IntToFloat (kraut_slider.Value)) / (IntToFloat (100));}
if (player.InventoryQuantity[Sauerkraut.ID]==0)lock_kraut.Visible=true;
if (player.InventoryQuantity[Sauerkraut.ID]!=0)lock_kraut.Visible=false;

if (purchased_sugar!=0){SugarCost = ((spent_sugar) / (IntToFloat(purchased_sugar)));}
SugarProfit= (SugarPrice - SugarCost);
if (SugarPrice<0.001){price_sugar.Text=String.Format("Free[%d",sugar_remaining);}
if (SugarPrice>0.001){price_sugar.Text=String.Format("%.2f[%d",SugarPrice, sugar_remaining);}
if ((Slider_Sugar.Value<=1)&&(player.InventoryQuantity[Sugar.ID]!=0)){SugarPrice=0.00;}
else {SugarPrice = (IntToFloat (Slider_Sugar.Value)) / (IntToFloat (100));}
if (player.InventoryQuantity[Sugar.ID]==0)lock_sugar.Visible=true;
if (player.InventoryQuantity[Sugar.ID]!=0)lock_sugar.Visible=false;
cost_sugar.Text=String.Format("%.2f[%.2f",SugarCost,SugarProfit);

if (purchased_cream!=0){CreamCost = ((spent_cream) / (IntToFloat(purchased_cream)));}
CreamProfit= (CreamPrice - CreamCost);
if (CreamPrice<0.001){price_cream.Text=String.Format("Free[%d",cream_remaining);}
if (CreamPrice>0.001){price_cream.Text=String.Format("%.2f[%d",CreamPrice, cream_remaining);}
if ((Slider_Cream.Value<=1)&&(player.InventoryQuantity[Cream.ID]!=0)){CreamPrice=0.00;}
else {CreamPrice = (IntToFloat (Slider_Cream.Value)) / (IntToFloat (100));}
if (player.InventoryQuantity[Cream.ID]==0)lock_cream.Visible=true;
if (player.InventoryQuantity[Cream.ID]!=0)lock_cream.Visible=false;
cost_cream.Text=String.Format("%.2f[%.2f",CreamCost,CreamProfit);

if (purchased_syrup!=0){SyrupCost = ((spent_syrup) / (IntToFloat(purchased_syrup)));}
SyrupProfit= (SyrupPrice - SyrupCost);
if (SyrupPrice<0.001){price_syrup.Text=String.Format("Free[%d",syrup_remaining);}
if (SyrupPrice>0.001){price_syrup.Text=String.Format("%.2f[%d",SyrupPrice, syrup_remaining);}
if ((Slider_Syrup.Value<=1)&&(player.InventoryQuantity[Syrups.ID]!=0)){SyrupPrice=0.00;}
else {SyrupPrice = (IntToFloat (Slider_Syrup.Value)) / (IntToFloat (100));}
if (player.InventoryQuantity[Syrups.ID]==0)lock_syrup.Visible=true;
if (player.InventoryQuantity[Syrups.ID]!=0)lock_syrup.Visible=false;
cost_syrup.Text=String.Format("%.2f[%.2f",SyrupCost,SyrupProfit);

if (purchased_whipped!=0){WhippedCost = ((spent_whipped) / (IntToFloat(purchased_whipped)));}
WhippedProfit= (WhippedPrice - WhippedCost);
if (WhippedPrice<0.001){price_whipped.Text=String.Format("Free[%d",whipped_remaining);}
if (WhippedPrice>0.001){price_whipped.Text=String.Format("%.2f[%d",WhippedPrice, whipped_remaining);}
if ((Slider_Whipped.Value<=1)&&(player.InventoryQuantity[Whipped.ID]!=0)){WhippedPrice=0.00;}
else {WhippedPrice = (IntToFloat (Slider_Whipped.Value)) / (IntToFloat (100));}
if (player.InventoryQuantity[Whipped.ID]==0)lock_whipped.Visible=true;
if (player.InventoryQuantity[Whipped.ID]!=0)lock_whipped.Visible=false;
cost_whipped.Text=String.Format(" %.2f [ %.2f",WhippedCost,WhippedProfit);

toasted_label.Text=String.Format("$%.2f",Toasted_Price);
if ((toasted_slider.Value<=1)&&(toastedx==0)){Toasted_Price=0.00;}
else {Toasted_Price= (IntToFloat (toasted_slider.Value)) / (IntToFloat (100));}
if (upgrade_2.NormalGraphic!=1325)bo_toasted.Visible=true;
if (upgrade_2.NormalGraphic==1325)bo_toasted.Visible=false;

pbj_label.Text=String.Format("$%.2f",PBJ_Price);
if ((pbj_slider.Value<=1)&&(pbjx==0)){PBJ_Price=0.00;}
else {PBJ_Price= (IntToFloat (pbj_slider.Value)) / (IntToFloat (100));}
if ((player.InventoryQuantity[Peanutbutter.ID]==0)||(player.InventoryQuantity[Jelly.ID]==0))bo_pbj.Visible=true;
if ((player.InventoryQuantity[Peanutbutter.ID]!=0)&&(player.InventoryQuantity[Jelly.ID]!=0))bo_pbj.Visible=false;

lox_label.Text=String.Format("$%.2f",Lox_Price);
if ((lox_slider.Value<=1)&&(loxx==0)){Lox_Price=0.00;}
else {Lox_Price= (IntToFloat (lox_slider.Value)) / (IntToFloat (100));}
if ((player.InventoryQuantity[Lox.ID]==0)||(player.InventoryQuantity[Capers.ID]==0))bo_lox.Visible=true;
if ((player.InventoryQuantity[Lox.ID]!=0)&&(player.InventoryQuantity[Capers.ID]!=0))bo_lox.Visible=false;

creamcheese_label.Text=String.Format("$%.2f",Creamcheese_Price);
if ((creamcheese_slider.Value<=1)&&(creamcheesex==0)){Creamcheese_Price =0.00;}
else {Creamcheese_Price = (IntToFloat (creamcheese_slider.Value)) / (IntToFloat (100));}
if ((player.InventoryQuantity[CreamCheese.ID]==0)&&(vcheese_remaining==0))bo_creamcheese.Visible=true;
if ((player.InventoryQuantity[CreamCheese.ID]!=0)||(vcheese_remaining!=0))bo_creamcheese.Visible=false;

if (player.InventoryQuantity[CoffeeS.ID]==0){cm_s.NormalGraphic=1182;}
if (player.InventoryQuantity[CoffeeA.ID]==0){cm_a.NormalGraphic=1182;}
if (player.InventoryQuantity[CoffeeB.ID]==0){cm_b.NormalGraphic=1182;}
if (player.InventoryQuantity[CoffeeC.ID]==0){cm_c.NormalGraphic=1182;}
if (player.InventoryQuantity[CoffeeD.ID]==0){cm_d.NormalGraphic=1182;}


if (player.InventoryQuantity[CoffeeS.ID]!=0){if (upCoffee==("S")){cm_s.NormalGraphic=1191;}else if (upCoffee!=("S")){cm_s.NormalGraphic=1192;}}
if (player.InventoryQuantity[CoffeeA.ID]!=0){if (upCoffee==("A")){cm_a.NormalGraphic=1184;}else if (upCoffee!=("A")){cm_a.NormalGraphic=1183;}}
if (player.InventoryQuantity[CoffeeB.ID]!=0){if (upCoffee==("B")){cm_b.NormalGraphic=1185;}else if (upCoffee!=("B")){cm_b.NormalGraphic=1186;}}
if (player.InventoryQuantity[CoffeeC.ID]!=0){if (upCoffee==("C")){cm_c.NormalGraphic=1187;}else if (upCoffee!=("C")){cm_c.NormalGraphic=1188;}}
if (player.InventoryQuantity[CoffeeD.ID]!=0){if (upCoffee==("D")){cm_d.NormalGraphic=1189;}else if (upCoffee!=("D")){cm_d.NormalGraphic=1190;}}

if (purchased_creamcheese!=0){CreamcheeseCost= ((spent_creamcheese) / (IntToFloat(purchased_creamcheese)));}
if (purchased_lox!=0){LoxCost= ((spent_lox) / (IntToFloat(purchased_lox)));}
if (purchased_peanutbutter!=0){PeanutbutterCost= ((spent_peanutbutter) / (IntToFloat(purchased_peanutbutter)));}
if (purchased_jelly!=0){JellyCost= ((spent_jelly) / (IntToFloat(purchased_jelly)));}
if (purchased_capers!=0){CapersCost= ((spent_capers) / (IntToFloat(purchased_capers)));}
if (purchased_flour!=0){FlourCost= ((spent_flour) / (IntToFloat(purchased_flour)));}
if (purchased_salt!=0){SaltCost= ((spent_salt) / (IntToFloat(purchased_salt)));}
if (purchased_yeast!=0){YeastCost= ((spent_yeast) / (IntToFloat(purchased_yeast)));}
if (purchased_catfood!=0){CatfoodCost= ((spent_catfood) / (IntToFloat(purchased_catfood)));}
if (purchased_buttermilk!=0){ButtermilkCost= ((spent_buttermilk) / (IntToFloat(purchased_buttermilk)));}
if (purchased_buns!=0){BunsCost= ((spent_buns) / (IntToFloat(purchased_buns)));}
if (purchased_jelly!=0){JellyCost= ((spent_jelly) / (IntToFloat(purchased_jelly)));}
if (purchased_syrup!=0){SyrupCost= ((spent_syrup) / (IntToFloat(purchased_syrup)));}



//Inventory Conditional Truncations
if ((coffee_a_remaining != 0)||(coffee_b_remaining != 0)||(coffee_c_remaining != 0)||(coffee_d_remaining != 0)||(coffee_s_remaining != 0))
{CarriesCoffee=true;}

//if ((cSlot1.InventoryQuantity[Emachine.ID] != 0)||(cSlot1.InventoryQuantity[espressomachine.ID] != 0)) {CarriesEspresso=true;}
//if (cSlot1.InventoryQuantity[maker.ID]!=0) {CarriesCoffeePot=true;}

if (DBG0.NormalGraphic == 375){gDialog.Visible=false;}

if ((gMachine.Visible==true)||(gRoastierry.Visible==true)||(gFaganMenu.Visible==true)||(gBigbyMenu.Visible==true)) {gDialog.Visible=false; gPanel.Visible=false;}

//Makeit Vars===Old Method
if (happymeter.NormalGraphic==5522){happymeter.Animate(209, 0, 3, eRepeat);}
if (happymeter.NormalGraphic==5523){happymeter.Animate(209, 1, 3, eRepeat);}
if (happymeter.NormalGraphic==5524){happymeter.Animate(209, 2, 2, eRepeat);}
if (happymeter.NormalGraphic==5525){happymeter.Animate(209, 3, 2, eRepeat);}
if (happymeter.NormalGraphic==5526){happymeter.Animate(209, 4, 2, eRepeat);}
if (happymeter.NormalGraphic==5527){happymeter.Animate(209, 5, 1, eRepeat);}
if (happymeter.NormalGraphic==5528){happymeter.Animate(209, 6, 1, eRepeat);}
if (happymeter.NormalGraphic==5529){happymeter.Animate(209, 7, 1, eRepeat);}
if (happymeter.NormalGraphic==5530){happymeter.Animate(209, 8, 0, eRepeat);}
if (happymeter.NormalGraphic==5531){happymeter.Animate(209, 9, 0, eRepeat);}


if ((cd_miliseconds==0)&&(cd_seconds==0)&&(cd_minutes==0)){countdown.TextColor=8; countdown.Text=("00:00:00");}
if ((cd_miliseconds!=0)||(cd_seconds!=0)||(cd_minutes!=0)){countdown.TextColor=15; countdown.Text=String.Format("%s",cd_display);}

if (countingdown == 1) {
  cd_ticker++;
  cd_miliseconds++;
  patiencedecay++;

if (patiencedecay>=(temperance)){patience.Width-=2; patiencedecay=0;}//5-Highest 1-Lowest

if (cd_ticker >= 2) {// 2 is the default
cd_ticker = 0;

if (cd_miliseconds >= 60) {
      cd_miliseconds = 0;
      cd_seconds++;
      
int happinessdecay=Random(5);
if (happinessdecay==0){happiness-=3;}
if (happinessdecay==1){happiness-=4;}
if (happinessdecay==2){happiness-=5;}
if (happinessdecay==3){happiness-=8;}
if (happinessdecay==4){happiness-=10;}
if (happinessdecay==5){happiness-=15;}
happyupdate();
      if (cd_seconds == 60) {
        cd_minutes++;
  }}
  if (patience.Width<=0){//TOOK TOO LONG!
  PlaySound(60); TopUp("Time Overdrawn!","You took too long!");
  rep-=5; countingdown=0; 
  gMake.Visible=false;
  gm_changeamt.Visible=false;
  gChange.Visible=false;
  gAssemble.Visible=false;
  gConfirm.Visible=false;
  gBarista.Visible=false;
  gCashRegister.Visible=false;
  mouse.Mode=eModeLookat;
  mouse.UseDefaultGraphic();
  mouse.Visible=false;
  emble_anim.NormalGraphic=5536;
  typebox.Text=(""); changebox.Text=(""); confirmbox.Text=("");
  step1.NormalGraphic=5517; step1.MouseOverGraphic=5519;
  step2.NormalGraphic=5518; step2.MouseOverGraphic=5518;
  step3.NormalGraphic=5518; step3.MouseOverGraphic=5518;
  infolocker.NormalGraphic=5558; orderbotched=0; 
  SaleInProgress=0;
  StopPop(); 
  customerbreakaway();}//Que advancement takes place here
  }
cd_display = String.Format("%02d:%02d:%02d",cd_minutes, cd_seconds, cd_miliseconds);
}


/// INV GUI REPEXES
//if (invMain.TopItem > 0) {  invup.Visible = true;} else { invup.Visible = false;}
if (gTravel.Visible==true){
if ((cSlot2.InventoryQuantity[WatchA.ID]!=0)||(cSlot2.InventoryQuantity[WatchB.ID]!=0)||(cSlot2.InventoryQuantity[WatchC.ID]!=0)||(cSlot2.InventoryQuantity[WatchD.ID]!=0)||(cSlot2.InventoryQuantity[Cellphone.ID]!=0)){
if (hour<=11){timefare=(hour+1);}
  if (hour==12){timefare=(1);}
taxitime.Text=String.Format("%02d:%02d",hour, minute);
bustime.Text=String.Format("%02d:30",timefare);  }
else{//No Watch
taxitime.Text=("Shortly.");
bustime.Text=("In one hour.");}

}

//Brooklynn Width Paraphrases
if ((gStand_Gui.Visible==true)&&(GetGlobalInt(1)==4)){
                        if (caffeine.Width>=90){bmood.Text=("Sunshine and rainbows");}
if ((caffeine.Width<90)&&(caffeine.Width>=70)){bmood.Text=("Good for now");}
if ((caffeine.Width<70)&&(caffeine.Width>=50)){bmood.Text=("Fine");}
if ((caffeine.Width<50)&&(caffeine.Width>=30)){bmood.Text=("Cross-armed and snooty");}
if ((caffeine.Width<30)&&(caffeine.Width>=20)){bmood.Text=("intolerably snippy");}
                        if (caffeine.Width<20){bmood.Text=("bitch from hell");}
}

//NO MOVING WHILE DIALOG GUI IS UP - Conversationally Onset Paralyzation ------------------------------//
if (gBuyortalk.Visible==true){xmove=0;}
if (gDialog.Visible == true){ xmove=0;}
if (gMake.Visible == true){ xmove=0;}
if (gStand_Gui.Visible == true){ xmove=0;}
if (gSuperstore.Visible == true){ xmove=0;}
if (gThirstex.Visible == true){ xmove=0;}
if (gBigbyMenu.Visible == true){ xmove=0;}
if (gFaganMenu.Visible == true){ xmove=0;}
if (gMachine.Visible == true){ xmove=0;}
if (gSuperstore.Visible == true){ xmove=0;}
if (gPanel.Visible == true){ xmove=0;}
if (gGui1.Visible == true){ xmove=0;}
if (gGui2.Visible == true){ xmove=0;}
if (gCook.Visible == true){ xmove=0;}
if (gCook2.Visible == true){ xmove=0;}
if (gPick.Visible == true){ xmove=0;}
if (gRaxbymenu.Visible == true){ xmove=0;}
if (gQuitConfirm.Visible == true){ xmove=0;}

in_midair = true;

//Bigby's Closure------------------------------//
if (walmartia>=600.00){
  if (Richard.InventoryQuantity[Cigarettes.ID]==0){Richard.AddInventory(Cigarettes);}}


//down----------------------------------
int a;
while ((gravity>0)&&(a < gravity)){

 player.y=player.y+1; //move one down
 if (GetWalkableAreaAt(player.x-GetViewportX(),player.y-GetViewportY())==0) {player.y=player.y+1;} //1 down if no walkable area found
 else
 {
     in_midair = false;
// blocked by a walkable area below, so player has just landed
 }
 player.y=player.y-1; //move one up

  a=a+1;
}

//up------------------------------------
int b;
while ((gravity<0)&&(b > gravity)){

 player.y=player.y-1; //move one up
 if (GetWalkableAreaAt(player.x-GetViewportX(),player.y-GetViewportY())==0) {player.y=player.y-1;} //1 up if no walkable area found abovw
 player.y=player.y+1; //move one down

  b=b-1;
}


//left and right (uses the same logic as moving up and down but has additional checks so uneven terrain won't cause problems)

//left----------------------------------

int c;
while ((xmove<0)&&(c > xmove)){

 player.x=player.x-1;
 if (GetWalkableAreaAt(player.x-GetViewportX(),player.y-GetViewportY())==0) {player.x=player.x-1;}
 player.x=player.x+1;

 player.x=player.x-1;
   int check=0;
   if (GetWalkableAreaAt(player.x-GetViewportX(),player.y-GetViewportY())>0) {check=1;}
     player.y=player.y-1;
       if ((GetWalkableAreaAt(player.x-GetViewportX(),player.y-GetViewportY())==0)&&(check==1)) {player.y=player.y-1;}
     player.y=player.y+1;

   if (GetWalkableAreaAt(player.x-GetViewportX(),player.y-GetViewportY())>0) {check=1;}
     player.y=player.y+1;
       if ((GetWalkableAreaAt(player.x-GetViewportX(),player.y-GetViewportY())==0)&&(check==1)) {player.y=player.y+1;}
     player.y=player.y-1;

 if (GetWalkableAreaAt(player.x-GetViewportX(),player.y-GetViewportY())>0) {player.x=player.x+1;}
 player.x=player.x+1;
 
 c=c-1;
}


//right---------------------------------

int d;
while ((xmove>0)&&(d < xmove)){

player.x=player.x+1;
 if (GetWalkableAreaAt(player.x-GetViewportX(),player.y-GetViewportY())==0) {player.x=player.x+1;}
 player.x=player.x-1;

 player.x=player.x+1;
   int check=0;
   if (GetWalkableAreaAt(player.x-GetViewportX(),player.y-GetViewportY())>0) {check=1;}
     player.y=player.y-1;
       if ((GetWalkableAreaAt(player.x-GetViewportX(),player.y-GetViewportY())==0)&&(check==1)) {player.y=player.y-1;}
     player.y=player.y+1;
     
   if (GetWalkableAreaAt(player.x-GetViewportX(),player.y-GetViewportY())>0) {check=1;}
     player.y=player.y+1;
       if ((GetWalkableAreaAt(player.x-GetViewportX(),player.y-GetViewportY())==0)&&(check==1)) {player.y=player.y+1;}
     player.y=player.y-1;
    
   if (GetWalkableAreaAt(player.x-GetViewportX(),player.y-GetViewportY())>0) {player.x=player.x-1;}
 player.x=player.x-1;

 d=d+1;
}

//diagonal stuff------------------------

if (GetWalkableAreaAt(player.x-GetViewportX(),player.y-GetViewportY())>0) {player.y=player.y-1;}


//managing movement values and gravity--

if (gravity < 6) {gravity=gravity+1;}

if (gMake.Visible==false){
if ((GetGlobalInt(1)!= 3)&&(player.Room!=36)&&(player.Room!=29)){
if (((IsKeyPressed(375)==1)||(IsKeyPressed(65)==1))&&(xmove>-2)) {xmove=xmove-1;} // left arrow
if (((IsKeyPressed(377)==1)||(IsKeyPressed(68)==1))&&(xmove<2))  {xmove=xmove+1;} // right arrow
}
if ((GetGlobalInt(1) == 3)&&(player.Room!=36)&&(player.Room!=29)){ // Vinny's Caffeine Speed Adjustments`
if ((caffeine.Width<=90)&&(caffeine.Width>20)){//NORMAL SPEED
if ((player.Room !=29)&&(cEgo.IdleView!=9)){cEgo.UnlockView(); cEgo.SetIdleView (9, 2);}
if (((IsKeyPressed(375)==1)||(IsKeyPressed(65)==1))&&(xmove>-2)) {xmove=xmove-1;} // left arrow
if (((IsKeyPressed(377)==1)||(IsKeyPressed(68)==1))&&(xmove<2)){xmove=xmove+1;} // right arrow
}

if (caffeine.Width > 90){//GO FAST
if((player.Room==29)||(player.Room==20)||(player.Room==24)||(player.Room==30)||(player.Room==13)){
if (((IsKeyPressed(375)==1)||(IsKeyPressed(65)==1))&&(xmove>-2)) {xmove=xmove-1;} // left arrow
if (((IsKeyPressed(377)==1)||(IsKeyPressed(68)==1))&&(xmove<2)){xmove=xmove+1;}} // right arrow
else { 
if (cEgo.IdleView!=9){cEgo.SetIdleView (9, 2);}
if (((IsKeyPressed(375)==1)||(IsKeyPressed(65)==1))&&(xmove>-3)) {xmove=xmove-1;} // Left arrow Caffeine > 100
if (((IsKeyPressed(377)==1)||(IsKeyPressed(68)==1))&&(xmove<3)) {xmove=xmove+1;} // right arrow Caffeine > 100
}}

if  (caffeine.Width <= 20){//GO SLOW
if((player.Room==29)||(player.Room==20)||(player.Room==24)||(player.Room==30)||(player.Room==13)){
if (((IsKeyPressed(375)==1)||(IsKeyPressed(65)==1))&&(xmove>-2)) {xmove=xmove-1;} // left arrow
if (((IsKeyPressed(377)==1)||(IsKeyPressed(68)==1))&&(xmove<2)){xmove=xmove+1;}} // right arrow
else{
if (cEgo.IdleView!=95){cEgo.SetIdleView (95, 0);}
if (((IsKeyPressed(375)==1)||(IsKeyPressed(65)==1))&&(xmove>-1)) {xmove=xmove-1;} // Left arrow Caffeine < 20
if (((IsKeyPressed(377)==1)||(IsKeyPressed(68)==1))&&(xmove<1)) {xmove=xmove+1;} // right arrow Caffeine < 20
}}}

if ((player.Room==36)||(player.Room==29)){//Walkthru or Dream... Small PC Avatar, slow walk speed.

if ((player.Room==29)&&(in_midair==true)){
if (((IsKeyPressed(375)==1)||(IsKeyPressed(65)==1))&&(xmove>-2)) {xmove=xmove-1;} // left arrow
if (((IsKeyPressed(377)==1)||(IsKeyPressed(68)==1))&&(xmove<2))  {xmove=xmove+1;} // right arrow
}
else{
if (((IsKeyPressed(375)==1)||(IsKeyPressed(65)==1))&&(xmove>-1)) {xmove=xmove-1;} // left arrow
if (((IsKeyPressed(377)==1)||(IsKeyPressed(68)==1))&&(xmove<1))  {xmove=xmove+1;} // right arrow
}}

if ((IsKeyPressed(375)==0)&&(IsKeyPressed(377)==0)&&(IsKeyPressed(65)==0)&&(IsKeyPressed(68)==0)&&(xmove>0)) {xmove=xmove-1;} // slow down by friction
if ((IsKeyPressed(375)==0)&&(IsKeyPressed(377)==0)&&(IsKeyPressed(65)==0)&&(IsKeyPressed(68)==0)&&(xmove<0)) {xmove=xmove+1;} // slow down by friction
}


                                            
//Down----------------------------------
//----------------------------------Cart Setup----------------------------------
if ((gChange.Visible==false)&&(gMake.Visible==false)&&(gBuyortalk.Visible==false)&&(gTip.Visible==false)&&(player.Room!=10)){//No setting up or taking down while sale is in progress.
if ((GetGlobalInt(1) == 1)&&(GetGlobalInt(52)==0)){xmove=0;}
if ((GetGlobalInt(1) == 2)&&(GetGlobalInt(52)==0)){xmove=0;}

if (((IsKeyPressed(380)==1)||(IsKeyPressed(83)==1))&&(gSavegame.Visible==false)&&(gLoadgame.Visible==false)&&(gMake.Visible==false)&&(Warp2.Visible==false)){//Down Arrow
if (gStand_Gui.Visible==true){}
else{
if (GetGlobalInt(1) == 1) { // Player is Andrus
  if ((GetGlobalInt(52)==1)&&(player.IsCollidingWithChar(Stand)==true)){
      if (kickedout==1){//Kicked Out - sleepiness check
      if (vitality.Width>40){dAndrusStandSleep.SetOptionState(2, eOptionOff);}
      if (vitality.Width<=40){dAndrusStandSleep.SetOptionState(2, eOptionOn);}
      dAndrusStandSleep.Start();}
      
  if (kickedout!=1){
             if (vitality.Width < 25){//Too Tired!
gPick.Centre(); close_pick.Visible=false; CloseAll(); PlaySound(60);
pick.NormalGraphic=4225; gPick.Visible=true; pick.Animate(164, 0, 5, eOnce); Wait(100); gPick.Visible=false;}
if ((vitality.Width>=25)&&(nutrition.Width < 25)){//Too Hungry!
gPick.Centre(); close_pick.Visible=false; CloseAll(); PlaySound(60);
pick.NormalGraphic=4219; gPick.Visible=true; pick.Animate(164, 1, 5, eOnce); Wait(130); gPick.Visible=false;}
           if ((vitality.Width >= 25)&&(nutrition.Width >= 25)){//I'm good!
//Stack first, then stand.
if (player.IsCollidingWithChar(Stack)==true){
PlaySound(9); TopUp("Daily Delivery!","Got 20 new georgetonian newspapers!");WaitMouseKey(20);
paper_remaining+=20;
stockit();}//stackness
else{
if (player.IsCollidingWithChar(Stand) == 1){
  if (GetGlobalInt(52) == 1){//Andrus Set Up
   SaleInProgress=0; queposition=0; readytosell=true;
  if (GetGlobalInt(101) ==2){} else if (GetGlobalInt(101) ==1){} else {
        lockup.Transparency=0; lockup.ChangeRoom(Stand.Room); lockup.FollowCharacter(Stand, FOLLOW_EXACTLY, 100);
        PlaySound(18); player.LockView(68); player.Animate(1, 3, eOnce, eNoBlock, eForwards);
        lockup.LockView(70); lockup.Animate(0, 2, eOnce, eBlock, eForwards); SetGlobalInt(52, 0); Wait(5);
        player.LockView(71); player.Animate(0, 3, eRepeat, eNoBlock, eForwards); player.x=(Stand.x); player.y=(Stand.y); 
      player.ChangeView(71); cAndrus.SetIdleView(136, 3); SetTimer(2, 40);}
      if ((firstsetup==0)&&(GetGlobalInt(101)>4)){//Prayer
FadeOut(15); close_pick.Visible=false;
gPick.Centre(); pick.NormalGraphic=3680; pick.X=0; pick.Y=0;//Prepare Animation
gPick.Visible=true;  pick.Animate(141, 1, 8, eOnce);
Wait(5); FadeIn(15);
StartCutscene(eSkipAnyKeyOrMouseClick);//Start Cutscene
Wait(460);//Run Animation
EndCutscene();
FadeOut(15); Wait(5); gPick.Visible=false; pick.X=38; pick.Y=16; firstsetup=1; FadeIn(15);}
      else if (firstsetup!=0){}
  }}}//End Setup
  }}}
else if (GetGlobalInt(52) == 0){//Andrus - Close Down
         if (GetGlobalInt(101) ==2){} else if (GetGlobalInt(101) ==1){} else {
         SaleInProgress=0; queposition=0; closeupshop();
         //lockup.Transparency=0; lockup.ChangeRoom(Stand.Room); lockup.FollowCharacter(Stand, FOLLOW_EXACTLY, 100);
         //lockup.Baseline=(Stand.Baseline+1);
         //PlaySound(17); SetGlobalInt(52, 1); player.LockView(68); player.Animate(2, 3, eOnce, eNoBlock, eForwards);
         //lockup.LockView(70); lockup.Animate(1, 2, eOnce, eBlock, eForwards); Wait(5); player.UnlockView();
        //cAndrus.SetIdleView(3, 0);
        }}
}//End Andrus
       
if (GetGlobalInt(1) == 2) { // Player is Melanie!!
if (player.IsCollidingWithChar(Stand) == 1){
  
  if (GetGlobalInt(52) == 1){//Mel Set Up
  if (GetGlobalInt(101) ==2){} else if (GetGlobalInt(101) ==1){} else {
if (vitality.Width < 25){//Too Tired!
gPick.Centre(); close_pick.Visible=false; CloseAll(); PlaySound(60);
pick.NormalGraphic=5376; gPick.Visible=true; pick.Animate(204, 1, 3, eOnce); Wait(100); gPick.Visible=false;}
if ((vitality.Width>=25)&&(nutrition.Width < 25)){//Too Hungry
gPick.Centre(); close_pick.Visible=false; CloseAll(); PlaySound(60);
pick.NormalGraphic=5387; gPick.Visible=true; pick.Animate(204, 2, 3, eOnce); Wait(130); gPick.Visible=false;}
           else if ((vitality.Width >= 25)&&(nutrition.Width >= 25)){//I'm good!
           SaleInProgress=0; queposition=0; readytosell=true;
        player.x=(Stand.x); 
        Stand.Baseline+=10; player.Baseline=(Stand.Baseline-1); 
        player.LockView(89); player.ChangeView(89); player.SetIdleView(89, 3);
        lockup.FollowCharacter(Stand, FOLLOW_EXACTLY, 100);
        PlaySound(18); lockup.LockView(88); lockup.Animate(0, 3, eOnce, eBlock, eForwards);
        SetGlobalInt(52, 0); Wait(5);
        SetTimer(2, 40);}}}
 
else if (GetGlobalInt(52) == 0)//Mel Close Down
         {if (GetGlobalInt(101) ==2){} else if (GetGlobalInt(101) ==1){} else {
         SaleInProgress=0; queposition=0; closeupshop();
         //player.y=(Stand.y); player.x=(Stand.x);
         //PlaySound(17); SetGlobalInt(52, 1);
         //lockup.LockView(88); lockup.Animate(3, 3, eOnce, eBlock, eForwards); Wait(5); 
         //Stand.Baseline-=5; player.Baseline=(player.y); player.x=Stand.x-50;
         //player.ChangeView(1); player.SetIdleView(2, 0); player.UnlockView();
         }}}}
       

if (GetGlobalInt(1) == 3) { // Player is Vinny
if (player.IsCollidingWithChar(Stand) == 1)
   { if ((GetGlobalInt(52) == 0)||(GetGlobalInt(52) == 3)){//Vinny closes up - Cart Follows
         //Everything is handled by closeupshop(); now.
         player.LockView(14); player.Animate(1, 2, eOnce, eNoBlock, eForwards);
         if (((Stand.Loop==0)&&(Stand.Frame>4))||((Stand.Loop==3)&&(Stand.Frame<4))||(Stand.Loop==1)||(Stand.Loop==2)){}
         else {PlaySound(18); Stand.Animate(0, 3, eOnce, eBlock, eForwards);}
         queposition=0; 
         player.UnlockView(); Stand.FollowCharacter(player, FOLLOW_EXACTLY, 0); SetGlobalInt(52, 1); SetTimer(2, 40);Wait(5);
         closeupshop();
         }
 
else if ((GetGlobalInt(1) == 3) && (GetGlobalInt(52) == 1))//Vinny! - Cart Halt
         {
           if (vitality.Width < 25){//Too Tired!
gPick.Centre(); close_pick.Visible=false; CloseAll(); PlaySound(60);
pick.NormalGraphic=4187; gPick.Visible=true; pick.Animate(163, 0, 2, eOnce); Wait(80); gPick.Visible=false;}
if ((vitality.Width>=25)&&(nutrition.Width < 25)){//Too Hungry
gPick.Centre(); close_pick.Visible=false; CloseAll(); PlaySound(60);
pick.NormalGraphic=4202; gPick.Visible=true; pick.Animate(163, 1, 5, eOnce); Wait(130); gPick.Visible=false;}
           else if ((vitality.Width >= 25)&&(nutrition.Width >= 25)){//I'm good!
           SaleInProgress=0; queposition=0; readytosell=true;
           player.LockView(14); PlaySound(17); player.Animate(1, 2, eOnce, eNoBlock, eForwards);
           Stand.Animate(3, 3, eOnce, eBlock, eForwards);
         player.UnlockView(); Stand.FollowCharacter(null, 0, 0); SetGlobalInt(52, 0); Wait(5);
         if ((player.Room==34)&&(Omar.Room==34)&&(Omar.View==178)){ Omar.StopMoving(); Omar.UnlockView(); SetGlobalInt(442, 2); 
         //Omar's gonna chase the player down.
       Omar.chasedown();}
         }}
}}
     
if (GetGlobalInt(1) == 4) { // Player is Logan
if (player.IsCollidingWithChar(Stand) == 1){
  if ((GetGlobalInt(52) == 0)||(GetGlobalInt(52) == 3)){//Logan - Cart Follows
         player.LockView(22); PlaySound(18); player.Animate(9, 2, eOnce, eNoBlock, eForwards);
         queposition=0; closeupshop();
         if (((Stand.Loop==0)&&(Stand.Frame>4))||((Stand.Loop==3)&&(Stand.Frame<4))||(Stand.Loop==1)||(Stand.Loop==2)){}
         else {//good?
            SaleInProgress=0; queposition=0; readytosell=true;
         Stand.Animate(0, 3, eOnce, eBlock, eForwards);}
         player.UnlockView(); Stand.FollowCharacter(player, FOLLOW_EXACTLY, 0); SetGlobalInt(52, 1); SetTimer(2, 40);Wait(5);}
 
else if ((GetGlobalInt(1) == 4) && (GetGlobalInt(52) == 1)){//Logan! - Cart Halt
         player.LockView(22); PlaySound(17); player.Animate(9, 2, eOnce, eNoBlock, eForwards);
           Stand.Animate(3, 3, eOnce, eBlock, eForwards);
         player.UnlockView(); Stand.FollowCharacter(null, 0, 0); SetGlobalInt(52, 0); Wait(5);
                  if ((player.Room==34)&&(Omar.Room==34)&&(Omar.View==178)){Omar.StopMoving(); Omar.UnlockView(); SetGlobalInt(442, 2);
                  //Omar's gonna chase the player down.
                  Omar.chasedown();}
         }
              }}
}}
}//End Setup


if ((IsKeyPressed(32)==1)||(IsKeyPressed (27)==1)){ // Space Bar for Inventory (aka mainmenu)
if ((GetGlobalInt(1)!=4)&&(player.Room==29)){PlaySound(3); SetFadeColor(255, 255, 255); FadeOut(64);Wait(2);FadeIn(25); SetFadeColor(0, 0, 0);Wait(5);}
//JUMP CODE
if ((GetGlobalInt(1)==4)&&(player.Room==29)){
if (in_midair == false){
 //StopAnimating();
 //player.y=player.y+2;
//player.y=player.y-2;
//if (GetWalkableAreaAt(player.x-GetViewportX(),player.y-GetViewportY())==1){
player.Animate(5, 3, eOnce, eBlock);
int gravrando=Random(3);
player.Animate(4, 3, eOnce, eNoBlock);
gravity=-(gravrando+4);}}
//}}  // jump


if ((gLoadgame.Visible==true)||(gSavegame.Visible==true)){}
if ((gLoadgame.Visible!=true)&&(gSavegame.Visible!=true)){
if ((player.Room==23)||(player.Room==1)||(player.Room==24)||(player.Room==10)){if (gPanel.Visible!=true){//File Menu
PlaySound(28); gPanel.Centre(); mouse.Visible=true; gPanel.Visible=true; Wait(5);}
else if (gPanel.Visible==true){ PlaySound(28); gPanel.Visible=false; mouse.Visible=false; SaleInProgress=0; Wait(5);}}

if ((player.Room!=25)&&(player.Room!=1)&&(player.Room!=4)&&(player.Room!=10)&&(gDialog.Visible==false)&&(gRoastierry.Visible==false)&&(gFaganMenu.Visible==false)&&(gBigbyMenu.Visible==false)&&(gCook2.Visible==false)&&(player.Room!=23)&&(player.Room!=29)&&(gSuperstore.Visible==false)&&(gPick.Visible==false)&&(gMachine.Visible==false)&&(gFaganMenu.Visible==false)&&(gThirstex.Visible==false)&&(player.Room!=40)&&(player.Room!=24)&&(gBuyortalk.Visible==false))
{StopAnimating();
if (GetGlobalInt(100) == 0) {//Tutorial
if (GetGlobalInt(107)!=0) {PlaySound(43); mouse.Visible=true; gStand_Gui.Visible = true; SetGlobalInt(100,1); Wait(20); gTutorial();}
else {PlaySound(43); mouse.Visible=true; gStand_Gui.Visible = true; SetGlobalInt(100,1); Wait(10); }}
else if (GetGlobalInt(100) == 1) {
  if (GetGlobalInt(107) != 0){PlaySound(44); mouse.Visible=false; gStand_Gui.Visible = false; gUpgrades_Gui.Visible=false; gPrice_Gui.Visible=false; gGui1.Visible=false; gCoffee_D.Visible=false; 
  SetGlobalInt(107, 99); SetGlobalInt(100,0); Wait(10); }//Menu Tutorial Over
  else {PlaySound(44); mouse.Visible=false; CloseAll();
  SetGlobalInt(100,0); Wait(10);
            if ((player.Room==2)&&(milhour==7)){Laura.StopMoving(); Laura.ChangeRoom(2, 370, 194);}//Special Check for Laura in Mel's House
  }
}
}
else{}
}}

// Walkcycle Animating // Walk anims
//--------------------------------------------------------------------------------------
if ((xmove > 0)&&(gMake.Visible==false)&&(gBuyortalk.Visible==false)&&(gDialog.Visible==false)&&(gBuyortalk.Visible==false)&&(gToothbrushing.Visible==false)){  // animate while moving to the right  
    if (GetGlobalInt(1) == 1){//Andrus
        if (player.Room==29){StartAnimatingIfNotAnimating( 78, 2, 3 );}
   else if (GetGlobalInt(11)==0){StartAnimatingIfNotAnimating( 23, 1, 3 );}
   else if (GetGlobalInt(11)!=0){StartAnimatingIfNotAnimating( 31, 2, 3);}}
    
    if (GetGlobalInt(1) == 2){
        if (player.IdleView==81){StartAnimatingIfNotAnimating( 80, 2, 2 );}
   else if (player.IdleView!=81){StartAnimatingIfNotAnimating( 1, 1, 2 );}}//Melanie!
    
    if (GetGlobalInt(1) == 3) {if (player.Room==29){StartAnimatingIfNotAnimating( 76, 2, 2 );}//Vinny!
   else if (player.Room!=29){
     if  (caffeine.Width <= 20)StartAnimatingIfNotAnimating(94, 2, 4); // Vinny's Zed Walk
     else StartAnimatingIfNotAnimating( 4, 3, 2 );}}//Vinny!
    
    if (GetGlobalInt(1) == 4) {
      if ((player.Room==29)&&(in_midair==false)){StartAnimatingIfNotAnimating( 152, 2, 2 );}
    else if (player.Room!=29){StartAnimatingIfNotAnimating( 22, 1, 2 );}}//Logan!
    
  if ((xmove > 0) && (Stand.Room==(player.Room)) && (GetGlobalInt(1) == 3) && (!Stand.Animating) && (GetGlobalInt(52)==1)){player.LockView(64); player.Animate(2, 3, eRepeat, eNoBlock, eForwards); Stand.Animate(2, 2, eRepeat, eNoBlock, eForwards);}
  if ((xmove > 0) && (Stand.Room==(player.Room)) && (GetGlobalInt(1) == 4) && (!Stand.Animating) && (GetGlobalInt(52)==1)){player.LockView(113); player.Animate(2, 3, eRepeat, eNoBlock, eForwards); Stand.Animate(2, 2, eRepeat, eNoBlock, eForwards);}
//if (in_midair == false)
//    {
//    if (IsChannelPlaying(7)==0)
//    {int ran=Random(3);
//    if (ran==0) PlaySoundEx(5, 7);
//    else if (ran==1) PlaySoundEx(6, 7);
//    else if (ran==2) PlaySoundEx(7, 7);
//    else PlaySoundEx(8, 7);
//  }
}
 
else if ((xmove < 0)&&(gMake.Visible==false)&&(gBuyortalk.Visible==false)&&(gToothbrushing.Visible==false)){// animate while moving to the left
    if (GetGlobalInt(1) == 1) {//Andrus
        if (player.Room==29){StartAnimatingIfNotAnimating( 78, 1, 3 );}
   else if (GetGlobalInt(11)==0){StartAnimatingIfNotAnimating( 23, 0, 3 );}
   else if (GetGlobalInt(11)!=0){StartAnimatingIfNotAnimating( 31, 1, 3);}}
   
   if (GetGlobalInt(1) == 2) {
        if (player.IdleView==81){StartAnimatingIfNotAnimating( 80, 1, 2 );}
   else if (player.IdleView!=81){StartAnimatingIfNotAnimating( 1, 0, 2 );}}//Melanie!
   
   if (GetGlobalInt(1) == 3) {if (player.Room==29){StartAnimatingIfNotAnimating( 76, 1, 2 );}//Vinny!
   else if (player.Room!=29){
     if  (caffeine.Width <= 20)StartAnimatingIfNotAnimating(94, 1, 4);// Vinny's Zed Walk
     else StartAnimatingIfNotAnimating( 4, 1, 2 );}}
 
   if (GetGlobalInt(1) == 4) {
     if ((player.Room==29)&&(in_midair==false)){StartAnimatingIfNotAnimating( 152, 1, 2 );}
     else if (player.Room!=29){StartAnimatingIfNotAnimating( 22, 0, 2 );}}//Logan!
  
  if ((xmove < 0) && (Stand.Room==(player.Room)) && (GetGlobalInt(1) == 3) && (!Stand.Animating) && (GetGlobalInt(52)==1)){player.LockView(64); player.Animate(1, 3, eRepeat, eNoBlock, eForwards);Stand.Animate(1, 2, eRepeat, eNoBlock, eForwards);}
  if ((xmove < 0) && (Stand.Room==(player.Room)) && (GetGlobalInt(1) == 4) && (!Stand.Animating) && (GetGlobalInt(52)==1)){player.LockView(113); player.Animate(1, 3, eRepeat, eNoBlock, eForwards);Stand.Animate(1, 2, eRepeat, eNoBlock, eForwards);}
  
//    if (in_midair == false)
//    {if (IsChannelPlaying(7)==0)
//    {int ran=Random(3);
//    if (ran==0) PlaySoundEx(61, 7);
//    else if (ran==1) PlaySoundEx(61, 7);
//    else if (ran==2) PlaySoundEx(61, 7);
//    else PlaySoundEx(61, 7);
//}
//  }
}

else{
  if (in_midair==false)StopAnimating(); //stop animating if not moving
if ((Stand.Room==(player.Room)) && (GetGlobalInt(1) == 3) && (Stand.Animating)&& (GetGlobalInt(52)==1)){Stand.UnlockView();}
if ((Stand.Room==(player.Room)) && (GetGlobalInt(1) == 4) && (Stand.Animating)&& (GetGlobalInt(52)==1)){Stand.UnlockView();}
}

//////////  Caffeine Addiction------------------------------ ----------------------------------------///
if (caffeine.Width > 81){if (GetGlobalInt(1)==3){cEgo.SetWalkSpeed(5, 5);}}
if ((caffeine.Width < 80) && (caffeine.Width > 50)){if (GetGlobalInt(1)==3){cEgo.SetWalkSpeed(4, 4);}}
if ((caffeine.Width < 50)  && (caffeine.Width > 20)){if (GetGlobalInt(1)==3){cEgo.SetWalkSpeed(3, 3);}}
if ((caffeine.Width < 20) && (caffeine.Width > 10)){if (GetGlobalInt(1)==3){cEgo.SetWalkSpeed(2, 2);}}
if (caffeine.Width < 10){if (GetGlobalInt(1)==3){cEgo.SetWalkSpeed(1, 1);}}

if (in_midair == true){
StopAnimating();//Jumpanim
if ((GetGlobalInt(1)==4)&&(player.Room==29))player.Animate(4, 1, eOnce, eNoBlock, eForwards);// stop animating in midair (animating the player is also possible here)
}

//////////  Time Time Time Time Time Time timetime--------------------------------------------------------------///
if (isclockrunning == 1) {
  cyclecounter++;
    if (cyclecounter >= clockspeed) {// "27" is the default clockspeed number, it's "2" when asleep
    cyclecounter = 0;
    minute++;
    if (minute >= 60) {
      minute = 0;
      hour++;
      if (hour == 12) {
        if (ampm == 1) ampm=0;
        else ampm=1;
      }
      else if (hour > 12) {
        hour = 1;
      }
    }
    timelabeltext = String.Format("%02d:%02d", hour, minute);
    if (ampm == 0) meridian=( " AM");
    else if (ampm == 1) meridian=( " PM");
}}

if (dayofweek==0){day=("Sunday");}
if (dayofweek==1){day=("Monday");}
if (dayofweek==2){day=("Tuesday");}
if (dayofweek==3){day=("Wednesday");}
if (dayofweek==4){day=("Thursday");}
if (dayofweek==5){day=("Friday");}
if (dayofweek==6){day=("Saturday");}
if (dayofweek==7){day=("Sunday");}

if ((hour==5)&&(minute==0)&&(ampm==0)&&(GetGlobalInt(1)==1)){//Special Delivery for Andrus
if (cSlot2.InventoryQuantity[Contract_G.ID]!=0){
Stack.ChangeRoom((Stand.Room), (Stand.x-50),  (Stand.y+3));
Stack.Baseline=999; Stack.Transparency=0;
if ((dayofweek==5)&&(GetGlobalInt(1)==1)){//Friday:COntract's up
SetGlobalInt(12, 3); cSlot2.LoseInventory(Contract_G); cSlot2.AddInventory(Contract_Bad);}}}

if ((hour==12)&&(minute==0)&&(ampm==0)) { dayofweek+=1; dayspassed+=1; minute+=1; 

if (GetGlobalInt(1)==1){//Andrus at Midnight
killpapers=true;//Made this a global bool so that it won't strip the stand during a sale.
}

//Single Newspaper gets Tossed Out
if (cSlot2.InventoryQuantity[paper_single.ID]!=0){cSlot2.LoseInventory(paper_single);}

if (dayofweek==8){dayofweek=1;}//Sunday -> Monday
}

if (player.Room!=29){//Awake values
if (minute==0)  {if (GetGlobalInt(108)==0){SetGlobalInt(108,1); vitality.Width-=5; nutrition.Width-=1; kibbles.Width-=1;
if ((GetGlobalInt(1)==1)||(GetGlobalInt(1)==3)){caffeine.Width-=2;}
if (withdrawel!=0){SetTimer(19, 160);}} else {}}

if (minute==5) {if (GetGlobalInt(108)==1){SetGlobalInt(108,2); nutrition.Width-=1; //Kibbles only every ten
if ((GetGlobalInt(1)==1)||(GetGlobalInt(1)==3)){caffeine.Width-=2;}
if (withdrawel!=0){SetTimer(19, 160);}} else {}}

if (minute==10) {if (GetGlobalInt(108)==2){SetGlobalInt(108,3); nutrition.Width-=1; kibbles.Width-=1;
if ((GetGlobalInt(1)==1)||(GetGlobalInt(1)==3)){caffeine.Width-=2;}
if (withdrawel!=0){SetTimer(19, 160);}} else {}}

if (minute==15) {if (GetGlobalInt(108)==3){SetGlobalInt(108,4); nutrition.Width-=1; 
if ((GetGlobalInt(1)==1)||(GetGlobalInt(1)==3)){caffeine.Width-=2;}
if (withdrawel!=0){SetTimer(19, 160);}} else {}}

if (minute==20) {if (GetGlobalInt(108)==4){SetGlobalInt(108,5); nutrition.Width-=1; kibbles.Width-=1;
if ((GetGlobalInt(1)==1)||(GetGlobalInt(1)==3)){caffeine.Width-=2;}
if (withdrawel!=0){SetTimer(19, 160);}} else {}}

if (minute==25) {if (GetGlobalInt(108)==5){SetGlobalInt(108,6); nutrition.Width-=1; 
if ((GetGlobalInt(1)==1)||(GetGlobalInt(1)==3)){caffeine.Width-=2;}
if (withdrawel!=0){SetTimer(19, 160);}} else {}}

if (minute==30) {if (GetGlobalInt(108)==6){SetGlobalInt(108,7); nutrition.Width-=1; kibbles.Width-=1;
if ((GetGlobalInt(1)==1)||(GetGlobalInt(1)==3)){caffeine.Width-=2;}
if (withdrawel!=0){SetTimer(19, 160);}} else {}}

if (minute==35) {if (GetGlobalInt(108)==7){SetGlobalInt(108,8); nutrition.Width-=1; 
if ((GetGlobalInt(1)==1)||(GetGlobalInt(1)==3)){caffeine.Width-=2;}
if (withdrawel!=0){SetTimer(19, 160);}} else {}}

if (minute==40) {if (GetGlobalInt(108)==8){SetGlobalInt(108,9); nutrition.Width-=1; kibbles.Width-=1;
if ((GetGlobalInt(1)==1)||(GetGlobalInt(1)==3)){caffeine.Width-=2;}
if (withdrawel!=0){SetTimer(19, 160);}} else {}}

if (minute==45) {if (GetGlobalInt(108)==9){SetGlobalInt(108,10); nutrition.Width-=1; 
if ((GetGlobalInt(1)==1)||(GetGlobalInt(1)==3)){caffeine.Width-=2;}
if (withdrawel!=0){SetTimer(19, 160);}} else {}}

if (minute==50) {if (GetGlobalInt(108)==10){SetGlobalInt(108,11); nutrition.Width-=1; kibbles.Width-=1;
if ((GetGlobalInt(1)==1)||(GetGlobalInt(1)==3)){caffeine.Width-=2;}
if (withdrawel!=0){SetTimer(19, 160);}} else {}}

if (minute==55) {if (GetGlobalInt(108)==11){SetGlobalInt(108,0); nutrition.Width-=1; 
if ((GetGlobalInt(1)==1)||(GetGlobalInt(1)==3)){caffeine.Width-=2;}
if (withdrawel!=0){SetTimer(19, 160);}} else {}}}

if (player.Room==29){//Asleep values
if (minute==0)  {vitality.Width+=5; nutrition.Width-=2; kibbles.Width-=1;
if ((GetGlobalInt(1)==1)||(GetGlobalInt(1)==3)){caffeine.Width-=2;}}

if (minute==5) {nutrition.Width-=2; 
if ((GetGlobalInt(1)==1)||(GetGlobalInt(1)==3)){caffeine.Width-=2;}}

if (minute==10) {nutrition.Width-=2; kibbles.Width-=1;
if ((GetGlobalInt(1)==1)||(GetGlobalInt(1)==3)){caffeine.Width-=2;}}
  
if (minute==15) {nutrition.Width-=2; 
if ((GetGlobalInt(1)==1)||(GetGlobalInt(1)==3)){caffeine.Width-=2;}}

if (minute==20) {nutrition.Width-=2; kibbles.Width-=1;
if ((GetGlobalInt(1)==1)||(GetGlobalInt(1)==3)){caffeine.Width-=2;}}

if (minute==25) {nutrition.Width-=2; 
if ((GetGlobalInt(1)==1)||(GetGlobalInt(1)==3)){caffeine.Width-=2;}}

if (minute==30) {nutrition.Width-=2; kibbles.Width-=1;
if ((GetGlobalInt(1)==1)||(GetGlobalInt(1)==3)){caffeine.Width-=2;}}

if (minute==35) {nutrition.Width-=2; 
if ((GetGlobalInt(1)==1)||(GetGlobalInt(1)==3)){caffeine.Width-=2;}}

if (minute==40) {nutrition.Width-=2; kibbles.Width-=1;
if ((GetGlobalInt(1)==1)||(GetGlobalInt(1)==3)){caffeine.Width-=2;}}

if (minute==45) {nutrition.Width-=2; 
if ((GetGlobalInt(1)==1)||(GetGlobalInt(1)==3)){caffeine.Width-=2;}}

if (minute==50) {nutrition.Width-=2; kibbles.Width-=1;
if ((GetGlobalInt(1)==1)||(GetGlobalInt(1)==3)){caffeine.Width-=2;}}

if (minute==55) {nutrition.Width-=2; 
if ((GetGlobalInt(1)==1)||(GetGlobalInt(1)==3)){caffeine.Width-=2;}}}
//End Sleep meter modifications

menuday.Text=String.Format("%s", day);

clocktxt.Text=String.Format("%s%s[%s[%d", timelabeltext, meridian, day, dayspassed);

if ((cSlot2.InventoryQuantity[WatchA.ID]!=0)||(cSlot2.InventoryQuantity[WatchB.ID]!=0)||(cSlot2.InventoryQuantity[WatchC.ID]!=0)||(cSlot2.InventoryQuantity[WatchD.ID]!=0)||(cSlot2.InventoryQuantity[Cellphone.ID]!=0)){
menuday.SetPosition(164, 138); standclock.Visible=true; standclock.Text=String.Format("%s", timelabeltext); 
standmeridian.Visible=true; standmeridian.Text=String.Format("%s", meridian);}

else if ((cSlot2.InventoryQuantity[WatchA.ID]==0)&&(cSlot2.InventoryQuantity[WatchB.ID]==0)&&(cSlot2.InventoryQuantity[WatchC.ID]==0)&&(cSlot2.InventoryQuantity[WatchD.ID]==0)&&(cSlot2.InventoryQuantity[Cellphone.ID]==0)){
standclock.Visible=false; standmeridian.Visible=false; menuday.SetPosition(186, 138);}

//Sunday->Monday
if (dayofweek==8){dayofweek=1;}

//Top Cap
if (vitality.Width > 110)vitality.Width=110;
if (nutrition.Width > 110)nutrition.Width=110;
if (caffeine.Width > 110)caffeine.Width=110;

//Bottom Cap + 'tarred declarations
if (vitality.Width <= 1){ vitality.Width=10;
if ((player.Room!=2)&&(player.Room!=3)&&(player.Room!=6)&&(player.Room!=7)&&(player.Room!=8)&&(player.Room!=9)&&(player.Room!=23)&&(player.Room!=24)&&(player.Room!=10)&&(gMake.Visible==false)&&(gBonus.Visible==false)&&(gSuperstore.Visible==false)){
if (GetGlobalInt(1)==1){//ANDRUS IS TIRED!
if ((GetGlobalInt(101) !=2)&&(GetGlobalInt(101)!=1)&&(gBuyortalk.Visible==false)){
gPick.Centre(); close_pick.Visible=false; CloseAll();//Prep
if (kickedout==0){
  gPick.BackgroundGraphic=8401;
  if (heirarchy_tired==0){pick.NormalGraphic=8906; gPick.Visible=true; pick.Animate(283, 0, 3, eOnce); heirarchy_tired=1; Wait(120); }//How much sleep did i get last night?
  else if (heirarchy_tired==1){PlaySound(60); pick.NormalGraphic=4219; gPick.Visible=true; pick.Animate(283, 1, 3, eOnce); heirarchy_tired=2; Wait(120); }//Little Tired
  else if (heirarchy_tired==2){PlaySound(60); pick.NormalGraphic=8293; gPick.Visible=true; pick.Animate(283, 2, 3, eOnce); heirarchy_tired=3; Wait(120); }//Not what I once was.
  else if (heirarchy_tired==3){PlaySound(60); pick.NormalGraphic=8332; gPick.Visible=true; pick.Animate(283, 3, 3, eOnce); heirarchy_tired=4; Wait(90); }//YAWWN
  else if (heirarchy_tired==4){PlaySound(60); pick.NormalGraphic=8348; gPick.Visible=true; pick.Animate(283, 4, 3, eOnce); heirarchy_tired=5; Wait(90); }//We are need to go sleeping.
  else if (heirarchy_tired==5){PlaySound(60); pick.NormalGraphic=8385; gPick.Visible=true; pick.Animate(283, 5, 10, eOnce); heirarchy_tired=6; Wait(200); }//Too Tired. Need Sleep.
  else if (heirarchy_tired==5){PlaySound(60); pick.NormalGraphic=8385; gPick.Visible=true; pick.Animate(283, 6, 3, eOnce); Wait(450); }//Sickness -> Motel
  vitality.Width=10;}//Ugh.
  if (kickedout==1){pick.NormalGraphic=6276; gPick.Visible=true; pick.Animate(164, 5, 3, eOnce); vitality.Width=10;}
  gPick.Visible=false; gPick.BackgroundGraphic=2371;
         if ((GetGlobalInt(52)==0)&&(heirarchy_tired>=3)){//Too Tired to Work
         queposition=0; closeupshop();
         lockup.Transparency=0; lockup.ChangeRoom(Stand.Room); lockup.FollowCharacter(Stand, FOLLOW_EXACTLY, 100);
         lockup.Baseline=(Stand.Baseline+1);
         SetGlobalInt(52, 1); lockup.LockView(70); lockup.Animate(1, 2, eOnce, eNoBlock, eForwards); 
         player.UnlockView(); cAndrus.SetIdleView(3, 0);}
}}//End Andrus



if (GetGlobalInt(1)==2){//Mel's tired!
  if ((GetGlobalInt(101)!=2)&&(GetGlobalInt(101)!=1)&&(GetGlobalInt(52)==0)){
    player.y=(Stand.y); player.x=(Stand.x);
    queposition=0; closeupshop();
    PlaySound(17); SetGlobalInt(52, 1);
    lockup.LockView(88); lockup.Animate(3, 3, eOnce, eBlock, eForwards); Wait(5); 
    Stand.Baseline-=5; player.Baseline=(player.y); player.x=Stand.x-50;
    player.ChangeView(1); player.SetIdleView(2, 0); player.UnlockView();}
    // ---
  gPick.Centre(); close_pick.Visible=false; CloseAll(); PlaySound(60);
  pick.NormalGraphic=5376; gPick.Visible=true; pick.Animate(204, 1, 4, eOnce); Wait(100); gPick.Visible=false;}

if (GetGlobalInt(1)==3){//Vinny's Tired!
if (((GetGlobalInt(52) == 0)||(GetGlobalInt(52) == 3))&&(Stand.Room==player.Room)&&(player.Room!=6)){//Vinny! - Cart Follows
    queposition=0; closeupshop();
    player.LockView(14); PlaySound(18); player.Animate(1, 2, eOnce, eNoBlock, eForwards);
    Stand.Animate(0, 3, eOnce, eBlock, eForwards); player.UnlockView(); 
    Stand.FollowCharacter(player, FOLLOW_EXACTLY, 0); SetGlobalInt(52, 1); SetTimer(2, 40);Wait(5);}
  //--
  gPick.Centre(); close_pick.Visible=false; CloseAll(); PlaySound(60);
  pick.NormalGraphic=4187; gPick.Visible=true; pick.Animate(163, 0, 2, eOnce); Wait(80); gPick.Visible=false;}

if (GetGlobalInt(1)==4){//Logan's tired!
  queposition=0; closeupshop();
  }

//if (GetGlobalInt(1)!=1){dTarred.Start();}//NOOO!!!
//if ((GetGlobalInt(1)==1)&&(kickedout==0)){dTarred.Start();}
if ((GetGlobalInt(1)==1)&&(kickedout!=0)){dTarredvagrnt.Start();}

}}

if (nutrition.Width < 1){nutrition.Width=10; // Hungry Anim
if ((gCook2.Visible==false)&&(gTopics2.Visible==false)&&(gPanel.Visible==false)&&(gTravel.Visible==false)&&(gBreakdown.Visible==false)&&(player.Room!=29)&&(gMake.Visible==false)&&(gBonus.Visible==false)&&(gSuperstore.Visible==false)&&(gBadream.Visible==false)&&(gBuyortalk.Visible==false)&&(gMachine.Visible==false)){

if (GetGlobalInt(1)==1){//Andrus is Hongry!
gPick.Centre(); close_pick.Visible=false; CloseAll();
if (GetGlobalInt(52)==1){//Walking Hunger
if (kickedout==0){
  gPick.BackgroundGraphic=8401;
  if (heirarchy_hunger==0){pick.NormalGraphic=8305; gPick.Visible=true; pick.Animate(276, 1, 3, eOnce); heirarchy_hunger=1; Wait(130); }//Wonder what I'll eat today?
  else if (heirarchy_hunger==1){PlaySound(60); pick.NormalGraphic=4219; gPick.Visible=true; pick.Animate(164, 2, 3, eOnce); heirarchy_hunger=2; Wait(130); }//Tank's empty.
  else if (heirarchy_hunger==2){PlaySound(60); pick.NormalGraphic=8293; gPick.Visible=true; pick.Animate(276, 0, 3, eOnce); heirarchy_hunger=3; Wait(130); }//Time to be eating.
  else if (heirarchy_hunger==3){PlaySound(60); pick.NormalGraphic=8332; gPick.Visible=true; pick.Animate(276, 3, 3, eOnce); heirarchy_hunger=4; Wait(130); }//It's funny...
  else if (heirarchy_hunger==4){PlaySound(60); pick.NormalGraphic=8348; gPick.Visible=true; pick.Animate(276, 4, 3, eOnce); heirarchy_hunger=5; Wait(130); }//NEED FOOD. Hungry.
  else if (heirarchy_hunger==5){PlaySound(60); pick.NormalGraphic=8385; gPick.Visible=true; pick.Animate(276, 5, 3, eOnce); heirarchy_hunger=5; Wait(450); }//Sickness -> Diner
  nutrition.Width=15;//Ugh.
  }
if (kickedout==1){PlaySound(60); pick.NormalGraphic=6275; gPick.Visible=true; pick.Animate(164, 4, 3, eOnce);Wait(130); nutrition.Width=15; }
gPick.Visible=false; gPick.BackgroundGraphic=2371;}
if (GetGlobalInt(52)==0){//Andrus shuts down.
  if (kickedout==0){pick.NormalGraphic=4219; gPick.Visible=true; pick.Animate(164, 3, 3, eOnce);}
  if (kickedout==1){pick.NormalGraphic=6275; gPick.Visible=true; pick.Animate(164, 4, 3, eOnce);}
  Wait(130); gPick.Visible=false;
  queposition=0; closeupshop();
  lockup.Transparency=0; lockup.ChangeRoom(Stand.Room); lockup.FollowCharacter(Stand, FOLLOW_EXACTLY, 100);
  lockup.Baseline=(Stand.Baseline+1);
  SetGlobalInt(52, 1); lockup.LockView(70); lockup.Animate(1, 2, eOnce, eNoBlock, eForwards); 
  player.UnlockView(); cAndrus.SetIdleView(3, 0);}}

if (GetGlobalInt(1)==3){//Vinny's Hongry
  gPick.Centre(); close_pick.Visible=false; CloseAll(); PlaySound(60);
  if (((GetGlobalInt(52) == 0)||(GetGlobalInt(52) == 3))&&(Stand.Room==player.Room)&&(player.Room!=6)){//Vinny! - Cart Follows
  pick.NormalGraphic=4213; gPick.Visible=true; pick.Animate(163, 3, 3, eOnce); Wait(100); gPick.Visible=false;
  queposition=0; closeupshop();
  player.LockView(14); PlaySound(18); player.Animate(1, 2, eOnce, eNoBlock, eForwards);
  Stand.Animate(0, 3, eOnce, eBlock, eForwards); player.UnlockView(); 
  Stand.FollowCharacter(player, FOLLOW_EXACTLY, 0); SetGlobalInt(52, 1); SetTimer(2, 40);Wait(5);}
  else{pick.NormalGraphic=4202; gPick.Visible=true; pick.Animate(163, 2, 3, eOnce); Wait(100); gPick.Visible=false;}}

if (GetGlobalInt(1)==2){//Mel's Hongry!
  if ((GetGlobalInt(101)!=2)&&(GetGlobalInt(101)!=1)){
  gPick.Centre(); close_pick.Visible=false; CloseAll(); PlaySound(60);
  if (GetGlobalInt(52)==1){//Walking Hunger
  pick.NormalGraphic=5354; gPick.Visible=true; pick.Animate(204, 0, 3, eOnce); Wait(80); gPick.Visible=false;}
  if(GetGlobalInt(52) == 0){//Mel shuts down.
  pick.NormalGraphic=5354; gPick.Visible=true; pick.Animate(204, 3, 2, eOnce); Wait(100); gPick.Visible=false;
  queposition=0; closeupshop();
  player.y=(Stand.y); player.x=(Stand.x);
  PlaySound(17); SetGlobalInt(52, 1);
  lockup.LockView(88); lockup.Animate(3, 3, eOnce, eBlock, eForwards); Wait(5); 
  Stand.Baseline-=5; player.Baseline=(player.y); player.x=Stand.x-50;
  player.ChangeView(1); player.SetIdleView(2, 0); player.UnlockView();}}}
}}

if (caffeine.Width < 1){
caffeine.Width=10;
//Migraine, withdrawels, etc...
}

//Casio Panavision
///SPECIALTIMED EVENTS///SPECIAL TIMED EVENTS///SPECIAL TIMED EVENTS///SPECIAL TIMED EVENTS///SPECIAL TIMED EVENTS

//Mel's cellphone alarms
if ((GetGlobalInt(1)==2)&&(cSlot2.InventoryQuantity[Cellphone.ID]!=0)&&(player.Room!=29)){//Mel's got the phone and isn't dreaming.
if ((milhour==7)&&(minute>=30)&&(cellalarmed_go2school==false)&&(melplot>=2)&&(melplot!=99)){
  cellalarmed_go2school=true;
  PlaySound(116);
  gNotify.Centre();
  gNotify.X-=100;
  gNotify.Y = 10;
  notification.NormalGraphic=3284;
  gNotify.Visible=true;
  notification.Animate(99, 5, 1, eOnce);
}
if ((milhour==15)&&(minute>=30)&&(cellalarmed_pickup==false)){
  cellalarmed_pickup=true;
  PlaySound(116);
  gNotify.Centre();
  gNotify.X-=100;
  gNotify.Y = 10;
  notification.NormalGraphic=3284;
  gNotify.Visible=true;
  notification.Animate(99, 4, 1, eOnce);
}
if ((dayofweek==3)&&(milhour==11)&&(minute>=30)&&(cellalarmed_custody==false)){//Wednesday, noon.
  cellalarmed_custody=true;
  PlaySound(116);
  gNotify.Centre();
  gNotify.X-=100;
  gNotify.Y = 10;
  notification.NormalGraphic=3284;
  gNotify.Visible=true;
  notification.Animate(99, 3, 1, eOnce);
}

if ((dayspassed==7)&&(milhour==11)&&(minute>=30)&&(cellalarmed_custody==false)){//Monday, noon.
  cellalarmed_custody=true;
  PlaySound(116);
  gNotify.Centre();
  gNotify.X-=100;
  gNotify.Y = 10;
  notification.NormalGraphic=3284;
  gNotify.Visible=true;
  notification.Animate(99, 3, 1, eOnce);
}

}


if ((milhour>8)&&(minute>=25)&&(milhour<17)) {//1:25+ & 2:25+ & 3:25+ & 4:25+ & 5:25+

if ((GetGlobalInt(101)==11)&&(Suchin.Room!=player.Room)&&(player.Room==Stand.Room)){//How your kitty?
Suchin.ChangeRoom(player.Room, (GetViewportX()+300),  player.y+1); 
Suchin.Walk(-100, (Suchin.y), eNoBlock); minute+=1; SetGlobalInt(26, 1); hunger[Suchin.ID]=1; }

if ((GetGlobalInt(101)==13)&&(Suchin.Room!=player.Room)&&(player.Room==Stand.Room)){//How work?
Suchin.ChangeRoom(player.Room, (GetViewportX()+300),  player.y+1); 
Suchin.Walk(-100, (Suchin.y), eNoBlock); minute+=1; SetGlobalInt(26, 1); hunger[Suchin.ID]=1; }

if ((GetGlobalInt(101)==15)&&(Suchin.Room!=player.Room)&&(player.Room==Stand.Room)){//I hear somebody coughing...
Suchin.ChangeRoom(player.Room, (GetViewportX()+300),  player.y+1); 
Suchin.Walk((Stand.x), (Suchin.y), eNoBlock); minute+=1; SetGlobalInt(26, 1); hunger[Suchin.ID]=1; }

if ((GetGlobalInt(101)==17)&&(Suchin.Room!=player.Room)&&(player.Room==Stand.Room)){//Grand Boshaw?
Suchin.ChangeRoom(player.Room, (GetViewportX()+300),  player.y+1); 
Suchin.Walk(-100, (Suchin.y), eNoBlock); minute+=1; SetGlobalInt(26, 1); hunger[Suchin.ID]=1; }

if ((GetGlobalInt(101)==19)&&(Suchin.Room!=player.Room)&&(player.Room==Stand.Room)){//George Ask about you / It's always nice here
Suchin.ChangeRoom(player.Room, (GetViewportX()+300),  player.y+1); 
Suchin.Walk(-100, (Suchin.y), eNoBlock); minute+=1; SetGlobalInt(26, 1); hunger[Suchin.ID]=1; }

if ((GetGlobalInt(101)==21)&&(Suchin.Room!=player.Room)&&(player.Room==Stand.Room)){//Where you from? / Broom knows me.
Suchin.ChangeRoom(player.Room, (GetViewportX()+300),  player.y+1); 
Suchin.Walk(-100, (Suchin.y), eNoBlock); minute+=1; SetGlobalInt(26, 1); hunger[Suchin.ID]=1; }

if ((kickedout==1)&&(Suchin.Room!=player.Room)&&(player.Room==Stand.Room)&&(GetGlobalInt(101)<203)){
  //Currently, kickedout dialogs stop after the second visit, which is (101,203)
Suchin.ChangeRoom(player.Room, (GetViewportX()+300),  player.y+1); 
Suchin.Walk(-100, (Suchin.y), eNoBlock); minute+=1; SetGlobalInt(26, 1); hunger[Suchin.ID]=1; }

}

if (((hour==6)&&(minute>=30)&&(ampm==0))) {//Early Hour, special encounters


if ((player.Room!=1)&&(player.Room!=2)&&(player.Room!=6)&&(player.Room!=7)&&(player.Room!=8)&&(player.Room!=9)&&(player.Room!=10)&&(player.Room!=11)&&(player.Room!=12)&&(player.Room!=15)&&(player.Room!=16)&&(player.Room!=18)&&(player.Room!=21)&&(player.Room!=24)&&(player.Room!=27)&&(player.Room!=29)&&(player.Room!=30)&&(player.Room!=31)&&(player.Room!=32)&&(player.Room!=23)&&(player.Room!=36)&&(player.Room!=33)&&(player.Room<37))
{//Make sure player is in a sellable room - Otherwise, delay

if ((Basinski.Room!=player.Room)&&(player.Room==Stand.Room)&&(GetGlobalInt(343)!=1)){
  if ((GetGlobalInt(1)==1)&&(GetGlobalInt(101)<5)){}
  else{
    Basinski.Transparency=0; Basinski.ChangeRoom(player.Room, (GetViewportX()+300),  player.y+1); 
    Basinski.Baseline=(Stand.y + 4);
    //Basinski.Walk((Stand.x+10), (Basinski.y), eNoBlock, eAnywhere); 
    Basinski.chasedown();
    minute+=1; SetGlobalInt(43, 1);  hunger[Basinski.ID]=1; }
  }}
}

if (((hour==4)&&(minute>=30)&&(ampm==0))) {//4:30 AM special encounters
if ((player.Room!=1)&&(player.Room!=2)&&(player.Room!=6)&&(player.Room!=7)&&(player.Room!=8)&&(player.Room!=9)&&(player.Room!=10)&&(player.Room!=11)&&(player.Room!=12)&&(player.Room!=15)&&(player.Room!=16)&&(player.Room!=18)&&(player.Room!=21)&&(player.Room!=24)&&(player.Room!=27)&&(player.Room!=29)&&(player.Room!=30)&&(player.Room!=31)&&(player.Room!=32)&&(player.Room!=23)&&(player.Room!=36)&&(player.Room!=33)&&(player.Room<37))
{//Make sure player is in a sellable room - Otherwise, delay
if ((GetGlobalInt(1)==1)&&(GetGlobalInt(101)<5)){}
else{
if ((Nelly.Room!=player.Room)&&(player.Room==Stand.Room)&&(Nellytime==0)){
SetGlobalInt(250, 1); hunger[Nelly.ID]=1; 
Nelly.Transparency=0; Nelly.ChangeRoom(player.Room, (GetViewportX()+300),  player.y+1); 
Nelly.Baseline=(Stand.y + 4);
//Basinski.Walk((Stand.x+10), (Basinski.y), eNoBlock, eAnywhere); 
Nelly.chasedown(); minute+=1;}
}
}//End Nelly
}//End 4:00am Special Encounters


if ((GetGlobalInt(1)==1)&&(milhour>=11)&&(milhour<=13)&&(minute>=15)&&(dayspassed>=1)&&(isMeadowed==false)&&(GetGlobalInt(101)>5)){//Meadow's 11:15 special encounter
if ((player.Room!=1)&&(player.Room!=2)&&(player.Room!=6)&&(player.Room!=7)&&(player.Room!=8)&&(player.Room!=9)&&(player.Room!=10)&&(player.Room!=11)&&(player.Room!=12)&&(player.Room!=15)&&(player.Room!=16)&&(player.Room!=18)&&(player.Room!=21)&&(player.Room!=24)&&(player.Room!=27)&&(player.Room!=29)&&(player.Room!=30)&&(player.Room!=31)&&(player.Room!=32)&&(player.Room!=23)&&(player.Room!=36)&&(player.Room<37))
if ((Meadow.Room!=player.Room)&&(player.Room==Stand.Room)){
Meadow.LockView(241); Meadow.Transparency=0; Meadow.ChangeRoom(player.Room, (GetViewportX()+300),  player.y+1); minute+=1; 
hunger[Meadow.ID]=1; //hungry_meadow=1;
Meadow.Baseline=(Stand.y + 4); Meadow.chasedown();}}

if (((hour==12)&&(minute>=1)&&(ampm==1))) {//Noon Hour, special encounters

if ((player.Room!=1)&&(player.Room!=2)&&(player.Room!=6)&&(player.Room!=7)&&(player.Room!=8)&&(player.Room!=9)&&(player.Room!=10)&&(player.Room!=11)&&(player.Room!=12)&&(player.Room!=15)&&(player.Room!=16)&&(player.Room!=18)&&(player.Room!=21)&&(player.Room!=24)&&(player.Room!=27)&&(player.Room!=29)&&(player.Room!=30)&&(player.Room!=31)&&(player.Room!=32)&&(player.Room!=23)&&(player.Room!=36)&&(player.Room<37))
{//Make sure player is in a sellable room - Otherwise, delay

if ((TheThree.Room!=player.Room)&&(player.Room==Stand.Room)&&(GetGlobalInt(313)!=1)){
if ((GetGlobalInt(1)==1)&&(GetGlobalInt(101)<5)){}
else{
hunger[TheThree.ID]=1;
TheThree.Transparency=0; TheThree.ChangeRoom(player.Room, (GetViewportX()+300),  player.y+1); minute+=1; SetGlobalInt(37, 1);
//TheThree.Walk((Stand.x+10), (TheThree.y), eNoBlock, eAnywhere);
TheThree.chasedown();  hunger[TheThree.ID]=1; 
TheThree.Baseline=(Stand.y + 4);
}}

}}//End Noonhour Special Encounters

if (((hour>=10)&&(minute>=30)&&(ampm==0))&&(hour!=12)) {//Ten Thirty special encounters
if ((player.Room!=1)&&(player.Room!=2)&&(player.Room!=6)&&(player.Room!=7)&&(player.Room!=8)&&(player.Room!=9)&&(player.Room!=10)&&(player.Room!=11)&&(player.Room!=12)&&(player.Room!=15)&&(player.Room!=16)&&(player.Room!=18)&&(player.Room!=21)&&(player.Room!=24)&&(player.Room!=27)&&(player.Room!=29)&&(player.Room!=30)&&(player.Room!=31)&&(player.Room!=32)&&(player.Room!=23)&&(player.Room!=36)&&(player.Room<37))
{//Make sure player is in a sellable room - Otherwise, delay

if ((Eddie.Room!=player.Room)&&(player.Room==Stand.Room)&&(GetGlobalInt(411)==3)){//EDDIE MEETS PLAYER TO DISCUSS PLANS...
hunger[Eddie.ID]=1;
Eddie.Transparency=0; Eddie.ChangeRoom(player.Room, (GetViewportX()+300),  player.y+1); 
//Eddie.Walk((Stand.x +10), (Eddie.y), eNoBlock, eAnywhere); 
Eddie.chasedown();  hunger[Eddie.ID]=1; 
minute+=1; Eddie.Baseline=(Stand.y + 4);}

}}//End Early Hour Special Encounters

if (((hour>=5)&&(minute>=10)&&(hour<10)&&(ampm==1))&&(hour!=12)) {//Five to 9:59pm Special Encs
if ((player.Room!=1)&&(player.Room!=2)&&(player.Room!=6)&&(player.Room!=7)&&(player.Room!=8)&&(player.Room!=9)&&(player.Room!=10)&&(player.Room!=11)&&(player.Room!=12)&&(player.Room!=15)&&(player.Room!=16)&&(player.Room!=18)&&(player.Room!=21)&&(player.Room!=24)&&(player.Room!=27)&&(player.Room!=29)&&(player.Room!=30)&&(player.Room!=31)&&(player.Room!=32)&&(player.Room!=23)&&(player.Room!=36)&&(player.Room<37))
{//Make sure player is in a sellable room - Otherwise, delay

//Vinny wants to trade with Andrus
if ((Vinny.Room!=player.Room)&&(player.Room==Stand.Room)&&(GetGlobalInt(1)==1)&&(dayspassed>=4)&&(npcvinny_offered==false)&&(cSlot2.InventoryQuantity[Permit_franklin.ID]!=0)&&(npcVinny_location==22)){//Vinny wants to trade permits
Vinny.Transparency=0; Vinny.ChangeRoom(player.Room, (GetViewportX()+300),  player.y+1); 
npcVinny_moving=true; Vinny.Walk((Stand.x), (player.y), eNoBlock);  hunger[Vinny.ID]=1; 
minute+=1; Vinny.Baseline=(Stand.y + 4);}}

}
//GLENDA EVERY DAY
if ((milhour>17)&&(minute>=41)&&(milhour<20)&&(glenda_puzzled==false)&&(Glenda.Room!=player.Room)&&(Stand.Room==player.Room)) {//Glenda every day.
if ((player.Room!=1)&&(player.Room!=2)&&(player.Room!=6)&&(player.Room!=7)&&(player.Room!=8)&&(player.Room!=9)&&(player.Room!=10)&&(player.Room!=11)&&(player.Room!=12)&&(player.Room!=15)&&(player.Room!=16)&&(player.Room!=18)&&(player.Room!=21)&&(player.Room!=24)&&(player.Room!=27)&&(player.Room!=29)&&(player.Room!=30)&&(player.Room!=31)&&(player.Room!=32)&&(player.Room!=23)&&(player.Room!=36)&&(player.Room<37)){
if ((GetGlobalInt(1)==1)&&(GetGlobalInt(101)<5)){}
else{
hunger[Glenda.ID]=1;
Glenda.Transparency=0; Glenda.ChangeRoom(player.Room, (GetViewportX()+300),  player.y+1); 
Glenda.chasedown(); Glenda.Baseline=0;  hunger[Glenda.ID]=1; 
}}}

//MEL GETS VINNY EVERY DAY.
//Variables: 
//A. mel_vinnyd (came by?)
//B. mel_vinnyplot(dialog advancement)
//C. mel_vinnylove (awww)
if ((milhour>7)&&(minute>=20)&&(milhour<20)&&(mel_vinnyd==false)&&(Vinny.Room!=player.Room)&&(GetGlobalInt(1)==2)&&(Stand.Room==player.Room)) {
if ((player.Room!=1)&&(player.Room!=2)&&(player.Room!=6)&&(player.Room!=7)&&(player.Room!=8)&&(player.Room!=9)&&(player.Room!=10)&&(player.Room!=11)&&(player.Room!=12)&&(player.Room!=15)&&(player.Room!=16)&&(player.Room!=18)&&(player.Room!=21)&&(player.Room!=24)&&(player.Room!=27)&&(player.Room!=29)&&(player.Room!=30)&&(player.Room!=31)&&(player.Room!=32)&&(player.Room!=23)&&(player.Room!=36)&&(player.Room<37)){
Vinny.Transparency=0; Vinny.ChangeRoom(player.Room, (GetViewportX()+300),  player.y+1); 
npcVinny_moving=true; Vinny.chasedown(); Vinny.Baseline=0;  hunger[Vinny.ID]=1; 
}}

//////////  Zero Remaining Item Loss------------------------------ ----------------------------------------///

if ((coffee_s_remaining <=0)&&(coffee_a_remaining <=0)&&(coffee_b_remaining <=0)&&(coffee_c_remaining <=0)&&(coffee_d_remaining <=0))
{
CarriesCoffee=false;
if (Menu.Contains("Coffee")){RemoveTextItem("Coffee");}
if (Menu.Contains("Latte")){RemoveTextItem("Latte");}
if (Menu.Contains("Americano")){RemoveTextItem("Americano");}
if (Menu.Contains("Cappuccino")){RemoveTextItem("Cappuccino");}
if (Menu.Contains("Mocha")){RemoveTextItem("Mocha");}
}

if ((coffee_s_remaining <=0)&&(player.InventoryQuantity[CoffeeS.ID]!=0)){TopUp("Run Out!","You have no more Coffee: S!"); gCoffee_S.Visible=false; AddIt();}
if ((coffee_a_remaining <=0)&&(player.InventoryQuantity[CoffeeA.ID]!=0)){TopUp("Run Out!","You have no more Coffee: A!"); gCoffee_A.Visible=false; AddIt();}
if ((coffee_b_remaining <=0)&&(player.InventoryQuantity[CoffeeB.ID]!=0)){TopUp("Run Out!","You have no more Coffee: B!"); gCoffee_B.Visible=false; AddIt();}
if ((coffee_c_remaining <=0)&&(player.InventoryQuantity[CoffeeC.ID]!=0)){TopUp("Run Out!","You have no more Coffee: C!"); gCoffee_C.Visible=false; AddIt();}
if ((coffee_d_remaining <=0)&&(player.InventoryQuantity[CoffeeD.ID]!=0)){TopUp("Run Out!","You have no more Coffee: D!"); gCoffee_D.Visible=false; AddIt();}

if ((oldpapers_remaining <=0)&&(player.InventoryQuantity[Oldpapers.ID]!=0)){player.LoseInventory(Oldpapers);}

if ((chai_remaining<=0)){
if (Menu.Contains("Chai Tea")){RemoveTextItem(Chai.Name); TopUp("Run Out!","You have no more Chai!"); gChai.Visible=false;  AddIt();}
if (Menu.Contains("Chai Latte")){RemoveTextItem("Chai Latte");}
}

if ((crest_remaining<=0)&&(Menu.Contains("Pipeline Crest"))){RemoveTextItem("Pipeline Crest"); TopUp("Run Out!","You have no more Pipeline Crest!"); gCrest.Visible=false;  crest_remaining=0; AddIt();}
if ((rinse_remaining<=0)&&(Menu.Contains("Pipeline Rinse"))){RemoveTextItem("Pipeline Rinse"); TopUp("Run Out!","You have no more Pipeline Rinse!");  gRinse.Visible=false;  rinse_remaining=0; AddIt();}

if ((milk_remaining<=0)){
if (Menu.Contains("Milk")){RemoveTextItem(Milk.Name); TopUp("Run Out!","You have no more milk!");  gMilk.Visible=false;  AddIt();}
if (Menu.Contains("Latte")){RemoveTextItem("Latte");}
if (Menu.Contains("Cappuccino")){RemoveTextItem("Cappuccino");}
if (Menu.Contains("Chai Latte")){RemoveTextItem("Chai Latte");}
if (Menu.Contains("Mocha")){RemoveTextItem("Mocha");}
}

if ((bagel_plain_remaining<=0)&&(Menu.Contains("Plain Bagel"))){gBagel_p.Visible=false;
player.LoseInventory(Bagel_Plain); RemoveTextItem("Plain Bagel"); TopUp("Run Out!","You have no more plain bagels!");}

if ((player.InventoryQuantity[spcBagels1.ID]!=0)&&(spcbagels1_remaining<=0)&&(Menu.Contains(String.Format("%s",spcBagels1.Name)))){
//Fix This--->>>//gBagel_s1.Visible=false; 
player.LoseInventory(spcBagels1); RemoveTextItem(String.Format("%s",spcBagels1.Name)); 
TopUp("Run Out!",(String.Format("You have no more %ss!",spcBagels1.Name)));}

if ((player.InventoryQuantity[spcBagels2.ID]!=0)&&(spcbagels2_remaining<=0)&&(Menu.Contains(String.Format("%s",spcBagels1.Name)))){
//Fix This--->>>//gBagel_s2.Visible=false; 
player.LoseInventory(spcBagels2); RemoveTextItem(String.Format("%s",spcBagels2.Name)); 
TopUp("Run Out!",(String.Format("You have no more %ss!",spcBagels2.Name)));}

if ((player.InventoryQuantity[spcBagels3.ID]!=0)&&(spcbagels3_remaining<=0)&&(Menu.Contains(String.Format("%s",spcBagels1.Name)))){
//Fix This--->>>//gBagel_s3.Visible=false; 
player.LoseInventory(spcBagels3); RemoveTextItem(String.Format("%s",spcBagels3.Name)); 
TopUp("Run Out!",(String.Format("You have no more %ss!",spcBagels3.Name)));}

if ((player.InventoryQuantity[spcBagels4.ID]!=0)&&(spcbagels4_remaining<=0)&&(Menu.Contains(String.Format("%s",spcBagels1.Name)))){
//Fix This--->>>//gBagel_s4.Visible=false; 
player.LoseInventory(spcBagels4); RemoveTextItem(String.Format("%s",spcBagels4.Name)); 
TopUp("Run Out!",(String.Format("You have no more %ss!",spcBagels4.Name)));}

if ((flour_remaining<=0)&&(player.InventoryQuantity[Flour.ID]!=0)){
player.LoseInventory(Flour); TopUp("Run Out!","You have no more flour!");  AddIt();}

if ((yeast_remaining<=0)&&(player.InventoryQuantity[Yeast.ID]!=0)){
player.LoseInventory(Yeast); TopUp("Run Out!","You have no more Yeast!");  AddIt();}

if ((sugar_remaining<=0)&&(player.InventoryQuantity[Sugar.ID]!=0)){
  player.LoseInventory(Sugar); TopUp("Run Out!","You have no more sugar!");  AddIt();}

if ((salt_remaining<=0)&&(player.InventoryQuantity[Salt.ID]!=0)){
  player.LoseInventory(Salt); TopUp("Run Out!","You have no more salt!");  AddIt();}

if ((capers_remaining<=0)&&(player.InventoryQuantity[Capers.ID]!=0)){
  player.LoseInventory(Capers); TopUp("Run Out!","You have no more capers!");  AddIt();}

if ((lox_remaining<=0)&&(player.InventoryQuantity[Lox.ID]!=0)){
  player.LoseInventory(Lox); TopUp("Run Out!","You have no more Lox!");  AddIt();}

if ((cream_remaining<=0)&&(player.InventoryQuantity[Cream.ID]!=0)){
  player.LoseInventory(Cream); TopUp("Run Out!","You have no more Cream!");  AddIt();}

if ((syrup_remaining<=0)&&(player.InventoryQuantity[Syrups.ID]!=0)){
  player.LoseInventory(Syrups); TopUp("Run Out!","You have no more syrup!");  AddIt();}

if ((whipped_remaining<=0)&&(player.InventoryQuantity[Whipped.ID]!=0)){
  player.LoseInventory(Whipped); TopUp("Run Out!","You have no more Whipped Cream!");  AddIt();}

if ((chilli_remaining<=0)&&(player.InventoryQuantity[Chilli.ID]!=0)){
player.LoseInventory(Chilli); TopUp("Run Out!","You have no more Lox!");  AddIt();}

if ((relish_remaining<=0)&&(player.InventoryQuantity[Relish.ID]!=0)){
player.LoseInventory(Relish); TopUp("Run Out!","You have no more Relish!");  AddIt();}

if ((ketchup_remaining<=0)&&(player.InventoryQuantity[Ketchup.ID]!=0)){
player.LoseInventory(Ketchup); TopUp("Run Out!","You have no more Ketchup!");  AddIt();}

if ((mustard_remaining<=0)&&(player.InventoryQuantity[Mustard.ID]!=0)){
player.LoseInventory(Mustard); TopUp("Run Out!","You have no more Mustard!");  AddIt();}

if ((sauerkraut_remaining<=0)&&(player.InventoryQuantity[Sauerkraut.ID]!=0)){
player.LoseInventory(Sauerkraut); TopUp("Run Out!","You have no more Sauerkraut!");  AddIt();}

if ((granolas_remaining<=0)&&(cSlot2.InventoryQuantity[Gondolas.ID]!=0)){
  cSlot2.LoseInventory(Gondolas); TopUp("Run Out!","That was the last gondola bar!");  AddIt();}

if ((sunroom_remaining<=0)&&(cSlot2.InventoryQuantity[Sunroom.ID]!=0)){
  cSlot2.LoseInventory(Sunroom); TopUp("Run Out!","That was the last pill in the bottle of Sun Room!");  AddIt();}

if ((moonroom_remaining<=0)&&(cSlot2.InventoryQuantity[Moonroom.ID]!=0)){
  cSlot2.LoseInventory(Moonroom); TopUp("Run Out!","That was the last pill in the bottle of Moon Room!");  AddIt();}

if ((painrelief_remaining<=0)&&(cSlot2.InventoryQuantity[Painrelief.ID]!=0)){
  cSlot2.LoseInventory(Painrelief); TopUp("Run Out!","That was the last pill in the box of pain reliever!");  AddIt();}

if ((urinary_remaining<=0)&&(cSlot2.InventoryQuantity[Urinary.ID]!=0)){
  cSlot2.LoseInventory(Urinary); TopUp("Run Out!","That was the last pill in the box of urinary pain reliever!");  AddIt();}

if ((gelcaps_remaining<=0)&&(cSlot2.InventoryQuantity[Gelcaps.ID]!=0)){
  cSlot2.LoseInventory(Gelcaps); TopUp("Run Out!","That was the last pill in the bottle of gel caps!");  AddIt();}

if ((multivitamin_remaining<=0)&&(cSlot2.InventoryQuantity[Multivitamin.ID]!=0)){
  cSlot2.LoseInventory(Multivitamin); TopUp("Run Out!","That was the last pill in the bottle of multivitamins!");  AddIt();}
  
if ((spelllemon_remaining<=0)&&(cSlot2.InventoryQuantity[Spelllemon.ID]!=0)){
  cSlot2.LoseInventory(Spelllemon); TopUp("Run Out!","That was the last lozenge in the box of cough drops!");  AddIt();}

if ((spellunflavor_remaining<=0)&&(cSlot2.InventoryQuantity[Spellunflav.ID]!=0)){
  cSlot2.LoseInventory(Spellunflav); TopUp("Run Out!","That was the last lozenge in the box of cough drops!");  AddIt();}

if ((apaptol_remaining<=0)&&(cSlot2.InventoryQuantity[Apaptol.ID]!=0)){
  cSlot2.LoseInventory(Apaptol); TopUp("Run Out!","That was the last pill in the bottle of Apaptol!");  AddIt();}

if (paper_remaining<=0){paper_remaining=0;
if (Menu.Contains("Georgetonian")){RemoveTextItem("Georgetonian"); 
if (player.Room!=29){TopUp("Run Out!","You have no more copies of the georgetonian!"); }}}

if ((cocoa_remaining<=0)){
if (Menu.Contains("Hot Cocoa")){RemoveTextItem("Hot Cocoa"); TopUp("Run Out!","You have no more cocoa!");  gCocoa.Visible=false; AddIt();}
if (Menu.Contains("Mocha")){RemoveTextItem("Mocha");}

}if ((hotdogs_remaining<=0)&&(Menu.Contains("Hot Dog"))){TopUp("Run Out!","You have no more Hot Dogs!"); gHotdog.Visible=false; RemoveTextItem("Hot Dog");}
if ((buns_remaining<=0)&&(Menu.Contains("Hot Dog"))){TopUp("Run Out!","You have no more Hot Dog Buns!"); gHotdog.Visible=false; RemoveTextItem("Hot Dog");}

if ((player.InventoryQuantity[CoffeeS.ID] != 0) && (coffee_s_remaining <= 0)){player.LoseInventory(CoffeeS);}
if ((player.InventoryQuantity[CoffeeA.ID] != 0) && (coffee_a_remaining <= 0)){player.LoseInventory(CoffeeA);}
if ((player.InventoryQuantity[CoffeeB.ID] != 0) && (coffee_b_remaining <= 0)){player.LoseInventory(CoffeeB);}
if ((player.InventoryQuantity[CoffeeC.ID] != 0) && (coffee_c_remaining <= 0)){player.LoseInventory(CoffeeC);}
if ((player.InventoryQuantity[CoffeeD.ID] != 0) && (coffee_d_remaining <= 0)){player.LoseInventory(CoffeeD);}
if ((player.InventoryQuantity[Chai.ID] != 0) && (chai_remaining <= 0)){player.LoseInventory(Chai);}
if ((player.InventoryQuantity[Crest.ID] != 0) && (crest_remaining <= 0)){player.LoseInventory(Crest);}
if ((player.InventoryQuantity[Rinse.ID] != 0) && (rinse_remaining <= 0)){player.LoseInventory(Rinse);}
if ((player.InventoryQuantity[Cocoa.ID] != 0) && (cocoa_remaining <= 0)){player.LoseInventory(Cocoa);}
if ((player.InventoryQuantity[Milk.ID] != 0) && (milk_remaining == 0)){player.LoseInventory(Milk);}
if ((player.InventoryQuantity[Bagel_Plain.ID] != 0) && (bagel_plain_remaining <= 0)){player.LoseInventory(Bagel_Plain);}
if ((player.InventoryQuantity[Georgetonian.ID] != 0) && (paper_remaining <= 0)){player.LoseInventory(Georgetonian);}

if ((player.InventoryQuantity[Gondolas.ID] != 0) && (granolas_remaining==0)){player.LoseInventory(Gondolas);}

//////////  Upcoffee Reversionals------------------------------ 
if ((player.InventoryQuantity[CoffeeS.ID]!=0)&&(player.InventoryQuantity[CoffeeA.ID]==0)&&(player.InventoryQuantity[CoffeeB.ID]==0)&&(player.InventoryQuantity[CoffeeC.ID]==0)&&(player.InventoryQuantity[CoffeeD.ID]==0)){
upCoffee=("S");}
if ((player.InventoryQuantity[CoffeeS.ID]==0)&&(player.InventoryQuantity[CoffeeA.ID]!=0)&&(player.InventoryQuantity[CoffeeB.ID]==0)&&(player.InventoryQuantity[CoffeeC.ID]==0)&&(player.InventoryQuantity[CoffeeD.ID]==0)){
upCoffee=("A");}
if ((player.InventoryQuantity[CoffeeS.ID]==0)&&(player.InventoryQuantity[CoffeeA.ID]==0)&&(player.InventoryQuantity[CoffeeB.ID]!=0)&&(player.InventoryQuantity[CoffeeC.ID]==0)&&(player.InventoryQuantity[CoffeeD.ID]==0)){
upCoffee=("B");}
if ((player.InventoryQuantity[CoffeeS.ID]==0)&&(player.InventoryQuantity[CoffeeA.ID]==0)&&(player.InventoryQuantity[CoffeeB.ID]==0)&&(player.InventoryQuantity[CoffeeC.ID]!=0)&&(player.InventoryQuantity[CoffeeD.ID]==0)){
upCoffee=("C");}
if ((player.InventoryQuantity[CoffeeS.ID]==0)&&(player.InventoryQuantity[CoffeeA.ID]==0)&&(player.InventoryQuantity[CoffeeB.ID]==0)&&(player.InventoryQuantity[CoffeeC.ID]==0)&&(player.InventoryQuantity[CoffeeD.ID]!=0)){
upCoffee=("D");}
//////////  MENU CONDITIONALS------------------------------ MENU CONDITIONALS---------MENU CONDITIONALS------//

//if (((cSlot1.InventoryQuantity[Emachine.ID]!= 0)||(cSlot1.InventoryQuantity[espressomachine.ID]!= 0))&&((player.InventoryQuantity[CoffeeD.ID] != 0)||(player.InventoryQuantity[CoffeeC.ID] != 0)) && (player.InventoryQuantity[Milk.ID] != 0) && (!Menu.Contains("Latte"))){Menu.AddItem("Latte");}
if ((CarriesCoffee==true)&&((cSlot1.InventoryQuantity[Emachine.ID]!= 0)||(cSlot1.InventoryQuantity[espressomachine.ID]!= 0))&&(player.InventoryQuantity[Milk.ID]!=0)&&(player.InventoryQuantity[Syrups.ID]!=0)&&(!Menu.Contains("Latte"))){Menu.AddItem("Latte");}
//if (Menu.Contains("Latte")){}

if (((cSlot1.InventoryQuantity[Emachine.ID]!=0)||(cSlot1.InventoryQuantity[espressomachine.ID]!= 0))&&(CarriesCoffee==true) && (!Menu.Contains("Americano"))){Menu.AddItem("Americano");}
//if (Menu.Contains("Americano")){}

if (((cSlot1.InventoryQuantity[Emachine.ID]!=0)||(cSlot1.InventoryQuantity[espressomachine.ID]!=0))& (player.InventoryQuantity[Milk.ID] != 0)  && (CarriesCoffee==true)&& (!Menu.Contains("Cappuccino"))) {Menu.AddItem("Cappuccino");}
//if (Menu.Contains("Cappuccino")){}

if (((cSlot1.InventoryQuantity[Emachine.ID]!=0)||(cSlot1.InventoryQuantity[espressomachine.ID]!=0))&&(CarriesCoffee==true)&&(player.InventoryQuantity[Cocoa.ID]!= 0)&&(!Menu.Contains("Mocha"))) {Menu.AddItem("Mocha");}
//if (Menu.Contains("Mocha")){}

if ((player.InventoryQuantity[Milk.ID]!=0)&&(player.InventoryQuantity[Chai.ID]!=0)&&((cSlot1.InventoryQuantity[Emachine.ID] != 0)||(cSlot1.InventoryQuantity[espressomachine.ID] != 0))&&(!Menu.Contains("Chai Latte"))) {Menu.AddItem("Chai Latte");}
//if (Menu.Contains("Chai Latte")){}

if ((bagel_plain_remaining >0)&&(!Menu.Contains("Plain Bagel"))){Menu.AddItem(Bagel_Plain.Name);}
//if (Menu.Contains("Plain Bagel")){}

if ((hotdogs_remaining!=0)&&(buns_remaining!=0)&&(!Menu.Contains("Hot Dog"))){Menu.AddItem("Hot Dog");}
//if (Menu.Contains("Plain Bagel")){}

if ((paper_remaining!=0)&&(!Menu.Contains("Georgetonian"))){Menu.AddItem("Georgetonian");} if (Menu.Contains("Geogetonian")){}

if ((crest_remaining!=0)&&(!Menu.Contains("Pipeline Crest"))){Menu.AddItem(Crest.Name);} if (Menu.Contains("Pipeline Crest")){}
if ((rinse_remaining!=0)&&(!Menu.Contains("Pipeline Rinse"))){Menu.AddItem(Rinse.Name);} if (Menu.Contains("Pipeline Rinse")){}


if ((coffee_s_remaining !=0)&&(!Menu.Contains("Coffee"))&&(cSlot1.InventoryQuantity[maker.ID]!=0)){Menu.AddItem("Coffee"); upCoffee=("S");}
if ((coffee_a_remaining !=0)&&(!Menu.Contains("Coffee"))&&(cSlot1.InventoryQuantity[maker.ID]!=0)){Menu.AddItem("Coffee"); upCoffee=("A");}
if ((coffee_b_remaining !=0)&&(!Menu.Contains("Coffee"))&&(cSlot1.InventoryQuantity[maker.ID]!=0)){Menu.AddItem("Coffee"); upCoffee=("B");}
if ((coffee_c_remaining !=0)&&(!Menu.Contains("Coffee"))&&(cSlot1.InventoryQuantity[maker.ID]!=0)){Menu.AddItem("Coffee"); upCoffee=("C");}
if ((coffee_d_remaining !=0)&&(!Menu.Contains("Coffee"))&&(cSlot1.InventoryQuantity[maker.ID]!=0)){Menu.AddItem("Coffee"); upCoffee=("D");}
//if (Menu.Contains("Coffee")){}

if ((spcbagels1_remaining!=0)&&(!Menu.Contains(String.Format("%s",spcBagels1.Name)))){Menu.AddItem(spcBagels1.Name);}
if ((spcbagels2_remaining!=0)&&(!Menu.Contains(String.Format("%s",spcBagels2.Name)))){Menu.AddItem(spcBagels2.Name);}
if ((spcbagels3_remaining!=0)&&(!Menu.Contains(String.Format("%s",spcBagels3.Name)))){Menu.AddItem(spcBagels3.Name);}
if ((spcbagels4_remaining!=0)&&(!Menu.Contains(String.Format("%s",spcBagels4.Name)))){Menu.AddItem(spcBagels4.Name);}

//////////  MENU BUTTON UPDATERY------------------------------ MENU UPDATERY------//
if (Menu.ItemCount ==0){menu1.Visible=false; menu2.Visible=false; menu3.Visible=false; menu4.Visible=false; menu5.Visible=false; menu6.Visible=false; menu5.Visible=false; menu6.Visible=false; menu7.Visible=false; menu8.Visible=false; menu9.Visible=false; menu10.Visible=false; menu11.Visible=false; menu12.Visible=false; menu13.Visible=false; menu14.Visible=false;}

if (Menu.ItemCount >= 1 )menu1.Text=Menu.Items[0]; 
if (Menu.ItemCount >= 2 )menu2.Text=Menu.Items[1]; 
if (Menu.ItemCount >= 3 )menu3.Text=Menu.Items[2];
if (Menu.ItemCount >= 4 )menu4.Text=Menu.Items[3];
if (Menu.ItemCount >= 5 )menu5.Text=Menu.Items[4];
if (Menu.ItemCount >= 6 )menu6.Text=Menu.Items[5];
if (Menu.ItemCount >= 7 )menu7.Text=Menu.Items[6];
if (Menu.ItemCount >= 8 )menu8.Text=Menu.Items[7];
if (Menu.ItemCount >= 9 )menu9.Text=Menu.Items[8];
if (Menu.ItemCount >= 10)menu10.Text=Menu.Items[9];
if (Menu.ItemCount >= 11)menu11.Text=Menu.Items[10];
if (Menu.ItemCount >= 12)menu12.Text=Menu.Items[11];
if (Menu.ItemCount >= 13)menu13.Text=Menu.Items[12];
if (Menu.ItemCount >= 14)menu14.Text=Menu.Items[13];
if (Menu.ItemCount == 0 ){menu14.Visible=false; menu13.Visible=false; menu12.Visible=false; menu11.Visible=false; menu10.Visible=false; menu9.Visible=false; menu8.Visible=false; menu7.Visible=false; menu6.Visible=false; menu5.Visible=false; menu4.Visible=false; menu3.Visible=false; menu2.Visible=false; menu1.Visible=false;}
if (Menu.ItemCount == 1 ){menu14.Visible=false; menu13.Visible=false; menu12.Visible=false; menu11.Visible=false; menu10.Visible=false; menu9.Visible=false; menu8.Visible=false; menu7.Visible=false; menu6.Visible=false; menu5.Visible=false; menu4.Visible=false; menu3.Visible=false; menu2.Visible=false; menu1.Visible=true;}
if (Menu.ItemCount == 2 ){menu14.Visible=false; menu13.Visible=false; menu12.Visible=false; menu11.Visible=false; menu10.Visible=false; menu9.Visible=false; menu8.Visible=false; menu7.Visible=false; menu6.Visible=false; menu5.Visible=false; menu4.Visible=false; menu3.Visible=false; menu2.Visible=true; menu1.Visible=true;}
if (Menu.ItemCount == 3 ){menu14.Visible=false; menu13.Visible=false; menu12.Visible=false; menu11.Visible=false; menu10.Visible=false; menu9.Visible=false; menu8.Visible=false; menu7.Visible=false; menu6.Visible=false; menu5.Visible=false; menu4.Visible=false; menu3.Visible=true; menu2.Visible=true; menu1.Visible=true;}
if (Menu.ItemCount == 4 ){menu14.Visible=false; menu13.Visible=false; menu12.Visible=false; menu11.Visible=false; menu10.Visible=false; menu9.Visible=false; menu8.Visible=false; menu7.Visible=false; menu6.Visible=false; menu5.Visible=false; menu4.Visible=true; menu3.Visible=true; menu2.Visible=true; menu1.Visible=true;}
if (Menu.ItemCount == 5 ){menu14.Visible=false; menu13.Visible=false; menu12.Visible=false; menu11.Visible=false; menu10.Visible=false; menu9.Visible=false; menu8.Visible=false; menu7.Visible=false; menu6.Visible=false; menu5.Visible=true; menu4.Visible=true; menu3.Visible=true; menu2.Visible=true; menu1.Visible=true;}
if (Menu.ItemCount == 6 ){menu14.Visible=false; menu13.Visible=false; menu12.Visible=false; menu11.Visible=false; menu10.Visible=false; menu9.Visible=false; menu8.Visible=false; menu7.Visible=false; menu6.Visible=true; menu5.Visible=true; menu4.Visible=true; menu3.Visible=true; menu2.Visible=true; menu1.Visible=true;}
if (Menu.ItemCount == 7 ){menu14.Visible=false; menu13.Visible=false; menu12.Visible=false; menu11.Visible=false; menu10.Visible=false; menu9.Visible=false; menu8.Visible=false; menu7.Visible=true; menu6.Visible=true; menu5.Visible=true; menu4.Visible=true; menu3.Visible=true; menu2.Visible=true; menu1.Visible=true;}
if (Menu.ItemCount == 8 ){menu14.Visible=false; menu13.Visible=false; menu12.Visible=false; menu11.Visible=false; menu10.Visible=false; menu9.Visible=false; menu8.Visible=true; menu7.Visible=true; menu6.Visible=true; menu5.Visible=true; menu4.Visible=true; menu3.Visible=true; menu2.Visible=true; menu1.Visible=true;}
if (Menu.ItemCount == 9 ){menu14.Visible=false; menu13.Visible=false; menu12.Visible=false; menu11.Visible=false; menu10.Visible=false; menu9.Visible=true; menu8.Visible=true; menu7.Visible=true; menu6.Visible=true; menu5.Visible=true; menu4.Visible=true; menu3.Visible=true; menu2.Visible=true; menu1.Visible=true;}
if (Menu.ItemCount == 10 ){menu14.Visible=false; menu13.Visible=false; menu12.Visible=false; menu11.Visible=false; menu10.Visible=true; menu9.Visible=true; menu8.Visible=true; menu7.Visible=true; menu6.Visible=true; menu5.Visible=true; menu4.Visible=true; menu3.Visible=true; menu2.Visible=true; menu1.Visible=true;}
if (Menu.ItemCount == 11 ){menu14.Visible=false; menu13.Visible=false; menu12.Visible=false; menu11.Visible=true; menu10.Visible=true; menu9.Visible=true; menu8.Visible=true; menu7.Visible=true; menu6.Visible=true; menu5.Visible=true; menu4.Visible=true; menu3.Visible=true; menu2.Visible=true; menu1.Visible=true;}
if (Menu.ItemCount == 12 ){menu14.Visible=false; menu13.Visible=false; menu12.Visible=true; menu11.Visible=true; menu10.Visible=true; menu9.Visible=true; menu8.Visible=true; menu7.Visible=true; menu6.Visible=true; menu5.Visible=true; menu4.Visible=true; menu3.Visible=true; menu2.Visible=true; menu1.Visible=true;}
if (Menu.ItemCount == 13 ){menu14.Visible=false; menu13.Visible=true; menu12.Visible=true; menu11.Visible=true; menu10.Visible=true; menu9.Visible=true; menu8.Visible=true; menu7.Visible=true; menu6.Visible=true; menu5.Visible=true; menu4.Visible=true; menu3.Visible=true; menu2.Visible=true; menu1.Visible=true;}
if (Menu.ItemCount == 14 ){menu14.Visible=true; menu13.Visible=true; menu12.Visible=true; menu11.Visible=true; menu10.Visible=true; menu9.Visible=true; menu8.Visible=true; menu7.Visible=true; menu6.Visible=true; menu5.Visible=true; menu4.Visible=true; menu3.Visible=true; menu2.Visible=true; menu1.Visible=true;}


//////////  COMMERCE TIMER------////////////  Commerce TIMER------////////////  COMMERCE TIMER------////////////  COMMERCE TIMER------//
if ((IsTimerExpired(2)==1)&&(player.Room!=25)&&(player.Room!=1)){
int left=(GetViewportX()-20);
int right=(GetViewportX()+300);
int side; side=Random(1);
int cmt;

Character* spawnperson;
int stopchance=Random(100)+rep;//if (stopchance>60){hunger[spawnperson.ID]=1;}if (stopchance<=60){hunger[spawnperson.ID]=0;}
int baserando=Random(4)+1;

if (player.Room==23){// Main Menu (Start/Credits/Quit)
cmt=Random(20); 

if (cmt==0){spawnperson=Richard;}//Richard A //SetGlobalInt(16, 1);
else if (cmt==1){spawnperson=Sebastian;}//Sebastian//SetGlobalInt(33, 1);
else if (cmt==2){spawnperson=Marcus; Marcus.ChangeView(86);}//Marcus // SetGlobalInt(21, 1);
else if (cmt==3){spawnperson=Chris;}//Chris A SetGlobalInt(32, 1);
else if (cmt==4){spawnperson=Jenny;}//Jenny A SetGlobalInt(15, 1);}
else if (cmt==5){spawnperson=Julian;}//Julian
else if (cmt==6){spawnperson=Rebecca;}
else if (cmt==7){spawnperson=Johns;}//SetGlobalInt(25, 1);//Johns:
else if (cmt==8){spawnperson=Omar;}
else if (cmt==9){spawnperson=Harry;}
else if (cmt==10){spawnperson=Alice_2;}
else if (cmt==11){spawnperson=Toney;}
else if (cmt==12){spawnperson=Dick;}
else if (cmt==13){spawnperson=Glenda;}
else if (cmt==14){spawnperson=Eddie;}
else if (cmt==15){spawnperson=Thales;}
else if (cmt==16){spawnperson=Thomas;}
else if (cmt==17){spawnperson=Judge;}
else if (cmt==18){spawnperson=Stephen;}
else if (cmt==19){spawnperson=TheThree;}
else if (cmt==20){spawnperson=DC;}

  spawnperson.Tint(0, 0, 0, 100, 0);
  spawnperson.ManualScaling=false;
if (spawnperson.Room!=player.Room){
 
  if (stopchance>60){hunger[spawnperson.ID]=1;}
  if (stopchance<=60){hunger[spawnperson.ID]=0;}
  spawnperson.ChangeRoom(player.Room, right, player.y); 
  spawnperson.Baseline=(Stand.y + baserando);
    if (side==0){spawnperson.x=right; spawnperson.Walk(-100, player.y, eNoBlock, eAnywhere); }
    if (side==1){spawnperson.x=left; spawnperson.Walk(999, player.y, eNoBlock, eAnywhere);}
    }
}//End Main Menu


if (player.Room==36){// Walkthru
cmt=Random(15); 

if (cmt==0){spawnperson=Winston; SetGlobalInt(56, 1); hunger[Winston.ID]=1;//Winston

if (spawnperson.Room!=player.Room){
  if (stopchance>60){hunger[spawnperson.ID]=1;}
  if (stopchance<=60){hunger[spawnperson.ID]=0;}
  spawnperson.ChangeRoom(player.Room, right, player.y); 
  spawnperson.Baseline=(Stand.y + baserando);
  spawnperson.ManualScaling=true; spawnperson.Scaling=42;
  if (side==0){spawnperson.x=right; spawnperson.Walk(0, player.y, eNoBlock, eAnywhere);}
  if (side==1){spawnperson.x=left; spawnperson.Walk(999, player.y, eNoBlock, eAnywhere);}
}}
if (cmt==1){genericspawn();}
}//End Walkthru Rooms

if (player.Room==22){// 13th And Numismia (UNIVERSITY)
cmt=Random(7); 

if (cmt==0){spawnperson=Richard;}//Richard A //SetGlobalInt(16, 1);
else if (cmt==1){spawnperson=Sebastian;}//Sebastian//SetGlobalInt(33, 1);
else if (cmt==2){spawnperson=Marcus; Marcus.ChangeView(86); 
                if ((small_Marcus>1)||(rep>50)){SetGlobalInt(21, 1); hunger[Marcus.ID]=1;}
                }//Marcus // SetGlobalInt(21, 1);
else if (cmt==3){spawnperson=Chris;}//Chris A SetGlobalInt(32, 1);
else if (cmt==4){if ((milhour>10)&&(milhour<20)){spawnperson=Jenny;}//Jenny A SetGlobalInt(15, 1);}
                 else{spawnperson=Harry;}}
else if (cmt==5){spawnperson=Julian;}//Julian
else if (cmt==6){spawnperson=Ward;}
else if (cmt==7){if ((milhour>10)&&(milhour<20)){spawnperson=Johns;}//SetGlobalInt(25, 1);//Johns:
                 else{spawnperson=Omar;}}

if (spawnperson.Room!=player.Room){
  spawnperson.ManualScaling=false; 
  if (stopchance>60){hunger[spawnperson.ID]=1;}
  if (stopchance<=60){hunger[spawnperson.ID]=0;}
  spawnperson.ChangeRoom(player.Room, right, player.y); 
  spawnperson.Baseline=(Stand.y + baserando);
    if (side==0){spawnperson.x=right; spawnperson.Walk(0, player.y, eNoBlock, eAnywhere); }
    if (side==1){spawnperson.x=left; spawnperson.Walk(999, player.y, eNoBlock, eAnywhere);}
    }
}//End 13th and Numismia

if (player.Room==34){// Tosheroon Park
cmt=Random(8); 

if (cmt==0){spawnperson=Richard;}//Richard A // SetGlobalInt(16, 1);}
else if (cmt==1){spawnperson=Sebastian;}//Sebastian SetGlobalInt(33, 1);}
else if (cmt==2){spawnperson=Marcus; Marcus.UnlockView(); Marcus.ChangeView(86);//Marcus A
    hunger[Marcus.ID]=0; if ((rep>50)||(small_Marcus>=1)){SetGlobalInt(21, 1); hunger[Marcus.ID]=1;}}
else if (cmt==3){spawnperson=Jessi;}//Jessi SetGlobalInt(45, 1);}
else if (cmt==4){spawnperson=Chris;}//Chris SetGlobalInt(32, 1);}
else if (cmt==5){spawnperson=Jenny;}//Jenny SetGlobalInt(15, 1);}
else if (cmt==6){spawnperson=Julian;}//Julian
else if (cmt==7){spawnperson=Ward;}//Ward //SetGlobalInt(15, 1);}
else if (cmt==8){
  if ((milhour>10)&&(milhour<20)){spawnperson=Johns;}//Johns SetGlobalInt(25, 1); 
  else spawnperson=Harry;}

if (spawnperson.Room!=player.Room){
  spawnperson.ManualScaling=false; 
  if (stopchance>60){hunger[spawnperson.ID]=1;}
  if (stopchance<=60){hunger[spawnperson.ID]=0;}
  spawnperson.ChangeRoom(player.Room, right, player.y); 
  spawnperson.Baseline=(Stand.y + baserando);
  if (side==0){spawnperson.x=right; spawnperson.chasedown();}
  if (side==1){spawnperson.x=left; spawnperson.chasedown();}
}
}//End Tosheroon Park

else if (player.Room==20){// Florin
cmt= Random(6);

if (cmt==0){spawnperson=Christin;}//Christin: A//SetGlobalInt(39, 1);
if (cmt==1){spawnperson=Jenny;}//jenny: A SetGlobalInt(15, 1);
if (cmt==2){spawnperson=Marcus; Marcus.UnlockView(); Marcus.ChangeView(86); //Marcus
    hunger[Marcus.ID]=0; if ((rep>=20)||(small_Marcus>=1)){hunger[Marcus.ID]=1;}}
if (cmt==3){spawnperson=Jessi;}//Jessi
if (cmt==4){spawnperson=Ward;}//Ward
if (cmt==5){spawnperson=Meadow; Meadow.LockView(241);//Meadow
        hunger[Meadow.ID]=0; int meadowwaffle=Random(2); if (meadowwaffle>0){hunger[Meadow.ID]=1;}}
if (cmt==6){
    if ((milhour>8)&&(milhour<18)){spawnperson=Thales;}//Thales
    if ((milhour<=8)||(milhour>=18)){spawnperson=Matts;}}

if (spawnperson.Room!=player.Room){
  spawnperson.ManualScaling=false; 
  if (stopchance>60){hunger[spawnperson.ID]=1;}
  if (stopchance<=60){hunger[spawnperson.ID]=0;}
  spawnperson.Baseline=(Stand.y + baserando);
  if (side==0){
              spawnperson.ChangeRoom(player.Room, 3, 186);
              spawnperson.Walk(309, 161, eNoBlock, eAnywhere); 
              spawnperson.AddWaypoint(394, 160); 
              spawnperson.AddWaypoint(748, 143);
              spawnperson.AddWaypoint(775, 143);}
  if (side==1){
              spawnperson.ChangeRoom(player.Room, 748, 143);
              spawnperson.Walk(394, 160, eNoBlock, eAnywhere);
              spawnperson.AddWaypoint(309, 162);
              spawnperson.AddWaypoint(3, 189);
              spawnperson.AddWaypoint(-20, 100);}
  }

}//End Florin

else if (player.Room==13){// Brennan Bridge
cmt=Random(5);

if (cmt==0){spawnperson=Richard;}
if (cmt==1){spawnperson=Jessi;}
if (cmt==2){spawnperson=Troy;}
if (cmt==3){spawnperson=Sebastian;}
if (cmt==4){spawnperson=Winston; SetGlobalInt(56, 1); hunger[Winston.ID]=1; }//Winston
if (cmt==5){
  if ((milhour>10)&&(milhour<20)){spawnperson=Johns;}
  else {spawnperson=Clarence;}
  }

if (spawnperson.Room!=player.Room){
  if (stopchance>60){hunger[spawnperson.ID]=1;}
  if (stopchance<=60){hunger[spawnperson.ID]=0;}
  spawnperson.ChangeRoom(player.Room, right, player.y); 
  spawnperson.Baseline=(Stand.y + baserando);
  spawnperson.ManualScaling=false; 
  if (side==0){spawnperson.x=493; spawnperson.y=114;
  spawnperson.Walk(470, 116, eNoBlock, eAnywhere); 
  spawnperson.AddWaypoint(424, 88);
  spawnperson.AddWaypoint(424, 88); 
  spawnperson.AddWaypoint(140, 89); 
  spawnperson.AddWaypoint(89, 116); 
  spawnperson.AddWaypoint(76, 115); 
  spawnperson.AddWaypoint(-6, 160);}
  if (side==1){spawnperson.x=6; spawnperson.y=153; 
  spawnperson.Walk(76, 115, eNoBlock, eAnywhere);
  spawnperson.AddWaypoint(89, 116);
  spawnperson.AddWaypoint(140, 87);
  spawnperson.AddWaypoint(424, 88);
  spawnperson.AddWaypoint(424, 88);
  spawnperson.AddWaypoint(470, 116);
  spawnperson.AddWaypoint(550, 116);}
}

}//End Bridge


else if (player.Room==5){// Franklin
cmt=Random(10);

//George A
if (cmt==0){spawnperson=George; 
    if ((GetGlobalInt(1)==1)&&(GetGlobalInt(101)>10)&&(GetGlobalInt(18)<10)){SetGlobalInt(18, 1); hunger[George.ID]=1; }
    if ((GetGlobalInt(1)==1)&&(GetGlobalInt(101)>10)&&(GetGlobalInt(18)==10)&&(dayspassed==5)){SetGlobalInt(18, 1); hunger[George.ID]=1;}}
else if (cmt==1){spawnperson=Toney;}//SetGlobalInt(14, 1);}
else if (cmt==2){spawnperson=Richard;}
else if (cmt==3){spawnperson=Troy;}//SetGlobalInt(17, 1);}
else if (cmt==4){spawnperson=Kyam;}//SetGlobalInt(28, 1);}
else if (cmt==5){//Alice or Matts
    if (milhour<=5){spawnperson=Matts;}
    else if ((milhour>5)&&(milhour<20)){spawnperson=DC;}
    else if (milhour>=20){spawnperson=Alice_2;}}//SetGlobalInt(40, 1);
else if (cmt==6){spawnperson=Dick;
      if ((GetGlobalInt(438)==1)&&(!Menu.Contains("Coffee"))){SetGlobalInt(38, 0);}//Denied and None Still
      if ((GetGlobalInt(438)==1)&&(Menu.Contains("Coffee"))){SetGlobalInt(38, 1); hunger[Dick.ID]=1; SetGlobalInt(438, 4);}//Denied, but smells good?
      if (GetGlobalInt(438)!=1){SetGlobalInt(38, 1); hunger[Dick.ID]=1; }}//Not denied.
else if (cmt==7){
    if ((milhour>8)&&(milhour<18)){spawnperson=Thales;}//SetGlobalInt(25, 1);
    else {spawnperson=TJ;}
    }
    
  if ((cmt<8)&&(spawnperson.Room!=player.Room)){
    spawnperson.ManualScaling=false; 
  //if (gDebuggery.Visible==true){Display("cmt: %d[spawnperson: %d",cmt, spawnperson.Name);}
  if (stopchance>60){hunger[spawnperson.ID]=1;}
  if (stopchance<=60){hunger[spawnperson.ID]=0;}
  spawnperson.ChangeRoom(player.Room, right, player.y+1); 
  spawnperson.Baseline=(Stand.y + baserando);
    spawnperson.UnlockView();
    if (side==0){spawnperson.x=right; spawnperson.chasedown();}
    if (side==1){spawnperson.x=left;  spawnperson.chasedown();
    }}
  if (cmt>=8){genericspawn(); 
    if (gDebuggery.Visible==true){
      //Display("Genericspawn!");
      }
  }

}//END FRANKLIN!

else if (player.Room==26){//Collins
genericspawn();}//End Collins

else if ((player.Room==14)||(player.Room==17)){//Downtown
cmt=Random(14);

if (cmt==0){spawnperson=Chris;}
else if (cmt==1){spawnperson=Toney;}
else if (cmt==2){spawnperson=Julian;}
else if (cmt==3){spawnperson=Richard;}
else if (cmt==4){spawnperson=Kyam;}
else if (cmt==5){spawnperson=Troy;}
else if (cmt==6){spawnperson=Jessi;}
else if (cmt==7){spawnperson=Jenny;}
else if (cmt==8){spawnperson=Marcus;}
else if (cmt==9){spawnperson=Dick;
  if ((GetGlobalInt(438)==1)&&(!Menu.Contains("Coffee"))){SetGlobalInt(38, 0);}//Denied and None Still
  if ((GetGlobalInt(438)==1)&&(Menu.Contains("Coffee"))){SetGlobalInt(38, 1); SetGlobalInt(438, 4);}//Denied, but smells good?
  if (GetGlobalInt(438)!=1){SetGlobalInt(38, 1);}}//Not denied.
else if (cmt==10){
  if ((milhour>8)&&(milhour<18)){spawnperson=Thales;}
  else {spawnperson=Harry;}}
else if (cmt==11){spawnperson=Ward;}
else if (cmt==12){spawnperson=Christin;}
 
  if ((cmt<13)&&(spawnperson.Room!=player.Room)){
    spawnperson.ManualScaling=false; 
  //if (gDebuggery.Visible==true){Display("cmt: %d[spawnperson: %d",cmt, spawnperson.Name);}
  if (stopchance>60){hunger[spawnperson.ID]=1;}
  if (stopchance<=60){hunger[spawnperson.ID]=0;}
  spawnperson.ChangeRoom(player.Room, right, player.y+1); 
  spawnperson.Baseline=(Stand.y + baserando);
    spawnperson.UnlockView();
    if (side==0){spawnperson.x=right; spawnperson.chasedown();}
    if (side==1){spawnperson.x=left;  spawnperson.chasedown();
    }}
  if (cmt>=13){
    genericspawn(); 
    if (gDebuggery.Visible==true){}//Display("Genericspawn!");
  }
}//End Downtown

else if (player.Room==10){}

int streetlights;
if ((ampm==0)&&((hour<8)&&(hour>=1))){//Early Morning
streetlights=200;}
if ((ampm==0)&&(hour>=8)&&(hour!=12)){//Morning
streetlights=0;}
if ((ampm==1)&&(hour==12)){//NOON
streetlights=0;}
if ((ampm==1)&&(hour<=8)&&(hour!=12)){//day
streetlights=0;}
if ((ampm==1)&&(hour>=9)&&(hour!=12)){//Night
streetlights=200;}
if ((ampm==0)&&(hour==12)){//Midnight
streetlights=200;}

int roomytimemod;
if (player.Room==5){roomytimemod=0;}//Franklin
else if (player.Room==13){roomytimemod=10;}//Bridge
else if (player.Room==14){roomytimemod=-20;}//Downtown
else if (player.Room==20){roomytimemod=0;}//Florin
else if (player.Room==22){roomytimemod=-5;}//13th
else if (player.Room==26){roomytimemod=40;}//Collins
else if (player.Room==23){roomytimemod=-20; streetlights=0;}//Main Menu

int timermath=(Random(200)+streetlights+roomytimemod);
if (timermath<5){SetTimer(2, 5);}
else if (timermath>5){SetTimer(2, timermath);}
}

//Alice (post-move)
if (( ((Alice_2.x - player.x) <= 25) && (Alice_2.x - player.x) >= 0)&& (Alice_2.Room==player.Room)&&(moved_Alice==true)){//in Range 
salebuyer=("Alice"); customerlisten();
customerlisten(); PCListen(); dName.Text=(" "); dText.Text=(" "); Movedtalk();}//End Mel as NPC


//Here's a huge placeholder where the old cart-vs-pedestrian collision was calculated. It's changed a lot, but here's the old move:
//if ((SaleInProgress==0)&&(gBuyortalk.Visible==false)&&(gDialog.Visible==false)){
//if (GetGlobalInt(1) == 1){ // Andrus!
//if ((GetGlobalInt(52)==0) && (player.IsCollidingWithChar(Stand)) && (gDialog.Visible==false)&&(gStand_Gui.Visible==false)&&(gQuestion.Visible==false)&&(gBonus.Visible==false)&&(gMake.Visible==false)){ //Cart Is Set Up To Sell?
//if (( ((Toney.x - player.x) <= 30) && (Toney.x - player.x) >= 10)&& (Toney.Room==player.Room) && (GetGlobalInt(14)==1))
//{Toney.StopMoving(); Toney.LockView(52); salebuyer=("Toney"); salutation(); SetGlobalInt(14, 0); }
//if (( ((Richard.x - player.x) <= 30) && (Richard.x - player.x) >= 10)&& (Richard.Room==player.Room) && (GetGlobalInt(16)==1)&&(rveggie!=3))
//{Richard.StopMoving(); Richard.LockView(61); salebuyer=("Richard"); salutation(); SetGlobalInt(16, 0); }
//if (( ((Jessi.x - player.x) <= 30) && (Jessi.x - player.x) >= 10)&& (Jessi.Room==player.Room) && (GetGlobalInt(45)==1)&&(oveggie!=2))
//{Jessi.StopMoving(); Jessi.LockView(186); salebuyer=("Jessi"); salutation(); SetGlobalInt(45, 0);  }
//if (( ((Troy.x - player.x) <= 30) && (Troy.x - player.x) >= 10)&& (Troy.Room==player.Room) && (GetGlobalInt(17)==1))
//{Troy.StopMoving(); Troy.LockView(74); salebuyer=("Troy"); salutation(); SetGlobalInt(17, 0);  }
//if (( ((Marcus.x - player.x) <= 30) && (Marcus.x - player.x) >= 10)&& (Marcus.Room==player.Room) && (GetGlobalInt(21)==1))
//{Marcus.StopMoving(); Marcus.LockView(86); salebuyer=("Marcus"); salutation(); SetGlobalInt(21, 0); }
//if (( ((Jenny.x - player.x) <= 30) && (Jenny.x - player.x) >= 10)&& (Jenny.Room==player.Room) && (GetGlobalInt(15)==1)&&(jveggie!=2))
//{Jenny.StopMoving(); Jenny.LockView(92); salebuyer=("Jenny"); salutation(); SetGlobalInt(15, 0); }
//if (( ((Kyam.x - player.x) <= 30) && (Kyam.x - player.x) >= 10)&& (Kyam.Room==player.Room) && (GetGlobalInt(28)==1))
//{Kyam.StopMoving(); Kyam.LockView(126); salebuyer=("Kyam"); salutation(); SetGlobalInt(28, 0); }
//if (( ((Chris.x - player.x) <= 30) && (Chris.x - player.x) >= 10)&& (Chris.Room==player.Room) && (GetGlobalInt(32)==1))
//{Chris.StopMoving(); Chris.LockView(143); salebuyer=("Chris"); salutation(); SetGlobalInt(32, 0); }
//if ((((Sebastian.x - player.x) <= 30)&&(Sebastian.x - player.x) >= 10)&&(Sebastian.Room==player.Room)&&(GetGlobalInt(33)==1)&&(gDialog.Visible==false))
//{Sebastian.StopMoving(); Sebastian.LockView(146); salebuyer=("Sebastian"); salutation(); SetGlobalInt(33, 0); }
//if ((((Dick.x - player.x) <= 30)&&(Dick.x - player.x) >= 10)&&(Dick.Room==player.Room)&&(GetGlobalInt(38)==1)&&(gDialog.Visible==false))
//{Dick.StopMoving(); Dick.LockView(162); salebuyer=("Dick"); salutation(); SetGlobalInt(38, 0); }
//if (( ((Christin.x - player.x) <= 30) && (Christin.x - player.x) >= 10)&& (Christin.Room==player.Room) && (GetGlobalInt(39)==1))
//{Christin.StopMoving(); Christin.LockView(167); salebuyer=("Christin"); salutation(); SetGlobalInt(39, 0); }
//if (( ((Alice_2.x - player.x) <= 30) && (Alice_2.x - player.x) >= 10)&& (Alice_2.Room==player.Room) && (GetGlobalInt(40)==1))
//{Alice_2.StopMoving(); Alice_2.LockView(169); salebuyer=("Alice"); salutation(); SetGlobalInt(40, 0); }
//if (( ((George.x - player.x) <= 20) && (George.x - player.x) >= -10)&& (George.Room==player.Room) && (GetGlobalInt(18)==1))
//{George.StopMoving(); salebuyer=("George"); SetGlobalInt(18, 0);  Georgebuy();}
//if (( ((Nelly.x - player.x) <= 20) && (Nelly.x - player.x) >= -10)&& (Nelly.Room==player.Room)&&(GetGlobalInt(250)==1))
//{Nelly.StopMoving(); salebuyer=("Nelly"); salutation(); SetGlobalInt(250, 0);}
//if (( ((Ward.x - player.x) <= 20) && (Ward.x - player.x) >= -10)&& (Ward.Room==player.Room)&&(GetGlobalInt(35)==1))
//{Ward.StopMoving(); salebuyer=("Ward"); salutation(); SetGlobalInt(35, 0);   }
//if (( ((Omar.x - player.x) <= 20) && (Omar.x - player.x) >= -10)&& (Omar.Room==player.Room)&&(hungry_omar==1))
//{Omar.StopMoving(); salebuyer=("Omar"); salutation(); hungry_omar=0;}
//if (( ((TJ.x - player.x) <= 20) && (TJ.x - player.x) >= -10)&& (TJ.Room==player.Room)&&(hungry_tj==1))
//{TJ.StopMoving(); salebuyer=("TJ"); salutation(); hungry_tj=0;}
//if (( ((Julian.x - player.x) <= 20) && (Julian.x - player.x) >= -10)&& (Julian.Room==player.Room)&&(hungry_julian==1))
//{Julian.StopMoving(); salebuyer=("Julian");   salutation(); hungry_julian=0;}
//if (( ((Matts.x - player.x) <= 20) && (Matts.x - player.x) >= -10)&& (Matts.Room==player.Room)&&(hungry_matts==1))
//{Matts.StopMoving(); salebuyer=("Matts");   salutation(); hungry_matts=0;}
//if (( ((Meadow.x - player.x) <= 20) && (Meadow.x - player.x) >= -10)&& (Meadow.Room==player.Room)&&(hungry_meadow==1))
//{Meadow.StopMoving(); salebuyer=("Meadow");  salutation(); hungry_meadow=0;}
//if (( ((Bramford.x - player.x) <= 20) && (Bramford.x - player.x) >= -10)&& (Bramford.Room==player.Room)&&(hungry_bramford==1))
//{Bramford.StopMoving(); salebuyer=("Bramford");   salutation(); hungry_bramford=0;}
//if (( ((Stephanie.x - player.x) <= 20) && (Stephanie.x - player.x) >= -10)&& (Stephanie.Room==player.Room)&&(hungry_stephanie==1))
//{Stephanie.StopMoving(); salebuyer=("Stephanie");   salutation(); hungry_stephanie=0;}
//if (( ((DC.x - player.x) <= 20) && (DC.x - player.x) >= -10)&& (DC.Room==player.Room)&&(hungry_DC==1))
//{DC.StopMoving(); salebuyer=("DC");   salutation(); hungry_DC=0;}
//if (( ((Clarence.x - player.x) <= 20) && (Clarence.x - player.x) >= -10)&& (Clarence.Room==player.Room)&&(hungry_clarence==1))
//{Clarence.StopMoving(); salebuyer=("Clarence"); salutation(); hungry_clarence=0;}
////========SPECIALS========//
////Basinski:
//if ((((Basinski.x - player.x) <= 30)&&(Basinski.x - player.x) >= 0)&&(Basinski.Room==player.Room)&&(GetGlobalInt(43)==1)){Basinski.StopMoving();
//if ((((Basinski.x - player.x) <= 30)&&(Basinski.x - player.x) >= 0)&&(Basinski.Room==player.Room)&&(GetGlobalInt(43)==1)&&(gDialog.Visible==false))salebuyer=("Basinski"); SaleInProgress=1;  Basinskibuy();}
////Eddie:
//if ((((Eddie.x - player.x) <= 10)&&(Eddie.x - player.x) >= -10)&&(Eddie.Room==player.Room)&&(player.Room!=31)&&(GetGlobalInt(411)==3)){Eddie.StopMoving();
//if ((((Eddie.x - player.x) <= 10)&&(Eddie.x - player.x) >= -10)&&(Eddie.Room==player.Room)&&(player.Room!=31)&&(GetGlobalInt(411)==3)&&(gDialog.Visible==false)) salebuyer=("Eddie"); SaleInProgress=1;  Eddiebuy();}
////Suchin
//if ((((Suchin.x - player.x) <= 30)&&(Suchin.x - player.x) >= -2)&&(Suchin.Room==player.Room)&&(GetGlobalInt(26)==1)){
//if (gDialog.Visible==true){}
//if (gDialog.Visible==false){Suchin.StopMoving(); salebuyer=("Suchin"); SaleInProgress=1;  Suchinbuy();}}
////Winston
//if (( ((Winston.x - player.x) <= 5) && (Winston.x - player.x) >= -5)&& (Winston.Room==player.Room) && (GetGlobalInt(56)==1)){
//if (gDialog.Visible==true){}
//if (gDialog.Visible==false){Winston.StopMoving(); salebuyer=("Winston"); SaleInProgress=1; Winstonbuy(); SetGlobalInt(56, 0);}}
////The Three:
//if (((TheThree.x - player.x) <= 30)&&((TheThree.x - player.x) >= 0)&&(TheThree.Room==player.Room)&&(GetGlobalInt(37)==1)&&(gDialog.Visible==true)){}
//if (((TheThree.x - player.x) <= 30)&&((TheThree.x - player.x) >= 0)&&(TheThree.Room==player.Room)&&(GetGlobalInt(37)==1)&&(gDialog.Visible==false)){{TheThree.StopMoving(); TheThree.LockView(160); salebuyer=("The Three"); salutation();}}
////Vinny(NPC):
//if (((Vinny.x - player.x) <= 30)&&((Vinny.x - player.x) >= 0)&&(Vinny.Room==player.Room)&&(npcvinny_offered==false)&&(gDialog.Visible==true)){}
//if (((Vinny.x - player.x) <= 30)&&((Vinny.x - player.x) >= 0)&&(Vinny.Room==player.Room)&&(npcvinny_offered==false)&&(gDialog.Visible==false)){{Vinny.StopMoving(); salebuyer=("Vinny"); SaleInProgress=1;  Vinnyswitch();}}
////Glenda
//if (( ((Glenda.x - player.x) <= 5) && (Glenda.x - player.x) >= -5)&& (Glenda.Room==player.Room) && (glenda_puzzled==false)&&(player.Room!=18)){
//if (gDialog.Visible==true){}
//if (gDialog.Visible==false){Glenda.StopMoving(); salebuyer=("Glenda"); SaleInProgress=1; Glendabuy(); glenda_puzzled=true;}}
//}}//End Andrus Conquest
//
//if (GetGlobalInt(1) == 2){ // Melanie!
//if ((GetGlobalInt(52)==0) && (player.IsCollidingWithChar(Stand)) && (gDialog.Visible==false)&&(gStand_Gui.Visible==false)&&(gQuestion.Visible==false)){ //Cart Is Set Up To Sell?
//if (( ((Toney.x - player.x) <= 30) && (Toney.x - player.x) >= 10)&& (Toney.Room==player.Room) && (GetGlobalInt(14)==1))
//{Toney.StopMoving(); Toney.LockView(52); salebuyer=("Toney"); salutation(); SetGlobalInt(14, 0); }
//if (( ((Richard.x - player.x) <= 30) && (Richard.x - player.x) >= 10)&& (Richard.Room==player.Room) && (GetGlobalInt(16)==1))
//{Richard.StopMoving(); Richard.LockView(61); salebuyer=("Richard"); salutation(); SetGlobalInt(16, 0); }
//if (( ((Jessi.x - player.x) <= 30) && (Jessi.x - player.x) >= 10)&& (Jessi.Room==player.Room) && (GetGlobalInt(45)==1))
//{Jessi.StopMoving(); Jessi.LockView(186); salebuyer=("Jessi"); salutation(); SetGlobalInt(45, 0); }
//if (( ((Troy.x - player.x) <= 30) && (Troy.x - player.x) >= 10)&& (Troy.Room==player.Room) && (GetGlobalInt(17)==1))
//{Troy.StopMoving(); Troy.LockView(74); salebuyer=("Troy"); salutation(); SetGlobalInt(17, 0); }
//if (( ((Marcus.x - player.x) <= 30) && (Marcus.x - player.x) >= 10)&& (Marcus.Room==player.Room) && (GetGlobalInt(21)==1))
//{Marcus.StopMoving(); Marcus.LockView(86); salebuyer=("Marcus"); salutation(); SetGlobalInt(21, 0); }
//if (( ((Jenny.x - player.x) <= 30) && (Jenny.x - player.x) >= 10)&& (Jenny.Room==player.Room) && (GetGlobalInt(15)==1))
//{Jenny.StopMoving(); Jenny.LockView(92); salebuyer=("Jenny"); salutation(); SetGlobalInt(15, 0); }
//if (( ((Kyam.x - player.x) <= 30) && (Kyam.x - player.x) >= 10)&& (Kyam.Room==player.Room) && (GetGlobalInt(28)==1))
//{Kyam.StopMoving(); Kyam.LockView(126); salebuyer=("Kyam"); salutation(); SetGlobalInt(28, 0); }
//if (( ((Chris.x - player.x) <= 30) && (Chris.x - player.x) >= 10)&& (Chris.Room==player.Room) && (GetGlobalInt(32)==1))
//{Chris.StopMoving(); Chris.LockView(143); salebuyer=("Chris"); salutation(); SetGlobalInt(32, 0); }
//if ((((Sebastian.x - player.x) <= 30)&&(Sebastian.x - player.x) >= 10)&&(Sebastian.Room==player.Room)&&(GetGlobalInt(33)==1)&&(gDialog.Visible==false))
//{Sebastian.StopMoving(); Sebastian.LockView(146); salebuyer=("Sebastian"); salutation(); SetGlobalInt(33, 0); }
//if ((((Dick.x - player.x) <= 30)&&(Dick.x - player.x) >= 10)&&(Dick.Room==player.Room)&&(GetGlobalInt(38)==1)&&(gDialog.Visible==false))
//{Dick.StopMoving(); Dick.LockView(162); salebuyer=("Dick"); salutation(); SetGlobalInt(38, 0); }
//if (( ((Christin.x - player.x) <= 30) && (Christin.x - player.x) >= 10)&& (Christin.Room==player.Room) && (GetGlobalInt(39)==1))
//{Christin.StopMoving(); Christin.LockView(167); salebuyer=("Christin"); salutation(); SetGlobalInt(39, 0); }
//if (( ((Alice_2.x - player.x) <= 30) && (Alice_2.x - player.x) >= 10)&& (Alice_2.Room==player.Room) && (GetGlobalInt(40)==1))
//{Alice_2.StopMoving(); Alice_2.LockView(169); salebuyer=("Alice"); salutation(); SetGlobalInt(40, 0); }
//if (( ((Nelly.x - player.x) <= 20) && (Nelly.x - player.x) >= -10)&& (Nelly.Room==player.Room)&&(GetGlobalInt(250)==1))
//{Nelly.StopMoving(); salebuyer=("Nelly"); salutation(); SetGlobalInt(250, 0);}
//if (( ((Ward.x - player.x) <= 20) && (Ward.x - player.x) >= -10)&& (Ward.Room==player.Room)&&(GetGlobalInt(35)==1))
//{Ward.StopMoving(); salebuyer=("Ward"); salutation(); SetGlobalInt(35, 0);}
//if (( ((Omar.x - player.x) <= 20) && (Omar.x - player.x) >= -10)&& (Omar.Room==player.Room)&&(hungry_omar==1))
//{Omar.StopMoving(); salebuyer=("Omar"); salutation(); hungry_omar=0;}
//if (( ((TJ.x - player.x) <= 20) && (TJ.x - player.x) >= -10)&& (TJ.Room==player.Room)&&(hungry_tj==1))
//{TJ.StopMoving(); salebuyer=("TJ"); salutation(); hungry_tj=0;}
//if (( ((Julian.x - player.x) <= 20) && (Julian.x - player.x) >= -10)&& (Julian.Room==player.Room)&&(hungry_julian==1))
//{Julian.StopMoving(); salebuyer=("Julian"); salutation(); hungry_julian=0;}
//if (( ((Matts.x - player.x) <= 20) && (Matts.x - player.x) >= -10)&& (Matts.Room==player.Room)&&(hungry_matts==1))
//{Matts.StopMoving(); salebuyer=("Matts");   salutation(); hungry_matts=0;}
//if (( ((Bramford.x - player.x) <= 20) && (Bramford.x - player.x) >= -10)&& (Bramford.Room==player.Room)&&(hungry_bramford==1))
//{Bramford.StopMoving(); salebuyer=("Bramford"); salutation(); hungry_bramford=0;}
//if (( ((Stephanie.x - player.x) <= 20) && (Stephanie.x - player.x) >= -10)&& (Stephanie.Room==player.Room)&&(hungry_stephanie==1))
//{Stephanie.StopMoving(); salebuyer=("Stephanie"); salutation(); hungry_stephanie=0;}
//if (( ((DC.x - player.x) <= 20) && (DC.x - player.x) >= -10)&& (DC.Room==player.Room)&&(hungry_DC==1))
//{DC.StopMoving(); salebuyer=("DC");   salutation(); hungry_DC=0;}
//if (( ((Meadow.x - player.x) <= 20) && (Meadow.x - player.x) >= -10)&& (Meadow.Room==player.Room)&&(hungry_meadow==1))
//{Meadow.StopMoving(); salebuyer=("Meadow");  salutation(); hungry_meadow=0;}
//if (( ((Clarence.x - player.x) <= 20) && (Clarence.x - player.x) >= -10)&& (Clarence.Room==player.Room)&&(hungry_clarence==1))
//{Clarence.StopMoving(); salebuyer=("Clarence"); salutation(); hungry_clarence=0;}
////========SPECIALS========//
//////Basinski:
//if ((((Basinski.x - player.x) <= 30)&&(Basinski.x - player.x) >= 0)&&(Basinski.Room==player.Room)&&(GetGlobalInt(43)==1)){
//Basinski.StopMoving();
//if (gDialog.Visible==false){ salebuyer=("Basinski"); Basinskibuy(); }}
////Eddie:
//if ((((Eddie.x - player.x) <= 10)&&(Eddie.x - player.x) >= -10)&&(Eddie.Room==player.Room)&&(player.Room!=31)&&(GetGlobalInt(411)==3)){
//Eddie.StopMoving();
//if (gDialog.Visible==false)salebuyer=("Eddie"); Eddiebuy(); }
////Suchin:
//if ((((Suchin.x - player.x) <= 30)&&(Suchin.x - player.x) >= -2)&&(Suchin.Room==player.Room)&&(GetGlobalInt(26)==1)){
//Suchin.StopMoving();
////if (gDialog.Visible==false)salebuyer=("Suchin"); Suchinbuy(); }
////Winston
//if (( ((Winston.x - player.x) <= 5) && (Winston.x - player.x) >= -5)&& (Winston.Room==player.Room) && (GetGlobalInt(56)==1)){
//if (gDialog.Visible==true){}
//if (gDialog.Visible==false){Winston.StopMoving(); salebuyer=("Winston"); Winstonbuy(); SetGlobalInt(56, 0);}}
////The Three:
//if (((TheThree.x - player.x) <= 20)&&((TheThree.x - player.x) >= -5)&&(TheThree.Room==player.Room)&&(GetGlobalInt(37)==1)&&(gDialog.Visible==true)){}
//if (((TheThree.x - player.x) <= 20)&&((TheThree.x - player.x) >= -5)&&(TheThree.Room==player.Room)&&(GetGlobalInt(37)==1)&&(gDialog.Visible==false)){{TheThree.StopMoving(); TheThree.LockView(160); salebuyer=("The Three"); salutation(); }}
////Glenda
//if (( ((Glenda.x - player.x) <= 5) && (Glenda.x - player.x) >= -5)&& (Glenda.Room==player.Room) && (glenda_puzzled==false)&&(player.Room!=18)){
//if (gDialog.Visible==true){}
//if (gDialog.Visible==false){Glenda.StopMoving(); salebuyer=("Glenda"); Glendabuy(); glenda_puzzled=true;}}
////Vinnylove
//if (((Vinny.x - player.x) <= 30)&&((Vinny.x - player.x) >= 0)&&(Vinny.Room==player.Room)&&(mel_vinnyd==false)&&(gDialog.Visible==true)){}
//if (((Vinny.x - player.x) <= 30)&&((Vinny.x - player.x) >= 0)&&(Vinny.Room==player.Room)&&(mel_vinnyd==false)&&(gDialog.Visible==false)){{Vinny.StopMoving(); salebuyer=("Vinny"); vinnylove();}}
//}}
//
//if (GetGlobalInt(1) == 3){ // Vinny!
//if ((GetGlobalInt(52)==0) && (player.IsCollidingWithChar(Stand)) && (gStand_Gui.Visible==false)&&(gDialog.Visible==false)&&(gQuestion.Visible==false)){ //Cart Is Set Up To Sell?
//if (( ((Toney.x - player.x) <= 30) && (Toney.x - player.x) >= 10)&& (Toney.Room==player.Room) && (GetGlobalInt(14)==1)&&(gDialog.Visible==false))
//{Toney.StopMoving(); Toney.LockView(52); salebuyer=("Toney"); salutation(); SetGlobalInt(14, 0); }
//if (( ((Richard.x - player.x) <= 30) && (Richard.x - player.x) >= 10)&& (Richard.Room==player.Room) && (GetGlobalInt(16)==1)&&(gDialog.Visible==false)&&(rveggie!=3))
//{Richard.StopMoving(); Richard.LockView(61); salebuyer=("Richard"); salutation(); SetGlobalInt(16, 0);}
//if (( ((Jessi.x - player.x) <= 30) && (Jessi.x - player.x) >= 10)&& (Jessi.Room==player.Room) && (GetGlobalInt(45)==1)&&(oveggie!=2))
//{Jessi.StopMoving(); Jessi.LockView(186); salebuyer=("Jessi"); salutation(); SetGlobalInt(45, 0); }
//if (( ((Troy.x - player.x) <= 30) && (Troy.x - player.x) >= 10)&& (Troy.Room==player.Room) && (GetGlobalInt(17)==1)&&(gDialog.Visible==false))
//{Troy.StopMoving(); Troy.LockView(74); salebuyer=("Troy"); salutation(); SetGlobalInt(17, 0); }
//if (( ((Marcus.x - player.x) <= 30) && (Marcus.x - player.x) >= 10)&& (Marcus.Room==player.Room) && (GetGlobalInt(21)==1)&&(gDialog.Visible==false))
//{Marcus.StopMoving(); Marcus.LockView(86); salebuyer=("Marcus"); salutation(); SetGlobalInt(21, 0); }
//if (( ((Jenny.x - player.x) <= 30) && (Jenny.x - player.x) >= 10)&& (Jenny.Room==player.Room) && (GetGlobalInt(15)==1)&&(gDialog.Visible==false)&&(jveggie!=2))
//{Jenny.StopMoving(); Jenny.LockView(92); salebuyer=("Jenny"); salutation(); SetGlobalInt(15, 0); }
//if (( ((Kyam.x - player.x) <= 30) && (Kyam.x - player.x) >= 10)&& (Kyam.Room==player.Room) && (GetGlobalInt(28)==1)&&(gDialog.Visible==false))
//{Kyam.StopMoving(); Kyam.LockView(126); salebuyer=("Kyam"); salutation(); SetGlobalInt(28, 0); }
//if (( ((Chris.x - player.x) <= 30) && (Chris.x - player.x) >= 10)&& (Chris.Room==player.Room) && (GetGlobalInt(32)==1)&&(gDialog.Visible==false))
//{Chris.StopMoving(); Chris.LockView(143); salebuyer=("Chris"); salutation(); SetGlobalInt(32, 0); }
//if ((((Sebastian.x - player.x) <= 30)&&(Sebastian.x - player.x) >= 10)&&(Sebastian.Room==player.Room)&&(GetGlobalInt(33)==1)&&(gDialog.Visible==false))
//{Sebastian.StopMoving(); Sebastian.LockView(146); salebuyer=("Sebastian"); salutation(); SetGlobalInt(33, 0); }
//if ((((Dick.x - player.x) <= 30)&&(Dick.x - player.x) >= 10)&&(Dick.Room==player.Room)&&(GetGlobalInt(38)==1)&&(gDialog.Visible==false))
//{Dick.StopMoving(); Dick.LockView(162); salebuyer=("Dick"); salutation(); SetGlobalInt(38, 0); }
//if (( ((Christin.x - player.x) <= 30) && (Christin.x - player.x) >= 10)&& (Christin.Room==player.Room) && (GetGlobalInt(39)==1)&&(gDialog.Visible==false))
//{Christin.StopMoving(); Christin.LockView(167); salebuyer=("Christin"); salutation(); SetGlobalInt(39, 0); }
//if (( ((Alice_2.x - player.x) <= 30) && (Alice_2.x - player.x) >= 10)&& (Alice_2.Room==player.Room) && (GetGlobalInt(40)==1)&&(gDialog.Visible==false))
//{Alice_2.StopMoving(); Alice_2.LockView(169); salebuyer=("Alice"); salutation(); SetGlobalInt(40, 0); }
//if (( ((Nelly.x - player.x) <= 20) && (Nelly.x - player.x) >= -10)&& (Nelly.Room==player.Room)&&(GetGlobalInt(250)==1))
//{Nelly.StopMoving(); salebuyer=("Nelly"); salutation(); SetGlobalInt(250, 0);}
//if (( ((Ward.x - player.x) <= 20) && (Ward.x - player.x) >= -10)&& (Ward.Room==player.Room)&&(GetGlobalInt(35)==1))
//{Ward.StopMoving(); salebuyer=("Ward");   salutation(); SetGlobalInt(35, 0);}
//if (( ((Omar.x - player.x) <= 20) && (Omar.x - player.x) >= -10)&& (Omar.Room==player.Room)&&(hungry_omar==1))
//{Omar.StopMoving(); salebuyer=("Omar"); salutation(); hungry_omar=0;}
//if (( ((TJ.x - player.x) <= 20) && (TJ.x - player.x) >= -10)&& (TJ.Room==player.Room)&&(hungry_tj==1))
//{TJ.StopMoving(); salebuyer=("TJ"); salutation(); hungry_tj=0;}
//if (( ((Julian.x - player.x) <= 20) && (Julian.x - player.x) >= -10)&& (Julian.Room==player.Room)&&(hungry_julian==1))
//{Julian.StopMoving(); salebuyer=("Julian"); salutation(); hungry_julian=0;}
//if (( ((Matts.x - player.x) <= 20) && (Matts.x - player.x) >= -10)&& (Matts.Room==player.Room)&&(hungry_matts==1))
//{Matts.StopMoving(); salebuyer=("Matts");   salutation(); hungry_matts=0;}
//if (( ((Bramford.x - player.x) <= 20) && (Bramford.x - player.x) >= -10)&& (Bramford.Room==player.Room)&&(hungry_bramford==1))
//{Bramford.StopMoving(); salebuyer=("Bramford");   salutation(); hungry_bramford=0;}
//if (( ((Stephanie.x - player.x) <= 20) && (Stephanie.x - player.x) >= -10)&& (Stephanie.Room==player.Room)&&(hungry_stephanie==1))
//{Stephanie.StopMoving(); salebuyer=("Stephanie");   salutation(); hungry_stephanie=0;}
//if (( ((DC.x - player.x) <= 20) && (DC.x - player.x) >= -10)&& (DC.Room==player.Room)&&(hungry_DC==1))
//{DC.StopMoving(); salebuyer=("DC");   salutation(); hungry_DC=0;}
//if (( ((Meadow.x - player.x) <= 20) && (Meadow.x - player.x) >= -10)&& (Meadow.Room==player.Room)&&(hungry_meadow==1))
//{Meadow.StopMoving(); salebuyer=("Meadow");  salutation(); hungry_meadow=0;}
//if (( ((Clarence.x - player.x) <= 20) && (Clarence.x - player.x) >= -10)&& (Clarence.Room==player.Room)&&(hungry_clarence==1))
//{Clarence.StopMoving(); salebuyer=("Clarence"); salutation(); hungry_clarence=0;}
////========SPECIALS========//
////Basinski:
//if ((((Basinski.x - player.x) <= 30)&&(Basinski.x - player.x) >= 0)&&(Basinski.Room==player.Room)&&(GetGlobalInt(43)==1)){
//Basinski.StopMoving();
//if (gDialog.Visible==false){ salebuyer=("Basinski"); Basinskibuy(); }}
////Eddie:
//if ((((Eddie.x - player.x) <= 10)&&(Eddie.x - player.x) >= -10)&&(Eddie.Room==player.Room)&&(player.Room!=31)&&(GetGlobalInt(411)==3)){
//Eddie.StopMoving();
//if (gDialog.Visible==false){ salebuyer=("Eddie"); Eddiebuy(); }}
////Suchin:
//if ((((Suchin.x - player.x) <= 30)&&(Suchin.x - player.x) >= -2)&&(Suchin.Room==player.Room)&&(GetGlobalInt(26)==1)){
//Suchin.StopMoving();
//if (gDialog.Visible==false){Suchinbuy();  salebuyer=("Suchin");  }}
////Winston
//if (( ((Winston.x - player.x) <= 5) && (Winston.x - player.x) >= -5)&& (Winston.Room==player.Room) && (GetGlobalInt(56)==1)){
//if (gDialog.Visible==true){}
//if (gDialog.Visible==false){Winston.StopMoving(); salebuyer=("Winston"); Winstonbuy(); SetGlobalInt(56, 0);}}
////The Three:
//if (((TheThree.x - player.x) <= 20)&&((TheThree.x - player.x) >= -5)&&(TheThree.Room==player.Room)&&(GetGlobalInt(37)==1)&&(gDialog.Visible==true)){}
//if (((TheThree.x - player.x) <= 20)&&((TheThree.x - player.x) >= -5)&&(TheThree.Room==player.Room)&&(GetGlobalInt(37)==1)&&(gDialog.Visible==false)){{TheThree.StopMoving(); TheThree.LockView(160); salebuyer=("The Three"); salutation(); }}
////Glenda
//if (( ((Glenda.x - player.x) <= 5) && (Glenda.x - player.x) >= -5)&& (Glenda.Room==player.Room) && (glenda_puzzled==false)&&(player.Room!=18)){
//if (gDialog.Visible==true){}
//if (gDialog.Visible==false){Glenda.StopMoving(); salebuyer=("Glenda"); Glendabuy(); glenda_puzzled=true;}}
//}}

//if (GetGlobalInt(1) == 4){ //Logan!
//if ((GetGlobalInt(52)==0) && (player.IsCollidingWithChar(Stand)) && (gStand_Gui.Visible==false)&&(gDialog.Visible==false)&&(gQuestion.Visible==false)){ //Cart Is Set Up To Sell?
//if (( ((Toney.x - player.x) <= 30) && (Toney.x - player.x) >= 10)&& (Toney.Room==player.Room) && (GetGlobalInt(14)==1)&&(gDialog.Visible==false))
//{Toney.StopMoving(); Toney.LockView(52); salebuyer=("Toney"); salutation(); SetGlobalInt(14, 0); SaleInProgress=1;}
//if (( ((Richard.x - player.x) <= 30) && (Richard.x - player.x) >= 10)&& (Richard.Room==player.Room) && (GetGlobalInt(16)==1)&&(gDialog.Visible==false)&&(rveggie!=3))
//{Richard.StopMoving(); Richard.LockView(61); salebuyer=("Richard"); salutation(); SetGlobalInt(16, 0); SaleInProgress=1;}
//if (( ((Jessi.x - player.x) <= 30) && (Jessi.x - player.x) >= 10)&& (Jessi.Room==player.Room) && (GetGlobalInt(45)==1)&&(oveggie!=2))
//{Jessi.StopMoving(); Jessi.LockView(186); salebuyer=("Jessi"); salutation(); SetGlobalInt(45, 0); SaleInProgress=1;}
//if (( ((Troy.x - player.x) <= 30) && (Troy.x - player.x) >= 10)&& (Troy.Room==player.Room) && (GetGlobalInt(17)==1)&&(gDialog.Visible==false))
//{Troy.StopMoving(); Troy.LockView(74); salebuyer=("Troy"); salutation(); SetGlobalInt(17, 0); SaleInProgress=1;}
//if (( ((Marcus.x - player.x) <= 30) && (Marcus.x - player.x) >= 10)&& (Marcus.Room==player.Room) && (GetGlobalInt(21)==1)&&(gDialog.Visible==false))
//{Marcus.StopMoving(); Marcus.LockView(86); salebuyer=("Marcus"); salutation(); SetGlobalInt(21, 0); SaleInProgress=1;}
//if (( ((Jenny.x - player.x) <= 30) && (Jenny.x - player.x) >= 10)&& (Jenny.Room==player.Room) && (GetGlobalInt(15)==1)&&(gDialog.Visible==false)&&(jveggie!=2))
//{Jenny.StopMoving(); Jenny.LockView(92); salebuyer=("Jenny"); salutation(); SetGlobalInt(15, 0); SaleInProgress=1;}
//if (( ((Kyam.x - player.x) <= 30) && (Kyam.x - player.x) >= 10)&& (Kyam.Room==player.Room) && (GetGlobalInt(28)==1)&&(gDialog.Visible==false))
//{Kyam.StopMoving(); Kyam.LockView(126); salebuyer=("Kyam"); salutation(); SetGlobalInt(28, 0); SaleInProgress=1;}
//if (( ((Chris.x - player.x) <= 30) && (Chris.x - player.x) >= 10)&& (Chris.Room==player.Room) && (GetGlobalInt(32)==1)&&(gDialog.Visible==false))
//{Chris.StopMoving(); Chris.LockView(143); salebuyer=("Chris"); salutation(); SetGlobalInt(32, 0); SaleInProgress=1;}
//if ((((Sebastian.x - player.x) <= 30)&&(Sebastian.x - player.x) >= 10)&&(Sebastian.Room==player.Room)&&(GetGlobalInt(33)==1)&&(gDialog.Visible==false))
//{Sebastian.StopMoving(); Sebastian.LockView(146); salebuyer=("Sebastian"); salutation(); SetGlobalInt(33, 0); SaleInProgress=1;}
//if ((((Dick.x - player.x) <= 30)&&(Dick.x - player.x) >= 10)&&(Dick.Room==player.Room)&&(GetGlobalInt(38)==1)&&(gDialog.Visible==false))
//{Dick.StopMoving(); Dick.LockView(162); salebuyer=("Dick"); salutation(); SetGlobalInt(38, 0); SaleInProgress=1;}
//if (( ((Christin.x - player.x) <= 30) && (Christin.x - player.x) >= 10)&& (Christin.Room==player.Room) && (GetGlobalInt(39)==1)&&(gDialog.Visible==false))
//{Christin.StopMoving(); Christin.LockView(167); salebuyer=("Christin"); salutation(); SetGlobalInt(39, 0); SaleInProgress=1;}
////if (( ((Alice_2.x - player.x) <= 30) && (Alice_2.x - player.x) >= 10)&& (Alice_2.Room==player.Room) && (GetGlobalInt(40)==1)&&(gDialog.Visible==false))
//{Alice_2.StopMoving(); Alice_2.LockView(169); salebuyer=("Alice"); salutation(); SetGlobalInt(40, 0); SaleInProgress=1;}
//if (( ((Nelly.x - player.x) <= 20) && (Nelly.x - player.x) >= -10)&& (Nelly.Room==player.Room)&&(GetGlobalInt(250)==1))
//{Nelly.StopMoving(); salebuyer=("Nelly"); SaleInProgress=1;  salutation(); SetGlobalInt(250, 0);}
//if (( ((Ward.x - player.x) <= 20) && (Ward.x - player.x) >= -10)&& (Ward.Room==player.Room)&&(GetGlobalInt(35)==1))
//{Ward.StopMoving(); salebuyer=("Ward"); SaleInProgress=1;  salutation(); SetGlobalInt(35, 0);}
//if (( ((Omar.x - player.x) <= 20) && (Omar.x - player.x) >= -10)&& (Omar.Room==player.Room)&&(hungry_omar==1))
//{Omar.StopMoving(); salebuyer=("Omar"); SaleInProgress=1;  salutation(); hungry_omar=0;}
//if (( ((TJ.x - player.x) <= 20) && (TJ.x - player.x) >= -10)&& (TJ.Room==player.Room)&&(hungry_tj==1))
//{TJ.StopMoving(); salebuyer=("TJ"); SaleInProgress=1;  salutation(); hungry_tj=0;}
//if (( ((Julian.x - player.x) <= 20) && (Julian.x - player.x) >= -10)&& (Julian.Room==player.Room)&&(hungry_julian==1))
//{Julian.StopMoving(); salebuyer=("Julian"); SaleInProgress=1;  salutation(); hungry_julian=0;}
//if (( ((Matts.x - player.x) <= 20) && (Matts.x - player.x) >= -10)&& (Matts.Room==player.Room)&&(hungry_matts==1))
//{Matts.StopMoving(); salebuyer=("Matts");   salutation(); hungry_matts=0;}
//if (( ((Bramford.x - player.x) <= 20) && (Bramford.x - player.x) >= -10)&& (Bramford.Room==player.Room)&&(hungry_bramford==1))
//{Bramford.StopMoving(); salebuyer=("Bramford"); SaleInProgress=1;  salutation(); hungry_bramford=0;}
//if (( ((Stephanie.x - player.x) <= 20) && (Stephanie.x - player.x) >= -10)&& (Stephanie.Room==player.Room)&&(hungry_stephanie==1))
//{Stephanie.StopMoving(); salebuyer=("Stephanie"); SaleInProgress=1;  salutation(); hungry_stephanie=0;}
//if (( ((DC.x - player.x) <= 20) && (DC.x - player.x) >= -10)&& (DC.Room==player.Room)&&(hungry_DC==1))
//{DC.StopMoving(); salebuyer=("DC");   salutation(); hungry_DC=0;}
//if (( ((Meadow.x - player.x) <= 20) && (Meadow.x - player.x) >= -10)&& (Meadow.Room==player.Room)&&(hungry_meadow==1))
//{Meadow.StopMoving(); salebuyer=("Meadow");  salutation(); hungry_meadow=0;}
//if (( ((Clarence.x - player.x) <= 20) && (Clarence.x - player.x) >= -10)&& (Clarence.Room==player.Room)&&(hungry_clarence==1))
////{Clarence.StopMoving(); salebuyer=("Clarence"); salutation(); hungry_clarence=0;}
////========SPECIALS========//
////Basinski:
//if ((((Basinski.x - player.x) <= 30)&&(Basinski.x - player.x) >= 0)&&(Basinski.Room==player.Room)&&(GetGlobalInt(43)==1)){
//////Basinski.StopMoving();
//if (gDialog.Visible==false){ salebuyer=("Basinski"); Basinskibuy(); SaleInProgress=1;}}
////Eddie:
//if ((((Eddie.x - player.x) <= 10)&&(Eddie.x - player.x) >= -10)&&(Eddie.Room==player.Room)&&(player.Room!=31)&&(GetGlobalInt(411)==3)){
//Eddie.StopMoving();
//if (gDialog.Visible==false){ salebuyer=("Eddie"); Eddiebuy(); SaleInProgress=1;}}
////Suchin:
//if ((((Suchin.x - player.x) <= 30)&&(Suchin.x - player.x) >= -2)&&(Suchin.Room==player.Room)&&(GetGlobalInt(26)==1)){
//Suchin.StopMoving();
//if (gDialog.Visible==false){Suchinbuy();  salebuyer=("Suchin");  SaleInProgress=1;}}
////Winston
//if (( ((Winston.x - player.x) <= 5) && (Winston.x - player.x) >= -5)&& (Winston.Room==player.Room) && (GetGlobalInt(56)==1)){
//if (gDialog.Visible==true){}
//if (gDialog.Visible==false){Winston.StopMoving(); salebuyer=("Winston"); SaleInProgress=1; Winstonbuy(); SetGlobalInt(56, 0);}}
////The Three:
//if (((TheThree.x - player.x) <= 20)&&((TheThree.x - player.x) >= -5)&&(TheThree.Room==player.Room)&&(GetGlobalInt(37)==1)&&(gDialog.Visible==true)){}
//if (((TheThree.x - player.x) <= 20)&&((TheThree.x - player.x) >= -5)&&(TheThree.Room==player.Room)&&(GetGlobalInt(37)==1)&&(gDialog.Visible==false)){{TheThree.StopMoving(); TheThree.LockView(160); salebuyer=("The Three"); salutation(); SaleInProgress=1;}}
////Glenda
//if (( ((Glenda.x - player.x) <= 5) && (Glenda.x - player.x) >= -5)&& (Glenda.Room==player.Room) && (glenda_puzzled==false)&&(player.Room!=18)){
//if (gDialog.Visible==true){}
//if (gDialog.Visible==false){Glenda.StopMoving(); salebuyer=("Glenda"); SaleInProgress=1; Glendabuy(); glenda_puzzled=true;}}
//}}

//}//End SaleInProgress Check

//Copcheck
//if (( ((Thales.x - player.x) <= 40) && (Thales.x - player.x) >= -10)&& (Thales.Room==player.Room) && (GetGlobalInt(25)==1) && (Stand.Room==player.Room)){
//Thales.StopMoving(); Thales.chasedown();
//if (gDialog.Visible==false)Thalesbuy(); SaleInProgress=1;}
////Copcheck II
//if (( ((Johns.x - player.x) <= 40) && (Johns.x - player.x) >= -10)&& (Johns.Room==player.Room) && (GetGlobalInt(25)==1) && (Stand.Room==player.Room)){
//Johns.StopMoving();
//if (gDialog.Visible==false)Johnsbuy(); SaleInProgress=1;}

//Winston
if (( ((Winston.x - player.x) <= 30) && (Winston.x - player.x) >= -10)&& (Winston.Room==player.Room) && (GetGlobalInt(56)==1)&&(player.Room==36)){
if (gDialog.Visible==true){}
if (gDialog.Visible==false){Winston.StopMoving(); salebuyer=("Winston"); SaleInProgress=1; Winstonbuy(); SetGlobalInt(56, 0);}}

////==================// nicotine withdrawel coughing //=========================/
if ((GetGlobalInt(1) == 1)&&(caffeine.Width <=50)&&(caffeine.Width >=21)){withdrawel=1;}
if ((GetGlobalInt(1) == 1)&&(caffeine.Width <=20)&&(caffeine.Width >=11)){withdrawel=2;}
if ((GetGlobalInt(1) == 1)&&(caffeine.Width <=10))                       {withdrawel=3;}

if (IsTimerExpired(19)==1){
if (player.Room==29){}
else if ((player.Room!=29)&&(gToothbrushing.Visible==false)&&(gBreakdown.Visible==false)){
  if (withdrawel==0){if ((player.Room!=10)&&(mouse.Visible==false)){SetTimer(19, 0);}} //Taking out ShakeScreenBackground(2, 1, 10);
  if (withdrawel==1){if ((player.Room!=10)&&(mouse.Visible==false)){ShakeScreenBackground(40, 1, 20); SetTimer(19, 400);
     if (GetGlobalInt(52)==1){player.LockView(68);}//Standing Up
else if (GetGlobalInt(52)==0){player.LockView(71); player.Animate(2, 3, eOnce, eBlock); player.UnlockView(); player.Animate(0, 3, eRepeat, eNoBlock);}}}//In-Stand, Sitting

if (withdrawel==2){if ((player.Room!=10)&&(mouse.Visible==false)){ShakeScreenBackground(30, 1, 40); SetTimer(19, 340);
     if (GetGlobalInt(52)==1){player.LockView(68); player.Animate(0, 3, eOnce, eBlock);}//Standing Up
else if (GetGlobalInt(52)==0){player.LockView(71); player.Animate(2, 3, eOnce, eBlock); player.UnlockView(); player.Animate(0, 3, eRepeat, eNoBlock);}}}//In-Stand, Sitting

  if (withdrawel==3){if ((player.Room!=10)&&(mouse.Visible==false)){ShakeScreenBackground(5, 2, 80); SetTimer(19, 200);
     if (GetGlobalInt(52)==1){player.LockView(68); player.Animate(0, 3, eOnce, eBlock);}//Standing Up
else if (GetGlobalInt(52)==0){player.LockView(71); player.Animate(2, 3, eOnce, eBlock); player.UnlockView(); player.Animate(0, 3, eRepeat, eNoBlock);}}}//In-Stand, Sitting
     }}

if (((IsKeyPressed(372)==1)||(IsKeyPressed(87)==1))&&(gSavegame.Visible==false)&&(gLoadgame.Visible==false)&&(gMake.Visible==false)&&(gBuyortalk.Visible==false)&&(gStock.Visible==false)){//UP Uptalk!
if ((gDialog.Visible==true)||(gPick.Visible==true)||(gStock.Visible==true)){}
else if ((gPick.Visible==false)&&(gDialog.Visible==false)&&(gMake.Visible==false)){//LoganJump
if ((GetGlobalInt(1)==4)&&(player.Room==29)){if (in_midair == false){
player.Animate(5, 3, eOnce, eBlock);
int gravrando=Random(3); player.Animate(4, 3, eOnce, eNoBlock); gravity=-(gravrando+4);}}


if (player.IsCollidingWithChar(Stack)==true){
if (vitality.Width < 25){//Too Tired!
gPick.Centre(); close_pick.Visible=false; CloseAll(); PlaySound(60);
pick.NormalGraphic=4225; gPick.Visible=true; pick.Animate(164, 0, 5, eOnce); Wait(100); gPick.Visible=false;}
if ((vitality.Width>=25)&&(nutrition.Width < 25)){//Too Hungry!
gPick.Centre(); close_pick.Visible=false; CloseAll(); PlaySound(60);
pick.NormalGraphic=4219; gPick.Visible=true; pick.Animate(164, 1, 5, eOnce); Wait(130); gPick.Visible=false;}
           if ((vitality.Width >= 25)&&(nutrition.Width >= 25)){//I'm good!
PlaySound(9); TopUp("Daily Delivery!","Got 20 new georgetonian newspapers!");  
paper_remaining+=20;
//Stack.ChangeRoom(1); Wait(5);
//if (player.InventoryQuantity[Georgetonian.ID]==0){player.AddInventory(Georgetonian);}
stockit();}}//stackness

//Andrus as NPC
if (( ((Andrus.x - player.x) <= 60) && (Andrus.x - player.x) >= 0)&& (Andrus.Room==player.Room)&&(Andrus.View!=221)){//in Range 
  if (Andrus.View==293){}//He's an empty news stand.
  else{
  Andrus.StopMoving();
  salebuyer=("Andrus"); customerlisten();PCListen();
  customerlisten(); PCListen(); dName.Text=(" "); dText.Text=(" "); salutation();}//End Andrus as NPC
  }

//Melanie as NPC
if (( ((Melanie.x - player.x) <= 60) && (Melanie.x - player.x) >= 0)&& (Melanie.Room==player.Room)&&(Melanie.View!=220)){//in Range 
  if (Melanie.View==294){}//She's an empty hut.
  else{
  salebuyer=("Melanie"); customerlisten();
  customerlisten(); PCListen(); dName.Text=(" "); dText.Text=(" "); salutation();}//End Mel as NPC
  }
  
//Vinny as NPC
if (( ((Vinny.x - player.x) <= 60) && (Vinny.x - player.x) >= 0)&& (Vinny.Room==player.Room)&&(gStock.Visible==false)){//in Range 
salebuyer=("Vinny"); customerlisten();
customerlisten(); PCListen(); dName.Text=(" "); dText.Text=(" "); salutation();}//End Vinny as NPC

//Logan as NPC
if (( ((Logan.x - player.x) <= 60) && (Logan.x - player.x) >= 0)&& (Logan.Room==player.Room)){//in Range 
salebuyer=("Logan"); customerlisten();
customerlisten(); PCListen(); dName.Text=(" "); dText.Text=(" "); salutation();}//End Logan as NPC

//Matts
if (((Matts.x-player.x)<= 60)&&(Matts.x-player.x>=0)&&(Matts.y-player.y>=0)&&(player.Room==7)&&(Matts.x<460)){//in Range 
salebuyer=("Matts"); customerlisten();
customerlisten(); PCListen(); dName.Text=(" "); dText.Text=(" "); TalkPop();
Wait(40);
customertalk(); PCListen(); dText.Text=("Hey. What's up?"); blab1();
dText.Text=(" "); dName.Text=(" "); PCListen(); customerlisten();
BuyorTalk();}//End Matts

if ( ((Suchin.x - player.x) <= 50) && ((Suchin.x - player.x) >= 10)&& (Suchin.Room==cAndrus.Room)&&((Suchin.y-player.y)<=10))//SUCHIN ROMANCE!
{ 
  if (GetGlobalInt(101)==8){
   Suchin.StopMoving();
   TalkPop(); Wait(40); salebuyer=("Suchin"); customerlisten();
   DBG1.Animate(16, 8, 3, eRepeat); customertalk(); dText.Text=("Oh! You a-3, right?"); blab2();
   DBG1.Animate(16, 6, 3, eRepeat); dText.Text=("...yes. Yes, a-3 is me."); customerlisten(); dName.Text=("Andrus: "); dpb.Visible=true; dpb.Animate(110, 0, 1, eOnce); blab3();
   DBG1.Animate(16, 8, 3, eRepeat); customertalk(); dText.Text=("I so sorry, sir! I should have say something."); blab3();
   DBG1.Animate(16, 8, 3, eRepeat); dText.Text=("...?"); customerlisten(); dName.Text=("Andrus: "); dpb.Visible=true; dpb.Animate(110, 0, 1, eOnce); blab1();
   DBG1.Animate(16, 8, 3, eRepeat); customertalk(); dText.Text=("Today I hear kitty crying in room a-3."); blab3();
   DBG1.Animate(16, 8, 3, eRepeat); customertalk(); dText.Text=("But I think it my kitty, lulu."); blab3();
   DBG1.Animate(16, 8, 3, eRepeat); SuchinTalkSad(); dText.Text=("When I open door, a big grey kitty run outside!"); blab4();
   DBG1.Animate(16, 8, 3, eRepeat); SuchinTalkSad(); dText.Text=("I very sorry!"); blab1();
   SuchinListenSad();dName.Text=("Suchin: "); dText.Text=("..."); blab1();
   SuchinListenSad(); 
   DBG2.Animate(121, 4, 3, eRepeat); Suchin.Animate(7, 3, eRepeat, eNoBlock);
   dName.Text=("Woman: "); dText.Text=("(crying)"); blab1(); WaitMouseKey(50);
   dName.Text=(" "); dText.Text=(" "); dAndrus_su_0.Start();
   //StopPop(); 
 }
 
else if (GetGlobalInt(101)==9){
Suchin.StopMoving(); Suchin.FollowCharacter(null, 0, 0); TalkPop(); Wait(40); int scr=Random(3); 
if (scr==0){DBG1.Animate(16, 8, 3, eRepeat); SuchinTalkSad(); dText.Text=("Where he go?"); blab1();}
if (scr==1){DBG1.Animate(16, 8, 3, eRepeat); SuchinTalkSad(); dText.Text=("I don't see him!"); blab1();}
if (scr==2){DBG1.Animate(16, 8, 3, eRepeat); SuchinTalkSad(); dText.Text=("Here, kitty-kitty!"); blab2();}
if (scr==3){DBG1.Animate(16, 8, 3, eRepeat); SuchinTalkSad(); dText.Text=("Where your cat hiding?"); blab2();}
dName.Text=(" "); dText.Text=(" "); StopPop(); Suchin.UnlockView(); Suchin.FollowCharacter(player, 0, 0);}


else {}  
dName.Text=(" "); dText.Text=(" ");}//END SUCHIN

if (( ((Glembovski.x - player.x) <= 10) && (Glembovski.x - player.x) >= -10)&& (Glembovski.Room==cAndrus.Room)){//Glembovski!
if (GetGlobalInt(101)==9){ salebuyer=("Glembovski"); customerlisten();
player.StopMoving();   player.UnlockView();
Suchin.StopMoving(); Suchin.Walk(player.x+51, player.y, eNoBlock, eAnywhere); 
gPick.Centre(); close_pick.Visible=false; CloseAll();
pick.NormalGraphic=2715; gPick.Visible=true; StopMusic(); 
Glembovski.LockView(123); Glembovski.Animate(3, 3, eRepeat, eNoBlock);
Glembovski.Baseline=999;
pick.Animate(108, 3, 3, eOnce); Wait(200); 
gPick.Visible=false;
TalkPop();  
  player.LockView(31);
  player.Animate(4, 3, eOnce, eBlock);
  player.LockView(28);
  player.Animate(4, 3, eRepeat, eNoBlock);
  Wait(28);
PlayMusic(9);
APkittylisten(); glemtalks(); dText.Text=("Murgaow."); blab1();
Suchin.Walk(player.x+20, player.y, eNoBlock, eAnywhere); 
APkittytalk(); glemlistens(); dText.Text=("Oh, 'Murgaow' is it?"); blab2();
APkittytalk(); glemlistens(); dText.Text=("Why do you run away from room?"); blab3();
APkittytalk(); glemlistens(); dText.Text=("I was worried for you!"); blab2();

//Biter!
gPick.Centre(); close_pick.Visible=false; CloseAll();
pick.X=0; pick.Y=0; //Fullscreen
pick.NormalGraphic=6835; gPick.Visible=true; StopMusic(); 
Glembovski.LockView(123); Glembovski.Animate(3, 3, eRepeat, eNoBlock);
pick.Animate(165, 2, 2, eOnce); Wait(120); 
pick.X=38; pick.Y=16; close_pick.Visible=true;//cancel fullscreen
gPick.Visible=false;
PCListen(); SuchinTalkSad(); dText.Text=("Owch!"); blab1();
PCListen(); SuchinTalkSad(); dText.Text=("That is a bad kitty!"); blab1();


dName.Text=(" "); dText.Text=(" "); StopPop();
//Camera move -> George comes out!
cAndrus.UnlockView(); cAndrus.Transparency=99; cAndrus.x=213;
George.ChangeRoom(7, 214, 193); George.Transparency=99;
  int ran2=Random(2);
    {    if (ran2==0) PlaySoundEx(34, 3);
    else if (ran2==1) PlaySoundEx(36, 3);
    else if (ran2==2) PlaySoundEx(38, 3);
    }  
FadeCharacterIn_NoBlock(George, 0, -15);
   George.Walk(180, 192, eBlock, eAnywhere);
   TalkPop(); Wait(20);
   DBG2.Animate(65, 0, 3, eRepeat);
   salebuyer=("George"); customerlisten();
   customertalk(); dText.Text=("Su Chin! What going on?!"); blab2();
   customertalk(); dText.Text=("Your water boil over on stove!!"); blab2();
cAndrus.UnlockView(); cAndrus.x=(Glembovski.x); cAndrus.Transparency=0; 
   salebuyer=("Suchin"); customerlisten(); 
   SuchinTalkSad(); PCListen(); dText.Text=("Hurry on and get kitty into room!");blab3();
   SuchinTalkSad(); PCListen(); dText.Text=("Don't let George see the kittycat!");blab3();
   SuchinListenSad(); PCListen(); dName.Text=("Andrus: "); dText.Text=("...");blab1();
   customertalk(); PCListen(); dText.Text=("Go on, now!");blab2();
   customerlisten(); PCTalk(); dText.Text=("Yes, good. Ok.");blab2();
   StopPop(); Wait(5);
FadeOut(64);
SetGlobalInt(101, 10);
Suchin.FollowCharacter(null, 0, 0);
Glembovski.Baseline=0;
George.ChangeRoom(1); Suchin.ChangeRoom(1); Glembovski.ChangeRoom(1);
//player.ChangeRoom(11);//Old method... "Later that day..."
SetGlobalInt(10, 1); player.ChangeRoom(7, 257, 138);
Wait(10);
FadeIn(10);
}}

//Bramfordesque Bribery! GRIFTING UNDER OUR NOSES!
if (( ((Bramford.x - player.x) <= 20) && (Bramford.x - player.x) >= 0)&& (Bramford.Room==player.Room))//Bramford in Range
{ 
   Bramford.StopMoving();
   TalkPop(); Wait(40); salebuyer=("Bramford"); customerlisten();
   PCListen(); customertalk(); dText.Text=("Hey there."); blab1();
   PCTalk(); customerlisten(); dText.Text=("Hello."); blab1();
   

   int ranresp = Random(3);
     if (ranresp==0){PCListen(); customertalk(); dText.Text=("Can I help you?"); blab2();}
else if (ranresp==1){PCListen(); customertalk(); dText.Text=("Something you wanted?"); blab2();}
else if (ranresp==2){PCListen(); customertalk(); dText.Text=("...yes?"); blab1();}
else if (ranresp==3){PCListen(); customertalk(); dText.Text=("Did you have a question?"); blab2();}
customerlisten(); PCListen(); dName.Text=(" "); dText.Text=(" "); 
dBuyorTalk.SetOptionState(3, eOptionOff);//NOSALE
BuyorTalk();
//dBram.Start(); //Old Method
}//End Bramford Uptalk

//customertalk
if (( ((Thales.x - player.x) <= 20) && (Thales.x - player.x) >= 0)&&(Thales.Room==18)&&(player.Room==18))//Thales in Court House
{ 
   TalkPop(); Wait(40); salebuyer=("Thales"); customerlisten();
   PCListen(); customertalk(); dText.Text=("Hey there."); blab1();
   PCTalk(); customerlisten(); dText.Text=("Hello."); blab1();
   int ranresp = Random(3);
     if (ranresp==0){PCListen(); customertalk(); dText.Text=("Can I help you?"); blab2();}
else if (ranresp==1){PCListen(); customertalk(); dText.Text=("Something you wanted?"); blab2();}
else if (ranresp==2){PCListen(); customertalk(); dText.Text=("...yes?"); blab1();}
else if (ranresp==3){PCListen(); customertalk(); dText.Text=("Did you have a question?"); blab2();}
   customerlisten(); PCListen(); dName.Text=(" "); dText.Text=(" ");//Blank
   if ((dThales_Courthouse.GetOptionState(4)==eOptionOn)&&(cSlot2.InventoryQuantity[Ticket.ID]!=0)){dThales_Courthouse.SetOptionState(5, eOptionOn);}
   dThales_Courthouse.Start();  
   //Thales.Animate(6, 5, eRepeat, eNoBlock, eForwards); //Back to the book.
 }

//Omar!
if (( ((Omar.x - player.x) <= 50) && (Omar.x - player.x) >= -10)&& (Omar.Room==player.Room)&&(Omar.View==178)&&(player.Room==34)){//Omar in Range 
   Omar.StopMoving();
   TalkPop(); Wait(40); salebuyer=("Omar"); customerlisten();
PCListen(); customertalk(); int ranresp = Random(3);
     if (ranresp==0){dText.Text=("What's up, dude? Uh?"); blab2();
PCListen(); customertalk(); dText.Text=("You smell the branzino here? Making you hungry, uh?"); blab4();}
else if (ranresp==1){dText.Text=("Yeah? You want to try the taojine stew? Nice and hot, OK?"); blab5();}
else if (ranresp==2){dText.Text=("Hallo? Come for the kebab? Good with boil eggs, yeah?"); blab5();}
else if (ranresp==3){dText.Text=("Come on and try the kebab. I'll make you the eggeh, uh?"); blab2();}
customerlisten(); PCListen(); dName.Text=(" "); dText.Text=(" ");
salebuyer=("Omar"); 
BuyorTalk();
}//End Omar Uptalk

if (( ((Omar.x - player.x) <= 60) && (Omar.x - player.x) >= -20)&& (Omar.Room==player.Room)&&(Omar.View==194)&&(Omar.Loop==5))//Omar's Asleep
{ 
   TalkPop(); Wait(40);
   PCListen(); customerlisten(); DBG2.Animate(177, 4, 3, eRepeat); 
   if (small_Omar!=0){dName.Text=("Omar: ");}
   if (small_Omar==0){dName.Text=("Sleeping Man: ");}
   dText.Text=("Zzzzz..."); WaitMouseKey(40);
   dName.Text=(" "); dText.Text=(" "); StopPop();
}//End Omar Sleepytime


if (( ((Marcus.x - player.x) <= 20) && (Marcus.x - player.x) >= 0)&& (Marcus.Room==player.Room)&&(player.Room==27)){//Marcus in Range 
Marcus.StopMoving(); salebuyer=("Marcus");
TalkPop(); Wait(40); 
if (GetGlobalInt(200)==0){//First Talk @ Roastierry
if ((GetGlobalInt(1)==1)||(GetGlobalInt(1)==4)){
PCListen(); customertalk(); dText.Text=("What's up, fatty?"); blab2();
PCTalk(); customerlisten(); dText.Text=("Umm..."); blab2();
PCTalk(); customerlisten(); dText.Text=("What?"); blab2();
PCListen(); customertalk(); dText.Text=("haha - I call everybody that."); blab2();
PCListen(); customertalk(); dText.Text=("I don't really think you're fat."); blab2();
PCListen(); customertalk(); dText.Text=("Well, kind-of."); blab2();
PCTalk(); customerlisten(); dText.Text=("Wha.. You--"); blab2();}
if (GetGlobalInt(1)==2){
PCListen(); customertalk(); dText.Text=("Well, hellloo..."); blab2();
PCTalk(); customerlisten(); dText.Text=("Umm..."); blab2();
PCTalk(); customerlisten(); dText.Text=("What?"); blab2();}
if (GetGlobalInt(1)==3){
PCListen(); customertalk(); dText.Text=("What's up, scruffy?"); blab2();
PCTalk(); customerlisten(); dText.Text=("Umm..."); blab2();
PCTalk(); customerlisten(); dText.Text=("What?"); blab2();
PCListen(); customertalk(); dText.Text=("Oh - sorry."); blab2();
PCListen(); customertalk(); dText.Text=("I thought your name was Scruffy McBeardlington."); blab2();
PCListen(); customertalk(); dText.Text=("...and you worked at the whisker factory."); blab2();
PCTalk(); customerlisten(); dText.Text=("Wha.. You--"); blab2();
PCListen(); customertalk(); dText.Text=("You're not James Beard?"); blab2();
PCTalk(); customerlisten(); dText.Text=("Wh-- No."); blab2();
PCListen(); customertalk(); dText.Text=("'Cause I thought your name was james beard."); blab2();
PCTalk(); customerlisten(); dText.Text=("What?"); blab2();}

PCListen(); customertalk(); dText.Text=("You want some coffee? I'll buy you one."); blab2();
boxadd("Coffee"); boxadd("The Georgetown Roastierry");
PCListen(); customertalk(); dText.Text=("The coffee here at the roastierry is *amazing*."); blab2();
PCListen(); customerlisten(); dName.Text=(" "); dText.Text=(" ");
salebuyer=("Marcus"); dMarcus1.Start();}
if ((GetGlobalInt(200)!=0)&&(GetGlobalInt(200)!=5)){
PCListen(); customertalk(); dText.Text=("What's up? What's goin' on?"); blab2();
PCListen(); customerlisten(); dName.Text=(" "); dText.Text=(" ");
salebuyer=("Marcus"); 
BuyorTalk();}
if (GetGlobalInt(200)==5){
if ((GetGlobalInt(1)==1)||(GetGlobalInt(1)==4)){
PCListen(); customertalk(); dText.Text=("What's up, fatty?"); blab2();
PCTalk(); customerlisten(); dText.Text=("Umm..."); blab2();}
if (GetGlobalInt(1)==3){
PCListen(); customertalk(); dText.Text=("What's up, Scruffy?"); blab2();
PCTalk(); customerlisten(); dText.Text=("Uhh..."); blab2();}
if (GetGlobalInt(1)==2){
PCListen(); customertalk(); dText.Text=("What's up, fine woman?"); blab2();
PCTalk(); customerlisten(); dText.Text=("Umm..."); blab2();}
PCListen(); customertalk(); dText.Text=("I brought you a present."); blab2();
PCTalk(); customerlisten(); dText.Text=("Money?"); blab2();
PCListen(); customertalk(); dText.Text=("No, it's better than that."); blab2();
PCListen(); customertalk(); dText.Text=("Actually - I brought two things, and I thought I'd give you a choice."); blab2();
PCTalk(); customerlisten(); dText.Text=("Okay..."); blab2();
PCListen(); customertalk(); dText.Text=("Option one: a beautiful, though gently used, stereo unit for your stand."); blab2();
PCTalk(); customerlisten(); dText.Text=("Oh."); blab2();
PCListen(); customertalk(); dText.Text=("Option two: my personal collection of old comics. Some real gems in here."); blab2();
PCTalk(); customerlisten(); dText.Text=("Right."); blab2();
PCListen(); customertalk(); dText.Text=("So, what do you think? The boom box, or the cardboard box?"); blab2();
PCListen(); customerlisten(); dName.Text=(" "); dText.Text=(" ");
dMarcusChoice.Start();}
}//End Marcus

//Harry!
if (( ((Harry.x - player.x) <= 20) && (Harry.x - player.x) >= -20)&& (Harry.Room==player.Room)&&((Harry.y - player.y)<= 5)&&((Harry.y - player.y)>= -5)&&(player.Room==12)){//Harried
   salebuyer=("Harry");
   TalkPop(); Wait(40);
   int geezer=Random(4);
   PCListen(); customertalk(); 
   if (geezer==0){dText.Text=("What? What do you want?"); blab1();}
   if (geezer==1){dText.Text=("Oh, what?"); blab1();}
   if (geezer==2){dText.Text=("Hurry it up, will ya?"); blab1();}
   if (geezer==3){dText.Text=("What now?"); blab1();}
   if (geezer==4){dText.Text=("Spit it out."); blab1();}
   customerlisten(); PCListen(); dText.Text=(" ");
   BuyorTalk();
}

if (( ((Thomas.x - player.x) <= 20) && (Thomas.x - player.x) >= -20)&& (Thomas.Room==player.Room)&&((Thomas.y - player.y)<= 5)&&((Thomas.y - player.y)>= -5)){//Tommyknocker
   salebuyer=("Thomas");
   TalkPop(); Wait(40);
   //This slides the talking portraits GUI to the bottom of the screen, since the player and Thomas are on the top floor.
   while(gDialog.Y<50){gDialog.Y+=5; Wait(1);}//Experimental!
   while(gDialog.Y<60){gDialog.Y+=4; Wait(1);}//Experimental!
   while(gDialog.Y<70){gDialog.Y+=2; Wait(1);}//Experimental!
   while(gDialog.Y<80){gDialog.Y+=1; Wait(1);}//Experimental!
   if (author_seen==false){
   tommybug++;
   if (tommybug==1){
   PCListen(); customertalk(); dText.Text=("Hello, there..."); blab1();
   PCListen(); customertalk(); dText.Text=("Is there something I can help you with, or are you just perusing through the hotel guests?"); blab1();
   PCTalk(); customerlisten(); dText.Text=("No, I--"); blab1();
   PCListen(); customertalk(); dText.Text=("Listen, I don't know who you are, or why you're here but I'm in no mood for nonsense, so beat it."); blab1();}
   if (tommybug==2){
   PCListen(); customertalk(); dText.Text=("Hi, look..."); blab1();
   PCListen(); customertalk(); dText.Text=("We've been through this once, already, okay?"); blab1();
   PCListen(); customertalk(); dText.Text=("I'm having a pretty tough week and I'm not in the mood to gossip with the local color."); blab1();
   PCListen(); customertalk(); dText.Text=("Just leave me alone, okay?"); blab1();}
   if (tommybug>=3){
   PCListen(); customertalk(); dText.Text=("I don't want to have to call the manager, okay?"); blab1();
   PCListen(); customertalk(); dText.Text=("Just leave me alone, all right?"); blab1();}
   
   customerlisten(); PCListen();
   dName.Text=(" "); dText.Text=(" "); StopPop();//Shut up, close dialog
   int tommydirection=Random(1);
   int tommydistance=Random(10);
   if (tommydirection==0){Thomas.Walk(Thomas.x-tommydistance, Thomas.y, eNoBlock, eAnywhere);}
   if (tommydirection==1){Thomas.Walk(Thomas.x+tommydistance, Thomas.y, eNoBlock, eAnywhere);}
   }
   
   else if ((author_seen==true)&&(author_met==false)){//First dialog = You look familiar....
   PCListen(); customertalk(); dText.Text=("Hi there, mate. I'd love to chat, but I'm a little distraught at the moment..."); blab1();
   PCListen(); customertalk(); dText.Text=("Mind bugging somebody else for a while?"); blab1();
   PCListen(); customerlisten(); dName.Text=String.Format("%s: ",player.Name); dText.Text=("(This man looks familiar to you, somehow...)"); blab1();
   dName.Text=(" "); dText.Text=(" "); BuyorTalk();
   }
   else if ((author_met==true)&&(tommy_groceries==1)){//Waiting for Cigs...
   PCListen(); customertalk(); dText.Text=("Hey, thanks for doing this for me. I'm damn embarassed to be asking, but, you know..."); blab1();
   PCListen(); customertalk(); dText.Text=("I promised myself I wouldn't leave the hotel."); blab1();
   PCListen(); customertalk(); dText.Text=("Anyways, you got anything for me?"); blab1();
   customerlisten(); PCListen();
   dName.Text=(" "); dText.Text=(" "); 
   if (cigarettes_remaining>=15){dTommy_3.SetOptionState(1, eOptionOn);}
   dTommy_3.Start();
   }
   else if ((author_met==true)&&(tommy_groceries==99)){//Angry
   PCListen(); customertalk(); dText.Text=("Go away or I will call the police."); blab1();
   PCListen(); customerlisten(); dText.Text=(" "); StopPop();
   }
     
}//thomas

}}//End Uptalk


// Plus Key turns on Tip Menu for cheatbiking.
if ((cheatbiking==false)&&(IsKeyPressed(eKeyPlus)==1)&&(gMake.Visible==false)&&(gTip.Visible==false)) {
    PlaySound(28);
    Wait(5);

    if ((cheatbiking==false)&&(gBonus.Visible==false)&&(gMake.Visible==false)&&(gStock.Visible==false)&&(gBuyortalk.Visible==false)&&(gTip.Visible==false)){
        if ((gSavegame.Visible==false)&&(gLoadgame.Visible==false)&&(gChange.Visible==false)&&(gMake.Visible==false)&&(gAssemble.Visible==false)) {
            if ((gLoadgame.Visible==true)||(gSavegame.Visible==true)||(gMake.Visible==true)||(gAssemble.Visible==true)){

            } else {
                CloseAll(); Mouse.Visible=true; gTip.Centre();
                TipHeader.Text=("Enter Password:"); tipdollarsign.Visible=false; gTip.Visible=true; Wait(3);
            }
        }
    }
}



if ((IsKeyPressed(eKeyTab)==1)&&(cheatbiking==true)){
    kaching();
}

if ((IsKeyPressed(77)==1)&&(gSavegame.Visible==false)&&(gLoadgame.Visible==false)&&(gChange.Visible==false)&&(gMake.Visible==false)&&(gAssemble.Visible==false)&&(Warp2.Visible==false)&&(cheatbiking==true)){
    if ((gLoadgame.Visible==true)||(gSavegame.Visible==true)||(gMake.Visible==true)||(gAssemble.Visible==true)){

    } else {
        music_slider.Value=0; musique=0; SetMusicVolume(-2);
    }
}


//CHEATBIKE 
if (cheatbiking==true) { //No cheatbikin' in the demo!!

    if ((gBonus.Visible==false)&&(gMake.Visible==false)&&(gStock.Visible==false)&&(gBuyortalk.Visible==false)&&(gTip.Visible==false)&&(Warp2.Visible==false)&&(gTip.Visible==false)){

    if ((IsKeyPressed(77)==1)&&(gSavegame.Visible==false)&&(gLoadgame.Visible==false)&&(gChange.Visible==false)&&(gMake.Visible==false)&&(gAssemble.Visible==false)&&(Warp2.Visible==false)){
        if ((gLoadgame.Visible==true)||(gSavegame.Visible==true)||(gMake.Visible==true)||(gAssemble.Visible==true)) {

        } else {
            music_slider.Value=0; musique=0; SetMusicVolume(-2);
        }
    }

    if ((IsKeyPressed(78)==1)&&(gSavegame.Visible==false)&&(gLoadgame.Visible==false)&&(Warp2.Visible==false)) { //Trivia Cheater

        if ((gLoadgame.Visible==true)||(gSavegame.Visible==true)||(gMake.Visible==true)||(gAssemble.Visible==true)){

        } else {
            if (GetGlobalInt(1)==1){bonus_layover.NormalGraphic=5573; bonussed=1; Bonus();}//Anrus:News
            if (GetGlobalInt(1)==2){bonus_layover.NormalGraphic=5570; bonussed=1; Bonus();}//Melanie:Coffee
            if (GetGlobalInt(1)==3){bonus_layover.NormalGraphic=5569; bonussed=1; Bonus();}//Vinny:Bagels
            if (GetGlobalInt(1)==4){bonus_layover.NormalGraphic=5572; bonussed=1; Bonus();}//Logan:Dogs
        }
    }

    if ((IsKeyPressed(67)==1)&&(gSavegame.Visible==false)&&(gLoadgame.Visible==false)&&(Warp2.Visible==false)){

        if ((gLoadgame.Visible==true)||(gSavegame.Visible==true)||(gMake.Visible==true)||(gAssemble.Visible==true)){
            //
        } else {
            FadeGuiOut_NoBlock(gFullblack, 100, -250); gFullblack.Visible=false;
        }
    }

    if ((IsKeyPressed(eKeyF1)==1)&&(gSavegame.Visible==false)&&(gLoadgame.Visible==false)&&(Warp2.Visible==false)){//F1
    if ((gLoadgame.Visible==true)||(gSavegame.Visible==true)||(gMake.Visible==true)||(gAssemble.Visible==true)){}//Kills Animations
    else{
      //Display("Button Anim Killer Engaged");
      int gooey=0;
      int buhhons=0;
      int traget=0;
      while (gooey<Game.GUICount){
      if (gui[gooey].Visible==false){
      buhhons=gui[gooey].ControlCount;
        while (traget<buhhons){
          Button *theButton = gui[gooey].Controls[traget].AsButton;
          if (theButton == null) {}
          else {theButton.NormalGraphic=theButton.Graphic;
          //Display("Stopped button %d in gui %d.",traget, gooey);
          }
          traget++;}}
       gooey+=1;}
    }}//Button Killer

    if ((IsKeyPressed(66)==1)&&(gSavegame.Visible==false)&&(gLoadgame.Visible==false)&&(Warp2.Visible==false)){//Char Conveyor
    if ((gLoadgame.Visible==true)||(gSavegame.Visible==true)||(gMake.Visible==true)||(gAssemble.Visible==true)){}
    else{
    //Ward.ChangeRoom(player.Room, ((GetViewportX()-20)), player.y); Ward.Baseline=(Stand.y + 4);
    //if (rep>20){SetGlobalInt(35, 1);}
    //Ward.chasedown();
    //genericspawn();
    DC.ChangeRoom(player.Room, ((GetViewportX()-20)), player.y);
    DC.Baseline=(Stand.y + 4); hunger[DC.ID]=1; //hungry_DC=1;
    DC.chasedown();}}

    if (IsKeyPressed(88)==1){//Press X for Info
        if (cSlot2.InventoryQuantity[BigBox.ID]==0){cSlot2.AddInventory(BigBox);}
        if (queposition){gDebuggery.Visible=true;}//These two lines are trying to get around a null pointer referenced by the debug info screen
        else {queposition=0; Customer=Vinny; que[0]=53; que[1]=53; que[2]=53; que[3]=53; que[4]=53; gDebuggery.Visible=true;}

    if ((gLoadgame.Visible==true)||(gSavegame.Visible==true)||(gMake.Visible==true)||(gAssemble.Visible==true)||(Warp2.Visible==true)){}
    else{
    if ((GetGlobalInt(1)==1)&&(player.InventoryQuantity[Georgetonian.ID]==0)){PlaySound(9); player.AddInventory(Georgetonian); paper_remaining+=20;}
    if ((GetGlobalInt(1)==1)&&(cSlot2.InventoryQuantity[Cigarettes.ID]==0)){PlaySound(9); cSlot2.AddInventory(Cigarettes); cigarettes_remaining+=12;}
    Wait(8);
    if (GetGlobalInt(1)==1){DisplayTopBar(50, 7, 8, "Suchin States","Suchin's Room: %d[plot state: %d[Relationship: %d[Suchin Hungry: %d",Suchin.Room, GetGlobalInt(101), GetGlobalInt(426), GetGlobalInt(26));}

    if (GetGlobalInt(1)==2){DisplayTopBar(50, 7, 8, "Time and Plot","Dayspassed: %d[Milhour: %d[mel_pickeduptoday: %d[melplot: %d",dayspassed, milhour, mel_pickeduptoday, melplot);}
    if (GetGlobalInt(1)==2){DisplayTopBar(50, 7, 8, "Vinny Plot","mel_vinnyd: %d[mel_vinnylove: %d",mel_vinnyd, mel_vinnylove);}
    if (GetGlobalInt(1)==2){DisplayTopBar(50, 7, 8, "Dietary Variables","Fbar: %d[Dietary Staple: %s",fBar, bd_favfood.Text);}
    if (GetGlobalInt(1)==2){DisplayTopBar(50, 7, 8, "Where my girls at?","Rebecca: room #%d, x=%d, y=%d",Rebecca.Room, Rebecca.x, Rebecca.y);}
    if (GetGlobalInt(1)==2){DisplayTopBar(50, 7, 8, "Where my girls at?","Laura: romm #%d, x=%d, y=%d",Laura.Room, Laura.x, Laura.y);}
    DisplayTopBar(50, 7, 8, "Where is everybody?","Andrus: %d[Vinny: %d[Mel: %d[Logan: %d",Andrus.Room, Vinny.Room, Melanie.Room, Logan.Room);
    DisplayTopBar(50, 7, 8, "Misc States","Saleinprogress: %d",SaleInProgress);
    DisplayTopBar(50, 7, 8, "Arcano Plot States","Eddie State: %d",GetGlobalInt(423));
    DisplayTopBar(50, 7, 8, "Arcano Plot States","Arcano State: %d",GetGlobalInt(411));
    DisplayTopBar(50, 7, 8, "Stand Info","Room: %d [View: %d[DeliveryDay: %d [CurrentDay: %d",Stand.Room, Stand.View, deliveryday, dayofweek);
    DisplayTopBar(50, 7, 8, "Faith's Test","state: %d [correct: %d",GetGlobalInt(422), testright);
    DisplayTopBar(50, 7, 8, "Reputation","Rep: %d [Repmod: %d [Drunk? %d",rep, repmod, drunkenness);
    DisplayTopBar(50, 7, 8, "Expense Distribution","Walmart Spent: %f [Local Spent: %f",walmartia, localbucks);
    if (GetGlobalInt(1)==1){DisplayTopBar(50, 7, 8, "Andrus Plot States","Plot State: %d [Contract: %d",GetGlobalInt(101), GetGlobalInt(12));}
    if (GetGlobalInt(1)==1){DisplayTopBar(50, 7, 8, "Stack Info","Quantity: %d [Room Number: %d[Coords: %d - %d",cSlot2.InventoryQuantity[Contract_G.ID], Stack.Room, Stack.x, Stack.y);}
    }}

    if (IsKeyPressed(89)==1){//The "Y" Key.
    if ((gLoadgame.Visible==true)||(gSavegame.Visible==true)||(gMake.Visible==true)||(gAssemble.Visible==true)||(Warp2.Visible==true)){}
    else{
    if (gStand_Gui.Visible==false){
    PlaySound(9); gStand_Gui.Visible=true; mouse.Visible=true; Wait(5);}}
    }

    if (IsKeyPressed(85)==1){//Press U for dialog escape
    if ((gLoadgame.Visible==true)||(gSavegame.Visible==true)||(gMake.Visible==true)||(gAssemble.Visible==true)||(Warp2.Visible==true)){}
    else{
    if (gTopics2.Visible==false){
    //boxadd("The Georgetown Roastierry");
    //boxadd("The Barneys");
    //boxadd("Caffe Arcano");
    //boxadd("Eddie");
    //boxadd("Eddie's Books");
    //boxadd("The Courthouse");
    //boxadd("Glenda");
    //boxadd("Permits");
    //boxadd("Bramford");
    //boxadd("Officer Thales");
    //boxadd("Fines");
    //boxadd("The Dompactor Raxby");
    //boxadd("Stephanie");
    PlaySound(9); gTopics2.Centre(); gTopics2.Visible=true; mouse.Visible=true; Wait(5);}}
    }

    if (IsKeyPressed(75)==1){//K for sleep
    if ((gLoadgame.Visible==true)||(gSavegame.Visible==true)||(gMake.Visible==true)||(gAssemble.Visible==true)||(Warp2.Visible==true)){}
    else{
    //==// Determining Wakeup Times //==//
    wakeminute=minute;
    wakehour=milhour+8;
    if (wakehour>=24){wakehour-=24; wakeswitch=true;}
    else {wakeswitch=false;}
    //if ((hour+8)>12){wakehour=(hour+8)-12; wakeswitch=true;}
    //if ((hour+8)<=12){wakehour=(hour+8)-12; wakeswitch=false;}
    isclockrunning=false;

    //Sleeping
    PlaySound(28); CloseAll(); Mouse.Visible=false; sleep();}}

    if (IsKeyPressed(379)==1){//71=G for ending the game //Is now "END KEY"
      if ((gLoadgame.Visible==true)||(gSavegame.Visible==true)||(gMake.Visible==true)||(gAssemble.Visible==true)||(Warp2.Visible==true)){}
    else{
      if (GetGlobalInt(1)==1){//andrus
        SetGlobalInt(101, 77);
        Wait(10);
        SetNextScreenTransition(eTransitionFade);
        hour=8; ampm=1; milhour=20;
        player.ChangeRoom(5, 333, 160);}
      else{
      PlaySound(28); curtaincall();}
    }}

    if (IsKeyPressed(eKeyF8)==1){//F8 = Buy Game!
    if ((gLoadgame.Visible==true)||(gSavegame.Visible==true)||(gMake.Visible==true)||(gAssemble.Visible==true)||(Warp2.Visible==true)){}
      else{
        // Well, Richard's site isn't even running anymore, so ... no need for this.
        //ShellExecute("open", "rundll32.exe", "url.dll,FileProtocolHandler http://www.richardhofmeier.com");
      }
    }

    if (IsKeyPressed(eKeyF10)==1){//F10 = Mel Truck Scene
    if ((gLoadgame.Visible==true)||(gSavegame.Visible==true)||(gMake.Visible==true)||(gAssemble.Visible==true)||(Warp2.Visible==true)){}
    else{
      SetGlobalInt(1, 2);//Change to Melanie, just in case. A debug-only concern, of course.
      gameover=true; FadeOut(10);
      Wait(5); Laura.ChangeRoom(player.Room);
      SaveGameSlot(2, "Melanie Autosave"); NewScores(1, 2);//Ooch.
      Wait(5);
      aMusic12.Play();//Condiments Unspread
      gTruck.Visible=true; gDialog.ZOrder=99;
      approval_laura=5;
      the_truque.Animate(285, 0, 3, eRepeat);
      FadeIn(64);
      Wait(140);
      salebuyer=("Laura");
      TalkPop(); customerlisten(); PCListen();
      while(gDialog.Y<100){gDialog.Y+=5; Wait(1);}//Experimental!
      Wait(20);
      PCTalk(); customerlisten(); dText.Text=("How's your coffee, honey?"); blab1();
      PCListen(); customertalk(); dText.Text=("It's okay, I guess."); blab1();
      PCListen(); customertalk(); dText.Text=("I think I put too much sugar in it."); blab1();
      PCTalk(); customerlisten(); dText.Text=("Yeah, I do that sometimes, too."); blab1();
      PCListen(); customerlisten(); dText.Text=("..."); Wait(40);
      PCListen(); customerlisten(); dName.Text=("Laura"); dText.Text=("..."); Wait(40);
      PCListen(); customertalk(); dText.Text=("You want another donut, mom?"); blab1();
      PCTalk(); customerlisten(); dText.Text=("Yeah, okay."); blab1();
      PCListen(); customerlisten(); dText.Text=(" ");
      dLastDonut.Start();
    }
    }

    if (IsKeyPressed(90)==1){//{Z for Warp / Menu
    if ((gLoadgame.Visible==true)||(gSavegame.Visible==true)||(gMake.Visible==true)||(gAssemble.Visible==true)){}
    else{
      if ((Warp.Visible==false)&&(Warp2.Visible==false)){PlaySound(9); Warp.Centre(); Warp.Visible=true; Mouse.Visible=true; Wait(10);}
    else if ((Warp.Visible==true)&&(Warp2.Visible==false)){PlaySound(9); Warp.Visible=false; Warp2.Visible=true; Wait(10);}
    else if ((Warp.Visible==false)&&(Warp2.Visible==true)){PlaySound(9); Warp.Visible=false; Warp2.Visible=false; Wait(10);}
    }}

    if (IsKeyPressed(383)==1){//Press DELETE for Fullstock
    if ((gLoadgame.Visible==true)||(gSavegame.Visible==true)||(gMake.Visible==true)||(gAssemble.Visible==true)||(Warp2.Visible==true)){}
    else{
      PlaySound(9); Wait(5);  //rep=50;
     cSlot2.AddInventory(Permit_13); cSlot2.AddInventory(Permit_brennan);  cSlot2.AddInventory(Permit_Collins); cSlot2.AddInventory(Permit_downtown);
     cSlot2.AddInventory(Permit_florin); cSlot2.AddInventory(Permit_franklin); cSlot2.AddInventory(Permit_notgeld);

      if (GetGlobalInt(1)==1){if(Stand.Room!=5){//andrustofranklin
      SetGlobalInt(101, 11);
      //Stand.ChangeRoom(14, 695, 160); lockup.ChangeRoom(14, 695, 159);
      Stand.ChangeRoom(5, 335, 160); lockup.ChangeRoom(5, 335, 159);
      //paper_remaining+=100; player.AddInventory(Georgetonian);
      Stack.ChangeRoom(5, 285,  162); Stack.Baseline=999; Stack.Transparency=0;
      paper_remaining=100;
      }}

      if (GetGlobalInt(1)==3){if(Stand.Room!=player.Room){
        StandImage.NormalGraphic=806;  Stand.ChangeView(51); Stand.LockView(51);
        Stand.ChangeRoom(player.Room, player.x, player.y);
        bagel_plain_remaining+=100; player.AddInventory(Bagel_Plain); vcheese_remaining+=100; player.AddInventory(Vcheese);}}

      if (GetGlobalInt(1)==2){if(Stand.Room!=14){//Melanie -> Downtown
        deliverydrop=14;
        StandImage.NormalGraphic=1700; Stand.ChangeView(83); Stand.LockView(83);
        coffee_c_remaining+=100; player.AddInventory(CoffeeC); cSlot1.AddInventory(Emachine);
        //cSlot1.AddInventory(maker);
        cSlot1.AddInventory(Cups); cups_remaining+=500;//Cups
        Stand.ChangeRoom(14, 695, 159);
        moved_Alice=true; Alice_2.ChangeRoom(14, 650, 160);
        milk_remaining+=100; player.AddInventory(Milk); sugar_remaining+=100; player.AddInventory(Sugar);
        cocoa_remaining+=100; player.AddInventory(Cocoa); //chai_remaining+=100; player.AddInventory(Chai);
        sugar_remaining+=100; player.AddInventory(Sugar); syrup_remaining+=100; player.AddInventory(Syrups);
        cream_remaining+=100; player.AddInventory(Cream); whipped_remaining+=100; player.AddInventory(Whipped);
    }}

    if (GetGlobalInt(1)==4){DisplayTopBar(35, 7, 8, "New Cart Acquired!", "Got the Kobayashi!");
      hotdogs_remaining+=100; player.AddInventory(Cooler); StandImage.NormalGraphic=2246; Stand.ChangeView(111); Stand.LockView(111);
      buns_remaining+=100; player.AddInventory(Buns);
      Stand.ChangeRoom(player.Room, player.x, player.y);
      chilli_remaining+=100; player.AddInventory(Chilli);
      jalapenos_remaining+=100; player.AddInventory(Jalapenos);
      ketchup_remaining+=100; player.AddInventory(Ketchup);
      mustard_remaining+=100; player.AddInventory(Mustard);
      relish_remaining+=100; player.AddInventory(Relish);
      sauerkraut_remaining+=100; player.AddInventory(Sauerkraut);}
    }}

    if ((IsKeyPressed(82)==1)&&(gGui1.Visible==true)) {PlaySound(9); tip.Text=String.Format("Reputation: %d[Rep Cost: %.2f",rep, repmod); Wait(8);
                                                   vitality.Width=10; nutrition.Width=10;
                                                   if (cSlot2.InventoryQuantity[Permit_franklin.ID]==0){cSlot2.AddInventory(Permit_franklin);}
                                                   if (GetGlobalInt(1)==1){caffeine.Width=10;}
                                                   if (GetGlobalInt(1)==2){caffeine.Width=10;}
                                                   }
    }
} //End Cheatbike

if (Warp2.Visible==true){
    timelabeltext = String.Format("%02d:%02d", hour, minute);
    if (ampm == 0) meridian=( " AM");
    else if (ampm == 1) meridian=( " PM");
    warp2_info.Text=String.Format("Information::::[Money = $%.2f[Day = %s[Time = %02d:%02d %s",Money,  day, hour, minute, meridian);}//ringo

//new poetry 2 aka myturn
int pedestrianid;
while (pedestrianid<Game.CharacterCount){
  if (readytosell==true){
  if ((hunger[pedestrianid]!=0)&&(que[0]==pedestrianid)&&(SaleInProgress==0)&&(gBuyortalk.Visible==false)&&(gDialog.Visible==false)){//My Turn
    character[pedestrianid].StopMoving(); 
    salebuyer=String.Format("%s",character[pedestrianid].Name); 
    Customer=character[pedestrianid];
    if (((salebuyer==("Vinny")&&(GetGlobalInt(1)==2)))){vinnylove(); Display("Vinnylove();");}
    if (((salebuyer==("Vinny")&&(GetGlobalInt(1)==1)))){Vinnyswitch();}
    else if (salebuyer==("Glenda")){Glendabuy();}
    else if (salebuyer==("Suchin")){Suchinbuy();}
    else if (salebuyer==("George")){Georgebuy();}
    //else if (salebuyer==("Thomas")){Thomasbuy();}
    else if ((salebuyer==("Eddie"))&&(GetGlobalInt(411)==3)){Eddiebuy();}
    else{salutation();}
    hunger[pedestrianid]=0;
    }
  }
   // if ((hunger[pedestrianid]!=0)&&(character[pedestrianid].GetProperty("willstopabovemaxcue")==1)&&(readytosell==true)&&(gStand_Gui.Visible==false)&&(gDialog.Visible==true)&&(character[pedestrianid].Moving==true)){
        //if ((((character[pedestrianid].x - player.x) <= 30)&&(character[pedestrianid].x - player.x) >= -5)&&(character[pedestrianid].Room==player.Room)){
        //character[pedestrianid].StopMoving();
        //que[queposition]=pedestrianid;
        //queposition+=1;
        //trying old collisioncheck for special characters because people still blow past the stand when skipping text?!
  //}}
 pedestrianid++;}

if ((killpapers==true)&&(gDialog.Visible==false)){
  killpapers=false;
  if(player.InventoryQuantity[Oldpapers.ID]==0){player.AddInventory(Oldpapers);}
  oldpapers_remaining+=(paper_remaining); paper_remaining=0;
}

  if (kachinging==true){
    kachinging=false;
    kaching();
  }

}}}//-END REPEX-------------------------------------------------------------------------------------

function Vinnycoffeefreakout()
{cEgo.LockView (4);cEgo.Animate(4, 1, eOnce, eBlock, eForwards); caffeine.Width=110; //Reach Up
   cEgo.LockView(14); cEgo.Animate(2, 3, eOnce, eBlock, eForwards);//Drink
   cEgo.Animate(3, 3, eOnce, eBlock, eForwards);//Drop
   cEgo.UnlockView();cEgo.SetIdleView (9, 2);}

//////////  ADDICTION METER SHRINK----------------------------------------------------------------------///
//function addiction_shrink() {
//if ((GetGlobalInt(1) == 3)||(GetGlobalInt(1) == 1)) {caffeine.Width -=5;}
//if (withdrawel!=0){SetTimer(19, 160);}
//}


function on_key_press(int keycode){}

function on_mouse_click(MouseButton button) // called when a mouse button is clicked. button is either LEFT or RIGHT
  {
  if (IsGamePaused() == 1) // Game is paused, so do nothing (ie. don't allow mouse click)
    {
    }
  else if (button == eMouseLeft) 
    {
    if (mouse.Mode == eModeWalkto) player.Walk(GetViewportX()+mouse.x, GetViewportY()+mouse.y,eNoBlock, eWalkableAreas);
    ProcessClick(mouse.x,mouse.y, mouse.Mode);
    if ((mouse.Mode==eModeKeys)&&(mouse.GetModeGraphic(eModeKeys)==9802)){
      Display("Getting through?");
      }
      
    }
  else // right-click
    {
   // mouse.SelectNextMode();   
    }
  }

function gGui1_OnClick(GUI *theGui, MouseButton button) {
    if (mouse.Mode == eModeUseinv) {
        mouse.Mode=eModeLookat;
    }
}

function ContinueButton_OnClick(GUIControl *control, MouseButton button) {
    player.ChangeRoom(1, 7, 147); //restart?
}

function QuitButton_OnClick(GUIControl *control, MouseButton button) {

    StopMusic(); PlaySound(75); FadeOut(3); Wait(80);
    QuitGame(0); //Reg Version
    //RestartGame(); //ARCADE->Cart Life Never Ends

}



function DoorHandle (this Character*) {
    if (GetGlobalInt(1) == 1) {cAndrus.LockView (23); cAndrus.Animate(4, 2, eOnce, eNoBlock, eForwards);}//Andrus!
    if (GetGlobalInt(1) == 2) {cMelanie.LockView (1); cMelanie.Animate(4, 2, eOnce, eNoBlock, eForwards);}//Melanie!
    if (GetGlobalInt(1) == 3) {cEgo.LockView (4);cEgo.Animate(4, 1, eOnce, eNoBlock, eForwards);}//Vinny!
    if (GetGlobalInt(1) == 4) {cLogan.LockView (22); cLogan.Animate(4, 2, eOnce, eNoBlock, eForwards);}//Logan!
}

function DoorHandle2 (this Character*)
{
    if (GetGlobalInt(1) == 1) {cAndrus.LockView (23); cAndrus.Animate(6, 2, eOnce, eBlock, eForwards); cAndrus.UnlockView();}//Andrus!
    if (GetGlobalInt(1) == 2) {cMelanie.LockView (1); cMelanie.Animate(6, 2, eOnce, eBlock, eForwards); cMelanie.UnlockView();}//Melanie!
    if (GetGlobalInt(1) == 3) {cEgo.LockView (4); cEgo.Animate(6, 2, eOnce, eBlock, eForwards); cEgo.UnlockView();}//Vinny!
    if (GetGlobalInt(1) == 4) {cLogan.LockView (22); cLogan.Animate(6, 2, eOnce, eBlock, eForwards); cLogan.UnlockView();}//Logan!
}



//////////////////////////    PAGETURNING //////////////////////////    PAGETURNING //////////////////////////
function prev_button_OnClick(GUIControl *control, MouseButton button){
//V's Notebook
     if (gItemDesc.BackgroundGraphic==1202){PlaySound(65); gItemDesc.BackgroundGraphic=1208;}
else if (gItemDesc.BackgroundGraphic==1203){PlaySound(65); gItemDesc.BackgroundGraphic=1202;}
else if (gItemDesc.BackgroundGraphic==1204){PlaySound(65); gItemDesc.BackgroundGraphic=1203;}
else if (gItemDesc.BackgroundGraphic==1205){PlaySound(65); gItemDesc.BackgroundGraphic=1204;}
else if (gItemDesc.BackgroundGraphic==1206){PlaySound(65); gItemDesc.BackgroundGraphic=1205;}
else if (gItemDesc.BackgroundGraphic==1207){PlaySound(65); gItemDesc.BackgroundGraphic=1206;}
else if (gItemDesc.BackgroundGraphic==1208){PlaySound(65); gItemDesc.BackgroundGraphic=1207;}

//Help Menu
else if (gItemDesc.BackgroundGraphic==2607){PlaySound(65); gItemDesc.BackgroundGraphic=2614;}
else if (gItemDesc.BackgroundGraphic==2608){PlaySound(65); gItemDesc.BackgroundGraphic=2607;}
else if (gItemDesc.BackgroundGraphic==2609){PlaySound(65); gItemDesc.BackgroundGraphic=2608;}
else if (gItemDesc.BackgroundGraphic==2610){PlaySound(65); gItemDesc.BackgroundGraphic=2609;}
else if (gItemDesc.BackgroundGraphic==2611){PlaySound(65); gItemDesc.BackgroundGraphic=2610;}
else if (gItemDesc.BackgroundGraphic==2612){PlaySound(65); gItemDesc.BackgroundGraphic=2611;}
else if (gItemDesc.BackgroundGraphic==2613){PlaySound(65); gItemDesc.BackgroundGraphic=2612;}
else if (gItemDesc.BackgroundGraphic==2614){PlaySound(65); gItemDesc.BackgroundGraphic=2613;}

if (gItemDesc.BackgroundGraphic==3890){
  gThirstex.Centre(); PlaySound(41); CloseAll(); gThirstex.Visible=true; mouse.Visible=true;
prev_button.NormalGraphic=1199; prev_button.MouseOverGraphic=1200;}

//Start Drinkbook
else if (gItemDesc.BackgroundGraphic==9273){PlaySound(65); gItemDesc.BackgroundGraphic=9279;}
else if (gItemDesc.BackgroundGraphic==9274){PlaySound(65); gItemDesc.BackgroundGraphic=9273;}
else if (gItemDesc.BackgroundGraphic==9275){PlaySound(65); gItemDesc.BackgroundGraphic=9274;}
else if (gItemDesc.BackgroundGraphic==9276){PlaySound(65); gItemDesc.BackgroundGraphic=9275;}
else if (gItemDesc.BackgroundGraphic==9277){PlaySound(65); gItemDesc.BackgroundGraphic=9276;}
else if (gItemDesc.BackgroundGraphic==9278){PlaySound(65); gItemDesc.BackgroundGraphic=9277;}
else if (gItemDesc.BackgroundGraphic==9279){PlaySound(65); gItemDesc.BackgroundGraphic=9278;}
//Start Arcano
else if (gItemDesc.BackgroundGraphic==4753){PlaySound(65); gItemDesc.BackgroundGraphic=4759;}
else if (gItemDesc.BackgroundGraphic==4754){PlaySound(65); gItemDesc.BackgroundGraphic=4753;}
else if (gItemDesc.BackgroundGraphic==4755){PlaySound(65); gItemDesc.BackgroundGraphic=4754;}
else if (gItemDesc.BackgroundGraphic==4756){PlaySound(65); gItemDesc.BackgroundGraphic=4755;}
else if (gItemDesc.BackgroundGraphic==4757){PlaySound(65); gItemDesc.BackgroundGraphic=4756;}
else if (gItemDesc.BackgroundGraphic==4758){PlaySound(65); gItemDesc.BackgroundGraphic=4757;}
else if (gItemDesc.BackgroundGraphic==4759){PlaySound(65); gItemDesc.BackgroundGraphic=4758;}
//Start Provost Notes
else if (gItemDesc.BackgroundGraphic==4761){PlaySound(65); gItemDesc.BackgroundGraphic=4767;}
else if (gItemDesc.BackgroundGraphic==4762){PlaySound(65); gItemDesc.BackgroundGraphic=4761;}
else if (gItemDesc.BackgroundGraphic==4763){PlaySound(65); gItemDesc.BackgroundGraphic=4762;}
else if (gItemDesc.BackgroundGraphic==4764){PlaySound(65); gItemDesc.BackgroundGraphic=4763;}
else if (gItemDesc.BackgroundGraphic==4765){PlaySound(65); gItemDesc.BackgroundGraphic=4764;}
else if (gItemDesc.BackgroundGraphic==4766){PlaySound(65); gItemDesc.BackgroundGraphic=4765;}
else if (gItemDesc.BackgroundGraphic==4767){PlaySound(65); gItemDesc.BackgroundGraphic=4766;}
//Start Ping Pong!
else if (gItemDesc.BackgroundGraphic==5072){PlaySound(65); gItemDesc.BackgroundGraphic=5076;}
else if (gItemDesc.BackgroundGraphic==5073){PlaySound(65); gItemDesc.BackgroundGraphic=5072;}
else if (gItemDesc.BackgroundGraphic==5074){PlaySound(65); gItemDesc.BackgroundGraphic=5073;}
else if (gItemDesc.BackgroundGraphic==5075){PlaySound(65); gItemDesc.BackgroundGraphic=5074;}
else if (gItemDesc.BackgroundGraphic==5076){PlaySound(65); gItemDesc.BackgroundGraphic=5075;}
//Start Calamity Annie!
else if (gItemDesc.BackgroundGraphic==9560){PlaySound(65); gItemDesc.BackgroundGraphic=9566;}
else if (gItemDesc.BackgroundGraphic==9561){PlaySound(65); gItemDesc.BackgroundGraphic=9560;}
else if (gItemDesc.BackgroundGraphic==9562){PlaySound(65); gItemDesc.BackgroundGraphic=9561;}
else if (gItemDesc.BackgroundGraphic==9563){PlaySound(65); gItemDesc.BackgroundGraphic=9562;}
else if (gItemDesc.BackgroundGraphic==9564){PlaySound(65); gItemDesc.BackgroundGraphic=9563;}
else if (gItemDesc.BackgroundGraphic==9565){PlaySound(65); gItemDesc.BackgroundGraphic=9564;}
else if (gItemDesc.BackgroundGraphic==9566){PlaySound(65); gItemDesc.BackgroundGraphic=9565;}
//Start Carbon
else if (gItemDesc.BackgroundGraphic==5082){PlaySound(65); gItemDesc.BackgroundGraphic=5088;}
else if (gItemDesc.BackgroundGraphic==5083){PlaySound(65); gItemDesc.BackgroundGraphic=5082;}
else if (gItemDesc.BackgroundGraphic==5084){PlaySound(65); gItemDesc.BackgroundGraphic=5083;}
else if (gItemDesc.BackgroundGraphic==5085){PlaySound(65); gItemDesc.BackgroundGraphic=5084;}
else if (gItemDesc.BackgroundGraphic==5086){PlaySound(65); gItemDesc.BackgroundGraphic=5085;}
else if (gItemDesc.BackgroundGraphic==5087){PlaySound(65); gItemDesc.BackgroundGraphic=5086;}
else if (gItemDesc.BackgroundGraphic==5088){PlaySound(65); gItemDesc.BackgroundGraphic=5087; author_seen=true;}
//Start Tigers
else if (gItemDesc.BackgroundGraphic==7262){PlaySound(65); gItemDesc.BackgroundGraphic=7268;}
else if (gItemDesc.BackgroundGraphic==7263){PlaySound(65); gItemDesc.BackgroundGraphic=7262;}
else if (gItemDesc.BackgroundGraphic==7264){PlaySound(65); gItemDesc.BackgroundGraphic=7263;}
else if (gItemDesc.BackgroundGraphic==7265){PlaySound(65); gItemDesc.BackgroundGraphic=7264;}
else if (gItemDesc.BackgroundGraphic==7266){PlaySound(65); gItemDesc.BackgroundGraphic=7265;}
else if (gItemDesc.BackgroundGraphic==7267){PlaySound(65); gItemDesc.BackgroundGraphic=7266;}
else if (gItemDesc.BackgroundGraphic==7268){PlaySound(65); gItemDesc.BackgroundGraphic=7267; author_seen=true;}
//Start Scandal Rag!
else if (gItemDesc.BackgroundGraphic==9951){PlaySound(65); gItemDesc.BackgroundGraphic=9957;}
else if (gItemDesc.BackgroundGraphic==9952){PlaySound(65); gItemDesc.BackgroundGraphic=9951;}
else if (gItemDesc.BackgroundGraphic==9953){PlaySound(65); gItemDesc.BackgroundGraphic=9952;}
else if (gItemDesc.BackgroundGraphic==9954){PlaySound(65); gItemDesc.BackgroundGraphic=9953;}
else if (gItemDesc.BackgroundGraphic==9955){PlaySound(65); gItemDesc.BackgroundGraphic=9954;}
else if (gItemDesc.BackgroundGraphic==9956){PlaySound(65); gItemDesc.BackgroundGraphic=9955;}
else if (gItemDesc.BackgroundGraphic==9957){PlaySound(65); gItemDesc.BackgroundGraphic=9956;}
//Prev Acro Circus
     if (gItemDesc.BackgroundGraphic==9959){PlaySound(65); gItemDesc.BackgroundGraphic=9965;}
else if (gItemDesc.BackgroundGraphic==9960){PlaySound(65); gItemDesc.BackgroundGraphic=9959;}
else if (gItemDesc.BackgroundGraphic==9961){PlaySound(65); gItemDesc.BackgroundGraphic=9960;}
else if (gItemDesc.BackgroundGraphic==9962){PlaySound(65); gItemDesc.BackgroundGraphic=9961;}
else if (gItemDesc.BackgroundGraphic==9963){PlaySound(65); gItemDesc.BackgroundGraphic=9962;}
else if (gItemDesc.BackgroundGraphic==9964){PlaySound(65); gItemDesc.BackgroundGraphic=9963;}
else if (gItemDesc.BackgroundGraphic==9965){PlaySound(65); gItemDesc.BackgroundGraphic=9964;}
//Prev Draggin' Feet
     if (gItemDesc.BackgroundGraphic==9969){PlaySound(65); gItemDesc.BackgroundGraphic=9975;}
else if (gItemDesc.BackgroundGraphic==9970){PlaySound(65); gItemDesc.BackgroundGraphic=9969;}
else if (gItemDesc.BackgroundGraphic==9971){PlaySound(65); gItemDesc.BackgroundGraphic=9970;}
else if (gItemDesc.BackgroundGraphic==9972){PlaySound(65); gItemDesc.BackgroundGraphic=9971;}
else if (gItemDesc.BackgroundGraphic==9973){PlaySound(65); gItemDesc.BackgroundGraphic=9972;}
else if (gItemDesc.BackgroundGraphic==9974){PlaySound(65); gItemDesc.BackgroundGraphic=9973;}
else if (gItemDesc.BackgroundGraphic==9975){PlaySound(65); gItemDesc.BackgroundGraphic=9974;}
//Prev Fatal Steps
     if (gItemDesc.BackgroundGraphic==9977){PlaySound(65); gItemDesc.BackgroundGraphic=9983;}
else if (gItemDesc.BackgroundGraphic==9978){PlaySound(65); gItemDesc.BackgroundGraphic=9977;}
else if (gItemDesc.BackgroundGraphic==9979){PlaySound(65); gItemDesc.BackgroundGraphic=9978;}
else if (gItemDesc.BackgroundGraphic==9980){PlaySound(65); gItemDesc.BackgroundGraphic=9979;}
else if (gItemDesc.BackgroundGraphic==9981){PlaySound(65); gItemDesc.BackgroundGraphic=9980;}
else if (gItemDesc.BackgroundGraphic==9982){PlaySound(65); gItemDesc.BackgroundGraphic=9981;}
else if (gItemDesc.BackgroundGraphic==9983){PlaySound(65); gItemDesc.BackgroundGraphic=9982;}
//Prev Indian Lore
     if (gItemDesc.BackgroundGraphic==9986){PlaySound(65); gItemDesc.BackgroundGraphic=9992;}
else if (gItemDesc.BackgroundGraphic==9987){PlaySound(65); gItemDesc.BackgroundGraphic=9986;}
else if (gItemDesc.BackgroundGraphic==9988){PlaySound(65); gItemDesc.BackgroundGraphic=9987;}
else if (gItemDesc.BackgroundGraphic==9989){PlaySound(65); gItemDesc.BackgroundGraphic=9988;}
else if (gItemDesc.BackgroundGraphic==9990){PlaySound(65); gItemDesc.BackgroundGraphic=9989;}
else if (gItemDesc.BackgroundGraphic==9991){PlaySound(65); gItemDesc.BackgroundGraphic=9990;}
else if (gItemDesc.BackgroundGraphic==9992){PlaySound(65); gItemDesc.BackgroundGraphic=9991;}
}

function next_button_OnClick(GUIControl *control, MouseButton button){
     if (gItemDesc.BackgroundGraphic==1202){PlaySound(65); gItemDesc.BackgroundGraphic=1203;}
else if (gItemDesc.BackgroundGraphic==1203){PlaySound(65); gItemDesc.BackgroundGraphic=1204;}
else if (gItemDesc.BackgroundGraphic==1204){PlaySound(65); gItemDesc.BackgroundGraphic=1205;}
else if (gItemDesc.BackgroundGraphic==1205){PlaySound(65); gItemDesc.BackgroundGraphic=1206;}
else if (gItemDesc.BackgroundGraphic==1206){PlaySound(65); gItemDesc.BackgroundGraphic=1207;}
else if (gItemDesc.BackgroundGraphic==1207){PlaySound(65); gItemDesc.BackgroundGraphic=1208;}
else if (gItemDesc.BackgroundGraphic==1208){PlaySound(65); gItemDesc.BackgroundGraphic=1202;}
//End V's Notebook
     if (gItemDesc.BackgroundGraphic==2607){PlaySound(65); gItemDesc.BackgroundGraphic=2608;}
else if (gItemDesc.BackgroundGraphic==2608){PlaySound(65); gItemDesc.BackgroundGraphic=2609;}
else if (gItemDesc.BackgroundGraphic==2609){PlaySound(65); gItemDesc.BackgroundGraphic=2610;}
else if (gItemDesc.BackgroundGraphic==2610){PlaySound(65); gItemDesc.BackgroundGraphic=2611;}
else if (gItemDesc.BackgroundGraphic==2611){PlaySound(65); gItemDesc.BackgroundGraphic=2612;}
else if (gItemDesc.BackgroundGraphic==2612){PlaySound(65); gItemDesc.BackgroundGraphic=2613;}
else if (gItemDesc.BackgroundGraphic==2613){PlaySound(65); gItemDesc.BackgroundGraphic=2614;}
else if (gItemDesc.BackgroundGraphic==2614){PlaySound(65); gItemDesc.BackgroundGraphic=2607;}
//
//Start Arcano
     if (gItemDesc.BackgroundGraphic==4753){PlaySound(65); gItemDesc.BackgroundGraphic=4754;}
else if (gItemDesc.BackgroundGraphic==4754){PlaySound(65); gItemDesc.BackgroundGraphic=4755;}
else if (gItemDesc.BackgroundGraphic==4755){PlaySound(65); gItemDesc.BackgroundGraphic=4756;}
else if (gItemDesc.BackgroundGraphic==4756){PlaySound(65); gItemDesc.BackgroundGraphic=4757;}
else if (gItemDesc.BackgroundGraphic==4757){PlaySound(65); gItemDesc.BackgroundGraphic=4758;}
else if (gItemDesc.BackgroundGraphic==4758){PlaySound(65); gItemDesc.BackgroundGraphic=4759;}
else if (gItemDesc.BackgroundGraphic==4759){PlaySound(65); gItemDesc.BackgroundGraphic=4753;}
//Start Drinkbook
     if (gItemDesc.BackgroundGraphic==9273){PlaySound(65); gItemDesc.BackgroundGraphic=9274;}
else if (gItemDesc.BackgroundGraphic==9274){PlaySound(65); gItemDesc.BackgroundGraphic=9275;}
else if (gItemDesc.BackgroundGraphic==9275){PlaySound(65); gItemDesc.BackgroundGraphic=9276;}
else if (gItemDesc.BackgroundGraphic==9276){PlaySound(65); gItemDesc.BackgroundGraphic=9277;}
else if (gItemDesc.BackgroundGraphic==9277){PlaySound(65); gItemDesc.BackgroundGraphic=9278;}
else if (gItemDesc.BackgroundGraphic==9278){PlaySound(65); gItemDesc.BackgroundGraphic=9279;}
else if (gItemDesc.BackgroundGraphic==9279){PlaySound(65); gItemDesc.BackgroundGraphic=9273;}
//Start Provost Notes
     if (gItemDesc.BackgroundGraphic==4761){PlaySound(65); gItemDesc.BackgroundGraphic=4762;}
else if (gItemDesc.BackgroundGraphic==4762){PlaySound(65); gItemDesc.BackgroundGraphic=4763;}
else if (gItemDesc.BackgroundGraphic==4763){PlaySound(65); gItemDesc.BackgroundGraphic=4764;}
else if (gItemDesc.BackgroundGraphic==4764){PlaySound(65); gItemDesc.BackgroundGraphic=4765;}
else if (gItemDesc.BackgroundGraphic==4765){PlaySound(65); gItemDesc.BackgroundGraphic=4766;}
else if (gItemDesc.BackgroundGraphic==4766){PlaySound(65); gItemDesc.BackgroundGraphic=4767;}
else if (gItemDesc.BackgroundGraphic==4767){PlaySound(65); gItemDesc.BackgroundGraphic=4761;}

//Start Ping Pong!
     if (gItemDesc.BackgroundGraphic==5072){PlaySound(65); gItemDesc.BackgroundGraphic=5073;}
else if (gItemDesc.BackgroundGraphic==5073){PlaySound(65); gItemDesc.BackgroundGraphic=5074;}
else if (gItemDesc.BackgroundGraphic==5074){PlaySound(65); gItemDesc.BackgroundGraphic=5075;}
else if (gItemDesc.BackgroundGraphic==5075){PlaySound(65); gItemDesc.BackgroundGraphic=5076;}
else if (gItemDesc.BackgroundGraphic==5076){PlaySound(65); gItemDesc.BackgroundGraphic=5072;}
//Start Calamity Annie!
     if (gItemDesc.BackgroundGraphic==9560){PlaySound(65); gItemDesc.BackgroundGraphic=9561;}
else if (gItemDesc.BackgroundGraphic==9561){PlaySound(65); gItemDesc.BackgroundGraphic=9562;}
else if (gItemDesc.BackgroundGraphic==9562){PlaySound(65); gItemDesc.BackgroundGraphic=9563;}
else if (gItemDesc.BackgroundGraphic==9563){PlaySound(65); gItemDesc.BackgroundGraphic=9564;}
else if (gItemDesc.BackgroundGraphic==9564){PlaySound(65); gItemDesc.BackgroundGraphic=9565;}
else if (gItemDesc.BackgroundGraphic==9565){PlaySound(65); gItemDesc.BackgroundGraphic=9566;}
else if (gItemDesc.BackgroundGraphic==9566){PlaySound(65); gItemDesc.BackgroundGraphic=9560;}
//Start Carbon
     if (gItemDesc.BackgroundGraphic==5082){PlaySound(65); gItemDesc.BackgroundGraphic=5083;}
else if (gItemDesc.BackgroundGraphic==5083){PlaySound(65); gItemDesc.BackgroundGraphic=5084;}
else if (gItemDesc.BackgroundGraphic==5084){PlaySound(65); gItemDesc.BackgroundGraphic=5085;}
else if (gItemDesc.BackgroundGraphic==5085){PlaySound(65); gItemDesc.BackgroundGraphic=5086;}
else if (gItemDesc.BackgroundGraphic==5086){PlaySound(65); gItemDesc.BackgroundGraphic=5087; author_seen=true;}
else if (gItemDesc.BackgroundGraphic==5087){PlaySound(65); gItemDesc.BackgroundGraphic=5088;}
else if (gItemDesc.BackgroundGraphic==5088){PlaySound(65); gItemDesc.BackgroundGraphic=5082;}
//Start Tigers
     if (gItemDesc.BackgroundGraphic==7262){PlaySound(65); gItemDesc.BackgroundGraphic=7263;}
else if (gItemDesc.BackgroundGraphic==7263){PlaySound(65); gItemDesc.BackgroundGraphic=7264;}
else if (gItemDesc.BackgroundGraphic==7264){PlaySound(65); gItemDesc.BackgroundGraphic=7265;}
else if (gItemDesc.BackgroundGraphic==7265){PlaySound(65); gItemDesc.BackgroundGraphic=7266;}
else if (gItemDesc.BackgroundGraphic==7266){PlaySound(65); gItemDesc.BackgroundGraphic=7267; author_seen=true;}
else if (gItemDesc.BackgroundGraphic==7267){PlaySound(65); gItemDesc.BackgroundGraphic=7268;}
else if (gItemDesc.BackgroundGraphic==7268){PlaySound(65); gItemDesc.BackgroundGraphic=7262;}
//Scandal Rag!
     if (gItemDesc.BackgroundGraphic==9951){PlaySound(65); gItemDesc.BackgroundGraphic=9952;}
else if (gItemDesc.BackgroundGraphic==9952){PlaySound(65); gItemDesc.BackgroundGraphic=9953;}
else if (gItemDesc.BackgroundGraphic==9953){PlaySound(65); gItemDesc.BackgroundGraphic=9954;}
else if (gItemDesc.BackgroundGraphic==9954){PlaySound(65); gItemDesc.BackgroundGraphic=9955;}
else if (gItemDesc.BackgroundGraphic==9955){PlaySound(65); gItemDesc.BackgroundGraphic=9956;}
else if (gItemDesc.BackgroundGraphic==9956){PlaySound(65); gItemDesc.BackgroundGraphic=9957;}
else if (gItemDesc.BackgroundGraphic==9957){PlaySound(65); gItemDesc.BackgroundGraphic=9951;}
//Next: Acro Circus
     if (gItemDesc.BackgroundGraphic==9959){PlaySound(65); gItemDesc.BackgroundGraphic=9960;}
else if (gItemDesc.BackgroundGraphic==9960){PlaySound(65); gItemDesc.BackgroundGraphic=9961;}
else if (gItemDesc.BackgroundGraphic==9961){PlaySound(65); gItemDesc.BackgroundGraphic=9962;}
else if (gItemDesc.BackgroundGraphic==9962){PlaySound(65); gItemDesc.BackgroundGraphic=9963;}
else if (gItemDesc.BackgroundGraphic==9963){PlaySound(65); gItemDesc.BackgroundGraphic=9964;}
else if (gItemDesc.BackgroundGraphic==9964){PlaySound(65); gItemDesc.BackgroundGraphic=9965;}
else if (gItemDesc.BackgroundGraphic==9965){PlaySound(65); gItemDesc.BackgroundGraphic=9959;}
//Next: Draggin' Feet
     if (gItemDesc.BackgroundGraphic==9969){PlaySound(65); gItemDesc.BackgroundGraphic=9970;}
else if (gItemDesc.BackgroundGraphic==9970){PlaySound(65); gItemDesc.BackgroundGraphic=9971;}
else if (gItemDesc.BackgroundGraphic==9971){PlaySound(65); gItemDesc.BackgroundGraphic=9972;}
else if (gItemDesc.BackgroundGraphic==9972){PlaySound(65); gItemDesc.BackgroundGraphic=9973;}
else if (gItemDesc.BackgroundGraphic==9973){PlaySound(65); gItemDesc.BackgroundGraphic=9974;}
else if (gItemDesc.BackgroundGraphic==9974){PlaySound(65); gItemDesc.BackgroundGraphic=9975;}
else if (gItemDesc.BackgroundGraphic==9975){PlaySound(65); gItemDesc.BackgroundGraphic=9969;}
//Next: Fatal Steps
     if (gItemDesc.BackgroundGraphic==9977){PlaySound(65); gItemDesc.BackgroundGraphic=9978;}
else if (gItemDesc.BackgroundGraphic==9978){PlaySound(65); gItemDesc.BackgroundGraphic=9979;}
else if (gItemDesc.BackgroundGraphic==9979){PlaySound(65); gItemDesc.BackgroundGraphic=9980;}
else if (gItemDesc.BackgroundGraphic==9980){PlaySound(65); gItemDesc.BackgroundGraphic=9981;}
else if (gItemDesc.BackgroundGraphic==9981){PlaySound(65); gItemDesc.BackgroundGraphic=9982;}
else if (gItemDesc.BackgroundGraphic==9982){PlaySound(65); gItemDesc.BackgroundGraphic=9983;}
else if (gItemDesc.BackgroundGraphic==9983){PlaySound(65); gItemDesc.BackgroundGraphic=9977;}
//Next: Fatal Steps
     if (gItemDesc.BackgroundGraphic==9986){PlaySound(65); gItemDesc.BackgroundGraphic=9987;}
else if (gItemDesc.BackgroundGraphic==9987){PlaySound(65); gItemDesc.BackgroundGraphic=9988;}
else if (gItemDesc.BackgroundGraphic==9988){PlaySound(65); gItemDesc.BackgroundGraphic=9989;}
else if (gItemDesc.BackgroundGraphic==9989){PlaySound(65); gItemDesc.BackgroundGraphic=9990;}
else if (gItemDesc.BackgroundGraphic==9990){PlaySound(65); gItemDesc.BackgroundGraphic=9991;}
else if (gItemDesc.BackgroundGraphic==9991){PlaySound(65); gItemDesc.BackgroundGraphic=9992;}
else if (gItemDesc.BackgroundGraphic==9992){PlaySound(65); gItemDesc.BackgroundGraphic=9986;}
}//End Nextbutton

//////////////////////////    INVENTORY ITEM CLICK-TIMES
function Recipebook_V_Look(){PlaySound(41); gItemDesc.BackgroundGraphic=1202;
sgw.Visible=false; smoke_button.Visible=false; price_blackout.Visible=false; itemprice.Visible=false;
remaining_label.Text=(" "); prev_button.Visible=true; next_button.Visible=true; gItemDesc.Visible = true;}

function Arcano_Look(){PlaySound(41); gItemDesc.BackgroundGraphic=4753;
sgw.Visible=false; smoke_button.Visible=false; price_blackout.Visible=false; itemprice.Visible=false;
remaining_label.Text=(" "); prev_button.Visible=true; next_button.Visible=true; gItemDesc.Visible = true;}

function Drinkbook_Look(){PlaySound(41); gItemDesc.BackgroundGraphic=9273;
sgw.Visible=false; smoke_button.Visible=false; price_blackout.Visible=false; itemprice.Visible=false;
remaining_label.Text=(" "); prev_button.Visible=true; next_button.Visible=true; gItemDesc.Visible = true;}

function ProvNotes_Look(){PlaySound(41); gItemDesc.BackgroundGraphic=4761;
sgw.Visible=false; smoke_button.Visible=false; price_blackout.Visible=false; itemprice.Visible=false;
remaining_label.Text=(" "); prev_button.Visible=true; next_button.Visible=true; gItemDesc.Visible = true;}

function pingpong_Look(){PlaySound(41); gItemDesc.BackgroundGraphic=5072;
sgw.Visible=false; smoke_button.Visible=false; price_blackout.Visible=false; itemprice.Visible=false;
remaining_label.Text=(" "); prev_button.Visible=true; next_button.Visible=true; gItemDesc.Visible = true;}

function Calamity_Look(){PlaySound(41); gItemDesc.BackgroundGraphic=9560;
sgw.Visible=false; smoke_button.Visible=false; price_blackout.Visible=false; itemprice.Visible=false;
remaining_label.Text=(" "); prev_button.Visible=true; next_button.Visible=true; gItemDesc.Visible = true;}

function Carbon_Look(){PlaySound(41); gItemDesc.BackgroundGraphic=5082;
sgw.Visible=false; smoke_button.Visible=false; price_blackout.Visible=false; itemprice.Visible=false;
remaining_label.Text=(" "); prev_button.Visible=true; next_button.Visible=true; gItemDesc.Visible = true;}

function Scandalrag_Look(){PlaySound(41); gItemDesc.BackgroundGraphic=9951;
sgw.Visible=false; smoke_button.Visible=false; price_blackout.Visible=false; itemprice.Visible=false;
remaining_label.Text=(" "); prev_button.Visible=true; next_button.Visible=true; gItemDesc.Visible = true;}

function Acrocircus_Look(){PlaySound(41); gItemDesc.BackgroundGraphic=9959;
sgw.Visible=false; smoke_button.Visible=false; price_blackout.Visible=false; itemprice.Visible=false;
remaining_label.Text=(" "); prev_button.Visible=true; next_button.Visible=true; gItemDesc.Visible = true;}

function Dragonfeet_Look(){PlaySound(41); gItemDesc.BackgroundGraphic=9969;
sgw.Visible=false; smoke_button.Visible=false; price_blackout.Visible=false; itemprice.Visible=false;
remaining_label.Text=(" "); prev_button.Visible=true; next_button.Visible=true; gItemDesc.Visible = true;}

function Fatalsteps_Look(){PlaySound(41); gItemDesc.BackgroundGraphic=9977;
sgw.Visible=false; smoke_button.Visible=false; price_blackout.Visible=false; itemprice.Visible=false;
remaining_label.Text=(" "); prev_button.Visible=true; next_button.Visible=true; gItemDesc.Visible = true;}

function Indianlore_Look(){PlaySound(41); gItemDesc.BackgroundGraphic=9986;
sgw.Visible=false; smoke_button.Visible=false; price_blackout.Visible=false; itemprice.Visible=false;
remaining_label.Text=(" "); prev_button.Visible=true; next_button.Visible=true; gItemDesc.Visible = true;}

function Tigers_Look(){PlaySound(41); gItemDesc.BackgroundGraphic=7262;
sgw.Visible=false; smoke_button.Visible=false; price_blackout.Visible=false; itemprice.Visible=false;
remaining_label.Text=(" "); prev_button.Visible=true; next_button.Visible=true; gItemDesc.Visible = true;}

function A3Key_Look(){PlaySound(41); gItemDesc.BackgroundGraphic=1399;
sgw.Visible=false; smoke_button.Visible=false; price_blackout.Visible=false; itemprice.Visible=false;
remaining_label.Text=(" "); prev_button.Visible=false; next_button.Visible=false; gItemDesc.Visible = true;}

function A3Key2_Look(){PlaySound(41); gItemDesc.BackgroundGraphic=1399;
sgw.Visible=false; smoke_button.Visible=false; price_blackout.Visible=false; itemprice.Visible=false;
remaining_label.Text=(" "); prev_button.Visible=false; next_button.Visible=false; gItemDesc.Visible = true;}

function Pocketknife_Look(){PlaySound(41); gItemDesc.BackgroundGraphic=6343;
sgw.Visible=false; smoke_button.Visible=false; price_blackout.Visible=false; itemprice.Visible=false;
remaining_label.Text=(" "); prev_button.Visible=false; next_button.Visible=false; gItemDesc.Visible = true;}

function Muffler_Look(){PlaySound(41); gItemDesc.BackgroundGraphic=6413;
sgw.Visible=false; smoke_button.Visible=false; price_blackout.Visible=false; itemprice.Visible=false;
remaining_label.Text=(" "); prev_button.Visible=false; next_button.Visible=false; gItemDesc.Visible = true;}

function Camphor_Look(){PlaySound(41); gItemDesc.BackgroundGraphic=6410;
sgw.Visible=false; smoke_button.Visible=false; price_blackout.Visible=false; itemprice.Visible=false;
remaining_label.Text=(" "); prev_button.Visible=false; next_button.Visible=false; gItemDesc.Visible = true;}

function TacoSeasoning_Look(){PlaySound(41); gItemDesc.BackgroundGraphic=6418;
sgw.Visible=false; smoke_button.Visible=false; price_blackout.Visible=false; itemprice.Visible=false;
remaining_label.Text=(" "); prev_button.Visible=false; next_button.Visible=false; gItemDesc.Visible = true;}

function Chainwallet_Look(){PlaySound(41); gItemDesc.BackgroundGraphic=6618;
sgw.Visible=false; smoke_button.Visible=false; price_blackout.Visible=false; itemprice.Visible=false;
remaining_label.Text=(" "); prev_button.Visible=false; next_button.Visible=false; gItemDesc.Visible = true;}

function CrownCard_Look(){PlaySound(41); gItemDesc.BackgroundGraphic=6416;
sgw.Visible=false; smoke_button.Visible=false; price_blackout.Visible=false; itemprice.Visible=false;
remaining_label.Text=(" "); prev_button.Visible=false; next_button.Visible=false; gItemDesc.Visible = true;}

bool dugwallet=false;
function BigBox_Look(){PlaySound(41); gItemDesc.BackgroundGraphic=6411;
sgw.Visible=false; smoke_button.Visible=false; price_blackout.Visible=false; itemprice.Visible=false;
remaining_label.Text=(" "); prev_button.Visible=false; next_button.Visible=false; gItemDesc.Visible = true;
if (dugwallet==false){TopItem("There was a wallet in the box...?","--",6617); dugwallet=true; cSlot2.AddInventory(Chainwallet);}}

function Contract_G_Look(){PlaySound(41); gItemDesc.BackgroundGraphic=1573;
sgw.Visible=false; smoke_button.Visible=false; price_blackout.Visible=false; itemprice.Visible=false;
remaining_label.Text=(" "); prev_button.Visible=false; next_button.Visible=false; gItemDesc.Visible = true;}

function Permit_franklin_Look(){PlaySound(41); gItemDesc.BackgroundGraphic=1633;
sgw.Visible=false; smoke_button.Visible=false;
remaining_label.Text=(" "); prev_button.Visible=false; next_button.Visible=false; gItemDesc.Visible = true;}

function Permit_notgeld_Look(){PlaySound(41); gItemDesc.BackgroundGraphic=1639;
sgw.Visible=false; smoke_button.Visible=false; price_blackout.Visible=false; itemprice.Visible=false;
remaining_label.Text=(" "); prev_button.Visible=false; next_button.Visible=false; gItemDesc.Visible = true;}

function Permit_brennan_Look(){PlaySound(41); gItemDesc.BackgroundGraphic=1643;
sgw.Visible=false; smoke_button.Visible=false; price_blackout.Visible=false; itemprice.Visible=false;
remaining_label.Text=(" "); prev_button.Visible=false; next_button.Visible=false; gItemDesc.Visible = true;}

function Permit_downtown_Look(){PlaySound(41); gItemDesc.BackgroundGraphic=1641;
sgw.Visible=false; smoke_button.Visible=false; price_blackout.Visible=false; itemprice.Visible=false;
remaining_label.Text=(" "); prev_button.Visible=false; next_button.Visible=false; gItemDesc.Visible = true;}

function Permit_Collins_Look(){PlaySound(41); gItemDesc.BackgroundGraphic=1640;
sgw.Visible=false; smoke_button.Visible=false; price_blackout.Visible=false; itemprice.Visible=false;
remaining_label.Text=(" "); prev_button.Visible=false; next_button.Visible=false; gItemDesc.Visible = true;}

function Permit_florin_Look(){PlaySound(41); gItemDesc.BackgroundGraphic=1642;
sgw.Visible=false; smoke_button.Visible=false; price_blackout.Visible=false; itemprice.Visible=false;
remaining_label.Text=(" "); prev_button.Visible=false; next_button.Visible=false; gItemDesc.Visible = true;}

function Permit_13_Look(){PlaySound(41); gItemDesc.BackgroundGraphic=1645;
sgw.Visible=false; smoke_button.Visible=false; price_blackout.Visible=false; itemprice.Visible=false;
remaining_label.Text=(" "); prev_button.Visible=false; next_button.Visible=false; gItemDesc.Visible = true;}

function Divorcepapers_Look(){PlaySound(41); gItemDesc.BackgroundGraphic=3582;
sgw.Visible=false; smoke_button.Visible=false; price_blackout.Visible=false; itemprice.Visible=false;
remaining_label.Text=(" "); prev_button.Visible=false; next_button.Visible=false; gItemDesc.Visible = true;}

function WatchA_Look(){PlaySound(41); gItemDesc.BackgroundGraphic=3625;
sgw.Visible=false; smoke_button.Visible=false; price_blackout.Visible=false; itemprice.Visible=false; 
remaining_label.Text=(" "); prev_button.Visible=false; next_button.Visible=false; gItemDesc.Visible = true;}

function WatchB_Look(){PlaySound(41); gItemDesc.BackgroundGraphic=3637;
sgw.Visible=false; smoke_button.Visible=false; price_blackout.Visible=false; itemprice.Visible=false;
remaining_label.Text=(" "); prev_button.Visible=false; next_button.Visible=false; gItemDesc.Visible = true;}

function WatchC_Look(){PlaySound(41); gItemDesc.BackgroundGraphic=3638;
sgw.Visible=false; smoke_button.Visible=false; price_blackout.Visible=false; itemprice.Visible=false;
remaining_label.Text=(" "); prev_button.Visible=false; next_button.Visible=false; gItemDesc.Visible = true;}

function WatchD_Look(){PlaySound(41); gItemDesc.BackgroundGraphic=3628;
sgw.Visible=false; smoke_button.Visible=false; price_blackout.Visible=false; itemprice.Visible=false;
remaining_label.Text=(" "); prev_button.Visible=false; next_button.Visible=false; gItemDesc.Visible = true;}

function Lighter_Look(){PlaySound(41); gItemDesc.BackgroundGraphic=3843;
sgw.Visible=false; smoke_button.Visible=false; price_blackout.Visible=false; itemprice.Visible=false;
remaining_label.Text=(" "); prev_button.Visible=false; next_button.Visible=false; gItemDesc.Visible = true;}

function Lighterp_Look(){PlaySound(41); gItemDesc.BackgroundGraphic=4497;
sgw.Visible=false; smoke_button.Visible=false; price_blackout.Visible=false; itemprice.Visible=false;
remaining_label.Text=(" "); prev_button.Visible=false; next_button.Visible=false; gItemDesc.Visible = true;}

function Card_Bas_Look(){PlaySound(41); gItemDesc.BackgroundGraphic=4703;
sgw.Visible=false; smoke_button.Visible=false; price_blackout.Visible=false; itemprice.Visible=false;
remaining_label.Text=(" "); prev_button.Visible=false; next_button.Visible=false; gItemDesc.Visible = true;}

function Stamps_Look(){PlaySound(41); gItemDesc.BackgroundGraphic=4780;
sgw.Visible=false; smoke_button.Visible=false;
price_blackout.Visible=false; itemprice.Visible=false;
remaining_label.Text=(" "); prev_button.Visible=false; next_button.Visible=false; gItemDesc.Visible = true;}

function Ligher_cheap_Look(){PlaySound(41); gItemDesc.BackgroundGraphic=3862;
sgw.Visible=false; smoke_button.Visible=false;
price_blackout.Visible=false; itemprice.Visible=false;
remaining_label.Text=(" "); prev_button.Visible=false; next_button.Visible=false; gItemDesc.Visible = true;}

function Headunit_Look(){PlaySound(41); gItemDesc.BackgroundGraphic=3890;
sgw.Visible=false; smoke_button.Visible=false;
remaining_label.Text=(" "); prev_button.Visible=false; next_button.Visible=false; 
if (upgrade_C.NormalGraphic==1273){prev_button.NormalGraphic=4149; prev_button.MouseOverGraphic=4150; prev_button.Visible=true;}
price_blackout.Visible=false; itemprice.Visible=false;
gItemDesc.Visible = true;}

function Barnote1_Look(){PlaySound(41); 
sgw.Visible=false; smoke_button.Visible=false; remaining_label.Text=(" "); prev_button.Visible=false; next_button.Visible=false; 
if (GetGlobalInt(1)==1){gItemDesc.BackgroundGraphic=3904;}
if (GetGlobalInt(1)==2){gItemDesc.BackgroundGraphic=3907;}
if (GetGlobalInt(1)==3){gItemDesc.BackgroundGraphic=3905;}
if (GetGlobalInt(1)==4){gItemDesc.BackgroundGraphic=3904;}
price_blackout.Visible=false; itemprice.Visible=false;
gItemDesc.Visible = true;}

function Barnote2_Look(){PlaySound(41); 
sgw.Visible=false; smoke_button.Visible=false; remaining_label.Text=(" "); prev_button.Visible=false; next_button.Visible=false; 
if (GetGlobalInt(1)==2){gItemDesc.BackgroundGraphic=3910;}
if (GetGlobalInt(1)==3){gItemDesc.BackgroundGraphic=3906;}
price_blackout.Visible=false; itemprice.Visible=false;
gItemDesc.Visible = true;}

function Barnote3_Look(){PlaySound(41); 
sgw.Visible=false; smoke_button.Visible=false; remaining_label.Text=(" "); prev_button.Visible=false; next_button.Visible=false; 
price_blackout.Visible=false; itemprice.Visible=false;
gItemDesc.BackgroundGraphic=3908; gItemDesc.Visible = true;}

function Receipt_Look(){PlaySound(41); 
sgw.Visible=false; smoke_button.Visible=false; remaining_label.Text=(" "); prev_button.Visible=false; next_button.Visible=false; 
price_blackout.Visible=false; itemprice.Visible=false;
gItemDesc.BackgroundGraphic=4146; gItemDesc.Visible = true;}

int receipted=0;
function Orwell_Look(){PlaySound(41); 
sgw.Visible=false; smoke_button.Visible=false; remaining_label.Text=(" "); prev_button.Visible=false; next_button.Visible=false; 
gItemDesc.BackgroundGraphic=4148; price_blackout.Visible=false; itemprice.Visible=false;
gItemDesc.Visible = true; 
if (receipted==0){cSlot2.AddInventory(Receipt);PlaySound(9); 
TopUp("Got Receipt!","Thales was using his receipt as a bookmark!"); receipted=1;
if ((gFaganMenu.Visible==true)&&(gFaganMenu.BackgroundGraphic==2040)){
  gItemDesc.Visible=false; 
  PCListen(); customertalk(); fmu_text.Text=("Oh, is that '1984' you have there?"); blab2();
  fmu_text.Text=(" "); fmu_speaker.Text=(" "); PCListen(); customerlisten(); dOrwell.Start();}}
}

function Diamondring_Look(){PlaySound(41); gItemDesc.BackgroundGraphic=3584;
sgw.Visible=false; smoke_button.Visible=false; price_blackout.Visible=false; itemprice.Visible=false;
remaining_label.Text=(" "); prev_button.Visible=false; next_button.Visible=false; gItemDesc.Visible = true;}

function CoffeeA_OtherClick(){ShakeScreenBackground (4, 10, 80); }

function Oldpapers_Look(){PlaySound(41); gItemDesc.BackgroundGraphic=2463; prev_button.Visible=false; next_button.Visible=false;
sgw.Visible=false; smoke_button.Visible=false; price_blackout.Visible=false; itemprice.Visible=false;
remaining_label.Text=String.Format("%d",oldpapers_remaining); gItemDesc.Visible = true;}

function CoffeeA_Look() {if (gCook2.Visible==true){ mixthis("Coffee A"); } else{  
PlaySound(41); gItemDesc.BackgroundGraphic=148; prev_button.Visible=false; next_button.Visible=false;
sgw.Visible=false; smoke_button.Visible=false; price_blackout.Visible=true; itemprice.Visible=true; 
float descycost = ((CoffeeCostA)*(30.00)); itemprice.Text=String.Format("$%.2f",descycost);
remaining_label.Text=String.Format("%d",coffee_a_remaining);gItemDesc.Visible = true;}}

function CoffeeB_Look() {if (gCook2.Visible==true){ mixthis("Coffee B"); } else{  
PlaySound(41); gItemDesc.BackgroundGraphic=47;prev_button.Visible=false; next_button.Visible=false;
sgw.Visible=false; smoke_button.Visible=false; price_blackout.Visible=true; itemprice.Visible=true; 
float descycost = ((CoffeeCostB)*(30.00)); itemprice.Text=String.Format("$%.2f",descycost);
remaining_label.Text=String.Format("%d",coffee_b_remaining);gItemDesc.Visible = true;}}

function CoffeeC_Look() {if (gCook2.Visible==true){ mixthis("Coffee C"); } else{  
PlaySound(41); gItemDesc.BackgroundGraphic=49;prev_button.Visible=false; next_button.Visible=false;
sgw.Visible=false; smoke_button.Visible=false; price_blackout.Visible=true; itemprice.Visible=true; 
float descycost = ((CoffeeCostC)*(30.00)); itemprice.Text=String.Format("$%.2f",descycost);
remaining_label.Text=String.Format("%d",coffee_c_remaining);gItemDesc.Visible = true;}}

function CoffeeD_Look() {if (gCook2.Visible==true){ mixthis("Coffee D"); } else{  
PlaySound(41); gItemDesc.BackgroundGraphic=48;prev_button.Visible=false; next_button.Visible=false;
sgw.Visible=false; smoke_button.Visible=false; price_blackout.Visible=true; itemprice.Visible=true;
float descycost = ((CoffeeCostD)*(30.00)); itemprice.Text=String.Format("$%.2f",descycost);
remaining_label.Text=String.Format("%d",coffee_d_remaining);gItemDesc.Visible = true;}}

function CoffeeS_Look() {PlaySound(41); gItemDesc.BackgroundGraphic=162;prev_button.Visible=false; next_button.Visible=false;
sgw.Visible=false; smoke_button.Visible=false; price_blackout.Visible=false; itemprice.Visible=false;
remaining_label.Text=String.Format("%d",coffee_s_remaining);gItemDesc.Visible = true;}

function Chai_Look() {if (gCook2.Visible==true){ mixthis("Chai Tea"); } else{  
PlaySound(41); gItemDesc.BackgroundGraphic=420;prev_button.Visible=false; next_button.Visible=false;
price_blackout.Visible=true; itemprice.Visible=true;  
float descycost = ((ChaiCost)*(20.00)); itemprice.Text=String.Format("$%.2f",descycost);
sgw.Visible=false; smoke_button.NormalGraphic=1955; smoke_button.MouseOverGraphic=1956; smoke_button.Visible=true;
remaining_label.Text=String.Format("%d",chai_remaining);gItemDesc.Visible = true;}}

function Crest_Look() {if (gCook2.Visible==true){ mixthis("Pipeline Crest"); } else{  
PlaySound(41); gItemDesc.BackgroundGraphic=1263;prev_button.Visible=false; next_button.Visible=false;
price_blackout.Visible=true; itemprice.Visible=true;  
float descycost = ((CrestCost)*(12.00)); itemprice.Text=String.Format("$%.2f",descycost);
sgw.Visible=false; smoke_button.NormalGraphic=1955; smoke_button.MouseOverGraphic=1956; smoke_button.Visible=true;
remaining_label.Text=String.Format("%d",crest_remaining);gItemDesc.Visible = true;}}

function Rinse_Look() {if (gCook2.Visible==true){ mixthis("Pipeline Rinse"); } else{  
PlaySound(41); gItemDesc.BackgroundGraphic=1260;prev_button.Visible=false; next_button.Visible=false;
price_blackout.Visible=true; itemprice.Visible=true;  
float descycost = ((RinseCost)*(12.00)); itemprice.Text=String.Format("$%.2f",descycost);
sgw.Visible=false; smoke_button.NormalGraphic=1955; smoke_button.MouseOverGraphic=1956; smoke_button.Visible=true;
remaining_label.Text=String.Format("%d",rinse_remaining);gItemDesc.Visible = true;}}

function Testoffaith_Look() {PlaySound(41); gItemDesc.BackgroundGraphic=3168; prev_button.Visible=false; next_button.Visible=false;
sgw.Visible=false; smoke_button.NormalGraphic=3169; smoke_button.MouseOverGraphic=3170; smoke_button.Visible=true;
price_blackout.Visible=false; itemprice.Visible=false;
remaining_label.Visible=false; gItemDesc.Visible = true;}

function Milk_Look(){if (gCook2.Visible==true){ mixthis("Milk"); } else{
PlaySound(41); gItemDesc.BackgroundGraphic=414;prev_button.Visible=false; next_button.Visible=false;
price_blackout.Visible=true; itemprice.Visible=true; 
float descycost = ((MilkCost)*(15.00)); itemprice.Text=String.Format("$%.2f",descycost);
sgw.Visible=false; smoke_button.NormalGraphic=1955; smoke_button.MouseOverGraphic=1956; smoke_button.Visible=true;
remaining_label.Text=String.Format("%d",milk_remaining);gItemDesc.Visible = true;}}

function Cocoa_Look(){if (gCook2.Visible==true){ mixthis("Cocoa"); } else{
PlaySound(41); gItemDesc.BackgroundGraphic=423;prev_button.Visible=false; next_button.Visible=false;
price_blackout.Visible=true; itemprice.Visible=true;  
float descycost = ((CocoaCost)*(30.00)); itemprice.Text=String.Format("$%.2f",descycost);
sgw.Visible=false; smoke_button.NormalGraphic=1955; smoke_button.MouseOverGraphic=1956; smoke_button.Visible=true;
remaining_label.Text=String.Format("%d",cocoa_remaining);gItemDesc.Visible = true;}}

function Bagel_Plain_Look(){PlaySound(41); gItemDesc.BackgroundGraphic=1180;prev_button.Visible=false; next_button.Visible=false;
sgw.Visible=false; smoke_button.NormalGraphic=1957; smoke_button.MouseOverGraphic=1958; smoke_button.Visible=true;
price_blackout.Visible=false; itemprice.Visible=false;
remaining_label.Text=String.Format("%d",bagel_plain_remaining);gItemDesc.Visible = true;}

function Cooler_Look(){PlaySound(41); gItemDesc.BackgroundGraphic=5190;prev_button.Visible=false; next_button.Visible=false;
price_blackout.Visible=false; itemprice.Visible=false;
sgw.Visible=false; smoke_button.NormalGraphic=1957; smoke_button.MouseOverGraphic=1958; smoke_button.Visible=true;
remaining_label.Text=String.Format("%d",hotdogs_remaining);gItemDesc.Visible = true;}

function Bigwich_Look(){PlaySound(41); gItemDesc.BackgroundGraphic=4490; prev_button.Visible=false; next_button.Visible=false;
price_blackout.Visible=true; itemprice.Visible=true; itemprice.Text=("$5.20");
sgw.Visible=false; smoke_button.NormalGraphic=1957; smoke_button.MouseOverGraphic=1958; smoke_button.Visible=true;
remaining_label.Text=(" "); gItemDesc.Visible = true;}

function Bigwichv_Look(){PlaySound(41); gItemDesc.BackgroundGraphic=4492; prev_button.Visible=false; next_button.Visible=false;
price_blackout.Visible=true; itemprice.Visible=true; itemprice.Text=("$5.20");
sgw.Visible=false; smoke_button.NormalGraphic=1957; smoke_button.MouseOverGraphic=1958; smoke_button.Visible=true;
remaining_label.Text=(" "); gItemDesc.Visible = true;}

function Dayold_Look(){PlaySound(41); gItemDesc.BackgroundGraphic=164; prev_button.Visible=false; next_button.Visible=false;
price_blackout.Visible=true; itemprice.Visible=true; itemprice.Text=("$5.20");
sgw.Visible=false; smoke_button.NormalGraphic=1957; smoke_button.MouseOverGraphic=1958; smoke_button.Visible=true;
remaining_label.Text=(" "); gItemDesc.Visible = true;}

function Oldsand_Look(){PlaySound(41); gItemDesc.BackgroundGraphic=4495; prev_button.Visible=false; next_button.Visible=false;
price_blackout.Visible=true; itemprice.Visible=true; itemprice.Text=("$5.20");
sgw.Visible=false; smoke_button.NormalGraphic=1957; smoke_button.MouseOverGraphic=1958; smoke_button.Visible=true;
remaining_label.Text=(" "); gItemDesc.Visible = true;}

function Sugar_Look(){if (gCook2.Visible==true){ mixthis("Sugar"); } else{
PlaySound(41); gItemDesc.BackgroundGraphic=1196;prev_button.Visible=false; next_button.Visible=false;
price_blackout.Visible=true; itemprice.Visible=true; 
float descycost = ((SugarCost)*(100.00)); itemprice.Text=String.Format("$%.2f",descycost);
sgw.Visible=false; smoke_button.Visible=false;
remaining_label.Text=String.Format("%d",sugar_remaining);gItemDesc.Visible = true;}}

function CreamCheese_Look(){if (gCook2.Visible==true){ mixthis("Cream Cheese"); } else{
PlaySound(41); gItemDesc.BackgroundGraphic=1210;prev_button.Visible=false; next_button.Visible=false;
price_blackout.Visible=true; itemprice.Visible=true; 
float descycost = ((CreamcheeseCost)*(10.00)); itemprice.Text=String.Format("$%.2f",descycost);
sgw.Visible=false; smoke_button.Visible=false;
remaining_label.Text=String.Format("%d",creamcheese_remaining);gItemDesc.Visible = true;}}

function Vcheese_Look(){PlaySound(41); gItemDesc.BackgroundGraphic=1258;prev_button.Visible=false; next_button.Visible=false;
sgw.Visible=false; smoke_button.Visible=false;
price_blackout.Visible=false; itemprice.Visible=false;
remaining_label.Text=String.Format("%d",vcheese_remaining);gItemDesc.Visible = true;}

function Lox_Look(){if (gCook2.Visible==true){ mixthis("Lox"); } else{
PlaySound(41); gItemDesc.BackgroundGraphic=1217;prev_button.Visible=false; next_button.Visible=false;
price_blackout.Visible=true; itemprice.Visible=true; 
float descycost = ((LoxCost)*(15.00)); itemprice.Text=String.Format("$%.2f",descycost);
sgw.Visible=false; smoke_button.Visible=false;
remaining_label.Text=String.Format("%d",lox_remaining);gItemDesc.Visible = true;}}

function Flour_Look(){if (gCook2.Visible==true){ mixthis("Flour"); } else{
PlaySound(41); gItemDesc.BackgroundGraphic=1221; prev_button.Visible=false; next_button.Visible=false;
sgw.Visible=false; smoke_button.Visible=false;
price_blackout.Visible=true; itemprice.Visible=true; 
float descycost = ((FlourCost)*(30.00)); itemprice.Text=String.Format("$%.2f",descycost);
remaining_label.Text=String.Format("%d",flour_remaining);gItemDesc.Visible = true;}}

function Cups_Look(){PlaySound(41); gItemDesc.BackgroundGraphic=1267; prev_button.Visible=false; next_button.Visible=false;
sgw.Visible=false; smoke_button.Visible=false;
price_blackout.Visible=true; itemprice.Visible=true; itemprice.Text=("$40.00");
remaining_label.Text=String.Format("%d",cups_remaining);gItemDesc.Visible = true;}

function Napkins_Look(){PlaySound(41); gItemDesc.BackgroundGraphic=1266; prev_button.Visible=false; next_button.Visible=false;
sgw.Visible=false; smoke_button.Visible=false;
price_blackout.Visible=true; itemprice.Visible=true; itemprice.Text=("$4.00");
remaining_label.Text=String.Format("%d",napkins_remaining);gItemDesc.Visible = true;}

function Catfood_Look(){if (gCook2.Visible==true){ mixthis("Cat Vittle"); } else{
PlaySound(41); gItemDesc.BackgroundGraphic=1540; prev_button.Visible=false; next_button.Visible=false;
price_blackout.Visible=true; itemprice.Visible=true;
float descycost = ((CatfoodCost)*(20.00)); itemprice.Text=String.Format("$%.2f",descycost);
sgw.Visible=false; smoke_button.Visible=false;
remaining_label.Text=String.Format("%d",catfood_remaining);
//Eating Catfood in dire starvation...
if ((Money<3.00)&&(nutrition.Width<50)){smoke_button.NormalGraphic=1957; smoke_button.MouseOverGraphic=1958; smoke_button.Visible=true;}
gItemDesc.Visible = true;}}

function Cigarettes_Look(){PlaySound(41); gItemDesc.BackgroundGraphic=1549; prev_button.Visible=false; next_button.Visible=false; 
sgw.Visible=true; smoke_button.Visible=true; smoke_button.NormalGraphic=1543; smoke_button.MouseOverGraphic=1544;
int warn;
price_blackout.Visible=true; itemprice.Visible=true; itemprice.Text=("$4.99");
warn=Random(3);
if (warn==0)sgw.NormalGraphic=1545;
if (warn==1)sgw.NormalGraphic=1546;
if (warn==2)sgw.NormalGraphic=1547;
if (warn==3)sgw.NormalGraphic=1548;
remaining_label.Text=String.Format("%d",cigarettes_remaining);gItemDesc.Visible = true;}

function Salt_Look(){if (gCook2.Visible==true){ mixthis("Salt"); } else{
PlaySound(41); gItemDesc.BackgroundGraphic=1225; prev_button.Visible=false; next_button.Visible=false;
sgw.Visible=false; smoke_button.Visible=false;
price_blackout.Visible=true; itemprice.Visible=true; 
float descycost = ((SaltCost)*(50.00)); itemprice.Text=String.Format("$%.2f",descycost);
remaining_label.Text=String.Format("%d",salt_remaining);gItemDesc.Visible = true;}}

function Yeast_Look(){if (gCook2.Visible==true){ mixthis("Yeast"); } else{
PlaySound(41); gItemDesc.BackgroundGraphic=1224; prev_button.Visible=false; next_button.Visible=false;
sgw.Visible=false; smoke_button.Visible=false;
price_blackout.Visible=true; itemprice.Visible=true; 
float descycost = ((YeastCost)*(50.00)); itemprice.Text=String.Format("$%.2f",descycost);
remaining_label.Text=String.Format("%d",yeast_remaining);gItemDesc.Visible = true;}}

function Buttermilk_Look(){if (gCook2.Visible==true){ mixthis("Buttermilk"); } else{
PlaySound(41); gItemDesc.BackgroundGraphic=1227; prev_button.Visible=false; next_button.Visible=false;
sgw.Visible=false; smoke_button.Visible=false;
price_blackout.Visible=true; itemprice.Visible=true; 
float descycost = ((ButtermilkCost)*(10.00)); itemprice.Text=String.Format("$%.2f",descycost);
remaining_label.Text=String.Format("%d",buttermilk_remaining);gItemDesc.Visible = true;}}

function Capers_Look(){if (gCook2.Visible==true){ mixthis("Capers"); } else{
PlaySound(41); gItemDesc.BackgroundGraphic=1219;prev_button.Visible=false; next_button.Visible=false;
sgw.Visible=false; smoke_button.Visible=false;
price_blackout.Visible=true; itemprice.Visible=true; 
float descycost = ((CapersCost)*(25.00)); itemprice.Text=String.Format("$%.2f",descycost);
remaining_label.Text=String.Format("%d",capers_remaining);gItemDesc.Visible = true;}}

function Peanutbutter_Look(){if (gCook2.Visible==true){ mixthis("Peanut Butter"); } else{
PlaySound(41); gItemDesc.BackgroundGraphic=1215;prev_button.Visible=false; next_button.Visible=false;
sgw.Visible=false; smoke_button.Visible=false;
price_blackout.Visible=true; itemprice.Visible=true; 
float descycost = ((PeanutbutterCost)*(25.00)); itemprice.Text=String.Format("$%.2f",descycost);
remaining_label.Text=String.Format("%d",peanutbutter_remaining);gItemDesc.Visible = true;}}

function Jelly_Look(){if (gCook2.Visible==true){ mixthis("Grape Jelly"); } else{
PlaySound(41); gItemDesc.BackgroundGraphic=1213;prev_button.Visible=false; next_button.Visible=false;
sgw.Visible=false; smoke_button.Visible=false;
price_blackout.Visible=true; itemprice.Visible=true; 
float descycost = ((JellyCost)*(25.00)); itemprice.Text=String.Format("$%.2f",descycost);
remaining_label.Text=String.Format("%d",jelly_remaining);gItemDesc.Visible = true;}}

function Syrups_Look(){if (gCook2.Visible==true){ mixthis("Syrup"); } else{
PlaySound(41); gItemDesc.BackgroundGraphic=426; prev_button.Visible=false; next_button.Visible=false;
sgw.Visible=false; smoke_button.Visible=false;
price_blackout.Visible=true; itemprice.Visible=true; 
float descycost = ((SyrupCost)*(150.00)); itemprice.Text=String.Format("$%.2f",descycost);
remaining_label.Text=String.Format("%d",syrup_remaining); gItemDesc.Visible = true;}}

function Buns_Look(){
PlaySound(41); gItemDesc.BackgroundGraphic=5188; prev_button.Visible=false; next_button.Visible=false;
sgw.Visible=false; //smoke_button.Visible=false;//Edible, now.
price_blackout.Visible=true; itemprice.Visible=true; 
float descycost = ((BunsCost)*(16.00)); itemprice.Text=String.Format("$%.2f",descycost);
remaining_label.Text=String.Format("%d",buns_remaining);gItemDesc.Visible = true;
smoke_button.NormalGraphic=1957; smoke_button.MouseOverGraphic=1958; smoke_button.Visible=true;//Yeah, edible!
}

function Chilli_Look(){
PlaySound(41); gItemDesc.BackgroundGraphic=5205; prev_button.Visible=false; next_button.Visible=false;
sgw.Visible=false; //smoke_button.Visible=false;//Edible, now!
price_blackout.Visible=true; itemprice.Visible=true; 
float descycost = ((ChiliCost)*(10.00)); itemprice.Text=String.Format("$%.2f",descycost);
remaining_label.Text=String.Format("%d",chilli_remaining);gItemDesc.Visible = true;
smoke_button.NormalGraphic=1957; smoke_button.MouseOverGraphic=1958; smoke_button.Visible=true;//Yeah, edible!
}

function Jalapenos_Look(){
PlaySound(41); gItemDesc.BackgroundGraphic=5207; prev_button.Visible=false; next_button.Visible=false;
sgw.Visible=false; smoke_button.Visible=false;
price_blackout.Visible=true; itemprice.Visible=true; 
float descycost = ((JalapenoCost)*(10.00)); itemprice.Text=String.Format("$%.2f",descycost);
remaining_label.Text=String.Format("%d",jalapenos_remaining);gItemDesc.Visible = true;}

function Ketchup_Look(){
PlaySound(41); gItemDesc.BackgroundGraphic=5209; prev_button.Visible=false; next_button.Visible=false;
sgw.Visible=false; smoke_button.Visible=false;
price_blackout.Visible=true; itemprice.Visible=true; 
float descycost = ((KetchupCost)*(25.00)); itemprice.Text=String.Format("$%.2f",descycost);
remaining_label.Text=String.Format("%d",ketchup_remaining);gItemDesc.Visible = true;}

function Mustard_Look(){
PlaySound(41); gItemDesc.BackgroundGraphic=5211; prev_button.Visible=false; next_button.Visible=false;
sgw.Visible=false; smoke_button.Visible=false;
price_blackout.Visible=true; itemprice.Visible=true; 
float descycost = ((MustardCost)*(25.00)); itemprice.Text=String.Format("$%.2f",descycost);
remaining_label.Text=String.Format("%d",mustard_remaining);gItemDesc.Visible = true;}

function Relish_Look(){
PlaySound(41); gItemDesc.BackgroundGraphic=5213; prev_button.Visible=false; next_button.Visible=false;
sgw.Visible=false; smoke_button.Visible=false;
price_blackout.Visible=true; itemprice.Visible=true; 
float descycost = ((RelishCost)*(20.00)); itemprice.Text=String.Format("$%.2f",descycost);
remaining_label.Text=String.Format("%d",relish_remaining);gItemDesc.Visible = true;}

function Sauerkraut_Look(){
PlaySound(41); gItemDesc.BackgroundGraphic=5215; prev_button.Visible=false; next_button.Visible=false;
sgw.Visible=false; smoke_button.Visible=false;
price_blackout.Visible=true; itemprice.Visible=true; 
float descycost = ((KrautCost)*(10.00)); itemprice.Text=String.Format("$%.2f",descycost);
remaining_label.Text=String.Format("%d",sauerkraut_remaining);gItemDesc.Visible = true;}

function Cream_Look(){
PlaySound(41); gItemDesc.BackgroundGraphic=5417; prev_button.Visible=false; next_button.Visible=false;
sgw.Visible=false; smoke_button.Visible=false;
price_blackout.Visible=true; itemprice.Visible=true; 
float descycost = ((CreamCost)*(15.00)); itemprice.Text=String.Format("$%.2f",descycost);
remaining_label.Text=String.Format("%d",cream_remaining);gItemDesc.Visible = true;}

function Whipped_Look(){
PlaySound(41); gItemDesc.BackgroundGraphic=5418; prev_button.Visible=false; next_button.Visible=false;
sgw.Visible=false; smoke_button.Visible=false;
price_blackout.Visible=true; itemprice.Visible=true; 
float descycost = ((WhippedCost)*(20.00)); itemprice.Text=String.Format("$%.2f",descycost);
remaining_label.Text=String.Format("%d",whipped_remaining);gItemDesc.Visible = true;}

function LoBat_Look(){
PlaySound(41); gItemDesc.BackgroundGraphic=5586; prev_button.Visible=false; next_button.Visible=false;
sgw.Visible=false; smoke_button.Visible=false; price_blackout.Visible=true; itemprice.Visible=true; 
itemprice.Text=("$6.00"); remaining_label.Text=(" "); gItemDesc.Visible = true;}
function Mat64_Look(){
PlaySound(41); gItemDesc.BackgroundGraphic=5588; prev_button.Visible=false; next_button.Visible=false;
sgw.Visible=false; smoke_button.Visible=false; price_blackout.Visible=true; itemprice.Visible=true; 
itemprice.Text=("$6.00"); remaining_label.Text=(" "); gItemDesc.Visible = true;}
function Pocketmaster_Look(){
PlaySound(41); gItemDesc.BackgroundGraphic=5590; prev_button.Visible=false; next_button.Visible=false;
sgw.Visible=false; smoke_button.Visible=false; price_blackout.Visible=true; itemprice.Visible=true; 
itemprice.Text=("$6.00"); remaining_label.Text=(" "); gItemDesc.Visible = true;}
function STU_Look(){
PlaySound(41); gItemDesc.BackgroundGraphic=5592; prev_button.Visible=false; next_button.Visible=false;
sgw.Visible=false; smoke_button.Visible=false; price_blackout.Visible=true; itemprice.Visible=true; 
itemprice.Text=("$6.00"); remaining_label.Text=(" "); gItemDesc.Visible = true;}
function Thirsty_Look(){
PlaySound(41); gItemDesc.BackgroundGraphic=5594; prev_button.Visible=false; next_button.Visible=false;
sgw.Visible=false; smoke_button.Visible=false; price_blackout.Visible=true; itemprice.Visible=true; 
itemprice.Text=("$6.00"); remaining_label.Text=(" "); gItemDesc.Visible = true;}

function EmptyPack_Look(){
PlaySound(41); gItemDesc.BackgroundGraphic=5352; prev_button.Visible=false; next_button.Visible=false;
sgw.Visible=false; smoke_button.Visible=false;
price_blackout.Visible=false; itemprice.Visible=false;
remaining_label.Text=String.Format("%d",empties_remaining);
gItemDesc.Visible = true;}

function BusPass_Look(){
PlaySound(41); 
if (GetGlobalInt(1)==1){gItemDesc.BackgroundGraphic=5458;}
if (GetGlobalInt(1)==2){gItemDesc.BackgroundGraphic=5459;}
if (GetGlobalInt(1)==3){gItemDesc.BackgroundGraphic=5200;}
if (GetGlobalInt(1)==4){gItemDesc.BackgroundGraphic=5460;}
prev_button.Visible=false; next_button.Visible=false;
price_blackout.Visible=true; itemprice.Visible=true; itemprice.Text=("$15.00");
sgw.Visible=false; smoke_button.Visible=false;
remaining_label.Text=(" "); gItemDesc.Visible = true;}

function Emachine_Look(){PlaySound(41); gItemDesc.BackgroundGraphic=479; prev_button.Visible=false; next_button.Visible=false;
sgw.Visible=false; smoke_button.Visible=false;
price_blackout.Visible=true; itemprice.Visible=true; itemprice.Text=("$200");
remaining_label.Text=(" "); gItemDesc.Visible = true;}

function espressomachine_Look() {PlaySound(41); gItemDesc.BackgroundGraphic=713; prev_button.Visible=false; next_button.Visible=false;
sgw.Visible=false; smoke_button.Visible=false;
price_blackout.Visible=true; itemprice.Visible=true; itemprice.Text=("$200");
remaining_label.Text=(" "); gItemDesc.Visible = true;}

function maker_Look(){PlaySound(41); gItemDesc.BackgroundGraphic=715; prev_button.Visible=false; next_button.Visible=false;
sgw.Visible=false; smoke_button.Visible=false;
price_blackout.Visible=true; itemprice.Visible=true; itemprice.Text=("$40.00");
remaining_label.Text=(" "); gItemDesc.Visible = true;}

function Georgetonian_Look(){PlaySound(41); gItemDesc.BackgroundGraphic=198; prev_button.Visible=false; next_button.Visible=false;
sgw.Visible=false; smoke_button.Visible=true; smoke_button.NormalGraphic=3220; smoke_button.MouseOverGraphic=3221;
price_blackout.Visible=true; itemprice.Visible=true; itemprice.Text=("$0.25");
remaining_label.Text=String.Format("%d",paper_remaining); gItemDesc.Visible = true;}

function paper_single_Look(){PlaySound(41); gItemDesc.BackgroundGraphic=3219; prev_button.Visible=false; next_button.Visible=false;
sgw.Visible=false; smoke_button.Visible=true; smoke_button.NormalGraphic=3220; smoke_button.MouseOverGraphic=3221;
price_blackout.Visible=false; itemprice.Visible=false;
remaining_label.Text=("N/a"); gItemDesc.Visible = true;}

function info_paper_OnClick(GUIControl *control, MouseButton button){ gItemDesc.BackgroundGraphic=198; prev_button.Visible=false; next_button.Visible=false;
sgw.Visible=false; smoke_button.Visible=false; itemprice.Visible=true; itemprice.Text=("$0.25");  price_blackout.Visible=true;
PlaySound(40); remaining_label.Text=String.Format("%d",paper_remaining); gItemDesc.Visible = true;}

function info_Americano_OnClick(GUIControl *control, MouseButton button){ gItemDesc.BackgroundGraphic=1761; prev_button.Visible=false; next_button.Visible=false;
sgw.Visible=false; smoke_button.Visible=false;
PlaySound(40); remaining_label.Text=(" "); gItemDesc.Visible = true;}

function info_Latte_OnClick(GUIControl *control, MouseButton button){ gItemDesc.BackgroundGraphic=1782; prev_button.Visible=false; next_button.Visible=false;
sgw.Visible=false; smoke_button.Visible=false;
PlaySound(40); remaining_label.Text=(" "); gItemDesc.Visible = true;}

function info_Chailatte_OnClick(GUIControl *control, MouseButton button){ gItemDesc.BackgroundGraphic=1773; prev_button.Visible=false; next_button.Visible=false;
sgw.Visible=false; smoke_button.Visible=false;
PlaySound(40); remaining_label.Text=(" "); gItemDesc.Visible = true;}

function info_Mocha_OnClick(GUIControl *control, MouseButton button){ gItemDesc.BackgroundGraphic=1775; prev_button.Visible=false; next_button.Visible=false;
sgw.Visible=false; smoke_button.Visible=false;
PlaySound(40); remaining_label.Text=(" "); gItemDesc.Visible = true;}

function info_Hotdog_OnClick(GUIControl *control, MouseButton button){
PlaySound(41); gItemDesc.BackgroundGraphic=5190;prev_button.Visible=false; next_button.Visible=false;
sgw.Visible=false; smoke_button.NormalGraphic=1957; smoke_button.MouseOverGraphic=1958; smoke_button.Visible=true;
remaining_label.Text=String.Format("%d",hotdogs_remaining);gItemDesc.Visible = true;}

function info_Cappuccino_OnClick(GUIControl *control, MouseButton button){ gItemDesc.BackgroundGraphic=1770; prev_button.Visible=false; next_button.Visible=false;
sgw.Visible=false; smoke_button.Visible=false;
PlaySound(40); remaining_label.Text=(" "); gItemDesc.Visible = true;}

function info_Bagel_Plain_OnClick(GUIControl *control, MouseButton button){ gItemDesc.BackgroundGraphic=1180;prev_button.Visible=false; next_button.Visible=false;
sgw.Visible=false; smoke_button.NormalGraphic=1957; smoke_button.MouseOverGraphic=1958; smoke_button.Visible=true;
PlaySound(40); remaining_label.Text=String.Format("%d",bagel_plain_remaining); gItemDesc.Visible = true;}

function info_coffeeA_OnClick(GUIControl *control, MouseButton button){CoffeeA_Look();}
function info_coffeeB_OnClick(GUIControl *control, MouseButton button){CoffeeB_Look();}
function info_coffeeC_OnClick(GUIControl *control, MouseButton button){CoffeeC_Look();}
function info_coffeeD_OnClick(GUIControl *control, MouseButton button){CoffeeD_Look();}
function info_Chai_OnClick(GUIControl *control, MouseButton button){Chai_Look();}
function info_crest_OnClick(GUIControl *control, MouseButton button){Crest_Look();}
function info_rinse_OnClick(GUIControl *control, MouseButton button){Rinse_Look();}
function info_Cocoa_OnClick(GUIControl *control, MouseButton button){Cocoa_Look();}
function info_Milk_OnClick(GUIControl *control, MouseButton button){Milk_Look();}

function manage_coffeeS_OnClick(GUIControl *control, MouseButton button){ PlaySound(40); gManager_coffee.Visible = true; gCoffee_S.Visible=false;}
function manage_coffeeA_OnClick(GUIControl *control, MouseButton button){ PlaySound(40); gManager_coffee.Visible = true; gCoffee_A.Visible=false;}
function manage_coffeeB_OnClick(GUIControl *control, MouseButton button){ PlaySound(40); gManager_coffee.Visible = true; gCoffee_B.Visible=false;}
function manage_coffeeC_OnClick(GUIControl *control, MouseButton button){ PlaySound(40); gManager_coffee.Visible = true; gCoffee_C.Visible=false;}
function manage_coffeeD_OnClick(GUIControl *control, MouseButton button){ PlaySound(40); gManager_coffee.Visible = true; gCoffee_D.Visible=false;}

function manage_americano_OnClick(GUIControl *control, MouseButton button){PlaySound(40); gManager_coffee.Visible = true;}
function manage_latte_OnClick(GUIControl *control, MouseButton button){PlaySound(40); gManager_coffee.Visible = true;}
function manage_cappuccino_OnClick(GUIControl *control, MouseButton button){PlaySound(40); gManager_coffee.Visible = true;}
function manage_mocha_OnClick(GUIControl *control, MouseButton button){PlaySound(40); gManager_coffee.Visible = true;}


function manage_bagelp_OnClick(GUIControl *control, MouseButton button){ PlaySound(40); gManager_Bagel.Visible = true;}
function Button162_OnClick(GUIControl *control, MouseButton button){ PlaySound(40); gManager_Hotdgs.Centre(); gManager_Hotdgs.Visible = true;}

function espressobutton_OnClick(GUIControl *control, MouseButton button){
PCTalk(); customerlisten(); rmu_text.Text=("What's this?"); blab1();
PCListen(); customertalk(); rmu_text.Text=("That's our own model of Espresso maker."); blab3();
PCListen(); customertalk(); rmu_text.Text=("We manufacture them here at the roastierry with parts we salvage from other machines."); blab5();
PCListen(); customertalk(); rmu_text.Text=("Typically we're..."); blab1();
rmu_label.Text=(" "); rmu_text.Text=(" "); rmu2.Animate(35, 3, 4, eOnce); blab1();
PCListen(); customertalk(); rmu_text.Text=("Typically, we're hesitant to sell them."); blab3();
PCListen(); customertalk(); rmu_text.Text=("They're very special machines."); blab2();
PCTalk(); customerlisten(); rmu_text.Text=("Okay. How much?"); blab1();
PCListen(); customertalk(); rmu_text.Text=("Three thousand."); blab1();
PCListen(); customerlisten(); rmu_label.Text=(" "); rmu_text.Text=(" ");
espressobutton.Visible=false; vitality.Width -=10; cBarneys.AddInventory(bEMachine);}


bool kerchekd=false;
////////////////////// ITEMBUYS
function bBuy_Button_OnClick(GUIControl *control, MouseButton button){
if (buyprice>=(999.99)){//Special Items (Equipment, etc)
  
if (gBuyItem.BackgroundGraphic==3890){// Head Unit
  if (Money>=70.00){
  Money-=70.00; PlaySound(4); expense_misc+=70.00;
  expenselist.AddItem("70.00 - Bought Stereo Head Unit");
  if (player.Room==21)walmartia+=60.00; if (player.Room!=21)localbucks+=60.00;
  PlaySound(9); TopItem("Got the head unit!","$70.00",3889);
  cSlot2.AddInventory(Headunit); TJ.LoseInventory(bHeadunit);}
  else if (Money < 70.00){Insufficiency();}}

if (gBuyItem.BackgroundGraphic==3584){// Buying Diamond Ring
PlaySound(41); gBuyItem.Visible=false;
if (GetGlobalInt(1)==2){
customertalk(); PCListen(); pwn_text.Text=("Oh... "); blab1();
customertalk(); PCListen(); pwn_text.Text=("You, uhh... You want it back? "); blab3();
PCTalk(); customerlisten(); pwn_text.Text=("No, I... "); blab1();
PCTalk(); customerlisten(); pwn_text.Text=("I was just looking at it."); blab2();
PCListen(); customerlisten(); pwn_text.Text=(" "); pwnlabel.Text=(" ");}
else if (GetGlobalInt(1)!=2){
customertalk(); PCListen(); pwn_text.Text=("Five hundred. "); blab1();
PCTalk(); customerlisten(); pwn_text.Text=("Oh."); blab1();
customertalk(); PCListen(); pwn_text.Text=("What do you think? "); blab1();
PCListen(); customerlisten(); pwn_text.Text=(" "); pwnlabel.Text=(" "); }}

if (gBuyItem.BackgroundGraphic==3625){// Buying Watch A
PlaySound(41); gBuyItem.Visible=false;
customertalk(); PCListen(); pwn_text.Text=("Forty. "); blab1();
PCTalk(); customerlisten(); pwn_text.Text=("Oh."); blab1();
customertalk(); PCListen(); pwn_text.Text=("What do you think? "); blab1();
PCListen(); customerlisten(); pwn_text.Text=(" "); pwnlabel.Text=(" "); dWatchbuy.Start();}

if (gBuyItem.BackgroundGraphic==4497){// Buying Lighter
PlaySound(41); gBuyItem.Visible=false;
customertalk(); PCListen(); pwn_text.Text=("Forty. "); blab1();
PCTalk(); customerlisten(); pwn_text.Text=("Oh."); blab1();
customertalk(); PCListen(); pwn_text.Text=("What do you think? "); blab1();
PCListen(); customerlisten(); pwn_text.Text=(" "); pwnlabel.Text=(" "); dLighterbuy.Start();}
  
if (gBuyItem.BackgroundGraphic==3626){// Buying Watch B
PlaySound(41); gBuyItem.Visible=false;
customertalk(); PCListen(); pwn_text.Text=("One fifty. "); blab1();
PCTalk(); customerlisten(); pwn_text.Text=("Oh."); blab1();
customertalk(); PCListen(); pwn_text.Text=("What do you think? "); blab1();
PCListen(); customerlisten(); pwn_text.Text=(" "); pwnlabel.Text=(" "); dWatchbuy.Start();}

if (gBuyItem.BackgroundGraphic==4780){// Buying Stamps
PlaySound(41); gBuyItem.Visible=false;
customertalk(); PCListen(); pwn_text.Text=("Not for sale. "); blab1();
PCTalk(); customerlisten(); pwn_text.Text=("Oh."); blab1();
PCListen(); customerlisten(); pwn_text.Text=(" "); pwnlabel.Text=(" ");}
  
if (gBuyItem.BackgroundGraphic==3627){// Buying Watch C
PlaySound(41); gBuyItem.Visible=false;
customertalk(); PCListen(); pwn_text.Text=("Eighty. "); blab1();
PCTalk(); customerlisten(); pwn_text.Text=("Oh."); blab1();
customertalk(); PCListen(); pwn_text.Text=("What do you think? "); blab1();
PCListen(); customerlisten(); pwn_text.Text=(" "); pwnlabel.Text=(" "); dWatchbuy.Start();}

if (gBuyItem.BackgroundGraphic==713){// Cheap Espresso Machine
  if (Money>=200.00){
  
  if (GetGlobalInt(1)==1){//Andrus!
     if (cSlot2.InventoryQuantity[Drinkbook.ID]==0){PlaySound(60); TopUp("Skill Required", "Andrus doesn't know how to use this machine."); vitality.Width -=5; return;}
else if (cSlot2.InventoryQuantity[Drinkbook.ID]!=0){
          Money-=200.00; PlaySound(4); if (player.Room==21)walmartia+=200.00; if (player.Room!=21)localbucks+=200.00;
          expenselist.AddItem("200.00 - Bought Espresso Machine");
          expense_equipment+=200.00; cSlot1.AddInventory(espressomachine);
          PlaySound(9); TopItem("Got an espresso machine!","$200.00",714);}}

  if (GetGlobalInt(1)==2){//Melanie!
                         Money-=200.00; PlaySound(4); expense_equipment+=200.00;
                         expenselist.AddItem("200.00 - Bought Espresso Machine");
                         cSlot1.AddInventory(espressomachine); if (player.Room==21)walmartia+=200.00; if (player.Room!=21)localbucks+=200.00;
                         PlaySound(9); TopItem("Got an espresso machine!","$200.00",714);}
  
  if (GetGlobalInt(1)==3){//Vinny!                      
  if (upgrade_4.NormalGraphic!=1278){PlaySound(60); TopUp("Upgrade Needed", "This appliance requires your cart to have a battery."); vitality.Width -=15; return;}
else if ((upgrade_4.NormalGraphic==1278)&&(cSlot2.InventoryQuantity[Drinkbook.ID]==0)){PlaySound(60); TopUp("Skill Required", "Vinny doesn't know how to use this machine."); vitality.Width -=5; return;}
else if ((upgrade_4.NormalGraphic==1278)&&(cSlot2.InventoryQuantity[Drinkbook.ID]!=0)){Money-=200.00; PlaySound(4); if (player.Room==21)walmartia+=200.00; if (player.Room!=21)localbucks+=200.00; expense_equipment+=200.00;
        cSlot1.AddInventory(espressomachine);PlaySound(9); TopItem("Got an espresso machine!","$200.00",714);
        expenselist.AddItem("200.00 - Bought Espresso Machine");}}
        
  if (GetGlobalInt(1)==4){//Logan!
  if (upgrade_4.NormalGraphic!=1278){PlaySound(60); TopUp("Upgrade Needed", "This appliance requires your cart to have a battery."); vitality.Width -=5; return;}
else if ((upgrade_4.NormalGraphic==1278)&&(cSlot2.InventoryQuantity[Drinkbook.ID]==0)){PlaySound(60); TopUp("Skill Required", "Logan doesn't know how to use this machine."); vitality.Width -=5; return;}
else if ((upgrade_4.NormalGraphic==1278)&&(cSlot2.InventoryQuantity[Drinkbook.ID]!=0)){Money-=200.00; PlaySound(4); if (player.Room==21)walmartia+=200.00; if (player.Room!=21)localbucks+=200.00;
          cSlot1.AddInventory(espressomachine);PlaySound(9); 
          TopItem("Got an espresso machine!","$200.00",714);
          expenselist.AddItem("200.00 - Bought Espresso Machine");}}
  
  }
  else if (Money < 200.00){Insufficiency();}}

if (gBuyItem.BackgroundGraphic==715){// Coffee Maker
  if (Money>=40.00){
if ((GetGlobalInt(1)==3)&&(upgrade_4.NormalGraphic!=1278)){PlaySound(60); TopUp("Upgrade Needed", "This appliance requires your cart to have a battery."); vitality.Width -=5; return;}
if ((GetGlobalInt(1)==4)&&(upgrade_4.NormalGraphic!=1278)){PlaySound(60); TopUp("Upgrade Needed", "This appliance requires your cart to have a battery."); vitality.Width -=5; return;}
  if ((GetGlobalInt(1)==1)||(GetGlobalInt(1)==2)||(upgrade_4.NormalGraphic==1278)){
  Money-=40.00; PlaySound(4); expense_equipment+=40.00;
  expenselist.AddItem("40.00 - Bought Coffee Maker");
  cSlot1.AddInventory(maker); if (player.Room==21)walmartia+=40.00; if (player.Room!=21)localbucks+=40.00;
  TopItem("Got a coffee maker!","$40.00",430);}}
  else if (Money < 40.00){Insufficiency();}}

if (gBuyItem.BackgroundGraphic==479){// Barney Espresso Machine
  if (Money>=3000.00){
  if ((GetGlobalInt(1)==3)&&(upgrade_4.NormalGraphic!=1278)){PlaySound(60); TopUp("Upgrade Needed", "This appliance requires your cart to have a battery."); vitality.Width -=5; return;}  
  if ((GetGlobalInt(1)!=3)||(upgrade_4.NormalGraphic==1278)){
  Money-=3000.00; PlaySound(4); expense_equipment+=3000.00;
  cSlot1.AddInventory(Emachine); cBarneys.LoseInventory(bEMachine); if (player.Room!=21)localbucks+=3000.00;
  PlaySound(9); TopItem("Got the barney brothers machine!","$3,000",1542);
  expenselist.AddItem("3000.00 - Bought Barney Espresso Machine");}}
  else{Insufficiency();}} 
  
  Wait(5);//This is a double-buy prevention measure.
  
  }//End SPecial Itembuys
else if (buyprice<(999.99)){//Start Normal Itembuys aka "bitemguys"
  
if (Money<(buyprice)){Insufficiency();}

else if (Money>=(buyprice)){
PlaySound(4);//Ca-Ching!
Money-=(buyprice); expense_total+=(buyprice);//Money gets lost
if (player.Room==21)walmartia+=(buyprice); //Walmart
if (player.Room!=21)localbucks+=(buyprice);//Local
  
  if (gBuyItem.BackgroundGraphic==48){// Coffee: D
  PlaySound(9); TopItem("Got Coffee: Grade D!",String.Format("$%.2f",buyprice),163);
  expenselist.AddItem(String.Format("%.2f - Bought Coffee: Grade D",buyprice));
  expense_supplies+=(buyprice);//Supply? Equipment? Misc?
  coffee_d_remaining+=30; CoffeeGrossD-=(buyprice);
  spent_coffeeD+=(buyprice); purchased_coffeeD+=30;
  if  (player.InventoryQuantity[CoffeeD.ID]==0)player.AddInventory(CoffeeD);}//Add Inventory and Done
  

  else if (gBuyItem.BackgroundGraphic==148){// Coffee: A
  PlaySound(9); TopItem("Got Coffee: Grade A!",String.Format("$%.2f",buyprice),7);
  expenselist.AddItem(String.Format("%.2f - Bought Coffee: Grade A",buyprice));
  expense_supplies+=(buyprice);//Supply? Equipment? Misc?
  spent_coffeeA+=(buyprice); purchased_coffeeA+=30;
  coffee_a_remaining+=30; CoffeeGrossA-=(buyprice);
  if  ((player.InventoryQuantity[CoffeeA.ID]==0)){player.AddInventory(CoffeeA);}
if (GetGlobalInt(411)==0){
gItemDesc.Visible=false;
gBuyItem.Visible=false;
PCTalk(); customerlisten(); rmu_text.Text=("Thanks."); blab1();
if (GetGlobalInt(1)!=2){PCListen(); customertalk(); rmu_text.Text=("You seem like a gentleman who knows his coffee."); blab3();}
if (GetGlobalInt(1)==2){PCListen(); customertalk(); rmu_text.Text=("You seem like a lady who knows a bit about coffee."); blab3();}
PCListen(); customertalk(); rmu_text.Text=("Indeed."); blab1();
PCListen(); customerlisten(); rmu_label.Text=(" "); rmu_text.Text=(" ");
SetGlobalInt(411, 1);
dBarneys_0.Start();}}

  else if (gBuyItem.BackgroundGraphic==47){// Coffee: B
  expense_supplies+=(buyprice);//Supply? Equipment? Misc?
  PlaySound(9); TopItem("Got Coffee: Grade B!",String.Format("$%.2f",buyprice),9);
  expenselist.AddItem(String.Format("%.2f - Bought Coffee: Grade B",buyprice));
  coffee_b_remaining+=30; CoffeeGrossB-=(buyprice);
  spent_coffeeB+=(buyprice); purchased_coffeeB+=30;
  if  (player.InventoryQuantity[CoffeeB.ID]==0){player.AddInventory(CoffeeB);}}


  else if (gBuyItem.BackgroundGraphic==49){// Coffee: C
  expense_supplies+=(buyprice);//Supply? Equipment? Misc?
  PlaySound(9); TopItem("Got Coffee: Grade C!",String.Format("$%.2f",buyprice),11);
  expenselist.AddItem(String.Format("%.2f - Bought Coffee: Grade C",buyprice));
  coffee_c_remaining+=30; CoffeeGrossC-=(buyprice);
  spent_coffeeC+=(buyprice); purchased_coffeeC+=30;
if  (player.InventoryQuantity[CoffeeC.ID]==0){player.AddInventory(CoffeeC);}}

  else if (gBuyItem.BackgroundGraphic==162){// Coffee: S!!!!!!!!!!!
  PlaySound(9); TopItem("Got Coffee: Grade S!",String.Format("$%.2f",buyprice),13);
  expenselist.AddItem(String.Format("%.2f - Bought Coffee: Grade S",buyprice));
  expense_supplies+=(buyprice);//Supply? Equipment? Misc?
  spent_coffeeA+=(buyprice); purchased_coffeeS+=30;
  coffee_s_remaining+=30; CoffeeGrossS-=(buyprice);
  if  ((player.InventoryQuantity[CoffeeS.ID]==0)){player.AddInventory(CoffeeS);}
gItemDesc.Visible=false;
gBuyItem.Visible=false;
PCListen(); customertalk(); rmu_text.Text=("We're quite sure you'll enjoy it."); blab3();
PCListen(); customertalk(); rmu_text.Text=("You won't find a finer bean in the world."); blab3();
PCTalk(); customerlisten(); rmu_text.Text=("...Thanks."); blab1();
PCListen(); customerlisten(); rmu_label.Text=(" "); rmu_text.Text=(" ");}

  else if (gBuyItem.BackgroundGraphic==420){// Chai
  expense_supplies+=(buyprice);//Supply? Equipment? Misc?
  PlaySound(9); TopItem("Got Chai Tea!",String.Format("$%.2f",buyprice),408);
  expenselist.AddItem(String.Format("%.2f - Bought Chai Tea",buyprice));
  chai_remaining+=20; ChaiGross-=(buyprice);
  spent_chai+=(buyprice); purchased_chai+=20;
  if  (player.InventoryQuantity[Chai.ID]==0){Menu.AddItem(Chai.Name); player.AddInventory(Chai);}}

  else if (gBuyItem.BackgroundGraphic==1263){// Crest
  expense_supplies+=(buyprice);//Supply? Equipment? Misc?
  PlaySound(9); TopItem("Got Pipeline Crest!",String.Format("$%.2f",buyprice),1262);
  expenselist.AddItem(String.Format("%.2f - Bought Pipeline Crest",buyprice));
  crest_remaining+=12; CrestGross-=(buyprice);
  spent_crest+=(buyprice); purchased_crest+=12;
  if  (player.InventoryQuantity[Crest.ID]==0){player.AddInventory(Crest);}}

  else if (gBuyItem.BackgroundGraphic==1260){// Rinse
  expense_supplies+=(buyprice);//Supply? Equipment? Misc?
  PlaySound(9); TopItem("Got Pipeline Rinse!",String.Format("$%.2f",buyprice),1261);
  expenselist.AddItem(String.Format("%.2f - Bought Pipeline Rinse",buyprice));
  rinse_remaining+=12; RinseGross-=(buyprice);
  spent_rinse+=(buyprice); purchased_rinse+=12;
  if  (player.InventoryQuantity[Rinse.ID]==0){ player.AddInventory(Rinse);}}

  else if (gBuyItem.BackgroundGraphic==414){// Milk
  expense_supplies+=(buyprice);//Supply? Equipment? Misc?
  PlaySound(9); TopItem("Got Milk!",String.Format("$%.2f",buyprice),411);
  expenselist.AddItem(String.Format("%.2f - Bought Milk",buyprice));
  milk_remaining+=15; MilkGross-=(buyprice);
  spent_milk+=(buyprice); purchased_milk+=15;
  if  (player.InventoryQuantity[Milk.ID]==0){Menu.AddItem(Milk.Name); player.AddInventory(Milk);}}

  else if (gBuyItem.BackgroundGraphic==423){// Cocoa Mix
  expense_supplies+=(buyprice);//Supply? Equipment? Misc?
  PlaySound(9); TopItem("Got Cocoa Mix!",String.Format("$%.2f",buyprice),409);
  expenselist.AddItem(String.Format("%.2f - Bought Cocoa Mix",buyprice));
  cocoa_remaining+=30; CocoaGross-=(buyprice);
  spent_cocoa+=(buyprice); purchased_cocoa+=30;
  if  (player.InventoryQuantity[Cocoa.ID]==0){Menu.AddItem("Hot Cocoa"); player.AddInventory(Cocoa);}}

  else if (gBuyItem.BackgroundGraphic==1196){// Sugar
  expense_supplies+=(buyprice);//Supply? Equipment? Misc?
  PlaySound(9); TopItem("Got a box of sugar!",String.Format("$%.2f",buyprice),1195);
  expenselist.AddItem(String.Format("%.2f - Bought Sugar",buyprice));
  sugar_remaining+=100;
  spent_sugar+=(buyprice); purchased_sugar+=100;
  if  (player.InventoryQuantity[Sugar.ID]==0){player.AddInventory(Sugar);}}

  else if (gBuyItem.BackgroundGraphic==1210){// Cream Cheese
  expense_supplies+=(buyprice);//Supply? Equipment? Misc?
  PlaySound(9); TopItem("Got a tub of cream cheese!",String.Format("$%.2f",buyprice),1211);
  expenselist.AddItem(String.Format("%.2f - Bought Cream Cheese",buyprice));
  creamcheese_remaining+=10;
  spent_creamcheese+=(buyprice); purchased_creamcheese+=10;
  if  (player.InventoryQuantity[CreamCheese.ID]==0){player.AddInventory(CreamCheese);}}

  else if (gBuyItem.BackgroundGraphic==1215){// Peanut Butter
  expense_supplies+=(buyprice);//Supply? Equipment? Misc?
  PlaySound(9); TopItem("Got peanut butter!",String.Format("$.2f",buyprice),1216);
  expenselist.AddItem(String.Format("%.2f - Bought Peanut Butter",buyprice));
  peanutbutter_remaining+=25; 
  spent_peanutbutter+=(buyprice); purchased_peanutbutter+=25;
  if  (player.InventoryQuantity[Peanutbutter.ID]==0){player.AddInventory(Peanutbutter);}}
  
  else if (gBuyItem.BackgroundGraphic==1213){// Jelly
  expense_supplies+=(buyprice);//Supply? Equipment? Misc?
  PlaySound(9); TopItem("Got Jelly!",String.Format("$.2f",buyprice),1214);
  expenselist.AddItem(String.Format("%.2f - Bought Jelly",buyprice));
  jelly_remaining+=25; 
  spent_jelly+=(buyprice); purchased_jelly+=25;
  if  (player.InventoryQuantity[Jelly.ID]==0){player.AddInventory(Jelly);}}
  
  else if (gBuyItem.BackgroundGraphic==1219){// Capers
  expense_supplies+=(buyprice);//Supply? Equipment? Misc?
  PlaySound(9); TopItem("Got capers!",String.Format("$%.2f",buyprice),1220);
  expenselist.AddItem(String.Format("%.2f - Bought Capers",buyprice));
  capers_remaining+=25; 
  spent_capers+=(buyprice); purchased_capers+=25;
  if  (player.InventoryQuantity[Capers.ID]==0) {player.AddInventory(Capers);}}
  
  else if (gBuyItem.BackgroundGraphic==1540){// Catfood
  expense_misc+=(buyprice);//Supply? Equipment? Misc?
  PlaySound(9); TopItem("Got cat vittles!",String.Format("$.2f",buyprice),1539);
  expenselist.AddItem(String.Format("%.2f - Bought Cat Vittles",buyprice));
  catfood_remaining+=20; 
  spent_catfood+=(buyprice); purchased_catfood+=20;
  if  (cSlot2.InventoryQuantity[Catfood.ID]==0)cSlot2.AddInventory(Catfood);}

  else if (gBuyItem.BackgroundGraphic==1541){// Cigarettes
  expense_misc+=(buyprice);//Supply? Equipment? Misc?
  PlaySound(9); TopItem("Got a pack of Old Brennys!",String.Format("$%.2f",buyprice),1542);
  expenselist.AddItem(String.Format("%.2f - Bought Cigarettes",buyprice));
  cigarettes_remaining+=15;
  if  (cSlot2.InventoryQuantity[Cigarettes.ID]==0)cSlot2.AddInventory(Cigarettes);}

  else if (gBuyItem.BackgroundGraphic==1266){// Napkins
  expense_equipment+=(buyprice);//Supply? Equipment? Misc?
  PlaySound(9); TopItem("Got a pack of napkins!",String.Format("$%.2f",buyprice),1265);
  expenselist.AddItem(String.Format("%.2f - Bought Napkins",buyprice));
  napkins_remaining+=500;
  if  (cSlot1.InventoryQuantity[Napkins.ID]==0)cSlot1.AddInventory(Napkins);}

  else if (gBuyItem.BackgroundGraphic==1267){// Cups
  expense_equipment+=(buyprice);//Supply? Equipment? Misc?
  PlaySound(9); TopItem("Got a box of Cups!",String.Format("$%.2f",buyprice),1268);
  expenselist.AddItem(String.Format("%.2f - Bought Cups",buyprice));
  cups_remaining+=150;
  if  (cSlot1.InventoryQuantity[Cups.ID]==0)cSlot1.AddInventory(Cups);}

  else if (gBuyItem.BackgroundGraphic==1217){// Lox
  expense_supplies+=(buyprice);//Supply? Equipment? Misc?
  PlaySound(9); TopItem("Got a package of lox!",String.Format("$%.2f",buyprice),1218);
  expenselist.AddItem(String.Format("%.2f - Bought Lox",buyprice));
  lox_remaining+=15;
  spent_lox+=(buyprice); purchased_lox+=15;
  if  (player.InventoryQuantity[Lox.ID]==0){player.AddInventory(Lox);}}

  else if (gBuyItem.BackgroundGraphic==1221){// Flour
  expense_supplies+=(buyprice);//Supply? Equipment? Misc?
  PlaySound(9); TopItem("Got a bag of flour!",String.Format("$%.2f",buyprice),1222);
  expenselist.AddItem(String.Format("%.2f - Bought Flour",buyprice));
  flour_remaining+=30; 
  spent_flour+=(buyprice); purchased_flour+=30;
  if  (player.InventoryQuantity[Flour.ID]==0){player.AddInventory(Flour);}}

  else if (gBuyItem.BackgroundGraphic==1225){// Salt
  expense_supplies+=(buyprice);//Supply? Equipment? Misc?
  PlaySound(9); TopItem("Got a box of salt!",String.Format("$%.2f",buyprice),1226);
  expenselist.AddItem(String.Format("%.2f - Bought Salt",buyprice));
  salt_remaining+=50; 
  spent_salt+=(buyprice); purchased_salt+=50;
  if  (player.InventoryQuantity[Salt.ID]==0){player.AddInventory(Salt);}}

  else if (gBuyItem.BackgroundGraphic==1224){// Yeast
  expense_supplies+=(buyprice);//Supply? Equipment? Misc?
  PlaySound(9); TopItem("Got a can of yeast!",String.Format("$%.2f",buyprice),1223);
  expenselist.AddItem(String.Format("%.2f - Bought yeast",buyprice));
  yeast_remaining+=50;
  spent_yeast+=(buyprice); purchased_yeast+=50;
  if  (player.InventoryQuantity[Yeast.ID]==0){player.AddInventory(Yeast);}}

  else if (gBuyItem.BackgroundGraphic==1227){// Buttermilk
  expense_supplies+=(buyprice);//Supply? Equipment? Misc?
  PlaySound(9); TopItem("Got a carton of buttermilk!",String.Format("$%.2f",buyprice),1228);
  expenselist.AddItem(String.Format("%.2f - Bought Buttermilk",buyprice));
  buttermilk_remaining+=10;
  spent_buttermilk+=(buyprice); purchased_buttermilk+=10;
  if  (player.InventoryQuantity[Buttermilk.ID]==0){player.AddInventory(Buttermilk);}}

  else if (gBuyItem.BackgroundGraphic==5188){// Buns
  expense_supplies+=(buyprice);//Supply? Equipment? Misc?
  PlaySound(9); TopItem("Got box of hot dog buns!",String.Format("$%.2f",buyprice),5187);
  expenselist.AddItem(String.Format("%.2f - Bought Buns",buyprice));
  buns_remaining+=16;
  spent_buns+=(buyprice); purchased_buns+=16;
  if  (player.InventoryQuantity[Buns.ID]==0){player.AddInventory(Buns);}}

  else if (gBuyItem.BackgroundGraphic==5205){// Chilli
  expense_supplies+=(buyprice);//Supply? Equipment? Misc?
  PlaySound(9); TopItem("Got a can of chilli!",String.Format("$%.2f",buyprice),5204);
  expenselist.AddItem(String.Format("%.2f - Bought Chili",buyprice));
  chilli_remaining+=10;
  spent_chili+=(buyprice); purchased_chili+=10;
  if  (player.InventoryQuantity[Chilli.ID]==0){player.AddInventory(Chilli);}}

  else if (gBuyItem.BackgroundGraphic==5207){// Jalapenos
  expense_supplies+=(buyprice);//Supply? Equipment? Misc?
  PlaySound(9); TopItem("Got a jar of jalepenos!",String.Format("$%.2f",buyprice),5206);
  expenselist.AddItem(String.Format("%.2f - Bought Jalepenos",buyprice));
  jalapenos_remaining+=10; 
  spent_jalapeno+=(buyprice); purchased_jalapeno+=10;
  if  (player.InventoryQuantity[Jalapenos.ID]==0){player.AddInventory(Jalapenos);}}

  else if (gBuyItem.BackgroundGraphic==5209){// Ketchup
  expense_supplies+=(buyprice);//Supply? Equipment? Misc?
  PlaySound(9); TopItem("Got a bottle of ketchup!",String.Format("$.2f",buyprice),5208);
  expenselist.AddItem(String.Format("%.2f - Bought Ketchup",buyprice));
  ketchup_remaining+=25; 
  spent_ketchup+=(buyprice); purchased_ketchup+=25;
  if  (player.InventoryQuantity[Ketchup.ID]==0){player.AddInventory(Ketchup);}}

  else if (gBuyItem.BackgroundGraphic==5211){// Mustard
  expense_supplies+=(buyprice);//Supply? Equipment? Misc?
  PlaySound(9); TopItem("Got a bottle of mustard!",String.Format("$%.2f",buyprice),5210);
  expenselist.AddItem(String.Format("%.2f - Bought Mustard",buyprice));
  mustard_remaining+=25; 
  spent_mustard+=(buyprice); purchased_mustard+=25;
  if  (player.InventoryQuantity[Mustard.ID]==0){player.AddInventory(Mustard);}}

  else if (gBuyItem.BackgroundGraphic==5213){// Relish
  expense_supplies+=(buyprice);//Supply? Equipment? Misc?
  PlaySound(9); TopItem("Got a jar of relish!",String.Format("$%.2f",buyprice),5212);
  expenselist.AddItem(String.Format("%.2f - Bought Relish",buyprice));
  relish_remaining+=20;
  spent_relish+=(buyprice); purchased_relish+=20;
  if  (player.InventoryQuantity[Relish.ID]==0){player.AddInventory(Relish);}}

  else if (gBuyItem.BackgroundGraphic==5215){// Sauerkraut
  expense_supplies+=(buyprice);//Supply? Equipment? Misc?
  PlaySound(9); TopItem("Got can of sauerkraut!",String.Format("$%.2f",buyprice),5214);
  expenselist.AddItem(String.Format("%.2f - Bought Sauerkraut",buyprice));
  sauerkraut_remaining+=10;
  spent_sauerkraut+=(buyprice); purchased_sauerkraut+=10;
  if  (player.InventoryQuantity[Sauerkraut.ID]==0){player.AddInventory(Sauerkraut);}}

  else if (gBuyItem.BackgroundGraphic==5417){// Cream
  expense_supplies+=(buyprice);//Supply? Equipment? Misc?
  PlaySound(9); TopItem("Got a carton of cream!",String.Format("$%.2f",buyprice),5416);
  expenselist.AddItem(String.Format("%.2f - Bought Cream",buyprice));
  cream_remaining+=15;
  spent_cream+=(buyprice); purchased_cream+=15;
  if  (player.InventoryQuantity[Cream.ID]==0){player.AddInventory(Cream);}}

  else if (gBuyItem.BackgroundGraphic==5418){// Whipped Cream
  expense_supplies+=(buyprice);//Supply? Equipment? Misc?
  PlaySound(9); TopItem("Got a canister of whipped cream!",String.Format("$%.2f",buyprice),5419);
  expenselist.AddItem(String.Format("%.2f - Bought Whipped Cream",buyprice));
  whipped_remaining+=20;
  spent_whipped+=(buyprice); purchased_whipped+=20;
  if  (player.InventoryQuantity[Whipped.ID]==0){player.AddInventory(Whipped);}}

  else if (gBuyItem.BackgroundGraphic==5184){// 24 Dogs
  if (GetGlobalInt(1)!=4){//not Logan
    PlaySound(60); //Sound of Wrong
    TopUp("Upgrade Needed", "This item requires your cart to have cold storage."); 
    vitality.Width -=05;
    return;
  }
  else {
  expense_supplies+=(buyprice);//Supply? Equipment? Misc?
  PlaySound(9); TopItem("Got two dozen dogs!",String.Format("$%.2f",buyprice),5181);
  expenselist.AddItem(String.Format("%.2f - Bought Hot Dogs",buyprice));
  hotdogs_remaining+=24; 
  if (HotdogCost>0.10){//Have to redetermine hot dog cost depending on volume
  float bigvalue=((HotdogCost)+(0.23));
  float newvalue=(bigvalue/2.0);
  HotdogCost=newvalue;}
  if (HotdogCost<0.10){HotdogCost=0.23;}//Just in case
  if  ((player.InventoryQuantity[Cooler.ID]==0)&&(salebuyer==("Melody"))){
    Customer=Melody;
    player.AddInventory(Cooler);
    gBuyItem.Visible=false;
    PCListen(); customertalk(); bmu_text.Text=("I can't help but notice that you don't have a cooler with you..."); blab4();
    PCTalk(); customerlisten(); bmu_text.Text=("Oh... I, uhh..."); blab1();
    PCListen(); customertalk(); bmu_text.Text=("Don't worry, love. It's on the house, it is."); blab3();
    PCListen(); customerlisten(); bmu_text.Text=(" "); bmu_speaker.Text=(" "); 
    PlaySound(9); TopItem("Got cooler!","Free!",5189);
    }
  }}

  else if (gBuyItem.BackgroundGraphic==5185){// 48 Dogs
    if (GetGlobalInt(1)!=4){//not Logan
    PlaySound(60); //Sound of Wrong
    TopUp("Upgrade Needed", "This item requires your cart to have cold storage."); 
    vitality.Width -=05;
    return;
  }
  else {
  expense_supplies+=(buyprice);//Supply? Equipment? Misc?
  PlaySound(9); TopItem("Got four dozen dogs!",String.Format("$%.2f",buyprice),5182);
  expenselist.AddItem(String.Format("%.2f - Bought Hot Dogs",buyprice));
  hotdogs_remaining+=48; 
  if (HotdogCost>0.10){//Have to redetermine hot dog cost depending on volume
  float bigvalue=((HotdogCost)+(0.21));
  float newvalue=(bigvalue/2.0);
  HotdogCost=newvalue;}
  if (HotdogCost<0.10){HotdogCost=0.21;}
  if  ((player.InventoryQuantity[Cooler.ID]==0)&&(salebuyer==("Melody"))){
    {player.AddInventory(Cooler);
    gBuyItem.Visible=false;
    PCListen(); customertalk(); bmu_text.Text=("I can't help but notice that you don't have a cooler with you..."); blab4();
    PCTalk(); customerlisten(); bmu_text.Text=("Oh... I, uhh..."); blab1();
    PCListen(); customertalk(); bmu_text.Text=("Don't worry, love. It's on the house, it is."); blab3();
    PCListen(); customerlisten(); bmu_text.Text=(" "); bmu_speaker.Text=(" "); 
    PlaySound(9); TopItem("Got cooler!","Free!",5189);
    }}
  }}

  else if (gBuyItem.BackgroundGraphic==5186){// 100 Dogs
    if (GetGlobalInt(1)!=4){//not Logan
    PlaySound(60); //Sound of Wrong
    TopUp("Upgrade Needed", "This item requires your cart to have cold storage."); 
    vitality.Width -=05;
    return;
  }
  else {
  expense_supplies+=(buyprice);//Supply? Equipment? Misc?
  PlaySound(9); TopItem("These things weigh a ton!",String.Format("$%.2f",buyprice),5183);
  expenselist.AddItem(String.Format("%.2f - Bought Hot Dogs",buyprice));
  hotdogs_remaining+=100;
  if (HotdogCost>0.10){//Have to redetermine hot dog cost depending on volume
  float bigvalue=((HotdogCost)+(0.16));
  float newvalue=(bigvalue/2.0);
  HotdogCost=newvalue;}
  if (HotdogCost<0.10){HotdogCost=0.16;}
  if  ((player.InventoryQuantity[Cooler.ID]==0)&&(salebuyer==("Melody"))){
    {player.AddInventory(Cooler);
    gBuyItem.Visible=false;
    PCListen(); customertalk(); bmu_text.Text=("I can't help but notice that you don't have a cooler with you..."); blab4();
    PCTalk(); customerlisten(); bmu_text.Text=("Oh... I, uhh..."); blab1();
    PCListen(); customertalk(); bmu_text.Text=("Don't worry, love. It's on the house, it is."); blab3();
    PCListen(); customerlisten(); bmu_text.Text=(" "); bmu_speaker.Text=(" "); 
    PlaySound(9); TopItem("Got cooler!","Free!",5189);
    }}
  }}
  
  else if (gBuyItem.BackgroundGraphic==426){// Syrups
  expense_supplies+=(buyprice);//Supply? Equipment? Misc?
  PlaySound(9); TopItem("Got an assortment of syrups!",String.Format("$%.2f",buyprice),410);
  expenselist.AddItem(String.Format("%.2f - Bought Syrup Assortment",buyprice));
  syrup_remaining+=150;
  spent_syrup+=(buyprice); purchased_syrup+=150;
  if  (player.InventoryQuantity[Syrups.ID]==0){player.AddInventory(Syrups);}}
  
  else if (gBuyItem.BackgroundGraphic==5586){// Buying LoBat
  if (Money>=buyprice){
  //Money-=6.00; PlaySound(4); 
  expense_misc+=buyprice;
  expenselist.AddItem(String.Format("%.2f - Bought Lo.Bat CD",buyprice));
  cSlot2.AddInventory(LoBat); PlaySound(9); TopItem("Got 'Lo.Bat' CD!",String.Format("$%.2f",buyprice),5585);
  UnlockMusic(); gBuyItem.Visible=false; 
     if (player.Room==33){mouse.Visible=false; gCDs.Visible=false;}//Pawnshop Functionality
  SetGlobalInt(216, 1); SetGlobalInt(217, 1); SetGlobalInt(218, 1); 
  SetGlobalInt(219, 1); SetGlobalInt(220, 1); SetGlobalInt(221, 1);}
  else if (Money < 6.00){Insufficiency();}}
  
  else if (gBuyItem.BackgroundGraphic==5588){// Buying Mat64
  if (Money>=buyprice){
  //Money-=6.00;
  expenselist.AddItem(String.Format("%.2f - Bought Mat64 CD",buyprice));
  PlaySound(4); expense_misc+=buyprice;
  cSlot2.AddInventory(Mat64); PlaySound(9); TopItem("Got 'Mat64' CD!",String.Format("$%.2f",buyprice),5587);
  UnlockMusic(); gBuyItem.Visible=false;
       if (player.Room==33){mouse.Visible=false; gCDs.Visible=false;}//Pawnshop Functionality
  SetGlobalInt(201, 1); SetGlobalInt(202, 1); SetGlobalInt(203, 1); 
  SetGlobalInt(204, 1); SetGlobalInt(205, 1); SetGlobalInt(206, 1);}
  else if (Money < buyprice){Insufficiency();}}
  
  else if (gBuyItem.BackgroundGraphic==5590){// Buying Pocketmaster
  if (Money>=buyprice){
  //Money-=6.00;
  expenselist.AddItem(String.Format("%.2f - Bought Pocketmaster CD",buyprice));
  PlaySound(4); expense_misc+=buyprice;
  cSlot2.AddInventory(Pocketmaster); PlaySound(9); TopItem("Got 'Pocketmaster' CD!",String.Format("$%.2f",buyprice),5589);
  UnlockMusic(); gBuyItem.Visible=false;
       if (player.Room==33){mouse.Visible=false; gCDs.Visible=false;}//Pawnshop Functionality
  SetGlobalInt(211, 1); SetGlobalInt(212, 1); SetGlobalInt(213, 1); 
  SetGlobalInt(214, 1); SetGlobalInt(215, 1);}
  else if (Money < 6.00){Insufficiency();}}
  
  else if (gBuyItem.BackgroundGraphic==5592){// Buying STU
  if (Money>=buyprice){
  //Money-=6.00;
  PlaySound(4); expense_misc+=buyprice;
  expenselist.AddItem(String.Format("%.2f - Bought Stu CD",buyprice));
  cSlot2.AddInventory(STU); PlaySound(9); TopItem("Got 'STU' CD!",String.Format("$%.2f",buyprice),5591);
  UnlockMusic(); gBuyItem.Visible=false; 
       if (player.Room==33){mouse.Visible=false; gCDs.Visible=false;}//Pawnshop Functionality
  SetGlobalInt(207, 1); SetGlobalInt(208, 1); 
  SetGlobalInt(209, 1); SetGlobalInt(210, 1);}
  else if (Money < 6.00){Insufficiency();}}

  else if (gBuyItem.BackgroundGraphic==5594){// Buying Thirsty
  if (Money>=buyprice){
  //Money-=6.00;
  PlaySound(4); expense_misc+=buyprice;
  expenselist.AddItem(String.Format("%.2f - Bought Thirsty CD",buyprice));
  cSlot2.AddInventory(Thirsty); PlaySound(9); TopItem("Got 'Thirsty' CD!",String.Format("$%.2f",buyprice),5593);
  UnlockMusic(); gBuyItem.Visible=false; 
       if (player.Room==33){mouse.Visible=false; gCDs.Visible=false;}//Pawnshop Functionality
  SetGlobalInt(222, 1); SetGlobalInt(223, 1); SetGlobalInt(224, 1);}
  else if (Money < 6.00){Insufficiency();}}

else if (gBuyItem.BackgroundGraphic==3862){// Buying Cheap Lighter
  if (Money>=2.00){
  //Money-=2.00;
  expenselist.AddItem(String.Format("%.2f - Bought Lighter",buyprice));
  PlaySound(4); expense_misc+=2.00;
  cSlot2.AddInventory(Ligher_cheap); if (player.Room==21)walmartia+=2.00; if (player.Room!=21)localbucks+=2.00;
  PlaySound(9); TopItem("Got a cheap lighter!","$2.00",3863);}
else if (Money < 2.00){Insufficiency();}}

  else if (gBuyItem.BackgroundGraphic==4490){// Buying The Bigwich
  if (Money>=5.20){
  //Money-=5.20;
  expenselist.AddItem(String.Format("%.2f - Bought Bigwich",buyprice));
  PlaySound(4); expense_misc+=5.20;
  cSlot2.AddInventory(Bigwich); if (player.Room==21)walmartia+=5.20; if (player.Room!=21)localbucks+=5.20;
  PlaySound(9); TopItem("That's a big sandwich!","$5.20",4489);}
else if (Money < 5.20){Insufficiency();}}

  else if (gBuyItem.BackgroundGraphic==4492){// Buying The Veggie Bigwich
  if (Money>=5.20){
  //Money-=5.20;
  expenselist.AddItem(String.Format("%.2f - Bought Veggie Bigwich",buyprice));
  PlaySound(4); expense_misc+=5.20;
  cSlot2.AddInventory(Bigwichv); if (player.Room==21)walmartia+=5.20; if (player.Room!=21)localbucks+=5.20;
  PlaySound(9); TopItem("That's a big sandwich!","$5.20",4491);}
  else if (Money < 5.20){Insufficiency();}}

  else if (gBuyItem.BackgroundGraphic==5077){// Buying Ping Pong!
  if (Money>=6.00){
  //Money-=6.00;
  expenselist.AddItem(String.Format("%.2f - Bought 'Ping Pong' Comic",buyprice));
  PlaySound(4); expense_misc+=6.00;
  cSlot2.AddInventory(pingpong); if (player.Room==21)walmartia+=6.00; if (player.Room!=21)localbucks+=6.00;
  PlaySound(9); TopItem("Got ping pong comic book!","$6.00",5071);}
else if (Money < 6.00){Insufficiency();}}

  else if (gBuyItem.BackgroundGraphic==5079){// Buying Calamity Annie!
  if (Money>=6.00){
  //Money-=6.00;
  expenselist.AddItem(String.Format("%.2f - Bought 'Calamity Annie' Comic",buyprice));
  PlaySound(4); expense_misc+=6.00;
  cSlot2.AddInventory(Calamity); if (player.Room==21)walmartia+=6.00; if (player.Room!=21)localbucks+=6.00;
  PlaySound(9); TopItem("Got calamity annie comic book!","$6.00",5078);}
else if (Money < 6.00){Insufficiency();}}

  else if (gBuyItem.BackgroundGraphic==5081){// Buying Carbon!
  if (Money>=14.00){
  //Money-=14.00;
  expenselist.AddItem(String.Format("%.2f - Bought book: 'carbon'",buyprice));
  PlaySound(4); expense_misc+=14.00;
  cSlot2.AddInventory(Carbon); if (player.Room==21)walmartia+=14.00; if (player.Room!=21)localbucks+=14.00;
  PlaySound(9); TopItem("Got \"Carbon\"!'","$14.00",5080);
    gBuyItem.Visible=false;
  salebuyer=("Eddie");
  PCListen(); customertalk(); fmu_text.Text=("One of my favorites. I hope you enjoy it."); blab1();
  if (GetGlobalInt(1)==1){PCTalk(); customerlisten(); fmu_text.Text=("I am doing the trying of that."); blab1();}
  if (GetGlobalInt(1)==2){PCTalk(); customerlisten(); fmu_text.Text=("Yeah, this one looks pretty good."); blab1();}
  if (GetGlobalInt(1)==3){PCTalk(); customerlisten(); fmu_text.Text=("Don't think for a second that I won't."); blab1();}
  if (GetGlobalInt(1)==4){PCTalk(); customerlisten(); fmu_text.Text=("I ain't gonna read it, if that's what you mean."); blab1();}
  PCListen(); customertalk(); fmu_text.Text=("Of course."); blab1();
  if (kerchekd==false){kerchekd=true;
  PCListen(); customertalk(); fmu_text.Text=("Fourteen dollars is much lower than I would normally charge."); blab1();
  PCListen(); customertalk(); fmu_text.Text=("I've put all of Thomas Kerchek's fiction on sale this week."); boxadd("Thomas Kerchek"); blab1();
  if (GetGlobalInt(1)!=1){PCTalk(); customerlisten(); fmu_text.Text=("Any special reason?"); blab1();}
  PCListen(); customertalk(); fmu_text.Text=("...I'd like to get people addicted to him before his next release."); blab1();}
  PCListen(); customerlisten(); fmu_text.Text=(" ");
  }
  else if (Money < 14.00){Insufficiency();}}
  
  else if (gBuyItem.BackgroundGraphic==7261){// Buying Tigers!
  if (Money>=12.00){
  expenselist.AddItem(String.Format("%.2f - Bought book: 'Grand Slam'",buyprice));
  PlaySound(4); expense_misc+=12.00;
  cSlot2.AddInventory(Tigers); if (player.Room==21)walmartia+=12.00; if (player.Room!=21)localbucks+=12.00;
  PlaySound(9); TopItem("Got \"Grand Slam\"!'","$12.00",7260);
  gBuyItem.Visible=false;
  salebuyer=("Eddie");
  PCListen(); customertalk(); fmu_text.Text=("Excellent choice. I do hope you enjoy it."); blab1();
  if (GetGlobalInt(1)==1){PCTalk(); customerlisten(); fmu_text.Text=("I will be to trying."); blab1();}
  if (GetGlobalInt(1)==2){PCTalk(); customerlisten(); fmu_text.Text=("I'm sure I will. Thanks."); blab1();}
  if (GetGlobalInt(1)==3){PCTalk(); customerlisten(); fmu_text.Text=("I'm sure it'll come in handy, thanks."); blab1();}
  if (GetGlobalInt(1)==4){PCTalk(); customerlisten(); fmu_text.Text=("It's, uhh, not for me..."); blab1();}
  PCListen(); customertalk(); fmu_text.Text=("Of course."); blab1();
  if (kerchekd==false){kerchekd=true;
  PCListen(); customertalk(); fmu_text.Text=("Twelve dollars is much lower than I would normally charge."); blab1();
  PCListen(); customertalk(); fmu_text.Text=("I've put all of Thomas Kerchek's fiction on sale this week."); boxadd("Thomas Kerchek"); blab1();
  if (GetGlobalInt(1)!=1){PCTalk(); customerlisten(); fmu_text.Text=("Any special reason?"); blab1();}
  PCListen(); customertalk(); fmu_text.Text=("...I'd like to get people addicted to him before his next release."); blab1();}
  PCListen(); customerlisten(); fmu_text.Text=(" ");
  }
  else if (Money < 12.00){Insufficiency();}}

  else if (gBuyItem.BackgroundGraphic==9950){// Scandal Rag!
  expenselist.AddItem(String.Format("%.2f - Bought book: 'Scandal Rag!'",buyprice));
  PlaySound(4); expense_misc+=buyprice;
  cSlot2.AddInventory(Scandalrag); if (player.Room==21)walmartia+=12.00; if (player.Room!=21)localbucks+=4.50;
  PlaySound(9); TopItem("Got \"Scandal Rag!\"","$4.50",9949);}
  
  else if (gBuyItem.BackgroundGraphic==9966){// Acro Circus!
  expenselist.AddItem(String.Format("%.2f - Bought book: 'Acro Circus'",buyprice));
  PlaySound(4); expense_misc+=buyprice;
  cSlot2.AddInventory(Acrocircus); if (player.Room==21)walmartia+=6.50; if (player.Room!=21)localbucks+=6.50;
  PlaySound(9); TopItem("Got \"Acro Circus\"!","$6.95",9958);}

  else if (gBuyItem.BackgroundGraphic==9968){// Dragon Feet
  expenselist.AddItem(String.Format("%.2f - Bought book: 'Dragon Feet'",buyprice));
  PlaySound(4); expense_misc+=buyprice;
  cSlot2.AddInventory(Dragonfeet); if (player.Room==21)walmartia+=6.50; if (player.Room!=21)localbucks+=6.95;
  PlaySound(9); TopItem("Got \"Dragon Feet\"!","$6.95",9967);}
  
    else if (gBuyItem.BackgroundGraphic==9984){// Fatal Steps
  expenselist.AddItem(String.Format("%.2f - Bought book: 'Fatal Steps'",buyprice));
  PlaySound(4); expense_misc+=buyprice;
  cSlot2.AddInventory(Fatalsteps); if (player.Room==21)walmartia+=7.50; if (player.Room!=21)localbucks+=7.50;
  PlaySound(9); TopItem("Got \"Fatal Steps\"!","$7.50",9976);}
  
  if (gBuyItem.BackgroundGraphic==9993){// Indian Lore
  expenselist.AddItem(String.Format("%.2f - Bought book: 'Indian Lore'",buyprice));
  PlaySound(4); expense_misc+=buyprice;
  cSlot2.AddInventory(Indianlore); if (player.Room==21)walmartia+=7.50; if (player.Room!=21)localbucks+=7.75;
  PlaySound(9); TopItem("Got \"Indian Lore\"!","$7.75",9985);}

  else if (gBuyItem.BackgroundGraphic==7052){// Candle
  expense_misc+=(buyprice);//Supply? Equipment? Misc?
  PlaySound(9); TopItem("Got a luxury Candle.",String.Format("$.2f",buyprice),7051);
  expenselist.AddItem(String.Format("%.2f - Bought a Luxury Candle",buyprice));
  cSlot2.AddInventory(Candle);}

  else if (gBuyItem.BackgroundGraphic==7054){// Perfume
  expense_misc+=(buyprice);//Supply? Equipment? Misc?
  PlaySound(9); TopItem("Got a bottle of Aqua Ivory.",String.Format("$.2f",buyprice),7053);
  expenselist.AddItem(String.Format("%.2f - Bought Aqua Ivory",buyprice));
  cSlot2.AddInventory(Perfume);}
    
  else if (gBuyItem.BackgroundGraphic==7056){// Kuddletoy
  expense_misc+=(buyprice);//Supply? Equipment? Misc?
  PlaySound(9); TopItem("Got a Kuddl-E-Toy.",String.Format("$.2f",buyprice),7055);
  expenselist.AddItem(String.Format("%.2f - Bought a kuddl-e-toy",buyprice));
  cSlot2.AddInventory(Kuddletoy);}
  
    else if (gBuyItem.BackgroundGraphic==7058){// Towels
  expense_misc+=(buyprice);//Supply? Equipment? Misc?
  PlaySound(9); TopItem("Got some towels.",String.Format("$.2f",buyprice),7057);
  expenselist.AddItem(String.Format("%.2f - Bought some towels",buyprice));
  cSlot2.AddInventory(Towels);}
  
  else if (gBuyItem.BackgroundGraphic==3628){// Watch_D / Digital Watch
  expense_misc+=(buyprice);//Supply? Equipment? Misc?
  PlaySound(9); TopItem("Got a digital watch!",String.Format("$.2f",buyprice),3624);
  expenselist.AddItem(String.Format("%.2f - Bought a Digital Watch",buyprice));
  cSlot2.AddInventory(WatchD);}
  
  else if (gBuyItem.BackgroundGraphic==7060){// Gondolas
  expense_misc+=(buyprice);//Supply? Equipment? Misc?
  PlaySound(9); TopItem("Got a box of gondolas!",String.Format("$.2f",buyprice),7059);
  expenselist.AddItem(String.Format("%.2f - Bought a box of gondolas",buyprice));
  if (cSlot2.InventoryQuantity[Gondolas.ID]==0){cSlot2.AddInventory(Gondolas);}
  granolas_remaining+=4;}
  
  else if (gBuyItem.BackgroundGraphic==7064){// Freshener
  expense_misc+=(buyprice);//Supply? Equipment? Misc?
  PlaySound(9); TopItem("Got an air freshener.",String.Format("$.2f",buyprice),7063);
  expenselist.AddItem(String.Format("%.2f - Bought an air freshener",buyprice));
  cSlot2.AddInventory(Freshener);}

  else if (gBuyItem.BackgroundGraphic==7066){// Apaptol
  expense_misc+=(buyprice);//Supply? Equipment? Misc?
  PlaySound(9); TopItem("Got a bottle of Apaptol.",String.Format("$.2f",buyprice),7065);
  apaptol_remaining+=50;
  expenselist.AddItem(String.Format("%.2f - Bought Apaptol",buyprice));
  cSlot2.AddInventory(Apaptol);}
  
  else if (gBuyItem.BackgroundGraphic==9642){// Moonroom
  expense_misc+=(buyprice);//Supply? Equipment? Misc?
  PlaySound(9); TopItem("Got a bottle of Moon Room.",String.Format("$.2f",buyprice),9641);
  expenselist.AddItem(String.Format("%.2f - Bought Moon Room",buyprice));
  moonroom_remaining+=12;
  cSlot2.AddInventory(Moonroom);}
  
  else if (gBuyItem.BackgroundGraphic==9640){// Sunroom
  expense_misc+=(buyprice);//Supply? Equipment? Misc?
  PlaySound(9); TopItem("Got a bottle of Sun Room.",String.Format("$.2f",buyprice),9639);
  expenselist.AddItem(String.Format("%.2f - Bought Sun Room",buyprice));
  sunroom_remaining+=12;
  cSlot2.AddInventory(Sunroom);}
  
    else if (gBuyItem.BackgroundGraphic==9638){// Gelcaps
  expense_misc+=(buyprice);//Supply? Equipment? Misc?
  PlaySound(9); TopItem("Got a bottle of Apaptol Gel Caps.",String.Format("$.2f",buyprice),9637);
  expenselist.AddItem(String.Format("%.2f - Bought Apaptol Gelcaps",buyprice));
  gelcaps_remaining+=50;
  cSlot2.AddInventory(Gelcaps);}
  
    else if (gBuyItem.BackgroundGraphic==9636){// Urinary
  expense_misc+=(buyprice);//Supply? Equipment? Misc?
  PlaySound(9); TopItem("Got a box of Urinary Pain Reliever.",String.Format("$.2f",buyprice),9635);
  expenselist.AddItem(String.Format("%.2f - Bought Urinary Meds",buyprice));
  urinary_remaining+=24;
  cSlot2.AddInventory(Urinary);}
  
    else if (gBuyItem.BackgroundGraphic==9634){// Multivitamin
  expense_misc+=(buyprice);//Supply? Equipment? Misc?
  PlaySound(9); TopItem("Got a bottle of Daily Multi-Vitamins.",String.Format("$.2f",buyprice),9633);
  expenselist.AddItem(String.Format("%.2f - Bought Multivitamins",buyprice));
  multivitamin_remaining+=100;
  cSlot2.AddInventory(Multivitamin);}

    else if (gBuyItem.BackgroundGraphic==9632){// Pain Reliever
  expense_misc+=(buyprice);//Supply? Equipment? Misc?
  PlaySound(9); TopItem("Got a box of Pain Reliever.",String.Format("$.2f",buyprice),9631);
  expenselist.AddItem(String.Format("%.2f - Bought Pain Reliever",buyprice));
  painrelief_remaining+=35;
  cSlot2.AddInventory(Painrelief);}
  
    else if (gBuyItem.BackgroundGraphic==9630){// Spell: Unflavored
  expense_misc+=(buyprice);//Supply? Equipment? Misc?
  PlaySound(9); TopItem("Got a box of Unflavored Cough Drops.",String.Format("$.2f",buyprice),9629);
  expenselist.AddItem(String.Format("%.2f - Bought Cough Drops",buyprice));
  spellunflavor_remaining+=25;
  cSlot2.AddInventory(Spellunflav);}
  
  if (gBuyItem.BackgroundGraphic==9628){// Spell: Lemon Tea
  expense_misc+=(buyprice);//Supply? Equipment? Misc?
  PlaySound(9); TopItem("Got a box of Lemon Tea Cough Drops.",String.Format("$.2f",buyprice),9627);
  expenselist.AddItem(String.Format("%.2f - Bought Cough Drops",buyprice));
  spelllemon_remaining+=25;
  cSlot2.AddInventory(Spelllemon);}

  if (gBuyItem.BackgroundGraphic==8174){// Voliton1
  expense_misc+=(buyprice);//Supply? Equipment? Misc?
  PlaySound(9); TopItem("Got a Voliton Robot Toy.",String.Format("$.2f",buyprice),8172);
  expenselist.AddItem(String.Format("%.2f - Bought Robot Toy",buyprice));
  cSlot2.AddInventory(Voliton1);}
  
  if (gBuyItem.BackgroundGraphic==8175){// Voliton2
  expense_misc+=(buyprice);//Supply? Equipment? Misc?
  PlaySound(9); TopItem("Got a Voliton Robot Toy.",String.Format("$.2f",buyprice),8173);
  expenselist.AddItem(String.Format("%.2f - Bought Robot Toy",buyprice));
  cSlot2.AddInventory(Voliton2);}
  
  if (gBuyItem.BackgroundGraphic==9626){// Multitool
  expense_misc+=(buyprice);//Supply? Equipment? Misc?
  PlaySound(9); TopItem("Got a Foy Knives Multitool.",String.Format("$.2f",buyprice),9625);
  expenselist.AddItem(String.Format("%.2f - Bought Multitool",buyprice));
  cSlot2.AddInventory(Multitool);}

  if (gBuyItem.BackgroundGraphic==3890){// Head Unit
  expense_equipment+=(buyprice);//Supply? Equipment? Misc?
  PlaySound(9); TopItem("Bought a head unit!",String.Format("$.2f",buyprice),3889);
  expenselist.AddItem(String.Format("%.2f - Bought Head Unit",buyprice));
  cSlot2.AddInventory(Headunit);}


Wait(5);//This is a double-buy prevention measure
}}}

///Bitem Looks ///Pricegun

function bCoffee_D_Look(){buysticker.Visible=true; buyblackout.Visible=true;
PlaySound(41); gBuyItem.BackgroundGraphic=48;
if (player.Room==15){buyprice=(5.50);}//Bigby
if (player.Room==21){buyprice=(4.57);}//Superstore
if (player.Room==27){buyprice=(0.00);}//Roaster
if (player.Room==20){buyprice=(5.55);}//Organique
buysticker.Text=String.Format("$%.2f",buyprice);
gBuyItem.Visible=true;}

function bChai_Look(){buysticker.Visible=true; buyblackout.Visible=true;
PlaySound(41); gBuyItem.BackgroundGraphic=420;
if (player.Room==15){buyprice=(0.00);}//Bigby
if (player.Room==21){buyprice=(8.16);}//Superstore
if (player.Room==27){buyprice=(9.00);}//Roaster
if (player.Room==20){buyprice=(5.55);}//Organique
buysticker.Text=String.Format("$%.2f",buyprice);
gBuyItem.Visible=true;}

function bCrest_Look(){buysticker.Visible=true; buyblackout.Visible=true;
PlaySound(41); gBuyItem.BackgroundGraphic=1263;
if (player.Room==15){buyprice=(4.00);}//Bigby
if (player.Room==21){buyprice=(3.88);}//Superstore
if (player.Room==27){buyprice=(0.00);}//Roaster
if (player.Room==20){buyprice=(5.55);}//Organique
buysticker.Text=String.Format("$%.2f",buyprice);
gBuyItem.Visible=true;}

function bRinse_Look(){buysticker.Visible=true; buyblackout.Visible=true;
PlaySound(41); gBuyItem.BackgroundGraphic=1260;
if (player.Room==15){buyprice=(4.00);}//Bigby
if (player.Room==21){buyprice=(3.88);}//Superstore
if (player.Room==27){buyprice=(0.00);}//Roaster
if (player.Room==20){buyprice=(5.55);}//Organique
buysticker.Text=String.Format("$%.2f",buyprice);
gBuyItem.Visible=true;}

function bMilk_Look(){buysticker.Visible=true; buyblackout.Visible=true;
PlaySound(41); gBuyItem.BackgroundGraphic=414;
if (player.Room==15){buyprice=(4.00);}//Bigby
if (player.Room==21){buyprice=(3.96);}//Superstore
if (player.Room==27){buyprice=(0.00);}//Roaster
if (player.Room==20){buyprice=(5.55);}//Organique
buysticker.Text=String.Format("$%.2f",buyprice);
gBuyItem.Visible=true;}

function bCocoa_Look(){buysticker.Visible=true; buyblackout.Visible=true;
PlaySound(41); gBuyItem.BackgroundGraphic=423;
if (player.Room==15){buyprice=(7.00);}//Bigby
if (player.Room==21){buyprice=(7.13);}//Superstore
if (player.Room==27){buyprice=(10.00);}//Roaster
if (player.Room==20){buyprice=(5.55);}//Organique
buysticker.Text=String.Format("$%.2f",buyprice);
gBuyItem.Visible=true;}

function bSyrups_Look(){buysticker.Visible=true; buyblackout.Visible=true;
PlaySound(41); gBuyItem.BackgroundGraphic=426;
if (player.Room==15){buyprice=(0.00);}//Bigby
if (player.Room==21){buyprice=(38.14);}//Superstore
if (player.Room==27){buyprice=(40.00);}//Roaster
if (player.Room==20){buyprice=(5.55);}//Organique
buysticker.Text=String.Format("$%.2f",buyprice);
gBuyItem.Visible=true;}

function bCoffee_A_Look(){buysticker.Visible=true; buyblackout.Visible=true;
PlaySound(41); gBuyItem.BackgroundGraphic=148;
if (player.Room==15){buyprice=(0.00);}//Bigby
if (player.Room==21){buyprice=(0.00);}//Superstore
if (player.Room==27){buyprice=(30.00);}//Roaster
if (player.Room==20){buyprice=(0.00);}//Organique
buysticker.Text=String.Format("$%.2f",buyprice);
gBuyItem.Visible=true;}

function bCoffee_B_Look(){buysticker.Visible=true; buyblackout.Visible=true;
PlaySound(41); gBuyItem.BackgroundGraphic=47;
if (player.Room==15){buyprice=(0.00);}//Bigby
if (player.Room==21){buyprice=(0.00);}//Superstore
if (player.Room==27){buyprice=(14.00);}//Roaster
if (player.Room==20){buyprice=(19.00);}//Organique
buysticker.Text=String.Format("$%.2f",buyprice);
gBuyItem.Visible=true;}

function bCoffee_C_Look(){buysticker.Visible=true; buyblackout.Visible=true;
PlaySound(41); gBuyItem.BackgroundGraphic=49;
if (player.Room==15){buyprice=(0.00);}//Bigby
if (player.Room==21){buyprice=(0.00);}//Superstore
if (player.Room==27){buyprice=(9.00);}//Roaster
if (player.Room==20){buyprice=(0.00);}//Organique
buysticker.Text=String.Format("$%.2f",buyprice);
gBuyItem.Visible=true;}

function bCoffee_S_Look(){buysticker.Visible=true; buyblackout.Visible=true;
PlaySound(41); gBuyItem.BackgroundGraphic=162;
if (player.Room==15){buyprice=(0.00);}//Bigby
if (player.Room==21){buyprice=(0.00);}//Superstore
if (player.Room==27){buyprice=(70.00);}//Roaster
if (player.Room==20){buyprice=(0.00);}//Organique
buysticker.Text=String.Format("$%.2f",buyprice);
gBuyItem.Visible=true;}

function bSugar_Look(){buysticker.Visible=true; buyblackout.Visible=true;
PlaySound(41); gBuyItem.BackgroundGraphic=1196;
if (player.Room==15){buyprice=(3.00);}//Bigby
if (player.Room==21){buyprice=(2.79);}//Superstore
if (player.Room==27){buyprice=(0.00);}//Roaster
if (player.Room==20){buyprice=(3.50);}//Organique
buysticker.Text=String.Format("$%.2f",buyprice);
gBuyItem.Visible=true;}

function bCreamCheese_Look(){buysticker.Visible=true; buyblackout.Visible=true;
PlaySound(41); gBuyItem.BackgroundGraphic=1210;
if (player.Room==15){buyprice=(2.00);}//Bigby
if (player.Room==21){buyprice=(1.99);}//Superstore
if (player.Room==27){buyprice=(0.00);}//Roaster
if (player.Room==20){buyprice=(3.49);}//Organique
buysticker.Text=String.Format("$%.2f",buyprice);
gBuyItem.Visible=true;}

function bLox_Look() {buysticker.Visible=true; buyblackout.Visible=true;
PlaySound(41); gBuyItem.BackgroundGraphic=1217;
if (player.Room==15){buyprice=(20.00);}//Bigby
if (player.Room==21){buyprice=(18.10);}//Superstore
if (player.Room==27){buyprice=(0.00);}//Roaster
if (player.Room==20){buyprice=(25.00);}//Organique
buysticker.Text=String.Format("$%.2f",buyprice);
gBuyItem.Visible=true;}

function bFlour_Look() {buysticker.Visible=true; buyblackout.Visible=true;
PlaySound(41); gBuyItem.BackgroundGraphic=1221;
if (player.Room==15){buyprice=(5.00);}//Bigby
if (player.Room==21){buyprice=(4.79);}//Superstore
if (player.Room==27){buyprice=(0.00);}//Roaster
if (player.Room==20){buyprice=(4.00);}//Organique
buysticker.Text=String.Format("$%.2f",buyprice);
gBuyItem.Visible=true;}

function bCups_Look() {buysticker.Visible=true; buyblackout.Visible=true;
PlaySound(41); gBuyItem.BackgroundGraphic=1267;
if (player.Room==15){buyprice=(10.00);}//Bigby
if (player.Room==21){buyprice=(10.00);}//Superstore
if (player.Room==27){buyprice=(10.00);}//Roaster
if (player.Room==20){buyprice=(10.00);}//Organique
buysticker.Text=String.Format("$%.2f",buyprice);
gBuyItem.Visible=true;}

function bNapkins_Look() {buysticker.Visible=true; buyblackout.Visible=true;
PlaySound(41); gBuyItem.BackgroundGraphic=1266; 
if (player.Room==15){buyprice=(4.00);}//Bigby
if (player.Room==21){buyprice=(4.00);}//Superstore
if (player.Room==27){buyprice=(4.00);}//Roaster
if (player.Room==20){buyprice=(4.00);}//Organique
buysticker.Text=String.Format("$%.2f",buyprice);
gBuyItem.Visible=true;}

function bCatfood_Look() {buysticker.Visible=true; buyblackout.Visible=true;
PlaySound(41); gBuyItem.BackgroundGraphic=1540;
if (player.Room==15){buyprice=(15.00);}//Bigby
if (player.Room==21){buyprice=(13.88);}//Superstore
if (player.Room==27){buyprice=(0.00);}//Roaster
if (player.Room==20){buyprice=(20.00);}//Organique
buysticker.Text=String.Format("$%.2f",buyprice);
gBuyItem.Visible=true;}

function bCigarettes_Look() {buysticker.Visible=true; buyblackout.Visible=true;
PlaySound(41); gBuyItem.BackgroundGraphic=1541;
if (player.Room==15){buyprice=(6.00);}//Bigby
if (player.Room==21){buyprice=(7.29);}//Superstore
if (player.Room==27){buyprice=(6.00);}//Roaster
if (player.Room==20){buyprice=(5.00);}//Organique
buysticker.Text=String.Format("$%.2f",buyprice);
int warn=Random(3);
if (warn==0)sgw_buy.NormalGraphic=1545;
if (warn==1)sgw_buy.NormalGraphic=1546;
if (warn==2)sgw_buy.NormalGraphic=1547;
if (warn==3)sgw_buy.NormalGraphic=1548;
sgw_buy.Visible=true;
gBuyItem.Visible=true;}

function bSalt_Look() {buysticker.Visible=true; buyblackout.Visible=true;
PlaySound(41); gBuyItem.BackgroundGraphic=1225;
if (player.Room==15){buyprice=(3.00);}//Bigby
if (player.Room==21){buyprice=(2.39);}//Superstore
if (player.Room==27){buyprice=(0.00);}//Roaster
if (player.Room==20){buyprice=(4.00);}//Organique
buysticker.Text=String.Format("$%.2f",buyprice);
gBuyItem.Visible=true;}

function bYeast_Look() {buysticker.Visible=true; buyblackout.Visible=true;
PlaySound(41); gBuyItem.BackgroundGraphic=1224;
if (player.Room==15){buyprice=(4.50);}//Bigby
if (player.Room==21){buyprice=(4.67);}//Superstore
if (player.Room==27){buyprice=(5.00);}//Roaster
if (player.Room==20){buyprice=(5.00);}//Organique
buysticker.Text=String.Format("$%.2f",buyprice);
gBuyItem.Visible=true;}

function bButtermilk_Look() {buysticker.Visible=true; buyblackout.Visible=true;
PlaySound(41); gBuyItem.BackgroundGraphic=1227; 
if (player.Room==15){buyprice=(4.50);}//Bigby
if (player.Room==21){buyprice=(4.88);}//Superstore
if (player.Room==27){buyprice=(0.00);}//Roaster
if (player.Room==20){buyprice=(5.85);}//Organique
buysticker.Text=String.Format("$%.2f",buyprice);
gBuyItem.Visible=true;}

function bCapers_Look() {buysticker.Visible=true; buyblackout.Visible=true;
PlaySound(41); gBuyItem.BackgroundGraphic=1219;
if (player.Room==15){buyprice=(4.50);}//Bigby
if (player.Room==21){buyprice=(4.11);}//Superstore
if (player.Room==27){buyprice=(0.00);}//Roaster
if (player.Room==20){buyprice=(0.00);}//Organique
buysticker.Text=String.Format("$%.2f",buyprice);
gBuyItem.Visible=true;}

function bJelly_Look(){buysticker.Visible=true; buyblackout.Visible=true;
PlaySound(41); gBuyItem.BackgroundGraphic=1213;
if (player.Room==15){buyprice=(2.50);}//Bigby
if (player.Room==21){buyprice=(2.99);}//Superstore
if (player.Room==27){buyprice=(0.00);}//Roaster
if (player.Room==20){buyprice=(3.49);}//Organique
buysticker.Text=String.Format("$%.2f",buyprice);
gBuyItem.Visible=true;}

function bPeanutbutter_Look() {buysticker.Visible=true; buyblackout.Visible=true;
PlaySound(41); gBuyItem.BackgroundGraphic=1215;
if (player.Room==15){buyprice=(2.50);}//Bigby
if (player.Room==21){buyprice=(2.98);}//Superstore
if (player.Room==27){buyprice=(0.00);}//Roaster
if (player.Room==20){buyprice=(3.49);}//Organique
buysticker.Text=String.Format("$%.2f",buyprice);
gBuyItem.Visible=true;}

function bBigwich_Look(){buysticker.Visible=true; buyblackout.Visible=true;
PlaySound(41); gBuyItem.BackgroundGraphic=4490;
if (player.Room==15){buyprice=(5.20);}//Bigby
if (player.Room==21){buyprice=(0.00);}//Superstore
if (player.Room==27){buyprice=(0.00);}//Roaster
if (player.Room==20){buyprice=(4.00);}//Organique
buysticker.Text=String.Format("$%.2f",buyprice);
gBuyItem.Visible=true;}

function bBigwichv_Look(){buysticker.Visible=true; buyblackout.Visible=true;
PlaySound(41); gBuyItem.BackgroundGraphic=4492;
if (player.Room==15){buyprice=(5.20);}//Bigby
if (player.Room==21){buyprice=(0.00);}//Superstore
if (player.Room==27){buyprice=(0.00);}//Roaster
if (player.Room==20){buyprice=(4.00);}//Organique
buysticker.Text=String.Format("$%.2f",buyprice);
gBuyItem.Visible=true;}

function bBuns_Look(){buysticker.Visible=true; buyblackout.Visible=true;
PlaySound(41); gBuyItem.BackgroundGraphic=5188; 
if (player.Room==15){buyprice=(3.00);}//Bigby
if (player.Room==21){buyprice=(2.19);}//Superstore
if (player.Room==27){buyprice=(0.00);}//Roaster
if (player.Room==20){buyprice=(4.00);}//Organique
buysticker.Text=String.Format("$%.2f",buyprice);
gBuyItem.Visible=true;}

function bChilli_Look(){buysticker.Visible=true; buyblackout.Visible=true;
PlaySound(41); gBuyItem.BackgroundGraphic=5205;
if (player.Room==15){buyprice=(2.00);}//Bigby
if (player.Room==21){buyprice=(1.88);}//Superstore
if (player.Room==27){buyprice=(0.00);}//Roaster
if (player.Room==20){buyprice=(0.00);}//Organique
buysticker.Text=String.Format("$%.2f",buyprice);
gBuyItem.Visible=true;}

function bJalapenos_Look(){buysticker.Visible=true; buyblackout.Visible=true;
PlaySound(41); gBuyItem.BackgroundGraphic=5207;
if (player.Room==15){buyprice=(2.50);}//Bigby
if (player.Room==21){buyprice=(2.39);}//Superstore
if (player.Room==27){buyprice=(0.00);}//Roaster
if (player.Room==20){buyprice=(0.00);}//Organique
buysticker.Text=String.Format("$%.2f",buyprice);
gBuyItem.Visible=true;}

function bKetchup_Look(){buysticker.Visible=true; buyblackout.Visible=true;
PlaySound(41); gBuyItem.BackgroundGraphic=5209;
if (player.Room==15){buyprice=(3.50);}//Bigby
if (player.Room==21){buyprice=(3.87);}//Superstore
if (player.Room==27){buyprice=(0.00);}//Roaster
if (player.Room==20){buyprice=(0.00);}//Organique
buysticker.Text=String.Format("$%.2f",buyprice);
gBuyItem.Visible=true;}

function bMustard_Look(){buysticker.Visible=true; buyblackout.Visible=true;
PlaySound(41); gBuyItem.BackgroundGraphic=5211;
if (player.Room==15){buyprice=(3.50);}//Bigby
if (player.Room==21){buyprice=(4.86);}//Superstore
if (player.Room==27){buyprice=(0.00);}//Roaster
if (player.Room==20){buyprice=(0.00);}//Organique
buysticker.Text=String.Format("$%.2f",buyprice);
gBuyItem.Visible=true;}

function bRelish_Look(){buysticker.Visible=true; buyblackout.Visible=true;
PlaySound(41); gBuyItem.BackgroundGraphic=5213; 
if (player.Room==15){buyprice=(3.50);}//Bigby
if (player.Room==21){buyprice=(3.44);}//Superstore
if (player.Room==27){buyprice=(0.00);}//Roaster
if (player.Room==20){buyprice=(0.00);}//Organique
buysticker.Text=String.Format("$%.2f",buyprice);
gBuyItem.Visible=true;}

function bSauerkraut_Look(){buysticker.Visible=true; buyblackout.Visible=true;
PlaySound(41); gBuyItem.BackgroundGraphic=5215;
if (player.Room==15){buyprice=(2.50);}//Bigby
if (player.Room==21){buyprice=(2.28);}//Superstore
if (player.Room==27){buyprice=(0.00);}//Roaster
if (player.Room==20){buyprice=(0.00);}//Organique
buysticker.Text=String.Format("$%.2f",buyprice);
gBuyItem.Visible=true;}

function bCream_Look(){buysticker.Visible=true; buyblackout.Visible=true;
PlaySound(41); gBuyItem.BackgroundGraphic=5417;
if (player.Room==15){buyprice=(2.50);}//Bigby
if (player.Room==21){buyprice=(2.37);}//Superstore
if (player.Room==27){buyprice=(0.00);}//Roaster
if (player.Room==20){buyprice=(2.00);}//Organique
buysticker.Text=String.Format("$%.2f",buyprice);
gBuyItem.Visible=true;}

function bWhipped_Look(){buysticker.Visible=true; buyblackout.Visible=true;
PlaySound(41); gBuyItem.BackgroundGraphic=5418;
if (player.Room==15){buyprice=(4.00);}//Bigby
if (player.Room==21){buyprice=(3.97);}//Superstore
if (player.Room==27){buyprice=(0.00);}//Roaster
if (player.Room==20){buyprice=(0.00);}//Organique
buysticker.Text=String.Format("$%.2f",buyprice);
gBuyItem.Visible=true;}

function bLobat_Look(){buysticker.Visible=true; buyblackout.Visible=true;
PlaySound(41); gBuyItem.BackgroundGraphic=5586;
if (player.Room==21){buyprice=(9.99);}//Superstore
if (player.Room!=21){buyprice=(6.00);}//Pawnshop
buysticker.Text=String.Format("$%.2f",buyprice);gBuyItem.Visible=true;}

function bMat64_Look(){buysticker.Visible=true; buyblackout.Visible=true;
PlaySound(41); gBuyItem.BackgroundGraphic=5588;
if (player.Room==21){buyprice=(9.99);}//Superstore
if (player.Room!=21){buyprice=(6.00);}//Pawnshop
buysticker.Text=String.Format("$%.2f",buyprice);gBuyItem.Visible=true;}

function bPocket_Look(){buysticker.Visible=true; buyblackout.Visible=true;
PlaySound(41); gBuyItem.BackgroundGraphic=5590;
if (player.Room==21){buyprice=(9.99);}//Superstore
if (player.Room!=21){buyprice=(6.00);}//Pawnshop
buysticker.Text=String.Format("$%.2f",buyprice);gBuyItem.Visible=true;}

function bStu_Look(){buysticker.Visible=true; buyblackout.Visible=true;
PlaySound(41); gBuyItem.BackgroundGraphic=5592;
if (player.Room==21){buyprice=(9.99);}//Superstore
if (player.Room!=21){buyprice=(6.00);}//Pawnshop
buysticker.Text=String.Format("$%.2f",buyprice);gBuyItem.Visible=true;}

function bThirsty_Look(){buysticker.Visible=true; buyblackout.Visible=true;
PlaySound(41); gBuyItem.BackgroundGraphic=5594; 
if (player.Room==21){buyprice=(9.99);}//Superstore
if (player.Room!=21){buyprice=(6.00);}//Pawnshop
buysticker.Text=String.Format("$%.2f",buyprice);gBuyItem.Visible=true;}

function bLightercheap_Look(){buysticker.Visible=true; buyblackout.Visible=true;
PlaySound(41); gBuyItem.BackgroundGraphic=3862;
buyprice=(2.00); 
buysticker.Text=String.Format("$%.2f",buyprice);
gBuyItem.Visible=true;}

function bpingpong_Look(){buysticker.Visible=true; buyblackout.Visible=true;
PlaySound(41); gBuyItem.BackgroundGraphic=5077;
buyprice=(6.00); 
buysticker.Text=String.Format("$%.2f",buyprice);
gBuyItem.Visible=true;}

function bCalamity_Look(){buysticker.Visible=true; buyblackout.Visible=true;
PlaySound(41); gBuyItem.BackgroundGraphic=5079;
buyprice=(6.00); 
buysticker.Text=String.Format("$%.2f",buyprice);
gBuyItem.Visible=true;}

function bCarbon_Look(){buysticker.Visible=true; buyblackout.Visible=true;
PlaySound(41); gBuyItem.BackgroundGraphic=5081;
buyprice=(14.00); 
buysticker.Text=String.Format("$%.2f",buyprice);
gBuyItem.Visible=true;}

function bScandalrag_Look(){buysticker.Visible=true; buyblackout.Visible=true;
PlaySound(41); gBuyItem.BackgroundGraphic=9950;
buyprice=(4.50); 
buysticker.Text=String.Format("$%.2f",buyprice);
gBuyItem.Visible=true;}

function bAcrocircus_Look(){buysticker.Visible=true; buyblackout.Visible=true;
PlaySound(41); gBuyItem.BackgroundGraphic=9966;
buyprice=(6.95); 
buysticker.Text=String.Format("$%.2f",buyprice);
gBuyItem.Visible=true;}

function bDragonfeet_Look(){buysticker.Visible=true; buyblackout.Visible=true;
PlaySound(41); gBuyItem.BackgroundGraphic=9968;
buyprice=(6.95); 
buysticker.Text=String.Format("$%.2f",buyprice);
gBuyItem.Visible=true;}

function bFatalsteps_Look(){buysticker.Visible=true; buyblackout.Visible=true;
PlaySound(41); gBuyItem.BackgroundGraphic=9984;
buyprice=(7.50); 
buysticker.Text=String.Format("$%.2f",buyprice);
gBuyItem.Visible=true;}

function bIndianlore_Look(){buysticker.Visible=true; buyblackout.Visible=true;
PlaySound(41); gBuyItem.BackgroundGraphic=9993;
buyprice=(7.75); 
buysticker.Text=String.Format("$%.2f",buyprice);
gBuyItem.Visible=true;}

function bTigers_Look(){buysticker.Visible=true; buyblackout.Visible=true;
PlaySound(41); gBuyItem.BackgroundGraphic=7261;
buyprice=(12.00); 
buysticker.Text=String.Format("$%.2f",buyprice);
gBuyItem.Visible=true;}

function bVoliton1_Look(){buysticker.Visible=true; buyblackout.Visible=true;
PlaySound(41); gBuyItem.BackgroundGraphic=8174;
buyprice=(14.99); 
buysticker.Text=String.Format("$%.2f",buyprice);
gBuyItem.Visible=true;}

function bVoliton2_Look(){buysticker.Visible=true; buyblackout.Visible=true;
PlaySound(41); gBuyItem.BackgroundGraphic=8175;
buyprice=(14.99); 
buysticker.Text=String.Format("$%.2f",buyprice);
gBuyItem.Visible=true;}

function bMultitool_Look(){buysticker.Visible=true; buyblackout.Visible=true;
PlaySound(41); gBuyItem.BackgroundGraphic=9626;
buyprice=(7.99); 
buysticker.Text=String.Format("$%.2f",buyprice);
gBuyItem.Visible=true;}

function bHD24_Look(){buysticker.Visible=true; buyblackout.Visible=true;
PlaySound(41); gBuyItem.BackgroundGraphic=5184;
buyprice=(5.49); 
buysticker.Text=String.Format("$%.2f",buyprice);
gBuyItem.Visible=true;}

function bHD48_Look(){buysticker.Visible=true; buyblackout.Visible=true;
PlaySound(41); gBuyItem.BackgroundGraphic=5185;
buyprice=(9.99); 
buysticker.Text=String.Format("$%.2f",buyprice);
gBuyItem.Visible=true;}

function bHD100_Look(){buysticker.Visible=true; buyblackout.Visible=true;
PlaySound(41); gBuyItem.BackgroundGraphic=5186;
buyprice=(16.99); 
buysticker.Text=String.Format("$%.2f",buyprice);
gBuyItem.Visible=true;}

function bEMachine_Look() {PlaySound(41); buyblackout.Visible=false; buysticker.Visible=false; 
gBuyItem.BackgroundGraphic=479; gBuyItem.Visible=true; buyprice=(999.99);}

function bEspressomachine_Look() {PlaySound(41); buyblackout.Visible=false; buysticker.Visible=false; 
gBuyItem.BackgroundGraphic=713; gBuyItem.Visible=true; buyprice=(999.99);}

function bMaker_Look() {PlaySound(41); buyblackout.Visible=false; buysticker.Visible=false; 
gBuyItem.BackgroundGraphic=715; gBuyItem.Visible=true; buyprice=(999.99);}

function bDiamond_Look(){PlaySound(41); buyblackout.Visible=false; buysticker.Visible=false; 
gBuyItem.BackgroundGraphic=3584; gBuyItem.Visible=true; buyprice=(999.99);}

function bWatchA_Look(){PlaySound(41); buyblackout.Visible=false; buysticker.Visible=false; 
gBuyItem.BackgroundGraphic=3625; gBuyItem.Visible=true; buyprice=(999.99);}

function bWatchb_Look(){PlaySound(41); buyblackout.Visible=false; buysticker.Visible=false; 
gBuyItem.BackgroundGraphic=3626; gBuyItem.Visible=true; buyprice=(999.99);}

function bWatchC_Look(){PlaySound(41); buyblackout.Visible=false; buysticker.Visible=false; 
gBuyItem.BackgroundGraphic=3627; gBuyItem.Visible=true; buyprice=(999.99);}

function bStamps_Look(){PlaySound(41); buyblackout.Visible=false; buysticker.Visible=false; 
gBuyItem.BackgroundGraphic=4780; gBuyItem.Visible=true; buyprice=(999.99);}

function bLighter_Look(){PlaySound(41); buyblackout.Visible=false; buysticker.Visible=false; 
gBuyItem.BackgroundGraphic=4497; gBuyItem.Visible=true; buyprice=(999.99);}

function bHeadunit_Look(){PlaySound(41); 
if (player.Room==21){//Walmart
buyblackout.Visible=true; buysticker.Visible=true; 
gBuyItem.BackgroundGraphic=3890; gBuyItem.Visible=true; buyprice=(96.96);
buysticker.Text=String.Format("$%.2f",buyprice);}
if (player.Room!=21){//Pawn Shop
buyblackout.Visible=false; buysticker.Visible=false; 
gBuyItem.BackgroundGraphic=3890; gBuyItem.Visible=true; buyprice=(999.99);}}

// End Bitems

function gGui2_OnClick(GUI *theGui, MouseButton button){}
function gItemDesc_OnClick(GUI *theGui, MouseButton button){}


// ---------------  GUI BUTTONS  ---------- 

function upgrade_3_OnClick(GUIControl *control, MouseButton button){// ---------------  Stereo Operator ---------- 
if (upgrade_3.NormalGraphic==3892){//Got Upgrade
  if (player.Room!=Stand.Room){//Not in Stand Room
    PlaySound(60); TopUp("The Stereo is in your Stand", "You must be near your stand to operate the stereo!");}
else if (player.Room==Stand.Room){//In Stand Room
  gThirstex.Centre(); PlaySound(41); CloseAll(); gThirstex.Visible=true; mouse.Visible=true;}}}

function StandImage_OnClick(GUIControl *control, MouseButton button)
{PlaySound(28); gStand_Gui.Visible=true; }

function button_equipment_OnClick(GUIControl *control, MouseButton button)
{PlaySound(28); gGui1.Visible=true;
int ran=Random(10);
if (ran==0) tip.Text=("You can upgrade your cart in the industrial district. ");
else if (ran==1) tip.Text=("Some customers expect quality products. Others don't. ");
else if (ran==2) tip.Text=("People tend to expect higher prices in some areas. ");
else if (ran==3) tip.Text=("Pay attention to the quantity of your ingredients. ");
else if (ran==4){if (GetGlobalInt(1)!=2){tip.Text=("Don't forget to account for rent! ");}else{tip.Text=("You don't have to pay rent, just focus on making money! ");}}
else if (ran==5) tip.Text=("Every sale affects your reputation. ");
else if (ran==6) tip.Text=("Customers are more likely to tip if you're friendly with them. ");
else if (ran==7) tip.Text=("Try to anticipate the schedules of your regular customers. ");
else if (ran==8) tip.Text=("If you're desperate for money, there's always the pawn shop. ");
else if (ran==9) tip.Text=("Don't give up. ");
else if (ran==10) tip.Text=("\"Keep swimming!\" ");
}

function button_prices_OnClick(GUIControl *control, MouseButton button){PlaySound(28); gPrice_Gui.Visible=true;}

function button_upgrades_OnClick(GUIControl *control, MouseButton button){
if (StandImage.NormalGraphic==4768){PlaySound(60); TopUp("No Stand", "A stand is required for upgrades!");}
else if (StandImage.NormalGraphic!=4768){PlaySound(28);
//::UpgradeStandImage Update::///
if (GetGlobalInt(1)==1){Standimage_upg.NormalGraphic=4568;}
if (GetGlobalInt(1)==2){
if (Stand.View==82){Standimage_upg.NormalGraphic=5497;}
if (Stand.View==83){Standimage_upg.NormalGraphic=5496;}
if (Stand.View==84){Standimage_upg.NormalGraphic=5498;}
if (Stand.View==85){Standimage_upg.NormalGraphic=5499;}}
if (GetGlobalInt(1)==3){
if (Stand.View==51){Standimage_upg.NormalGraphic=4564;}
if (Stand.View==50){Standimage_upg.NormalGraphic=4567;}
if (Stand.View==49){Standimage_upg.NormalGraphic=4566;}
if (Stand.View==48){Standimage_upg.NormalGraphic=4565;}}
if (GetGlobalInt(1)==4){
if (Stand.View==111){Standimage_upg.NormalGraphic=5492;}
if (Stand.View==114){Standimage_upg.NormalGraphic=5493;}
if (Stand.View==115){Standimage_upg.NormalGraphic=5494;}
if (Stand.View==116){Standimage_upg.NormalGraphic=5495;}}
gUpgrades_Gui.Visible=true;}}

function music_slider_OnChange(GUIControl *control){PlaySound(42); musique=(music_slider.Value);}
function Slider_Coffee_OnChange(GUIControl *control){PlaySound(42);}
function Slider_Chai_OnChange(GUIControl *control){PlaySound(42);}
function Slider_Cocoa_OnChange(GUIControl *control){PlaySound(42);}
//bullocks

function stand_file_OnClick(GUIControl *control, MouseButton button){ gPanel.Centre(); PlaySound(47); Wait(5);
gPanel.Visible=true;}


// ---------------  CLOSE BUTTONS  ---------- 
function close_button1_OnClick(GUIControl *control, MouseButton button)
{ if (gPanel.Visible==true)gPanel.Visible=false;
  if (GetGlobalInt(107) != 0){SetGlobalInt(107, 99); PlaySound(44); mouse.Visible=false; gStand_Gui.Visible = false; SetGlobalInt(100,0); Wait(10);}//Menu Tutorial Over
  else{PlaySound(44); mouse.Visible=false; gStand_Gui.Visible = false; SetGlobalInt(100,0); Wait(10); }}
function close_equip_OnClick(GUIControl *control, MouseButton button){if (mouse.Mode == eModeUseinv){mouse.Mode=eModeLookat;}PlaySound(28); gGui1.Visible=false; gItemDesc.Visible=false;}
function Button4_OnClick(GUIControl *control, MouseButton button){PlaySound(28); gPrice_Gui.Visible=false;}
function close_paper_OnClick(GUIControl *control, MouseButton button){PlaySound(28); gPaper_Gui.Visible=false;}
function close_upgrades_OnClick(GUIControl *control, MouseButton button){PlaySound(28); gUpgrades_Gui.Visible=false; gStand_Gui.Visible=true;}
function close_desc_OnClick(GUIControl *control, MouseButton button){PlaySound(28); gItemDesc.Visible=false; gBuyItem.Visible=false; remaining_label.Visible=true; sgw_buy.Visible=false;}
function coffeeclose(GUIControl *control, MouseButton button){PlaySound(28); gCoffee_S.Visible=false; gCoffee_A.Visible=false; gCoffee_B.Visible=false; gCoffee_C.Visible=false; gCoffee_D.Visible=false;}
//function close_coffeeS_OnClick(GUIControl *control, MouseButton button){PlaySound(28); gCoffee_S.Visible=false;}
//function close_coffee_OnClick(GUIControl *control, MouseButton button){PlaySound(28); gCoffee_A.Visible=false;}
//function close_coffeeB_OnClick(GUIControl *control, MouseButton button){PlaySound(28); gCoffee_B.Visible=false;}
//function close_coffeeC_OnClick(GUIControl *control, MouseButton button){PlaySound(28); gCoffee_C.Visible=false;}
//function close_coffeeD_OnClick(GUIControl *control, MouseButton button){PlaySound(28); gCoffee_D.Visible=false;}
function warp2_close_OnClick(GUIControl *control, MouseButton button){PlaySound(28); Warp2.Visible=false;}
function bmu_close_OnClick(GUIControl *control, MouseButton button){PlaySound(28); CloseAll(); mouse.Visible=false; bmu2.NormalGraphic=373;}
function fagan_close_OnClick(GUIControl *control, MouseButton button){PlaySound(28); gFaganMenu.Visible=false; mouse.Visible=false; gComics.Visible=false; fmu2.NormalGraphic=373;}
function rmu_close_OnClick(GUIControl *control, MouseButton button){PlaySound(28); gRoastierry.Visible=false; mouse.Visible=false; rmu2.NormalGraphic=373;}
function gmu_close_OnClick(GUIControl *control, MouseButton button){PlaySound(28); gMachine.Visible=false; mouse.Visible=false; gUpgrade_m.Visible=false; gAppearance_v.Visible=false; gmu2.NormalGraphic=373;}
function apprnce_close_OnClick(GUIControl *control, MouseButton button) {PlaySound(28); gAppearance_v.Visible=false;}
function chaiclose_OnClick(GUIControl *control, MouseButton button) {PlaySound(28); gChai.Visible=false;}
function cocoaclose_OnClick(GUIControl *control, MouseButton button) {PlaySound(28); gCocoa.Visible=false;}
function Button7_OnClick(GUIControl *control, MouseButton button) {PlaySound(28); gItemDesc.Visible=false; gBuyItem.Visible=false; gItems_ss.Visible=false; gIngredients_ss.Visible=false; gSuperstore.Visible=false; Mouse.Visible=false; gEquipment_ss.Visible=false; ssanim_char.NormalGraphic=269; player.Transparency=0;}
function equss_close_OnClick(GUIControl *control, MouseButton button){PlaySound(28); gEquipment_ss.Visible=false;}
function comics_close_OnClick(GUIControl *control, MouseButton button){PlaySound(28); gComics.Visible=false;}
function ingss_close_OnClick(GUIControl *control, MouseButton button){PlaySound(28); gIngredients_ss.Visible=false;}
function itmss_close_OnClick(GUIControl *control, MouseButton button){PlaySound(28); gItems_ss.Visible=false;}
function CDs_close_OnClick(GUIControl *control, MouseButton button){PlaySound(28); gCDs.Visible=false; mouse.Visible=false;}
function milkclose_OnClick(GUIControl *control, MouseButton button){PlaySound(28); gMilk.Visible=false;}
function panel_cancel_OnClick(GUIControl *control, MouseButton button){PlaySound(28); gPanel.Visible=false; if(player.Room==25){mouse.Visible=false;}}
function edclose_OnClick(GUIControl *control, MouseButton button){PlaySound(28); gEatdrink.Visible=false;}
function bagel_p_close_OnClick(GUIControl *control, MouseButton button){PlaySound(28); gBagel_p.Visible=false;}
function hotdogclose_OnClick(GUIControl *control, MouseButton button){PlaySound(28); gHotdog.Visible=false;}
function close_condiments_OnClick(GUIControl *control, MouseButton button){PlaySound(28); gManager_Hotdgs.Visible=false;}
function cm_close_OnClick(GUIControl *control, MouseButton button){PlaySound(28); gManager_coffee.Visible=false;}
function bm_close_OnClick(GUIControl *control, MouseButton button){PlaySound(28); gManager_Bagel.Visible=false;}
function close_rinse_OnClick(GUIControl *control, MouseButton button){PlaySound(28); gRinse.Visible=false;}
function close_crest_OnClick(GUIControl *control, MouseButton button){PlaySound(28); gCrest.Visible=false;}
function mupgrade_close_OnClick(GUIControl *control, MouseButton button){PlaySound(28); gUpgrade_m.Visible=false;}
function cook_close_OnClick(GUIControl *control, MouseButton button) {PlaySound(28); gCook.Visible=false; Mouse.Visible=false; }
function americanoclose_OnClick(GUIControl *control, MouseButton button) {PlaySound(28); gAmericano.Visible=false;}
function latteclose_OnClick(GUIControl *control, MouseButton button) {PlaySound(28); gLatte.Visible=false;}
function capclose_OnClick(GUIControl *control, MouseButton button) {PlaySound(28); gCappuccino.Visible=false;}
function mochaclose_OnClick(GUIControl *control, MouseButton button) {PlaySound(28); gMocha.Visible=false;}
function chailatteclose_OnClick(GUIControl *control, MouseButton button) {PlaySound(28); gChailatte.Visible=false;}
function thirstex_close_OnClick(GUIControl *control, MouseButton button) {PlaySound(40); gThirstex.Visible=false; mouse.Visible=false;}
function pwnclose_OnClick(GUIControl *control, MouseButton button){PlaySound(40); gPawn.Visible=false; mouse.Visible=false; mouse.Mode=eModeLookat; pwnbuyorsell=0; pwn_sellbtn.NormalGraphic=3630; pwn_sellbtn.MouseOverGraphic=3631;}
function cooking_close_OnClick(GUIControl *control, MouseButton button) {PlaySound(28); gCook2.Visible=false; Mouse.Visible=false; }
function close_travel_OnClick(GUIControl *control, MouseButton button){PlaySound(28); gTravel.Visible=false;}
function close_topics_OnClick(GUIControl *control, MouseButton button){PlaySound(28); gTopics.Visible=false;}
function income_close_OnClick(GUIControl *control, MouseButton button){PlaySound(28); gRecordIncome.Visible=false;}
function expense_close_OnClick(GUIControl *control, MouseButton button){PlaySound(28); gRecordExpense.Visible=false;}
function Button27_OnClick(GUIControl *control, MouseButton button){PlaySound(40); gRaxbymenu.Visible=false; mouse.Visible=false; raxbylist.Clear(); raxtotal=0.00;
TalkPop(); Wait(40); dName.Visible=true; dText.Visible=true; 
PCListen(); customerlisten(); Mouse.Visible=false;
PCListen(); customertalk(); dText.Text=("Can I get you anything else?"); blab3(); dSteph1.Start();}

function bd_close_OnClick(GUIControl *control, MouseButton button) {//Breakdown
gRecordExpense.Visible=false; gRecordIncome.Visible=false;
PlaySound(28); gBreakdown.Visible=false; Reveal.NormalGraphic=4570; bd_Anim.NormalGraphic=4570; 
Mouse.Visible=false; incomelist.Clear(); expenselist.Clear(); sleep();}


function close_pick_OnClick(GUIControl *control, MouseButton button){//CLOSEPICK
if (close_pick.NormalGraphic==4918){//"Next"Button
if ((GetGlobalInt(1)==3)&&(player.Room==40)&&(pick.Graphic>=4883)&&(pick.Graphic<=4917)){
PlaySound(28);
StartCutscene(eSkipAnyKeyOrMouseClick);//Start Cutscene
pick.Animate(189, 3, 2, eOnce); Wait(80);
EndCutscene();
pick.Animate(189, 4, 3, eRepeat);}
else if ((GetGlobalInt(1)==3)&&(player.Room==40)&&(pick.Graphic>=4920)&&(pick.Graphic<=4949)){
PlaySound(28); 
pick.Animate(189, 5, 3, eOnce);}
else if ((GetGlobalInt(1)==3)&&(player.Room==40)&&(pick.Graphic>=4950)&&(pick.Graphic<=4978)){
PlaySound(28); 
pick.Animate(189, 6, 3, eOnce);}
else if ((GetGlobalInt(1)==3)&&(player.Room==40)&&(pick.Graphic>=4979)&&(pick.Graphic<=5007)){
PlaySound(28); FadeOut(2); gPick.Visible=false; 
pick.X=38; pick.Y=16; close_pick.X=285; close_pick.Y=3;
close_pick.NormalGraphic=178; close_pick.MouseOverGraphic=179;
close_pick.Visible=true; Mouse.Visible=false;
Evangeline.ChangeRoom(6, 289,  132);
SetGlobalInt(103, 1); cEgo.ChangeRoom(6, 277,  132);}}
else{PlaySound(28); gPick.Visible=false; mouse.Visible=false;}}

// ---------------  Load/Save GUI BUTTONS  ---------- 

function btnLoad_OnClick(GUIControl *control, MouseButton button)
//{PlaySound(28); RestoreGameDialog(); gPanel.Visible=false;} OLD METHOD
{
 PlaySound(28); 
 lstLoadGames.FillSaveGameList();
 lstLoadGames.SelectedIndex = 0;
 gPanel.Visible=false;  
 gLoadgame.Visible = true;
 cityscroll.Animate(132, 0, 2, eRepeat);
}

function btnRestart_OnClick(GUIControl *control, MouseButton button)
{PlaySound(28); RestartGame(); gPanel.Visible=false;}

function btnQuit_OnClick(GUIControl *control, MouseButton button)
{PlaySound(28); gPanel.Visible=false; CloseAll(); 
gQuitConfirm.Centre(); mouse.Visible=true;
gQuitConfirm.Visible=true; QuitScroll.Animate(176, 0, 0, eRepeat);}

function QuitYes_OnClick(GUIControl *control, MouseButton button) {
    int endstamp = Random(10);

    if (endstamp==0){QuitScroll.NormalGraphic=4657;}
    else if (endstamp==1){QuitScroll.NormalGraphic=4658;}
    else if (endstamp==2){QuitScroll.NormalGraphic=4659;}
    else if (endstamp==3){QuitScroll.NormalGraphic=4660;}
    else if (endstamp==4){QuitScroll.NormalGraphic=4661;}
    else if (endstamp==5){QuitScroll.NormalGraphic=4662;}
    else if (endstamp==6){QuitScroll.NormalGraphic=4663;}
    else if (endstamp==7){QuitScroll.NormalGraphic=4664;}
    else if (endstamp==8){QuitScroll.NormalGraphic=4665;}
    else if (endstamp==9){QuitScroll.NormalGraphic=4666;}
    else if (endstamp==10){QuitScroll.NormalGraphic=4667;}

    PlaySound(28); Wait(5);
    StopMusic();
    PlaySound(75);
    FadeOut(1);
    Wait(100);
    QuitGame(0);
    //RestartGame(); //ARCADE->Cart Life Never Ends....
    gPanel.Visible=false;
}


function QuitNo_OnClick(GUIControl *control, MouseButton button){
PlaySound(28); gQuitConfirm.Visible=false; if(player.Room==25){mouse.Visible=false;}
QuitScroll.NormalGraphic=108;}

//INV GUI Scrollery

function invup_OnClick(GUIControl *control, MouseButton button){PlaySound(58);invMain.ScrollUp();}
function invdown_OnClick(GUIControl *control, MouseButton button){PlaySound(59);invMain.ScrollDown();}
function miscup_OnClick(GUIControl *control, MouseButton button){PlaySound(58);eSlot2.ScrollUp();}
function miscdown_OnClick(GUIControl *control, MouseButton button){PlaySound(59);eSlot2.ScrollDown();}
function eq_up_OnClick(GUIControl *control, MouseButton button){PlaySound(58); eSlot1.ScrollUp();}
function eq_down_OnClick(GUIControl *control, MouseButton button){PlaySound(59); eSlot1.ScrollDown();}
function rm_dwn_OnClick(GUIControl *control, MouseButton button){PlaySound(59);rmu_inv.ScrollDown();}
function rm_up_OnClick(GUIControl *control, MouseButton button){PlaySound(58);rmu_inv.ScrollUp();}
function rmu_itmup_OnClick(GUIControl *control, MouseButton button){PlaySound(58);rmu_itm.ScrollUp();}
function rmu_itmdown_OnClick(GUIControl *control, MouseButton button){PlaySound(59);rmu_itm.ScrollDown();}
function rmu_eqpup_OnClick(GUIControl *control, MouseButton button){PlaySound(58);rmu_eqp.ScrollUp();}
function rmu_eqpdown_OnClick(GUIControl *control, MouseButton button){PlaySound(59);rmu_eqp.ScrollDown();}
function fmu_iu_OnClick(GUIControl *control, MouseButton button){PlaySound(58);fmu_inv.ScrollUp();}
function fmu_id_OnClick(GUIControl *control, MouseButton button){PlaySound(59);fmu_inv.ScrollDown();}
function bmu_iu_OnClick(GUIControl *control, MouseButton button){PlaySound(58);bmu_inv.ScrollUp();}
function bmu_id_OnClick(GUIControl *control, MouseButton button){PlaySound(59);bmu_inv.ScrollDown();}
function bmu_itemup_OnClick(GUIControl *control, MouseButton button){PlaySound(58);bmu_itm.ScrollUp();}
function bmu_itemdown_OnClick(GUIControl *control, MouseButton button){PlaySound(59);bmu_itm.ScrollDown();}
function bmu_equp_OnClick(GUIControl *control, MouseButton button){PlaySound(58);bmu_eqp.ScrollUp();}
function bmu_eqdown_OnClick(GUIControl *control, MouseButton button){PlaySound(59);bmu_eqp.ScrollDown();}
function gmi_down_OnClick(GUIControl *control, MouseButton button){PlaySound(59);gmu_inv.ScrollDown();}
function gmi_up_OnClick(GUIControl *control, MouseButton button) {PlaySound(58);gmu_inv.ScrollUp();}
function macheqp_up_OnClick(GUIControl *control, MouseButton button) {PlaySound(58);gmu_eqp.ScrollUp();}
function macheqp_dwn_OnClick(GUIControl *control, MouseButton button){PlaySound(59);gmu_eqp.ScrollDown();}
function machitems_up_OnClick(GUIControl *control, MouseButton button) {PlaySound(58);gmu_itm.ScrollUp();}
function machitems_dwn_OnClick(GUIControl *control, MouseButton button){PlaySound(59);gmu_itm.ScrollDown();}
function ss_invup_OnClick(GUIControl *control, MouseButton button){PlaySound(58);ss_inv.ScrollUp();}
function ss_invdown_OnClick(GUIControl *control, MouseButton button) {PlaySound(59);ss_inv.ScrollDown();}
function ss_itmup_OnClick(GUIControl *control, MouseButton button){PlaySound(58);ss_itm.ScrollUp();}
function ss_itmdown_OnClick(GUIControl *control, MouseButton button) {PlaySound(59);ss_itm.ScrollDown();}
function ss_equp_OnClick(GUIControl *control, MouseButton button){PlaySound(58);ss_eqp.ScrollUp();}
function ss_eqdown_OnClick(GUIControl *control, MouseButton button) {PlaySound(59);ss_eqp.ScrollDown();}
function ssing_up_OnClick(GUIControl *control, MouseButton button){PlaySound(58);ss_ing_inv.ScrollUp();}
function ssing_down_OnClick(GUIControl *control, MouseButton button) {PlaySound(59);ss_ing_inv.ScrollDown();}
function big_stock_up_OnClick(GUIControl *control, MouseButton button){PlaySound(58);bmu_top.ScrollUp();}
function big_stock_down_OnClick(GUIControl *control, MouseButton button) {PlaySound(59);bmu_top.ScrollDown();}
function pawnshelf_up_OnClick(GUIControl *control, MouseButton button){PlaySound(58);pwnsale.ScrollUp();}
function pawnshelf_down_OnClick(GUIControl *control, MouseButton button){PlaySound(59); pwnsale.ScrollDown();}
function pwnequ_up_OnClick(GUIControl *control, MouseButton button){PlaySound(58);pwnequ.ScrollUp();}
function pwnequ_down_OnClick(GUIControl *control, MouseButton button){PlaySound(59); pwnequ.ScrollDown();}
function pwninv_up_OnClick(GUIControl *control, MouseButton button){PlaySound(58);pwninv.ScrollUp();}
function pwninv_down_OnClick(GUIControl *control, MouseButton button){PlaySound(59); pwninv.ScrollDown();}
function pwnitm_up_OnClick(GUIControl *control, MouseButton button){PlaySound(58);pwnitems.ScrollUp();}
function pwnitm_down_OnClick(GUIControl *control, MouseButton button){PlaySound(59); pwnitems.ScrollDown();}
function fe_up_OnClick(GUIControl *control, MouseButton button){PlaySound(58);fmu_eqp.ScrollUp();}
function fe_down_OnClick(GUIControl *control, MouseButton button){PlaySound(59);fmu_eqp.ScrollDown();}
function fi_up_OnClick(GUIControl *control, MouseButton button){PlaySound(58);fmu_itm.ScrollUp();}
function fi_down_OnClick(GUIControl *control, MouseButton button){PlaySound(59);fmu_itm.ScrollDown();}

function ing_up_OnClick(GUIControl *control, MouseButton button){PlaySound(58);cook_ingredients.ScrollUp();}
function ing_dwn_OnClick(GUIControl *control, MouseButton button){PlaySound(59);cook_ingredients.ScrollDown();}

function ssitm_up_OnClick(GUIControl *control, MouseButton button){PlaySound(58);InventoryWindow2.ScrollUp();}
function ssitm_down_OnClick(GUIControl *control, MouseButton button){PlaySound(59);InventoryWindow2.ScrollDown();}

function topicup_OnClick(GUIControl *control, MouseButton button){PlaySound(58); topicbox.ScrollUp();}
function topicdown_OnClick(GUIControl *control, MouseButton button){PlaySound(59);topicbox.ScrollDown();}

function income_up_OnClick(GUIControl *control, MouseButton button){PlaySound(58); incomelist.ScrollUp();}
function income_dwn_OnClick(GUIControl *control, MouseButton button){PlaySound(59);incomelist.ScrollDown();}

function expense_up_OnClick(GUIControl *control, MouseButton button){PlaySound(58); expenselist.ScrollUp();}
function expense_dwn_OnClick(GUIControl *control, MouseButton button){PlaySound(59);expenselist.ScrollDown();}

function masterinv_up_OnClick(GUIControl *control, MouseButton button){PlaySound(58); MasterInv.ScrollUp();}
function masterinv_down_OnClick(GUIControl *control, MouseButton button){PlaySound(59);MasterInv.ScrollDown();}

// ---------------  MENUCLICKS  ---------- 
function Menu_OnSelectionChanged(GUIControl *control)
{
     if (Menu.Items[Menu.SelectedIndex]==("Hot Cocoa")){PlaySound(41); gCocoa.Visible=true;}

else if (Menu.Items[Menu.SelectedIndex]==("Latte")){
  PlaySound(41); gLatte.Visible=true;}

else if (Menu.Items[Menu.SelectedIndex]==("Coffee")){
if (upCoffee == ("S")){PlaySound(41); gCoffee_S.Visible=true;}
if (upCoffee == ("A")){PlaySound(41); gCoffee_A.Visible=true;}
if (upCoffee == ("B")){PlaySound(41); gCoffee_B.Visible=true;}
if (upCoffee == ("C")){PlaySound(41); gCoffee_C.Visible=true;}
if (upCoffee == ("D")){PlaySound(41); gCoffee_D.Visible=true;}}
else if (Menu.Items[Menu.SelectedIndex]==("Chai Tea")){PlaySound(41); gChai.Visible=true;} 
else if (Menu.Items[Menu.SelectedIndex]==("Plain Bagel")){PlaySound(41); gBagel_p.Visible=true;} 
else if (Menu.Items[Menu.SelectedIndex]==("Milk")){PlaySound(41); gMilk.Visible=true;} 
}

// ---------------  MACHINE SHOP MENU CLICKS ---------- 
function gmu2_OnClick(GUIControl *control, MouseButton button){// ---------------  ALICE CONVERSATES---------- 
if (gmu_text.Text==(" ")){
  
  if (GetGlobalInt(1) == 1) {//Andrus!
  customerlisten(); PCTalk(); gmu_text.Text=("Hey, Alice. There's something I wanted to ask about you.");blab4();
  customertalk(); PCListen(); gmu_text.Text=("Okay, what do you want to know?");blab3();
  dAlice_m1.Start();}
  
  
  if (GetGlobalInt(1) == 2) {//Melanie!
  customerlisten(); PCTalk(); gmu_text.Text=("Hey, Alice. There's something I wanted to ask...");blab4();
  customertalk(); PCListen(); gmu_text.Text=("Okay, what do you want to know?");blab3();
  dAlice_m1.Start();}

  if (GetGlobalInt(1) == 3) {//Vinny!
  customerlisten(); PCTalk(); gmu_text.Text=("Hey, Alice. Let me pull on your coat about something...");blab4();
  customertalk(); PCListen(); gmu_text.Text=("Sure. What do you want to know?");blab3();
  dAlice_p_v1.Start();}
    
  if (GetGlobalInt(1) == 4) {//Logan!
  customerlisten(); PCTalk(); gmu_text.Text=("Let me ask you something.");blab2();
  customertalk(); PCListen(); gmu_text.Text=("Okay, what do you want to know?");blab3();}
}
}


function m_upgrades_OnClick(GUIControl *control, MouseButton button){// ---------------  UPGRADE CLICKS---------- 
    gAppearance_v.Visible=false;
    if(upgrade_C.NormalGraphic!=1273){
    if (cSlot2.InventoryQuantity[Headunit.ID]==0){upgrade_C.NormalGraphic=3891;}
    if (cSlot2.InventoryQuantity[Headunit.ID]!=0){upgrade_C.NormalGraphic=1271;}}

    if (GetGlobalInt(1)==1){//Andrus
    PlaySound(39); TopUp("Under Development","These upgrades are being constructed by the developer.");
    if (upgrade_A.NormalGraphic!=1273){upgrade_A.NormalGraphic=6082;}
    upgrade_B.NormalGraphic=3891;
    gUpgrade_m.Visible=true;}

else if (GetGlobalInt(1)==2){//Mel
    PlaySound(39); TopUp("Under Development","Mel's upgrades are being constructed by the developer.");
    if (upgrade_A.NormalGraphic!=1273){upgrade_A.NormalGraphic=6082;}
    upgrade_B.NormalGraphic=3891;
    gUpgrade_m.Visible=true;}

else if (GetGlobalInt(1) == 3) {//Vinny!
if (Stand.Room == 12){PlaySound(39);
if (upgrade_A.NormalGraphic!=1273){upgrade_A.NormalGraphic=6082;}
gUpgrade_m.Visible=true;}
else if (Stand.Room != 12){
  PCListen();customertalk(); gmu_text.Text=("...? Where's your cart? ");blab2();
  PCListen();customertalk(); gmu_text.Text=("How am I supposed to work on it if it ain't here? ");blab3();
  customerlisten();PCTalk(); gmu_text.Text=("It's uh.. Right. ");blab1();
  PCListen();customertalk(); gmu_text.Text=("Right. ");blab1();
  customerlisten();PCTalk(); gmu_text.Text=("I'll go get it. ");blab2();
  PCListen();customertalk(); gmu_text.Text=("That's a good start. ");blab2();
  customerlisten(); gmu_text.Text=(" "); gmu_label.Text=(" "); PCListen();}}
  
else if (GetGlobalInt(1)==4){//Logan
if (Stand.Room==12){PlaySound(39); 
if (upgrade_A.NormalGraphic!=1273){upgrade_A.NormalGraphic=6082;}
gUpgrade_m.Visible=true;}
else if (Stand.Room != 12){
  PCListen();customertalk(); gmu_text.Text=("...? Where's your cart? ");blab2();
  PCListen();customertalk(); gmu_text.Text=("How am I supposed to work on it if it ain't here? ");blab3();
  customerlisten();PCTalk(); gmu_text.Text=("It's uh... Right. ");blab1();
  PCListen();customertalk(); gmu_text.Text=("Right. ");blab1();
  customerlisten();PCTalk(); gmu_text.Text=("I'll go get it. ");blab2();
  PCListen();customertalk(); gmu_text.Text=("That's a good start. ");blab2();
  customerlisten(); gmu_text.Text=(" "); gmu_label.Text=(" "); PCListen();}}}

function Melbuystand(){
   PCListen(); customertalk(); gmu_text.Text=("I'll need some time to put it together..."); blab3();
   PCListen(); customertalk(); gmu_text.Text=("Why don't you tell me how you'd like it to look."); blab4();
   PCTalk(); customerlisten(); gmu_text.Text=("Great!"); blab1();
   PCListen(); customerlisten(); gmu_label.Text=(" "); gmu_text.Text=(" "); 
   m_1.NormalGraphic=1697; m_1.MouseOverGraphic=1698;
   m_2.NormalGraphic=1695; m_2.MouseOverGraphic=1696;
   m_3.NormalGraphic=1693; m_3.MouseOverGraphic=1694;
   m_4.NormalGraphic=1691; m_4.MouseOverGraphic=1692;  
   gAppearance_v.Visible=true;}

function m_newcart_OnClick(GUIControl *control, MouseButton button){
if (GetGlobalInt(1)==1){//ANDRUS NEW STAND>>>>>REPLACE WITH "RELOCATE STAND"
  PlaySound(39);
  PCListen();customertalk(); gmu_text.Text=("Sure. I can help you relocate.");blab3();
  PCListen();customertalk(); gmu_text.Text=("Taking apart the foundation will take most of the afternoon...");blab4();
  customerlisten();PCTalk(); gmu_text.Text=("Yes?");blab1();
  PCListen();customertalk(); gmu_text.Text=("You'll need a permit for your destination, of course. "); blab4();
  PCListen();customertalk(); gmu_text.Text=("And the materials and labor will run you..."); blab3();
  PCListen();customertalk(); gmu_text.Text=("I guess fifty bucks?"); blab2();
  customerlisten();PCTalk(); gmu_text.Text=("I understand. ");blab2();
  PCListen();customertalk(); gmu_text.Text=("So those are my conditions.");blab2();
  PCListen();customertalk(); gmu_text.Text=("Still want to do it?");blab2();
  customerlisten(); PCListen(); gmu_text.Text=(" "); gmu_label.Text=(" "); 
  
  if (cSlot2.InventoryQuantity[Permit_13.ID]!=0)dRelocate.SetOptionState(1, eOptionOn);
  if (cSlot2.InventoryQuantity[Permit_brennan.ID]!=0)dRelocate.SetOptionState(2, eOptionOn);
  if (cSlot2.InventoryQuantity[Permit_Collins.ID]!=0)dRelocate.SetOptionState(3, eOptionOn);
  if (cSlot2.InventoryQuantity[Permit_downtown.ID]!=0)dRelocate.SetOptionState(4, eOptionOn);
  if (cSlot2.InventoryQuantity[Permit_florin.ID]!=0)dRelocate.SetOptionState(5, eOptionOn);
  if (cSlot2.InventoryQuantity[Permit_franklin.ID]!=0)dRelocate.SetOptionState(6, eOptionOn);
  if (cSlot2.InventoryQuantity[Permit_notgeld.ID]!=0)dRelocate.SetOptionState(7, eOptionOn);
  
  if ((cSlot2.InventoryQuantity[Permit_13.ID]==0)||(Stand.Room==22))dRelocate.SetOptionState(1, eOptionOff);
  if ((cSlot2.InventoryQuantity[Permit_brennan.ID]==0)||(Stand.Room==13))dRelocate.SetOptionState(2, eOptionOff);
  if ((cSlot2.InventoryQuantity[Permit_Collins.ID]==0)||(Stand.Room==26))dRelocate.SetOptionState(3, eOptionOff);
  if ((cSlot2.InventoryQuantity[Permit_downtown.ID]==0||(Stand.Room==14)))dRelocate.SetOptionState(4, eOptionOff);
  if ((cSlot2.InventoryQuantity[Permit_florin.ID]==0)||(Stand.Room==20))dRelocate.SetOptionState(5, eOptionOff);
  if ((cSlot2.InventoryQuantity[Permit_franklin.ID]==0)||(Stand.Room==5))dRelocate.SetOptionState(6, eOptionOff);
  if ((cSlot2.InventoryQuantity[Permit_notgeld.ID]==0)||(Stand.Room==19))dRelocate.SetOptionState(7, eOptionOff);
  dRelocate.Start();}

if (GetGlobalInt(1)==2){//MEL
  PlaySound(39); 
    if (StandImage.NormalGraphic!=4768){//This line indicates that the button should have been replaced by the "relocate stand" button for Melanie.
  PlaySound(39);
  PCListen();customertalk(); gmu_text.Text=("Of course I can help you relocate.");blab3();
  PCListen();customertalk(); gmu_text.Text=("Taking apart the foundation will take most of the afternoon...");blab4();
  customerlisten();PCTalk(); gmu_text.Text=("Oh, sure.");blab1();
  PCListen();customertalk(); gmu_text.Text=("You'll need a permit for your destination, of course. "); blab4();
  PCListen();customertalk(); gmu_text.Text=("The materials and labor will run you..."); blab3();
  PCListen();customertalk(); gmu_text.Text=("I guess fifty bucks?"); blab2();
  customerlisten();PCTalk(); gmu_text.Text=("Hmm... ");blab2();
  PCListen();customertalk(); gmu_text.Text=("So those are my conditions.");blab2();
  PCListen();customertalk(); gmu_text.Text=("Still want to do it?");blab2();
  customerlisten(); PCListen(); gmu_text.Text=(" "); gmu_label.Text=(" "); 
  
  if (cSlot2.InventoryQuantity[Permit_13.ID]!=0)dRelocate.SetOptionState(1, eOptionOn);
  if (cSlot2.InventoryQuantity[Permit_brennan.ID]!=0)dRelocate.SetOptionState(2, eOptionOn);
  if (cSlot2.InventoryQuantity[Permit_Collins.ID]!=0)dRelocate.SetOptionState(3, eOptionOn);
  if (cSlot2.InventoryQuantity[Permit_downtown.ID]!=0)dRelocate.SetOptionState(4, eOptionOn);
  if (cSlot2.InventoryQuantity[Permit_florin.ID]!=0)dRelocate.SetOptionState(5, eOptionOn);
  if (cSlot2.InventoryQuantity[Permit_franklin.ID]!=0)dRelocate.SetOptionState(6, eOptionOn);
  if (cSlot2.InventoryQuantity[Permit_notgeld.ID]!=0)dRelocate.SetOptionState(7, eOptionOn);
  
  if ((cSlot2.InventoryQuantity[Permit_13.ID]==0)||(Stand.Room==22))dRelocate.SetOptionState(1, eOptionOff);
  if ((cSlot2.InventoryQuantity[Permit_brennan.ID]==0)||(Stand.Room==13))dRelocate.SetOptionState(2, eOptionOff);
  if ((cSlot2.InventoryQuantity[Permit_Collins.ID]==0)||(Stand.Room==26))dRelocate.SetOptionState(3, eOptionOff);
  if ((cSlot2.InventoryQuantity[Permit_downtown.ID]==0||(Stand.Room==17)))dRelocate.SetOptionState(4, eOptionOff);
  if ((cSlot2.InventoryQuantity[Permit_florin.ID]==0)||(Stand.Room==20))dRelocate.SetOptionState(5, eOptionOff);
  if ((cSlot2.InventoryQuantity[Permit_franklin.ID]==0)||(Stand.Room==5))dRelocate.SetOptionState(6, eOptionOff);
  if ((cSlot2.InventoryQuantity[Permit_notgeld.ID]==0)||(Stand.Room==19))dRelocate.SetOptionState(7, eOptionOff);
  dRelocate.Start();}
  else if (StandImage.NormalGraphic==4768){//New Stand
  if (GetGlobalInt(2)==1){ //First Time Asking...
  PCTalk(); customerlisten(); gmu_text.Text=("I had some questions about buying a coffee stand.");blab4();
  PCListen(); customertalk(); gmu_text.Text=("Oh sure."); blab1();
  PCTalk(); customerlisten(); gmu_text.Text=("Is that something I can... Do you know where I should ask?"); blab5();
  PCListen(); customertalk(); gmu_text.Text=("Well, I've got a few things back at the, uhh, the salvage yard. ");blab5();
  PCListen(); customertalk(); gmu_text.Text=("What did you have in mind, honey?");blab3();
  PCTalk(); customerlisten(); gmu_text.Text=("Oh. Well, you know..."); blab2();
  PCTalk(); customerlisten(); gmu_text.Text=("Like a coffee stand. I'm on..."); blab3();
  PCTalk(); customerlisten(); gmu_text.Text=("I'm on kind of a budget."); blab2();
  PCListen(); customerlisten(); gmu_text.Text=("..."); gmu2.Animate(46, 3, 3, eOnce); blab3(); Wait(30);
  PCListen(); customertalk(); gmu_text.Text=("I could probably put something together."); blab3();
  PCListen(); customertalk(); gmu_text.Text=("Do you have a permit?");blab2();
  if ((cSlot2.InventoryQuantity[Permit_franklin.ID]!=0)||(cSlot2.InventoryQuantity[Permit_notgeld.ID]!=0)||(cSlot2.InventoryQuantity[Permit_brennan.ID]!=0)||(cSlot2.InventoryQuantity[Permit_downtown.ID]!=0)||(cSlot2.InventoryQuantity[Permit_Collins.ID]!=0)||(cSlot2.InventoryQuantity[Permit_florin.ID]!=0)||(cSlot2.InventoryQuantity[Permit_13.ID]!=0)){
   PCTalk(); customerlisten(); gmu_text.Text=("Yep.");blab1();
   PCListen(); customertalk(); gmu_text.Text=("Oh, okay."); blab1();
   PCListen(); customertalk(); gmu_text.Text=("So you're looking for a regular coffee stand."); blab4();
   PCTalk(); customerlisten(); gmu_text.Text=("Right.");blab1();
   PCListen(); customertalk(); gmu_text.Text=("I can definitely piece one together for you. A good one, too."); blab5();
   PCListen(); customertalk(); gmu_text.Text=("Let's see... One whole coffee stand, a water tank, two sinks..."); blab4();
   PCListen(); customertalk(); gmu_text.Text=("I'll even throw in a menu board and interior lights."); blab4();
   PCListen(); customerlisten(); gmu_label.Text=("Alice: "); gmu_text.Text=("Hmm..."); gmu2.Animate(46, 3, 3, eOnce); blab3(); Wait(30);
   PCListen(); customertalk(); gmu_text.Text=("Oh, hey!"); blab3();
   PCListen(); customertalk(); gmu_text.Text=("Did you get an espresso machine, already?"); blab3();
      if (cSlot1.InventoryQuantity[espressomachine.ID]!=0){//Yes Machine
      SetGlobalInt(2, 3);//YES, PERMIT and YES MACHINE
      PCTalk(); customerlisten(); gmu_text.Text=("Sure do! I hope it's a good one.");blab1();
      PCListen(); customertalk(); gmu_text.Text=("You can just leave it here, and I'll hook it up."); blab3();
      PCListen(); customerlisten(); gmu_label.Text=("Alice: "); gmu_text.Text=("Hmm..."); gmu2.Animate(46, 3, 3, eOnce); blab3(); Wait(30);
      PCListen(); customertalk(); gmu_text.Text=("Let's say $1200 for the whole deal, all together?"); blab3();
      PCListen(); customertalk(); gmu_text.Text=("That includes driving it to the site, and set up."); blab3();
      dAlice_coffee.Start();}
      else {//Permit, but no Machine
      SetGlobalInt(2, 2);//NOT READY
      PCTalk(); customerlisten(); gmu_text.Text=("Oh... You know. I didn't get one yet.");blab1();
      PCListen(); customertalk(); gmu_text.Text=("That's fine. I wish I had one to sell you, but I don't."); blab3();
      PCTalk(); customerlisten(); gmu_text.Text=("...Aghgh.");blab1();
      PCListen(); customertalk(); gmu_text.Text=("I hate sending people there, but the superstore has them for around $200, I think."); blab3();
      }
      }//End Yes Permit

   //SetGlobalInt(2, 2);//put this in to indicate that we're not ready
   if ((cSlot2.InventoryQuantity[Permit_franklin.ID]==0)&&(cSlot2.InventoryQuantity[Permit_notgeld.ID]==0)&&(cSlot2.InventoryQuantity[Permit_brennan.ID]==0)&&(cSlot2.InventoryQuantity[Permit_downtown.ID]==0)&&(cSlot2.InventoryQuantity[Permit_Collins.ID]==0)&&(cSlot2.InventoryQuantity[Permit_florin.ID]==0)&&(cSlot2.InventoryQuantity[Permit_13.ID]==0)){
   SetGlobalInt(2, 2);//NOT READY
   PCTalk(); customerlisten(); gmu_text.Text=("Oh."); blab1();//Mel 
   PCTalk(); customerlisten(); gmu_text.Text=("Not yet."); blab1();//Mel
   boxadd("Glenda"); boxadd("The Courthouse"); boxadd("Downtown"); boxadd("Permits");
   PCListen(); customertalk(); gmu_text.Text=("That's okay - Just go to the courthouse and talk to Glenda about a vendor's permit. ");blab5();
   PCListen(); customertalk(); gmu_text.Text=("The courthouse is downtown. ");blab3();
   PCTalk(); customerlisten(); gmu_text.Text=("Oh, okay."); blab1();//Mel
   }
   if (GetGlobalInt(2)==2){ //No Permit or No Machine
   PCListen(); customertalk(); gmu_text.Text=("I'll be here when you're ready to start. ");blab5();
   PCListen(); customertalk(); gmu_text.Text=("I close the shop at six, so any time before then is fine. ");blab5();
   PCTalk(); customerlisten(); gmu_text.Text=("Thanks, Alice. See you again soon!"); blab1();//Mel 
   PCListen(); customerlisten(); gmu_text.Text=(" "); gmu_label.Text=(" ");
   SetGlobalInt(2, 2); dAlice_m1.SetOptionState(2, eOptionOn);
   gMachine.Visible=false;
   return; }}//End First Time
  
  else if (GetGlobalInt(2)==2){//Already Asked...
  PCTalk(); customerlisten(); gmu_text.Text=("I had some more questions about starting up a coffee stand.");blab4();
  PCListen(); customertalk(); gmu_text.Text=("Oh sure, I remember."); blab2();
  PCListen(); customertalk(); gmu_text.Text=("...and you've got a permit?"); blab3();
  if ((cSlot2.InventoryQuantity[Permit_franklin.ID]!=0)||(cSlot2.InventoryQuantity[Permit_notgeld.ID]!=0)||(cSlot2.InventoryQuantity[Permit_brennan.ID]!=0)||(cSlot2.InventoryQuantity[Permit_downtown.ID]!=0)||(cSlot2.InventoryQuantity[Permit_Collins.ID]!=0)||(cSlot2.InventoryQuantity[Permit_florin.ID]!=0)||(cSlot2.InventoryQuantity[Permit_13.ID]!=0)){
   //Yes Permit
   PCTalk(); customerlisten(); gmu_text.Text=("Yep.");blab1();
   PCListen(); customertalk(); gmu_text.Text=("Oh, okay."); blab1();
   PCListen(); customertalk(); gmu_text.Text=("So you're looking for a regular coffee stand."); blab4();
   PCTalk(); customerlisten(); gmu_text.Text=("Right.");blab1();
   PCListen(); customertalk(); gmu_text.Text=("I can definitely piece one together for you. A good one, too."); blab5();
   PCListen(); customerlisten(); gmu_label.Text=("Alice: "); gmu_text.Text=("Hmm..."); gmu2.Animate(46, 3, 3, eOnce); blab3();
   PCListen(); customertalk(); gmu_text.Text=("One whole coffee stand, a water tank, two sinks..."); blab4();
   PCListen(); customertalk(); gmu_text.Text=("I'll even throw in a menu board and interior lights."); blab4();
   PCListen(); customerlisten(); gmu_label.Text=("Alice: "); gmu_text.Text=("Hmm..."); gmu2.Animate(46, 3, 3, eOnce); blab3(); Wait(30);
   PCListen(); customertalk(); gmu_text.Text=("Oh, hey!"); blab3();
   PCListen(); customertalk(); gmu_text.Text=("Did you get an espresso machine, already?"); blab3();
      if (cSlot1.InventoryQuantity[espressomachine.ID]!=0){//Yes Machine
      SetGlobalInt(2, 3);//YES, PERMIT and YES MACHINE
      PCTalk(); customerlisten(); gmu_text.Text=("Sure do! I hope it's a good one.");blab1();
      PCListen(); customertalk(); gmu_text.Text=("You can just leave it here, and I'll hook it up."); blab3();
      PCListen(); customerlisten(); gmu_label.Text=("Alice: "); gmu_text.Text=("Hmm..."); gmu2.Animate(46, 3, 3, eOnce); blab3(); Wait(30);
      PCListen(); customertalk(); gmu_text.Text=("Let's say $1200 for the whole deal, all together?"); blab3();
      PCListen(); customertalk(); gmu_text.Text=("That includes driving it to the site, and set up."); blab3();
      dAlice_coffee.Start();}
      else {//Permit, but no Machine
      SetGlobalInt(2, 2);//NOT READY
      PCTalk(); customerlisten(); gmu_text.Text=("Oh... You know. I didn't get one yet.");blab1();
      PCListen(); customertalk(); gmu_text.Text=("That's fine. I wish I had one to sell you, but I don't."); blab3();
      PCTalk(); customerlisten(); gmu_text.Text=("...Aghgh.");blab1();
      PCListen(); customertalk(); gmu_text.Text=("I hate sending people there, but the superstore has them for around $200, I think."); blab3();
      }
      }//End Yes Permit

  if ((cSlot2.InventoryQuantity[Permit_franklin.ID]==0)&&(cSlot2.InventoryQuantity[Permit_notgeld.ID]==0)&&(cSlot2.InventoryQuantity[Permit_brennan.ID]==0)&&(cSlot2.InventoryQuantity[Permit_downtown.ID]==0)&&(cSlot2.InventoryQuantity[Permit_Collins.ID]==0)&&(cSlot2.InventoryQuantity[Permit_florin.ID]==0)&&(cSlot2.InventoryQuantity[Permit_13.ID]==0))
  {//No permit
  PCTalk(); customerlisten(); gmu_text.Text=("Well, not yet.");blab2();
  PCListen(); customertalk(); gmu_text.Text=("Oh, no..."); blab1();
  PCListen(); customertalk(); gmu_text.Text=("Well, I'm sorry, but I can't legally set you up until you have one."); blab5();
  PCListen(); customertalk(); gmu_text.Text=("So - I mean, I'm sorry about that."); blab3();
  PCTalk(); customerlisten(); gmu_text.Text=("Okay."); blab1();
  PCListen(); customertalk(); gmu_text.Text=("There should still be one Downtown permit left. I'd get that one, if you can afford it."); blab5();
  PCListen(); customertalk(); gmu_text.Text=("You might also want to check about a permit for 13th & Numismia, by the college."); blab5();}
   if (GetGlobalInt(2)==2){ //No Permit or No Machine
   PCListen(); customertalk(); gmu_text.Text=("I'll be here when you're ready to start. ");blab5();
   PCListen(); customertalk(); gmu_text.Text=("I close the shop at six, so any time before then is fine. ");blab5();
   PCTalk(); customerlisten(); gmu_text.Text=("Thanks, Alice. See you again soon!"); blab1();//Mel 
   PCListen(); customerlisten(); gmu_text.Text=(" "); gmu_label.Text=(" ");
   SetGlobalInt(2, 2); dAlice_m1.SetOptionState(2, eOptionOn);
   gMachine.Visible=false;
   return; }}//End Already Asked
}}//End Melanie

if (GetGlobalInt(1)==3){
   PCTalk(); customerlisten(); gmu_text.Text=("Let's say I asked you about getting a new cart.");blab4();
   PCListen(); customertalk(); gmu_text.Text=("What? Are you kidding?"); blab2();
   PCTalk(); customerlisten(); gmu_text.Text=("Well...");blab1();
   PCListen(); customertalk(); gmu_text.Text=("And get rid of your dad's old cart?"); blab3();
   PCListen(); customertalk(); gmu_text.Text=("You've been using that old thing for years!"); blab4();
   PCTalk(); customerlisten(); gmu_text.Text=("I guess it is pretty great.");blab3();
   PCListen(); customertalk(); gmu_text.Text=("You bet it is!"); blab2();
   PCListen(); customerlisten(); gmu_label.Text=(" "); gmu_text.Text=(" ");}

if (GetGlobalInt(1)==4){
   PCTalk(); customerlisten(); gmu_text.Text=("You got hot dog carts?");blab2();
   PCListen(); customertalk(); gmu_text.Text=("Umm... Yeah, actually. I think so."); blab3();
   PCTalk(); customerlisten(); gmu_text.Text=("That's what I'm after.");blab3();
   PCTalk(); customerlisten(); gmu_text.Text=("So how much?");blab2();
   PCListen(); customertalk(); gmu_text.Text=("Well, the price depends on the appearance."); blab4();
   PCListen(); customertalk(); gmu_text.Text=("How'd you like it to look?"); blab3();
   PCListen(); customerlisten(); gmu_label.Text=(" "); gmu_text.Text=(" ");
  m_1.NormalGraphic=2247; m_1.MouseOverGraphic=2248;
  m_2.NormalGraphic=2310; m_2.MouseOverGraphic=2311;
  m_3.NormalGraphic=2329; m_3.MouseOverGraphic=2330;
  m_4.NormalGraphic=2348; m_4.MouseOverGraphic=2349;
  gAppearance_v.Visible=true;
  }

}

function upgrade_A_OnClick(GUIControl *control, MouseButton button){
  if (upgrade_A.NormalGraphic==3891){PlaySound(60); TopUp("Item Needed", "This upgrade is locked!");}
  if (upgrade_A.NormalGraphic==6082){
  gUpgrade_m.Visible=false;
  customertalk();PCListen(); gmu_text.Text=("Hm.... "); blab1();
  PCListen();customertalk(); gmu_text.Text=("I reckon we could upgrade that old register. ");blab5();
  PCTalk();customerlisten(); gmu_text.Text=("Really?");blab1();
  PCListen();customertalk(); gmu_text.Text=("Well, sure. How's the battery? ");blab3();
  
  if (upgrade_D.NormalGraphic==1269){
  PCTalk(); customerlisten(); gmu_text.Text=("What battery? It doesn't have one.");blab3();
  PCListen();customertalk(); gmu_text.Text=("Well, we'd have to do that, first. ");blab3();
  PCTalk();customerlisten(); gmu2.Animate(46, 2, 3, eRepeat);  gmu_text.Text=("Oh. ");blab1();  
  //
  PCListen(); customerlisten();  gmu_text.Text=(" "); gmu_label.Text=(" ");}

  else if (upgrade_D.NormalGraphic==1273){
  PCTalk();customerlisten(); gmu_text.Text=("It's fine.");blab2();
  PCListen();customertalk(); gmu_text.Text=("Well, I can fix it to display the correct change amount, if you want.");blab5();
  PCListen();customertalk(); gmu_text.Text=("It'd save you the trouble of doing the math, I guess.");blab5();
  PCListen();customertalk(); gmu_text.Text=("How about we say... $30.00 for parts and installation? ");blab4();
  //
  gmu_text.Text=(" "); gmu_label.Text=(" "); PCListen(); customerlisten(); PlaySound(40); dAlice_2v.Start();
  }}}

function upgrade_B_OnClick(GUIControl *control, MouseButton button){
  if (upgrade_B.NormalGraphic==1273){}
  if (upgrade_B.NormalGraphic==6084){//Grill: Logan
  gUpgrade_m.Visible=false;
  PCListen();customertalk(); gmu_text.Text=("Got your eye on that grill, huh?"); blab1();
  PCListen();customertalk(); gmu_text.Text=("I can plug that thing in for you. ");blab2();
  customerlisten();PCTalk(); gmu_text.Text=("Great. ");blab1();
  PCListen();customertalk(); gmu2.Animate(46, 3, 3, eRepeat);  gmu_text.Text=("Hmm...");blab1();
  PCListen();customertalk(); gmu_text.Text=("How's the battery? ");blab2();

  if (upgrade_D.NormalGraphic==1269){
  customerlisten();PCTalk(); gmu_text.Text=("What battery? It doesn't have one.");blab3();
  PCListen();customertalk(); gmu_text.Text=("Well, we'd have to do that, first. ");blab3();
  customerlisten();PCTalk(); gmu_text.Text=("Oh. ");blab1();
  PCListen(); customerlisten(); gmu_text.Text=(" "); gmu_label.Text=(" "); gmu1.Animate(25, 1, 3, eRepeat);}

  else if (upgrade_D.NormalGraphic==1273){
  customerlisten();PCTalk(); gmu_text.Text=("It's Fine.");blab2();
  PCListen();customertalk(); gmu_text.Text=("Well, if you could believe it, that grill is actually brand new.");blab5();

  int job;
  job=Random(2);
  if (job==0){PCListen();customertalk(); 
  boxadd("Melody"); boxadd("Five Star Meats"); 
  gmu_text.Text=("Melody from Five Star Meats traded it to me for some plumbing work I did. ");blab5();}
  if (job==1){PCListen();customertalk(); gmu_text.Text=("It works though - I tested it and it's fine.");blab5();}
  if (job==2){boxadd("Melody"); boxadd("Trade"); 
  PCListen();customertalk(); gmu_text.Text=("Got it off Melody in a trade a while back.");blab5();}

  customerlisten();PCTalk(); gmu_text.Text=("How much?");blab1();
  PCListen();customertalk(); gmu_text.Text=("Let's say... $20.00 for parts and installation? "); blab4();
  gmu_text.Text=(" "); gmu_label.Text=(" "); customerlisten(); 
  PlaySound(40); dAlice_4v.Start();}}
  
  if (upgrade_B.NormalGraphic==1272){//Toaster: Vinny
  gUpgrade_m.Visible=false;
  PCListen();customertalk(); gmu_text.Text=("A toaster?"); blab1();
  PCListen();customertalk(); gmu_text.Text=("Sure, no problem. ");blab2();
  customerlisten();PCTalk(); gmu_text.Text=("Excellent. ");blab1();
  PCListen();customertalk(); gmu2.Animate(46, 3, 3, eRepeat);  gmu_text.Text=("Hmm...");blab1();
  PCListen();customertalk(); gmu_text.Text=("How's the battery? ");blab2();

  if (upgrade_D.NormalGraphic==1269){
  customerlisten();PCTalk(); gmu_text.Text=("What battery? It doesn't have one.");blab3();
  PCListen();customertalk(); gmu_text.Text=("Well, we'd have to do that, first. ");blab3();
  customerlisten();PCTalk(); gmu_text.Text=("Oh. ");blab1();
  PCListen(); customerlisten(); gmu_text.Text=(" "); gmu_label.Text=(" "); gmu1.Animate(25, 1, 3, eRepeat);}

  else if (upgrade_D.NormalGraphic==1273){
  customerlisten();PCTalk(); gmu_text.Text=("It's good so far.");blab2();
  PCListen();customertalk(); gmu_text.Text=("Well, if you could believe it, I actually have two spare toasters here in the shop.");blab5();

  int job;
  job=Random(2);
  if (job==0){PCListen();customertalk(); gmu_text.Text=("Tim Bigby brought one in yesterday that he didn't want anymore. ");blab5();}
  if (job==1){PCListen();customertalk(); gmu_text.Text=("I think one of them has wide enough slots for a bagel.");blab5();}
  if (job==2){PCListen();customertalk(); gmu_text.Text=("I'm surprised you don't have one in your cart already.");blab5();}

  customerlisten();PCTalk(); gmu_text.Text=("How much?");blab1();
  PCListen();customertalk(); gmu_text.Text=("Let's say... $20.00 for parts and installation? "); blab4();
  gmu_text.Text=(" "); gmu_label.Text=(" "); customerlisten(); 
  PlaySound(40); dAlice_4v.Start();}
}}


function upgrade_C_OnClick(GUIControl *control, MouseButton button){
  if (upgrade_C.NormalGraphic==3891){PlaySound(60); TopUp("Item Needed", "This upgrade is locked!");}
  if (upgrade_C.NormalGraphic==1273){}
  if (upgrade_C.NormalGraphic==1271){//Stereo
  gUpgrade_m.Visible=false;
  customertalk();PCListen();  gmu_text.Text=("Sure, I can hook up that stereo for you.");blab3();
  PCTalk(); customerlisten(); gmu_text.Text=("Great! "); blab1();
  customertalk();PCListen();  gmu2.Animate(46, 3, 3, eRepeat);  gmu_label.Text=("Alice"); gmu_text.Text=("Hmm...");blab1();
  customertalk();PCListen();  gmu_text.Text=("How's the battery? ");blab2();

  if (upgrade_D.NormalGraphic==1269){
  customerlisten();PCTalk(); gmu_text.Text=("What battery? It doesn't have one.");blab3();
  customertalk();PCListen(); gmu_text.Text=("Well, we'd have to do that, first. ");blab3();
  customerlisten();PCTalk(); gmu2.Animate(46, 2, 3, eRepeat);  gmu_text.Text=("Oh. ");blab1();  
  customerlisten(); PCListen(); gmu_text.Text=(" "); gmu_label.Text=(" "); gmu1.Animate(25, 1, 3, eRepeat);}

  else if (upgrade_D.NormalGraphic==1273){
  customerlisten();PCTalk(); gmu_text.Text=("Seems fine.");blab1();
  customertalk();PCListen(); gmu_text.Text=("You don't have any speakers, do you?");blab4();
  customerlisten();PCTalk(); gmu_text.Text=("Nope.");blab1();
  customertalk();PCListen(); gmu_text.Text=("I've got a couple laying around here, I think.");blab4();

  int job;
  job=Random(2);
  if (job==0){PCListen();customertalk(); gmu_text.Text=("I've just got to look around for them.");blab4();}
  if (job==1){PCListen();customertalk(); gmu_text.Text=("I know they're here somewhere.");blab3();}
  if (job==2){PCListen();customertalk(); gmu_text.Text=("I think there are some spare ones behind the accellerator pile. ");blab5();}
  PCTalk(); customerlisten(); gmu_text.Text=("Sure, okay.");blab1();
  customertalk();PCListen();  gmu_text.Text=("Let's say... $10.00 for parts and installation? "); blab4();
  gmu_text.Text=(" "); gmu_label.Text=(" "); customerlisten(); PCListen(); PlaySound(40); dAlice_3v.Start();}
}}

function upgrade_D_OnClick(GUIControl *control, MouseButton button){
  if (upgrade_D.NormalGraphic==1273){}
  if (upgrade_D.NormalGraphic==1269){
  gUpgrade_m.Visible=false;
  customertalk();PCListen(); gmu_text.Text=("Battery? Sure, okay."); blab2();
if (GetGlobalInt(1)==3){
  customertalk();PCListen(); gmu_text.Text=("Didn't this old thing use to have a battery in it, a while back? "); blab4();
  customerlisten();PCTalk(); gmu_text.Text=("Yeah, I took it out years ago. "); blab3();}
  PCListen();customertalk(); gmu_text.Text=("Well, I could hook one up right now."); blab3();
  customerlisten();PCTalk(); gmu_text.Text=("Do you have one that would work?"); blab3();
  PCListen();customertalk(); gmu_text.Text=("Well, I got a small car battery that'd work. It won't but take one minute to put in. "); blab5();
  PCListen();customertalk(); gmu_text.Text=("Let's say... $50.00 for parts and installation? ");  blab4();
  gmu_text.Text=(" "); gmu_label.Text=(" "); customerlisten(); 
  PlaySound(40); dAlice_1v.Start();
}}

function m_appearance_OnClick(GUIControl *control, MouseButton button)
{//needswork (Appearance menus for Andrus, Mel, and Logan.)
  gUpgrade_m.Visible=false;
  if (GetGlobalInt(1) == 1) {//Andrus Appearance Menu?
    PlaySound(39); TopUp("Under Construction","These options are being constructed.");}//Andrus!
  
  if (GetGlobalInt(1) == 2) {//Mel Appearance Menu?
    PlaySound(39); TopUp("Under Construction","These options are being constructed.");}//Melanie!
  
  if (GetGlobalInt(1) == 3) {if (Stand.Room == 12){PlaySound(39); gAppearance_v.Visible=true;
                                                 if (stand_look==1){m_1.Visible=false; m_2.Visible=true; m_3.Visible=true; m_4.Visible=false;}
                                                 if (stand_look==2){m_1.Visible=true;  m_2.Visible=false; m_3.Visible=true; m_4.Visible=false;}
                                                 if (stand_look==3){m_1.Visible=true;  m_2.Visible=true; m_3.Visible=false; m_4.Visible=false;}
                                                 if (stand_look==4){m_1.Visible=true;  m_2.Visible=true; m_3.Visible=true; m_4.Visible=true;}
                                                 }//Vinny!
                      else if (Stand.Room != 12){
  PCListen();customertalk(); gmu_text.Text=("Vinny? Where's your cart? "); blab2();
  PCListen();customertalk(); gmu_text.Text=("I can't likely paint it if it isn't here. "); blab3();
  customerlisten();  PCTalk(); gmu_text.Text=("It's uh.. Right. "); blab2();
  PCListen(); customertalk(); gmu_text.Text=("Right. "); blab1();
  customerlisten(); PCTalk(); gmu_text.Text=("I'll go get it. "); blab1();
  PCListen(); customertalk(); gmu_text.Text=("I'll be here, whenever you're ready. "); blab3();
  customerlisten(); PCTalk();  gmu_text.Text=("You'd better be. "); gmu2.Animate(46, 2, 3, eRepeat);   blab2();
  customerlisten();PCListen(); gmu_text.Text=(" "); gmu_label.Text=(" "); PCListen();}
}
  if (GetGlobalInt(1) == 4) {//Logan Appearance Menu?
  PlaySound(39); TopUp("Under Construction","These options are being constructed.");}
  
  }
  
// ---------------  Appearance Menu BUttons---------- 
function m_1_OnClick(GUIControl *control, MouseButton button)
{
  if (GetGlobalInt(1)==2){//Mel!
  if (Money>=340.00){
  deliveryday=1; deliveryitem=21; Stand.ChangeView(83); Stand.LockView(83);
  expenselist.AddItem("340.00 - Cart Upgrade: Appearance");
  Money-=340.00; PlaySound(4); TopUp("Appearance Cost", "Lost $340.00"); expense_upgrade+=340.00;
  PlaySound(9); TopUp("Appearance Update", "Got 'Ash Wood'!");
  gAppearance_v.Visible=false;
  int job=Random(2);
  if (job==0){customertalk(); gmu_text.Text=("There's one big job ahead of you, so I won't be able to finish tonight.");blab5();}
  if (job==1){customertalk(); gmu_text.Text=("I'm a little swamped today, so I won't be able to finish tonight.");blab5();}
  if (job==2){customertalk(); gmu_text.Text=("I'm sort of behind on some of these jobs, so I won't be able to finish tonight.");blab5();}
  PCListen(); customertalk(); gmu_text.Text=("I'll drop it off tomorrow when it's finished.");blab4();
  PCListen(); customertalk(); gmu_text.Text=("Where should I take it?");blab2();
  PCListen(); customerlisten(); gmu_text.Text=(" "); gmu_label.Text=(" "); 
  if (cSlot2.InventoryQuantity[Permit_franklin.ID]!=0){dMeldrop.SetOptionState(1, eOptionOn);}
  if (cSlot2.InventoryQuantity[Permit_notgeld.ID]!=0) {dMeldrop.SetOptionState(2, eOptionOn);}
  if (cSlot2.InventoryQuantity[Permit_downtown.ID]!=0){dMeldrop.SetOptionState(3, eOptionOn);}
  if (cSlot2.InventoryQuantity[Permit_Collins.ID]!=0) {dMeldrop.SetOptionState(4, eOptionOn);}
  if (cSlot2.InventoryQuantity[Permit_florin.ID]!=0)  {dMeldrop.SetOptionState(5, eOptionOn);}
  if (cSlot2.InventoryQuantity[Permit_13.ID]!=0)      {dMeldrop.SetOptionState(6, eOptionOn);}
  dMeldrop.Start();}
  else if (Money < 340.00){PlaySound(60); Insufficiency();}}

  if (GetGlobalInt(1)==3){//Vinny!
  if (Stand.NormalView==48){PlaySound(9); gAppearance_v.Visible=false;}
  else {
  if (Money>=100.00){
  Money-=100.00; PlaySound(4); expense_upgrade+=100.00;
  PCListen(); customerlisten(); gmu_text.Text=(" "); gmu_label.Text=(" "); 
  FadeOut(5); Wait(25);
  StandImage.NormalGraphic=809; stand_look=1;
  Stand.ChangeView(48); Stand.LockView(48);
  FadeIn(5); 
  PlaySound(9); TopUp("Cart Upgraded!","Spent $100.00 on new paint!");
  expenselist.AddItem("100.00 - Cart Upgrade: Appearance");
  gAppearance_v.Visible=false;
  PCListen(); customertalk(); gmu_text.Text=("New shining armor for Georgetown's favorite knight. ");blab4();
  customerlisten(); PCTalk(); gmu_text.Text=("If I'm a knight, does that mean you'll sell me a sword, too? "); blab4();
  PCListen(); customertalk(); gmu_text.Text=("Good idea. You could use it to slice the bagels, and spread on cream cheese. "); blab5();
  customerlisten(); PCTalk(); gmu_text.Text=("I'm sold. How much for a sword? "); blab3();
  PCListen(); customertalk(); gmu_text.Text=("I'm fresh out. "); blab1();
  PCTalk();  customerlisten(); gmu_text.Text=("Oh, you tease. "); gmu2.Animate(46, 2, 3, eRepeat);   blab2();
  customerlisten(); PCListen(); gmu_text.Text=(" "); gmu_label.Text=(" "); PCListen();}
  else if (Money < 100.00){PlaySound(60); Insufficiency();}}}

  if (GetGlobalInt(1)==4){
  if (Money>=(1800.00)){
  Money-=1800.00; PlaySound(4); expense_upgrade+=1800.00;
  PlaySound(9); TopUp("New Cart Acquired!","Spent $1800.00 on a new stand!");
  expenselist.AddItem("1800.00 - Bought New Cart");
  StandImage.NormalGraphic=2246; Stand.ChangeView(111); Stand.LockView(111); Stand.ChangeRoom(12, 149, 153);
  upgrade_2.NormalGraphic=6086; upgrade_B.NormalGraphic=6084;
  gAppearance_v.Visible=false;
  
  PCTalk(); customerlisten(); gmu_text.Text=("Kobayashi.");blab1();
  PCListen();  customertalk(); gmu_text.Text=("Domo arigato.");blab1();
  PCListen(); customerlisten(); gmu_text.Text=(" "); gmu_label.Text=(" ");}
  else if (Money < (1800.00)){PlaySound(60); Insufficiency(); gAppearance_v.Visible=false;}}

}

function m_2_OnClick(GUIControl *control, MouseButton button)
{  if (GetGlobalInt(1)==2){//Mel!
  if (Money>=200.00){
  Money-=200.00; PlaySound(4); expense_upgrade+=200.00;
  PlaySound(9); TopUp("Cart Upgraded!","Spent $200.00 on a new appearance!");
  expenselist.AddItem("200.00 - Cart Upgrade: Appearance");
  deliveryday=1; deliveryitem=22; Stand.ChangeView(84); Stand.LockView(84);
  gAppearance_v.Visible=false;
  int job=Random(2);
  if (job==0){customertalk(); gmu_text.Text=("There's one big job ahead of you, so I won't be able to finish tonight.");blab5();}
  if (job==1){customertalk(); gmu_text.Text=("I'm a little swamped today, so I won't be able to finish tonight.");blab5();}
  if (job==2){customertalk(); gmu_text.Text=("I'm sort of behind on some of these jobs, so I won't be able to finish tonight.");blab5();}
  PCListen(); customertalk(); gmu_text.Text=("I'll drop it off tomorrow when it's finished.");blab4();
  PCListen(); customertalk(); gmu_text.Text=("Where should I take it?");blab2();
    PCListen(); customerlisten(); gmu_text.Text=(" "); gmu_label.Text=(" "); 
  if (cSlot2.InventoryQuantity[Permit_franklin.ID]!=0){dMeldrop.SetOptionState(1, eOptionOn);}
  if (cSlot2.InventoryQuantity[Permit_notgeld.ID]!=0) {dMeldrop.SetOptionState(2, eOptionOn);}
  if (cSlot2.InventoryQuantity[Permit_downtown.ID]!=0){dMeldrop.SetOptionState(3, eOptionOn);}
  if (cSlot2.InventoryQuantity[Permit_Collins.ID]!=0) {dMeldrop.SetOptionState(4, eOptionOn);}
  if (cSlot2.InventoryQuantity[Permit_florin.ID]!=0)  {dMeldrop.SetOptionState(5, eOptionOn);}
  if (cSlot2.InventoryQuantity[Permit_13.ID]!=0)      {dMeldrop.SetOptionState(6, eOptionOn);}
  dMeldrop.Start();}
  else if (Money < 340.00){PlaySound(60); Insufficiency();}}
 
  if (GetGlobalInt(1)==3){
  if (Money>=100.00){
  Money-=100.00; PlaySound(4); expense_upgrade+=100.00;
  expenselist.AddItem("100.00 - Cart Upgrade: Appearance");
  PCListen(); customerlisten(); gmu_text.Text=(" "); gmu_label.Text=(" "); 
  FadeOut(5); Wait(25);
  StandImage.NormalGraphic=808; Stand.ChangeView(49); Stand.LockView(49);
  gAppearance_v.Visible=false;
  FadeIn(5);
  PlaySound(9); TopUp("Cart Upgraded!","Spent $100.00 on new paint!"); stand_look=2;
  PCListen();customertalk(); gmu_text.Text=("That should keep off the mustard stains. "); blab4();
  customerlisten(); PCTalk(); gmu2.Animate(46, 2, 3, eRepeat);  gmu_text.Text=("Who would ever put mustard on a bagel, besides you? "); blab4();
  customerlisten(); PCListen(); gmu_text.Text=(" "); gmu_label.Text=(" ");}
  else if (Money < 100.00){PlaySound(60); Insufficiency(); gAppearance_v.Visible=false;}}

  if (GetGlobalInt(1)==4){
  if (Money>=(1200.00)){
  Money-=1200.00; PlaySound(4); expense_upgrade+=1200.00;
  PlaySound(9); TopUp("New Stand Acquired!","Spent $1200.00 on the Chestnutt!");
  expenselist.AddItem("1200.00 - New Hot Dog Cart");
  StandImage.NormalGraphic=2294; Stand.ChangeView(114); Stand.LockView(114); Stand.ChangeRoom(12, 149, 153);
  upgrade_2.NormalGraphic=6086; upgrade_B.NormalGraphic=6084;
  gAppearance_v.Visible=false;
  
  PCTalk(); customerlisten(); gmu_text.Text=("The stripes are bangin'.");blab2();
  PCListen();  customertalk(); gmu_text.Text=("'Bangin'? ");blab1();
  gmu2.Animate(46, 2, 3, eRepeat); PCTalk(); gmu_text.Text=("Yeah, you know...");blab1();
  gmu2.Animate(46, 2, 3, eRepeat); PCTalk(); gmu_text.Text=("Synonymous with 'awesome'.");blab2();
  PCListen(); customerlisten(); gmu_text.Text=(" "); gmu_label.Text=(" ");}
  else if (Money < (1200.00)){PlaySound(60); Insufficiency(); gAppearance_v.Visible=false;}}

}

function m_3_OnClick(GUIControl *control, MouseButton button)
{ if (GetGlobalInt(1)==2){//Mel!
  if (Money>=100.00){
  Money-=100.00; PlaySound(4); expense_upgrade+=100.00;
  PlaySound(9); TopUp("Stand Upgraded!","Spent $100.00 on new paint!");
  expenselist.AddItem("100.00 - Cart Upgrade: Appearance");
  deliveryday=1; deliveryitem=23; Stand.ChangeView(82); Stand.LockView(82);
  gAppearance_v.Visible=false;
  
  int job=Random(2);
  if (job==0){customertalk(); gmu_text.Text=("There's one big job ahead of you, so I won't be able to finish tonight.");blab5();}
  if (job==1){customertalk(); gmu_text.Text=("I'm a little swamped today, so I won't be able to finish tonight.");blab5();}
  if (job==2){customertalk(); gmu_text.Text=("I'm sort of behind on some of these jobs, so I won't be able to finish tonight.");blab5();}
  PCListen(); customertalk(); gmu_text.Text=("I'll drop it off tomorrow when it's finished.");blab4();
  PCListen(); customertalk(); gmu_text.Text=("Where should I take it?");blab1();
  PCListen(); customerlisten(); gmu_text.Text=(" "); gmu_label.Text=(" "); 
  if (cSlot2.InventoryQuantity[Permit_franklin.ID]!=0){dMeldrop.SetOptionState(1, eOptionOn);}
  if (cSlot2.InventoryQuantity[Permit_notgeld.ID]!=0) {dMeldrop.SetOptionState(2, eOptionOn);}
  if (cSlot2.InventoryQuantity[Permit_downtown.ID]!=0){dMeldrop.SetOptionState(3, eOptionOn);}
  if (cSlot2.InventoryQuantity[Permit_Collins.ID]!=0) {dMeldrop.SetOptionState(4, eOptionOn);}
  if (cSlot2.InventoryQuantity[Permit_florin.ID]!=0)  {dMeldrop.SetOptionState(5, eOptionOn);}
  if (cSlot2.InventoryQuantity[Permit_13.ID]!=0)      {dMeldrop.SetOptionState(6, eOptionOn);}
  dMeldrop.Start();}
  else if (Money < 340.00){PlaySound(60); Insufficiency();}}

  if (GetGlobalInt(1)==3){
  if (Money>=(100.00)){
  Money-=100.00; PlaySound(4); expense_upgrade+=100.00;
  expenselist.AddItem("100.00 - Cart Upgrade: Appearance");
  PCListen(); customerlisten(); gmu_text.Text=(" "); gmu_label.Text=(" "); 
  FadeOut(5); Wait(25);
  StandImage.NormalGraphic=807; Stand.ChangeView(50); Stand.LockView(50);
  gAppearance_v.Visible=false;
  FadeIn(5);
  PlaySound(9); TopUp("Cart Upgraded!","Spent $100.00 on new paint!"); stand_look=3;
  PCListen(); customertalk(); gmu2.Animate(46, 2, 3, eRepeat); gmu_text.Text=("(laugh) "); blab1();
  PCListen(); customertalk(); gmu_text.Text=("I knew you'd pick that one. "); blab2();
  customerlisten(); PCTalk(); gmu2.Animate(46, 2, 3, eRepeat);  gmu_text.Text=("Yes. Stealth. "); blab1();
  customerlisten(); PCListen();  gmu_text.Text=(" "); gmu_label.Text=(" ");}

else if (Money < (1000.00)){PlaySound(60); Insufficiency(); gAppearance_v.Visible=false;}}

  if (GetGlobalInt(1)==4){
  if (Money>=(1000.00)){
  Money-=1000.00; PlaySound(4); expense_upgrade+=1000.00;
  PlaySound(9); TopUp("New Cart Acquired!","Spent $1000.00 on the Georghehner!");
  expenselist.AddItem("100.00 - Bought New Hot Dog Cart");
  StandImage.NormalGraphic=2313; Stand.ChangeView(115); Stand.LockView(115); Stand.ChangeRoom(12, 149, 153);
  upgrade_2.NormalGraphic=6086; upgrade_B.NormalGraphic=6084;
  gAppearance_v.Visible=false;
  
  PCListen();  customertalk(); gmu_text.Text=("Good luck with your new cart! ");blab2();
  customerlisten(); PCTalk();  gmu_text.Text=("Sure, yeah.");blab1();
  
  PCListen(); customerlisten(); gmu_text.Text=(" "); gmu_label.Text=(" ");}
  else if (Money < (1000.00)){PlaySound(60); Insufficiency(); gAppearance_v.Visible=false;}}
}

function m_4_OnClick(GUIControl *control, MouseButton button)
{ if (GetGlobalInt(1)==2){//Mel!
  deliveryday=1; deliveryitem=24; Stand.ChangeView(85); Stand.LockView(85);
  gAppearance_v.Visible=false;
  customertalk(); gmu_text.Text=("Oh, okay. That'll be easy.");blab2();
  customerlisten(); PCTalk(); gmu_text.Text=("Maybe I'll get it cleaned up later on.");blab3();
  PCListen(); customertalk(); gmu_text.Text=("Sure - I can repaint it whenever you want.");blab3();
  customerlisten(); PCTalk(); gmu_text.Text=("Okay, great.");blab1();
  PCListen(); customertalk(); gmu_text.Text=("So I'll drop it off tomorrow when it's finished.");blab4();
  PCListen(); customertalk(); gmu_text.Text=("Where should I take it?");blab2();
  PCListen(); customerlisten(); gmu_text.Text=(" "); gmu_label.Text=(" "); 
  if (cSlot2.InventoryQuantity[Permit_franklin.ID]!=0){dMeldrop.SetOptionState(1, eOptionOn);}
  if (cSlot2.InventoryQuantity[Permit_notgeld.ID]!=0) {dMeldrop.SetOptionState(2, eOptionOn);}
  if (cSlot2.InventoryQuantity[Permit_downtown.ID]!=0){dMeldrop.SetOptionState(3, eOptionOn);}
  if (cSlot2.InventoryQuantity[Permit_Collins.ID]!=0) {dMeldrop.SetOptionState(4, eOptionOn);}
  if (cSlot2.InventoryQuantity[Permit_florin.ID]!=0)  {dMeldrop.SetOptionState(5, eOptionOn);}
  if (cSlot2.InventoryQuantity[Permit_13.ID]!=0)      {dMeldrop.SetOptionState(6, eOptionOn);}
  dMeldrop.Start();}
 
  if (GetGlobalInt(1)==3){
  StandImage.NormalGraphic=806; Stand.ChangeView(51); Stand.LockView(51); stand_look=4;
  gAppearance_v.Visible=false;
      
  PCListen(); customertalk(); gmu_text.Text=("Nothing says 'Vinny' quite like rust and body damage. "); blab4();
  customerlisten(); PCTalk(); gmu_text.Text=("What's wrong with body damage? I earned each dent. "); blab4();
  customerlisten(); PCTalk(); gmu_text.Text=("Every single scrape and scratch tells a story. "); blab4();
  PCListen(); customertalk(); gmu_text.Text=("If you keep riding this cart down hills, I won't be able to help you. ");  blab5();
  PCListen(); customertalk();gmu_text.Text=("You'll need a surgeon, not a mechanic. "); blab3();
  customerlisten(); PCListen(); gmu_text.Text=(" "); gmu_label.Text=(" "); gmu1.Animate(25, 1, 3, eRepeat);}

if (GetGlobalInt(1)==4){
  if (Money>=(800.00)){
  Money-=800.00; PlaySound(4); expense_upgrade+=800.00;
  PlaySound(9); TopUp("New Cart Acquired!","Spent $800.00 on the Dowdeswell!");
  expenselist.AddItem("800.00 - Bought New Hot Dog Cart");
  StandImage.NormalGraphic=2332; Stand.ChangeView(116); Stand.LockView(116); Stand.ChangeRoom(12, 149, 153);
  upgrade_2.NormalGraphic=6086; upgrade_B.NormalGraphic=6084;
  gAppearance_v.Visible=false;
  
  PCTalk(); customerlisten(); gmu_text.Text=("Eight hundred bucks is the cheapest you go, huh?"); blab4();
  PCListen();  customertalk(); gmu_text.Text=("Well, yeah. I think that's a fair price."); blab3();
  PCTalk(); customerlisten(); gmu_text.Text=("Whatever.");blab1();
  PCListen(); customerlisten(); gmu_text.Text=(" "); gmu_label.Text=(" ");}
  else if (Money < (800.00)){PlaySound(60); Insufficiency(); gAppearance_v.Visible=false;}}
}
//////////  Superstore Departments ------------------------------ Superstore Departments------//
function Button6_OnClick(GUIControl *control, MouseButton button){PlaySound(39); gItems_ss.Visible=true; gEquipment_ss.Visible=false; gIngredients_ss.Visible=false; }
function Button3_OnClick(GUIControl *control, MouseButton button){PlaySound(39); gEquipment_ss.Visible=true; gItems_ss.Visible=false; gIngredients_ss.Visible=false; }
function Button5_OnClick(GUIControl *control, MouseButton button){PlaySound(39); gIngredients_ss.Visible=true; gItems_ss.Visible=false; gEquipment_ss.Visible=false; }

//=========upCoffee Button Changes=============================upCoffee Button Changes==============//
function cm_s_OnClick(GUIControl *control, MouseButton button){
     if (cm_s.NormalGraphic==1182){} 
else if (cm_s.NormalGraphic==1192){PlaySound(28); upCoffee=("S");} 
else if (cm_s.NormalGraphic==1191){PlaySound(28); upCoffee=("S");}}

function cm_a_OnClick(GUIControl *control, MouseButton button){
     if (cm_a.NormalGraphic==1182){} 
else if (cm_a.NormalGraphic==1183){PlaySound(28); upCoffee=("A");} 
else if (cm_a.NormalGraphic==1184){PlaySound(28); upCoffee=("A");}}

function cm_b_OnClick(GUIControl *control, MouseButton button){
     if (cm_b.NormalGraphic==1182){} 
else if (cm_b.NormalGraphic==1185){PlaySound(28); upCoffee=("B");} 
else if (cm_b.NormalGraphic==1186){PlaySound(28); upCoffee=("B");}}

function cm_c_OnClick(GUIControl *control, MouseButton button){
     if (cm_c.NormalGraphic==1182){} 
else if (cm_c.NormalGraphic==1187){PlaySound(28); upCoffee=("C");} 
else if (cm_c.NormalGraphic==1188){PlaySound(28); upCoffee=("C");}}

function cm_d_OnClick(GUIControl *control, MouseButton button){
     if (cm_d.NormalGraphic==1182){} 
else if (cm_d.NormalGraphic==1189){PlaySound(28); upCoffee=("D");} 
else if (cm_d.NormalGraphic==1190){PlaySound(28); upCoffee=("D");}}


function xtra_lox_OnClick(GUIControl *control, MouseButton button){
     if ((player.InventoryQuantity[Lox.ID]!=0)&&(player.InventoryQuantity[Capers.ID]!=0)){
     if (loxx==0){PlaySound(28); xtra_lox.NormalGraphic=1194; loxx=1; lox_slider.Value=0; lox_label.TextColor=7; lox_slider.Visible=true;}//START CHARGE
else if (loxx==1){PlaySound(28); xtra_lox.NormalGraphic=1193; loxx=0; lox_slider.Value=0; lox_label.TextColor=8; lox_slider.Visible=false;}}//STOP CHARGE
else if ((player.InventoryQuantity[Lox.ID]==0)||(player.InventoryQuantity[Capers.ID]==0)){PlaySound(60); TopUp("Need lox and capers", "You don't have lox and capers!"); vitality.Width -=10;}}

function xtra_pbj_OnClick(GUIControl *control, MouseButton button){
     if ((player.InventoryQuantity[Peanutbutter.ID]!=0)&&(player.InventoryQuantity[Jelly.ID]!=0)){
     if (pbjx==0){PlaySound(28); xtra_pbj.NormalGraphic=1194; pbjx=1; pbj_slider.Value=0; pbj_label.TextColor=7; pbj_slider.Visible=true;}//START CHARGE
else if (pbjx==1){PlaySound(28); xtra_pbj.NormalGraphic=1193; pbjx=0; pbj_slider.Value=0; pbj_label.TextColor=8; pbj_slider.Visible=false;}}//STOP CHARGE
else if ((player.InventoryQuantity[Peanutbutter.ID]==0)||(player.InventoryQuantity[Jelly.ID]==0)){PlaySound(60); TopUp("Need peanut butter and jelly", "You don't have peanut butter and jelly!"); vitality.Width -=10;}}

function xtra_toasted_OnClick(GUIControl *control, MouseButton button){
     if (upgrade_2.NormalGraphic==1325){
     if (toastedx==0){PlaySound(28); xtra_toasted.NormalGraphic=1194; toastedx=1; toasted_slider.Value=0; toasted_label.TextColor=7; toasted_slider.Visible=true;}//START CHARGE
else if (toastedx==1){PlaySound(28); xtra_toasted.NormalGraphic=1193; toastedx=0; toasted_slider.Value=0; toasted_label.TextColor=8; toasted_slider.Visible=false;}}//STOP CHARGE
else if (upgrade_2.NormalGraphic!=1325){PlaySound(60); TopUp("Need upgrade!", "You don't have a toaster!"); vitality.Width -=10;}}

function xtra_creamcheese_OnClick(GUIControl *control, MouseButton button){
     if ((player.InventoryQuantity[CreamCheese.ID]!=0)||(vcheese_remaining!=0)){
     if (creamcheesex==0){PlaySound(28); xtra_creamcheese.NormalGraphic=1194; creamcheesex=1; creamcheese_slider.Value=0; creamcheese_label.TextColor=7; creamcheese_slider.Visible=true;}//START CHARGE
else if (creamcheesex==1){PlaySound(28); xtra_creamcheese.NormalGraphic=1193; creamcheesex=0; creamcheese_slider.Value=0; creamcheese_label.TextColor=8; creamcheese_slider.Visible=false;}}//STOP CHARGE
else if ((player.InventoryQuantity[CreamCheese.ID]==0)&&(vcheese_remaining==0)){PlaySound(60); TopUp("NO Cream Cheese", "You don't have any Cream Cheese!"); vitality.Width -=10;}}

//////////  Cookery------------------------------ Cookery------//
function cb_creamcheese_OnClick(GUIControl *control, MouseButton button){ // Homemade Cream Cheese
     if ((buttermilk_remaining !=0)&&(salt_remaining!=0)&&(milk_remaining>=4))
  {buttermilk_remaining-=2; salt_remaining-=1; milk_remaining-=4; vcheese_remaining+=10; PlaySound(9); TopUp("Looks great!", "Made Homemade Cream Cheese!");
  if (player.InventoryQuantity[Vcheese.ID]==0){player.AddInventory(Vcheese);}}
else if ((buttermilk_remaining ==0)||(salt_remaining==0)||(milk_remaining<4))
{PlaySound(60); DisplayTopBar(35, 8, 8, "", "Insufficient ingredients!"); vitality.Width -=10;}}

function cb_Bagelp_OnClick(GUIControl *control, MouseButton button){ // Plain Bagels
     if ((yeast_remaining>=2)&&(salt_remaining>=3)&&(sugar_remaining!=0)&&(flour_remaining>=8))
  {yeast_remaining-=2; salt_remaining-=3; sugar_remaining-=1; flour_remaining-=8; PlaySound(9); TopUp("These look great!", "Made Plain Bagels!");
   bagel_plain_remaining+=12; if (player.InventoryQuantity[Bagel_Plain.ID]==0){player.AddInventory(Bagel_Plain);}}
else if ((yeast_remaining<2)||(salt_remaining<3)||(sugar_remaining<1)||(flour_remaining<8))
{PlaySound(60); DisplayTopBar(35, 8, 8, "", "Insufficient ingredients!"); vitality.Width -=10;}}


//////////  MENUClicks------------------------------ MENUClicks------//
function menu1_OnClick(GUIControl *control, MouseButton button){
if (menu1.Text==("Hot Cocoa")){PlaySound(41);}
if (menu1.Text==("Coffee")){
if (upCoffee == ("S")){PlaySound(41); gCoffee_S.Visible=true;}
if (upCoffee == ("A")){PlaySound(41); gCoffee_A.Visible=true;}
if (upCoffee == ("B")){PlaySound(41); gCoffee_B.Visible=true;}
if (upCoffee == ("C")){PlaySound(41); gCoffee_C.Visible=true;}
if (upCoffee == ("D")){PlaySound(41); gCoffee_D.Visible=true;}}
if (menu1.Text==("Chai Tea")){PlaySound(41); gChai.Visible=true;} 
if (menu1.Text==("Hot Cocoa")){PlaySound(41); gCocoa.Visible=true;} 
if (menu1.Text==("Milk")){PlaySound(41); gMilk.Visible=true;} 
if (menu1.Text==("Pipeline Crest")){PlaySound(41); gCrest.Visible=true;} 
if (menu1.Text==("Pipeline Rinse")){PlaySound(41); gRinse.Visible=true;} 
if (menu1.Text==("Plain Bagel")){PlaySound(41); gBagel_p.Visible=true;} 
if (menu1.Text==("Georgetonian")){PlaySound(41); gPaper_Gui.Visible=true;} 
if (menu1.Text==("Americano")){PlaySound(41); gAmericano.Visible=true;} 
if (menu1.Text==("Latte")){PlaySound(41); gLatte.Visible=true;} 
if (menu1.Text==("Cappuccino")){PlaySound(41); gCappuccino.Visible=true;} 
if (menu1.Text==("Chai Latte")){PlaySound(41); gChailatte.Visible=true;} 
if (menu1.Text==("Mocha")){PlaySound(41); gMocha.Visible=true;} 
if (menu1.Text==("Hot Dog")){PlaySound(41); gHotdog.Visible=true;} 
}

function menu2_OnClick(GUIControl *control, MouseButton button){
if (menu2.Text==("Hot Cocoa")){PlaySound(41);}
if (menu2.Text==("Coffee")){
if (upCoffee == ("S")){PlaySound(41); gCoffee_S.Visible=true;}
if (upCoffee == ("A")){PlaySound(41); gCoffee_A.Visible=true;}
if (upCoffee == ("B")){PlaySound(41); gCoffee_B.Visible=true;}
if (upCoffee == ("C")){PlaySound(41); gCoffee_C.Visible=true;}
if (upCoffee == ("D")){PlaySound(41); gCoffee_D.Visible=true;}} 
if (menu2.Text==("Chai Tea")){PlaySound(41); gChai.Visible=true;} 
if (menu2.Text==("Hot Cocoa")){PlaySound(41); gCocoa.Visible=true;} 
if (menu2.Text==("Milk")){PlaySound(41); gMilk.Visible=true;} 
if (menu2.Text==("Pipeline Crest")){PlaySound(41); gCrest.Visible=true;} 
if (menu2.Text==("Pipeline Rinse")){PlaySound(41); gRinse.Visible=true;} 
if (menu2.Text==("Plain Bagel")){PlaySound(41); gBagel_p.Visible=true;} 
if (menu2.Text==("Georgetonian")){PlaySound(41); gPaper_Gui.Visible=true;} 
if (menu2.Text==("Americano")){PlaySound(41); gAmericano.Visible=true;} 
if (menu2.Text==("Latte")){PlaySound(41); gLatte.Visible=true;} 
if (menu2.Text==("Cappuccino")){PlaySound(41); gCappuccino.Visible=true;} 
if (menu2.Text==("Chai Latte")){PlaySound(41); gChailatte.Visible=true;} 
if (menu2.Text==("Mocha")){PlaySound(41); gMocha.Visible=true;} 
if (menu2.Text==("Hot Dog")){PlaySound(41); gHotdog.Visible=true;} 
}

function menu3_OnClick(GUIControl *control, MouseButton button){
if (menu3.Text==("Hot Cocoa")){PlaySound(41);}
if (menu3.Text==("Coffee")){
if (upCoffee == ("S")){PlaySound(41); gCoffee_S.Visible=true;}
if (upCoffee == ("A")){PlaySound(41); gCoffee_A.Visible=true;}
if (upCoffee == ("B")){PlaySound(41); gCoffee_B.Visible=true;}
if (upCoffee == ("C")){PlaySound(41); gCoffee_C.Visible=true;}
if (upCoffee == ("D")){PlaySound(41); gCoffee_D.Visible=true;}} 
if (menu3.Text==("Chai Tea")){PlaySound(41); gChai.Visible=true;} 
if (menu3.Text==("Hot Cocoa")){PlaySound(41); gCocoa.Visible=true;} 
if (menu3.Text==("Milk")){PlaySound(41); gMilk.Visible=true;} 
if (menu3.Text==("Pipeline Crest")){PlaySound(41); gCrest.Visible=true;} 
if (menu3.Text==("Pipeline Rinse")){PlaySound(41); gRinse.Visible=true;} 
if (menu3.Text==("Plain Bagel")){PlaySound(41); gBagel_p.Visible=true;} 
if (menu3.Text==("Georgetonian")){PlaySound(41); gPaper_Gui.Visible=true;} 
if (menu3.Text==("Americano")){PlaySound(41); gAmericano.Visible=true;} 
if (menu3.Text==("Latte")){PlaySound(41); gLatte.Visible=true;} 
if (menu3.Text==("Cappuccino")){PlaySound(41); gCappuccino.Visible=true;} 
if (menu3.Text==("Chai Latte")){PlaySound(41); gChailatte.Visible=true;} 
if (menu3.Text==("Mocha")){PlaySound(41); gMocha.Visible=true;} 
if (menu3.Text==("Hot Dog")){PlaySound(41); gHotdog.Visible=true;} 
}

function menu4_OnClick(GUIControl *control, MouseButton button){
if (menu4.Text==("Hot Cocoa")){PlaySound(41);}
if (menu4.Text==("Coffee")){
if (upCoffee == ("S")){PlaySound(41); gCoffee_S.Visible=true;}
if (upCoffee == ("A")){PlaySound(41); gCoffee_A.Visible=true;}
if (upCoffee == ("B")){PlaySound(41); gCoffee_B.Visible=true;}
if (upCoffee == ("C")){PlaySound(41); gCoffee_C.Visible=true;}
if (upCoffee == ("D")){PlaySound(41); gCoffee_D.Visible=true;}} 
if (menu4.Text==("Chai Tea")){PlaySound(41); gChai.Visible=true;} 
if (menu4.Text==("Hot Cocoa")){PlaySound(41); gCocoa.Visible=true;} 
if (menu4.Text==("Milk")){PlaySound(41); gMilk.Visible=true;} 
if (menu4.Text==("Pipeline Crest")){PlaySound(41); gCrest.Visible=true;} 
if (menu4.Text==("Pipeline Rinse")){PlaySound(41); gRinse.Visible=true;} 
if (menu4.Text==("Plain Bagel")){PlaySound(41); gBagel_p.Visible=true;} 
if (menu4.Text==("Georgetonian")){PlaySound(41); gPaper_Gui.Visible=true;} 
if (menu4.Text==("Americano")){PlaySound(41); gAmericano.Visible=true;} 
if (menu4.Text==("Latte")){PlaySound(41); gLatte.Visible=true;} 
if (menu4.Text==("Cappuccino")){PlaySound(41); gCappuccino.Visible=true;} 
if (menu4.Text==("Chai Latte")){PlaySound(41); gChailatte.Visible=true;} 
if (menu4.Text==("Mocha")){PlaySound(41); gMocha.Visible=true;}
if (menu4.Text==("Hot Dog")){PlaySound(41); gHotdog.Visible=true;} 
}

function menu5_OnClick(GUIControl *control, MouseButton button){
if (menu5.Text==("Hot Cocoa")){PlaySound(41); gCocoa.Visible=true;}
if (menu5.Text==("Coffee")){
if (upCoffee == ("S")){PlaySound(41); gCoffee_S.Visible=true;}
if (upCoffee == ("A")){PlaySound(41); gCoffee_A.Visible=true;}
if (upCoffee == ("B")){PlaySound(41); gCoffee_B.Visible=true;}
if (upCoffee == ("C")){PlaySound(41); gCoffee_C.Visible=true;}
if (upCoffee == ("D")){PlaySound(41); gCoffee_D.Visible=true;}} 
if (menu5.Text==("Chai Tea")){PlaySound(41); gChai.Visible=true;} 
if (menu5.Text==("Hot Cocoa")){PlaySound(41); gCocoa.Visible=true;} 
if (menu5.Text==("Milk")){PlaySound(41); gMilk.Visible=true;} 
if (menu5.Text==("Pipeline Crest")){PlaySound(41); gCrest.Visible=true;} 
if (menu5.Text==("Pipeline Rinse")){PlaySound(41); gRinse.Visible=true;} 
if (menu5.Text==("Plain Bagel")){PlaySound(41); gBagel_p.Visible=true;} 
if (menu5.Text==("Georgetonian")){PlaySound(41); gPaper_Gui.Visible=true;} 
if (menu5.Text==("Americano")){PlaySound(41); gAmericano.Visible=true;} 
if (menu5.Text==("Latte")){PlaySound(41); gLatte.Visible=true;} 
if (menu5.Text==("Cappuccino")){PlaySound(41); gCappuccino.Visible=true;} 
if (menu5.Text==("Chai Latte")){PlaySound(41); gChailatte.Visible=true;} 
if (menu5.Text==("Mocha")){PlaySound(41); gMocha.Visible=true;}
if (menu5.Text==("Hot Dog")){PlaySound(41); gHotdog.Visible=true;} 
}

function menu6_OnClick(GUIControl *control, MouseButton button){
if (menu6.Text==("Hot Cocoa")){PlaySound(41);}
if (menu6.Text==("Coffee")){
if (upCoffee == ("S")){PlaySound(41); gCoffee_S.Visible=true;}
if (upCoffee == ("A")){PlaySound(41); gCoffee_A.Visible=true;}
if (upCoffee == ("B")){PlaySound(41); gCoffee_B.Visible=true;}
if (upCoffee == ("C")){PlaySound(41); gCoffee_C.Visible=true;}
if (upCoffee == ("D")){PlaySound(41); gCoffee_D.Visible=true;}} 
if (menu6.Text==("Chai Tea")){PlaySound(41); gChai.Visible=true;} 
if (menu6.Text==("Hot Cocoa")){PlaySound(41); gCocoa.Visible=true;} 
if (menu6.Text==("Milk")){PlaySound(41); gMilk.Visible=true;}
if (menu6.Text==("Pipeline Crest")){PlaySound(41); gCrest.Visible=true;} 
if (menu6.Text==("Pipeline Rinse")){PlaySound(41); gRinse.Visible=true;} 
if (menu6.Text==("Plain Bagel")){PlaySound(41); gBagel_p.Visible=true;} 
if (menu6.Text==("Georgetonian")){PlaySound(41); gPaper_Gui.Visible=true;} 
if (menu6.Text==("Americano")){PlaySound(41); gAmericano.Visible=true;} 
if (menu6.Text==("Latte")){PlaySound(41); gLatte.Visible=true;} 
if (menu6.Text==("Cappuccino")){PlaySound(41); gCappuccino.Visible=true;} 
if (menu6.Text==("Chai Latte")){PlaySound(41); gChailatte.Visible=true;} 
if (menu6.Text==("Mocha")){PlaySound(41); gMocha.Visible=true;}
if (menu6.Text==("Hot Dog")){PlaySound(41); gHotdog.Visible=true;} 
}


function menu7_OnClick(GUIControl *control, MouseButton button){
if (menu7.Text==("Hot Cocoa")){PlaySound(41);}
if (menu7.Text==("Coffee")){
if (upCoffee == ("S")){PlaySound(41); gCoffee_S.Visible=true;}
if (upCoffee == ("A")){PlaySound(41); gCoffee_A.Visible=true;}
if (upCoffee == ("B")){PlaySound(41); gCoffee_B.Visible=true;}
if (upCoffee == ("C")){PlaySound(41); gCoffee_C.Visible=true;}
if (upCoffee == ("D")){PlaySound(41); gCoffee_D.Visible=true;}} 
if (menu7.Text==("Chai Tea")){PlaySound(41); gChai.Visible=true;} 
if (menu7.Text==("Hot Cocoa")){PlaySound(41); gCocoa.Visible=true;}
if (menu7.Text==("Milk")){PlaySound(41); gMilk.Visible=true;} 
if (menu7.Text==("Pipeline Crest")){PlaySound(41); gCrest.Visible=true;} 
if (menu7.Text==("Pipeline Rinse")){PlaySound(41); gRinse.Visible=true;} 
if (menu7.Text==("Plain Bagel")){PlaySound(41); gBagel_p.Visible=true;} 
if (menu7.Text==("Georgetonian")){PlaySound(41); gPaper_Gui.Visible=true;} 
if (menu7.Text==("Americano")){PlaySound(41); gAmericano.Visible=true;} 
if (menu7.Text==("Latte")){PlaySound(41); gLatte.Visible=true;} 
if (menu7.Text==("Cappuccino")){PlaySound(41); gCappuccino.Visible=true;} 
if (menu7.Text==("Chai Latte")){PlaySound(41); gChailatte.Visible=true;} 
if (menu7.Text==("Mocha")){PlaySound(41); gMocha.Visible=true;}
if (menu7.Text==("Hot Dog")){PlaySound(41); gHotdog.Visible=true;} 
}

function menu8_OnClick(GUIControl *control, MouseButton button){
if (menu8.Text==("Hot Cocoa")){PlaySound(41);}
if (menu8.Text==("Coffee")){
if (upCoffee == ("S")){PlaySound(41); gCoffee_S.Visible=true;}
if (upCoffee == ("A")){PlaySound(41); gCoffee_A.Visible=true;}
if (upCoffee == ("B")){PlaySound(41); gCoffee_B.Visible=true;}
if (upCoffee == ("C")){PlaySound(41); gCoffee_C.Visible=true;}
if (upCoffee == ("D")){PlaySound(41); gCoffee_D.Visible=true;}}
if (menu8.Text==("Chai Tea")){PlaySound(41); gChai.Visible=true;} 
if (menu8.Text==("Hot Cocoa")){PlaySound(41); gCocoa.Visible=true;} 
if (menu8.Text==("Milk")){PlaySound(41); gMilk.Visible=true;}
if (menu8.Text==("Pipeline Crest")){PlaySound(41); gCrest.Visible=true;} 
if (menu8.Text==("Pipeline Rinse")){PlaySound(41); gRinse.Visible=true;} 
if (menu8.Text==("Plain Bagel")){PlaySound(41); gBagel_p.Visible=true;} 
if (menu8.Text==("Georgetonian")){PlaySound(41); gPaper_Gui.Visible=true;} 
if (menu8.Text==("Americano")){PlaySound(41); gAmericano.Visible=true;} 
if (menu8.Text==("Latte")){PlaySound(41); gLatte.Visible=true;} 
if (menu8.Text==("Cappuccino")){PlaySound(41); gCappuccino.Visible=true;} 
if (menu8.Text==("Chai Latte")){PlaySound(41); gChailatte.Visible=true;} 
if (menu8.Text==("Mocha")){PlaySound(41); gMocha.Visible=true;}
if (menu8.Text==("Hot Dog")){PlaySound(41); gHotdog.Visible=true;} 
}

function menu9_OnClick(GUIControl *control, MouseButton button){
if (menu9.Text==("Hot Cocoa")){PlaySound(41);}
if (menu9.Text==("Coffee")){
if (upCoffee == ("S")){PlaySound(41); gCoffee_S.Visible=true;}
if (upCoffee == ("A")){PlaySound(41); gCoffee_A.Visible=true;}
if (upCoffee == ("B")){PlaySound(41); gCoffee_B.Visible=true;}
if (upCoffee == ("C")){PlaySound(41); gCoffee_C.Visible=true;}
if (upCoffee == ("D")){PlaySound(41); gCoffee_D.Visible=true;}} 
if (menu9.Text==("Chai Tea")){PlaySound(41); gChai.Visible=true;} 
if (menu9.Text==("Hot Cocoa")){PlaySound(41); gCocoa.Visible=true;} 
if (menu9.Text==("Milk")){PlaySound(41); gMilk.Visible=true;} 
if (menu9.Text==("Pipeline Crest")){PlaySound(41); gCrest.Visible=true;} 
if (menu9.Text==("Pipeline Rinse")){PlaySound(41); gRinse.Visible=true;} 
if (menu9.Text==("Plain Bagel")){PlaySound(41); gBagel_p.Visible=true;} 
if (menu9.Text==("Georgetonian")){PlaySound(41); gPaper_Gui.Visible=true;} 
if (menu9.Text==("Americano")){PlaySound(41); gAmericano.Visible=true;} 
if (menu9.Text==("Latte")){PlaySound(41); gLatte.Visible=true;} 
if (menu9.Text==("Cappuccino")){PlaySound(41); gCappuccino.Visible=true;} 
if (menu9.Text==("Chai Latte")){PlaySound(41); gChailatte.Visible=true;} 
if (menu9.Text==("Mocha")){PlaySound(41); gMocha.Visible=true;}
if (menu9.Text==("Hot Dog")){PlaySound(41); gHotdog.Visible=true;} 
}

function menu10_OnClick(GUIControl *control, MouseButton button){
if (menu10.Text==("Hot Cocoa")){PlaySound(41);}
if (menu10.Text==("Coffee")){
if (upCoffee == ("S")){PlaySound(41); gCoffee_S.Visible=true;}
if (upCoffee == ("A")){PlaySound(41); gCoffee_A.Visible=true;}
if (upCoffee == ("B")){PlaySound(41); gCoffee_B.Visible=true;}
if (upCoffee == ("C")){PlaySound(41); gCoffee_C.Visible=true;}
if (upCoffee == ("D")){PlaySound(41); gCoffee_D.Visible=true;}}
if (menu10.Text==("Chai Tea")){PlaySound(41); gChai.Visible=true;} 
if (menu10.Text==("Hot Cocoa")){PlaySound(41); gCocoa.Visible=true;} 
if (menu10.Text==("Milk")){PlaySound(41); gMilk.Visible=true;} 
if (menu10.Text==("Pipeline Crest")){PlaySound(41); gCrest.Visible=true;} 
if (menu10.Text==("Pipeline Rinse")){PlaySound(41); gRinse.Visible=true;} 
if (menu10.Text==("Plain Bagel")){PlaySound(41); gBagel_p.Visible=true;} 
if (menu10.Text==("Georgetonian")){PlaySound(41); gPaper_Gui.Visible=true;} 
if (menu10.Text==("Americano")){PlaySound(41); gAmericano.Visible=true;} 
if (menu10.Text==("Latte")){PlaySound(41); gLatte.Visible=true;} 
if (menu10.Text==("Cappuccino")){PlaySound(41); gCappuccino.Visible=true;} 
if (menu10.Text==("Chai Latte")){PlaySound(41); gChailatte.Visible=true;} 
if (menu10.Text==("Mocha")){PlaySound(41); gMocha.Visible=true;}
if (menu10.Text==("Hot Dog")){PlaySound(41); gHotdog.Visible=true;} 
}

function menu11_OnClick(GUIControl *control, MouseButton button){
if (menu11.Text==("Hot Cocoa")){PlaySound(41);}
if (menu11.Text==("Coffee")){
if (upCoffee == ("S")){PlaySound(41); gCoffee_S.Visible=true;}
if (upCoffee == ("A")){PlaySound(41); gCoffee_A.Visible=true;}
if (upCoffee == ("B")){PlaySound(41); gCoffee_B.Visible=true;}
if (upCoffee == ("C")){PlaySound(41); gCoffee_C.Visible=true;}
if (upCoffee == ("D")){PlaySound(41); gCoffee_D.Visible=true;}} 
if (menu11.Text==("Chai Tea")){PlaySound(41); gChai.Visible=true;} 
if (menu11.Text==("Hot Cocoa")){PlaySound(41); gCocoa.Visible=true;} 
if (menu11.Text==("Milk")){PlaySound(41); gMilk.Visible=true;} 
if (menu11.Text==("Pipeline Crest")){PlaySound(41); gCrest.Visible=true;} 
if (menu11.Text==("Pipeline Rinse")){PlaySound(41); gRinse.Visible=true;} 
if (menu11.Text==("Plain Bagel")){PlaySound(41); gBagel_p.Visible=true;} 
if (menu11.Text==("Georgetonian")){PlaySound(41); gPaper_Gui.Visible=true;} 
if (menu11.Text==("Americano")){PlaySound(41); gAmericano.Visible=true;} 
if (menu11.Text==("Latte")){PlaySound(41); gLatte.Visible=true;} 
if (menu11.Text==("Cappuccino")){PlaySound(41); gCappuccino.Visible=true;} 
if (menu11.Text==("Chai Latte")){PlaySound(41); gChailatte.Visible=true;} 
if (menu11.Text==("Mocha")){PlaySound(41); gMocha.Visible=true;}
if (menu11.Text==("Hot Dog")){PlaySound(41); gHotdog.Visible=true;} 
}

function menu12_OnClick(GUIControl *control, MouseButton button){
if (menu12.Text==("Hot Cocoa")){PlaySound(41);}
if (menu12.Text==("Coffee")){
if (upCoffee == ("S")){PlaySound(41); gCoffee_S.Visible=true;}
if (upCoffee == ("A")){PlaySound(41); gCoffee_A.Visible=true;}
if (upCoffee == ("B")){PlaySound(41); gCoffee_B.Visible=true;}
if (upCoffee == ("C")){PlaySound(41); gCoffee_C.Visible=true;}
if (upCoffee == ("D")){PlaySound(41); gCoffee_D.Visible=true;}} 
if (menu12.Text==("Chai Tea")){PlaySound(41); gChai.Visible=true;} 
if (menu12.Text==("Hot Cocoa")){PlaySound(41); gCocoa.Visible=true;} 
if (menu12.Text==("Milk")){PlaySound(41); gMilk.Visible=true;} 
if (menu12.Text==("Pipeline Crest")){PlaySound(41); gCrest.Visible=true;} 
if (menu12.Text==("Pipeline Rinse")){PlaySound(41); gRinse.Visible=true;} 
if (menu12.Text==("Plain Bagel")){PlaySound(41); gBagel_p.Visible=true;} 
if (menu12.Text==("Georgetonian")){PlaySound(41); gPaper_Gui.Visible=true;} 
if (menu12.Text==("Americano")){PlaySound(41); gAmericano.Visible=true;} 
if (menu12.Text==("Latte")){PlaySound(41); gLatte.Visible=true;} 
if (menu12.Text==("Cappuccino")){PlaySound(41); gCappuccino.Visible=true;} 
if (menu12.Text==("Chai Latte")){PlaySound(41); gChailatte.Visible=true;} 
if (menu12.Text==("Mocha")){PlaySound(41); gMocha.Visible=true;}
if (menu12.Text==("Hot Dog")){PlaySound(41); gHotdog.Visible=true;} 
}

function menu13_OnClick(GUIControl *control, MouseButton button){
if (menu13.Text==("Hot Cocoa")){PlaySound(41);}
if (menu13.Text==("Coffee")){
if (upCoffee == ("S")){PlaySound(41); gCoffee_S.Visible=true;}
if (upCoffee == ("A")){PlaySound(41); gCoffee_A.Visible=true;}
if (upCoffee == ("B")){PlaySound(41); gCoffee_B.Visible=true;}
if (upCoffee == ("C")){PlaySound(41); gCoffee_C.Visible=true;}
if (upCoffee == ("D")){PlaySound(41); gCoffee_D.Visible=true;}} 
if (menu13.Text==("Chai Tea")){PlaySound(41); gChai.Visible=true;} 
if (menu13.Text==("Hot Cocoa")){PlaySound(41); gCocoa.Visible=true;} 
if (menu13.Text==("Milk")){PlaySound(41); gMilk.Visible=true;} 
if (menu13.Text==("Pipeline Crest")){PlaySound(41); gCrest.Visible=true;} 
if (menu13.Text==("Pipeline Rinse")){PlaySound(41); gRinse.Visible=true;} 
if (menu13.Text==("Plain Bagel")){PlaySound(41); gBagel_p.Visible=true;} 
if (menu13.Text==("Georgetonian")){PlaySound(41); gPaper_Gui.Visible=true;} 
if (menu13.Text==("Americano")){PlaySound(41); gAmericano.Visible=true;} 
if (menu13.Text==("Latte")){PlaySound(41); gLatte.Visible=true;} 
if (menu13.Text==("Cappuccino")){PlaySound(41); gCappuccino.Visible=true;} 
if (menu13.Text==("Chai Latte")){PlaySound(41); gChailatte.Visible=true;} 
if (menu13.Text==("Mocha")){PlaySound(41); gMocha.Visible=true;}
if (menu13.Text==("Hot Dog")){PlaySound(41); gHotdog.Visible=true;} 
}

function menu14_OnClick(GUIControl *control, MouseButton button){
if (menu14.Text==("Hot Cocoa")){PlaySound(41);}
if (menu14.Text==("Coffee")){
if (upCoffee == ("S")){PlaySound(41); gCoffee_S.Visible=true;}
if (upCoffee == ("A")){PlaySound(41); gCoffee_A.Visible=true;}
if (upCoffee == ("B")){PlaySound(41); gCoffee_B.Visible=true;}
if (upCoffee == ("C")){PlaySound(41); gCoffee_C.Visible=true;}
if (upCoffee == ("D")){PlaySound(41); gCoffee_D.Visible=true;}} 
if (menu14.Text==("Chai Tea")){PlaySound(41); gChai.Visible=true;} 
if (menu14.Text==("Hot Cocoa")){PlaySound(41); gCocoa.Visible=true;} 
if (menu14.Text==("Milk")){PlaySound(41); gMilk.Visible=true;} 
if (menu14.Text==("Pipeline Crest")){PlaySound(41); gCrest.Visible=true;} 
if (menu14.Text==("Pipeline Rinse")){PlaySound(41); gRinse.Visible=true;} 
if (menu14.Text==("Plain Bagel")){PlaySound(41); gBagel_p.Visible=true;} 
if (menu14.Text==("Georgetonian")){PlaySound(41); gPaper_Gui.Visible=true;} 
if (menu14.Text==("Americano")){PlaySound(41); gAmericano.Visible=true;} 
if (menu14.Text==("Latte")){PlaySound(41); gLatte.Visible=true;} 
if (menu14.Text==("Cappuccino")){PlaySound(41); gCappuccino.Visible=true;} 
if (menu14.Text==("Chai Latte")){PlaySound(41); gChailatte.Visible=true;} 
if (menu14.Text==("Mocha")){PlaySound(41); gMocha.Visible=true;}
if (menu14.Text==("Hot Dog")){PlaySound(41); gHotdog.Visible=true;} 
}


//=========//Stereofunctions//===================================//

function Playbutton_OnClick(GUIControl *control, MouseButton button){//PLAY!
if (stereopower==0){stereopower=1; PlaySound(59); Wait(5); toverlay.Animate(99, 0, 1, eOnce);
     if (GetGlobalInt(201)==1){PlayMusic(20); thirstlock.Visible=false;}
else if (GetGlobalInt(201)==0){PlayMusic(cued); thirstlock.Visible=true;}}
else if (stereopower==1){PlaySound(59); Wait(5);}}

function Stopbutton_OnClick(GUIControl *control, MouseButton button){//STOP!
if (stereopower==0){PlaySound(59); Wait(5);}
else if (stereopower==1){PlaySound(59); StopMusic(); PlayMusic(cued); stereopower=0; 
toverlay.NormalGraphic=1991; lcd.NormalGraphic=501; Wait(5);}}

function next_OnClick(GUIControl *control, MouseButton button)
{if (stereopower==0){} else if (stereopower==1){
toverlay.Animate(99, 0, 1, eOnce);//9=ambience (ie: Not in library)
     if (lcd.NormalGraphic==1983){lcd.NormalGraphic=1984; PlaySound(59); Wait(5); //1984 Condiments / Credits
     if (GetGlobalInt(224)==1){PlayMusic(12);thirstlock.Visible=false;}
else if (GetGlobalInt(224)==0){PlayMusic(cued); thirstlock.Visible=true;}}
   
else if (lcd.NormalGraphic==1984){lcd.NormalGraphic=501; PlaySound(59); Wait(5); //501 Hollow Stump / Bridge Day
     if (GetGlobalInt(201)==1){PlayMusic(20); thirstlock.Visible=false;}
else if (GetGlobalInt(201)==0){PlayMusic(cued); thirstlock.Visible=true;}}

else if (lcd.NormalGraphic==501){lcd.NormalGraphic=502; PlaySound(59); Wait(5);//502 Domenz / Nothing Yet
     if (GetGlobalInt(202)==1){PlayMusic(21); thirstlock.Visible=false;}
else if (GetGlobalInt(202)==0){PlayMusic(cued); thirstlock.Visible=true;}}

else if (lcd.NormalGraphic==502){lcd.NormalGraphic=503; PlaySound(59); Wait(5);// NoisePulse / Nothing
     if (GetGlobalInt(203)==1){PlayMusic(29); thirstlock.Visible=false;}
else if (GetGlobalInt(203)==0){PlayMusic(cued); thirstlock.Visible=true;}}

else if (lcd.NormalGraphic==503){lcd.NormalGraphic=504; PlaySound(59); Wait(5);//CBM / Dompactor Raxby
     if (GetGlobalInt(204)==1){PlayMusic(19); thirstlock.Visible=false;}
else if (GetGlobalInt(204)==0){PlayMusic(cued); thirstlock.Visible=true;}}

else if (lcd.NormalGraphic==504){lcd.NormalGraphic=505; PlaySound(59); Wait(5);//Crystaline Caves / Nothing
     if (GetGlobalInt(205)==1){PlayMusic(19); thirstlock.Visible=false;}
else if (GetGlobalInt(205)==0){PlayMusic(cued); thirstlock.Visible=true;}}

else if (lcd.NormalGraphic==505){lcd.NormalGraphic=506; PlaySound(59); Wait(5);//Commodorish / Franklin
     if (GetGlobalInt(206)==1){PlayMusic(32); thirstlock.Visible=false;}
else if (GetGlobalInt(206)==0){PlayMusic(cued); thirstlock.Visible=true;}}

else if (lcd.NormalGraphic==506){lcd.NormalGraphic=507; PlaySound(59); Wait(5);// Elements: Earth / Dream
     if (GetGlobalInt(207)==1){PlayMusic(35); thirstlock.Visible=false;}
else if (GetGlobalInt(207)==0){PlayMusic(cued); thirstlock.Visible=true;}}

else if (lcd.NormalGraphic==507){lcd.NormalGraphic=508; PlaySound(59); Wait(5);// Elements: Air / Dream
     if (GetGlobalInt(208)==1){PlayMusic(34); thirstlock.Visible=false;}
else if (GetGlobalInt(208)==0){PlayMusic(cued); thirstlock.Visible=true;}}

else if (lcd.NormalGraphic==508){lcd.NormalGraphic=509; PlaySound(59); Wait(5);//Elements: Water / Dream
     if (GetGlobalInt(209)==1){PlayMusic(cued); thirstlock.Visible=false;}
else if (GetGlobalInt(209)==0){PlayMusic(cued); thirstlock.Visible=true;}}

else if (lcd.NormalGraphic==509){lcd.NormalGraphic=510; PlaySound(59); Wait(5);//Elements: Fire / Dream
     if (GetGlobalInt(210)==1){PlayMusic(cued); thirstlock.Visible=false;}
else if (GetGlobalInt(210)==0){PlayMusic(cued); thirstlock.Visible=true;}}

else if (lcd.NormalGraphic==510){lcd.NormalGraphic=511; PlaySound(59); Wait(5);//Urban Ratz / Load Screen
     if (GetGlobalInt(211)==1){PlayMusic(3); thirstlock.Visible=false;}
else if (GetGlobalInt(211)==0){PlayMusic(cued); thirstlock.Visible=true;}}

else if (lcd.NormalGraphic==511){lcd.NormalGraphic=512; PlaySound(59); Wait(5);//CometoNothing / Downtown
     if (GetGlobalInt(212)==1){PlayMusic(28); thirstlock.Visible=false;}
else if (GetGlobalInt(212)==0){PlayMusic(cued); thirstlock.Visible=true;}}

else if (lcd.NormalGraphic==512){
    lcd.NormalGraphic=513; PlaySound(59); Wait(5);//Joggers / Main Theme
    if (GetGlobalInt(213)==1) {
        //PlayMusic(15);
        aMusic15_Joggers.Play();
        thirstlock.Visible=false;
    } else if (GetGlobalInt(213)==0){PlayMusic(cued); thirstlock.Visible=true;}
}

else if (lcd.NormalGraphic==513){lcd.NormalGraphic=514; PlaySound(59); Wait(5);// RoboGhosts / Roastierry
     if (GetGlobalInt(214)==1){PlayMusic(22); thirstlock.Visible=false;}
else if (GetGlobalInt(214)==0){PlayMusic(cued); thirstlock.Visible=true;}}

else if (lcd.NormalGraphic==514){lcd.NormalGraphic=515; PlaySound(59); Wait(5);//NinjaMaggots / 13th Ave
     if (GetGlobalInt(215)==1){PlayMusic(25); thirstlock.Visible=false;}
else if (GetGlobalInt(215)==0){PlayMusic(cued); thirstlock.Visible=true;}}

else if (lcd.NormalGraphic==515){lcd.NormalGraphic=516; PlaySound(59); Wait(5);//BigScratch / Machinery
     if (GetGlobalInt(216)==1){PlayMusic(13); thirstlock.Visible=false;}
else if (GetGlobalInt(216)==0){PlayMusic(cued); thirstlock.Visible=true;}}

else if (lcd.NormalGraphic==516){lcd.NormalGraphic=517; PlaySound(59); Wait(5);//GoodMorning / Dream
     if (GetGlobalInt(217)==1){PlayMusic(17); thirstlock.Visible=false;}
else if (GetGlobalInt(217)==0){PlayMusic(cued); thirstlock.Visible=true;}}

else if (lcd.NormalGraphic==517){lcd.NormalGraphic=518; PlaySound(59); Wait(5);//RoboRevolt/ Collins
     if (GetGlobalInt(218)==1){PlayMusic(23); thirstlock.Visible=false;}
else if (GetGlobalInt(218)==0){PlayMusic(cued); thirstlock.Visible=true;}}

else if (lcd.NormalGraphic==518){lcd.NormalGraphic=519; PlaySound(59); Wait(5);//Barbara / Florin
     if (GetGlobalInt(219)==1){PlayMusic(26); thirstlock.Visible=false;}
else if (GetGlobalInt(219)==0){PlayMusic(cued); thirstlock.Visible=true;}}


else if (lcd.NormalGraphic==519){lcd.NormalGraphic=520; PlaySound(59); Wait(5);//Chip.Munk / Mall
     if (GetGlobalInt(220)==1){PlayMusic(30); thirstlock.Visible=false;}
else if (GetGlobalInt(220)==0){PlayMusic(cued); thirstlock.Visible=true;}}

else if (lcd.NormalGraphic==520){lcd.NormalGraphic=521; PlaySound(59); Wait(5); //Salto / Love
     if (GetGlobalInt(221)==1){PlayMusic(cued); thirstlock.Visible=false;}
else if (GetGlobalInt(221)==0){PlayMusic(cued); thirstlock.Visible=true;}}

else if (lcd.NormalGraphic==521){lcd.NormalGraphic=1982; PlaySound(59); Wait(5);//Brennan / Bridge Night
     if (GetGlobalInt(222)==1){PlayMusic(10); thirstlock.Visible=false;}
else if (GetGlobalInt(222)==0){PlayMusic(cued); thirstlock.Visible=true;}}

else if (lcd.NormalGraphic==1982){lcd.NormalGraphic=1983; PlaySound(59); Wait(5);//CommerceUnread / Mainmenu
     if (GetGlobalInt(223)==1){PlayMusic(16); thirstlock.Visible=false;}
else if (GetGlobalInt(223)==0){PlayMusic(cued); thirstlock.Visible=true;}}
}}

function prev_OnClick(GUIControl *control, MouseButton button)
{if (stereopower==0){} else if (stereopower==1){
toverlay.Animate(99, 0, 1, eOnce); thirstlock.Visible=false;
     if (lcd.NormalGraphic==501){lcd.NormalGraphic=1984; PlaySound(59); Wait(5); //1984 Condiments / Credits
     if (GetGlobalInt(224)==1){PlayMusic(12);thirstlock.Visible=false;}
else if (GetGlobalInt(224)==0){PlayMusic(cued); thirstlock.Visible=true;}}
   
else if (lcd.NormalGraphic==502){lcd.NormalGraphic=501; PlaySound(59); Wait(5); //501 Hollow Stump / Bridge Day
     if (GetGlobalInt(201)==1){PlayMusic(20); thirstlock.Visible=false;}
else if (GetGlobalInt(201)==0){PlayMusic(cued); thirstlock.Visible=true;}}

else if (lcd.NormalGraphic==503){lcd.NormalGraphic=502; PlaySound(59); Wait(5);//502 Domenz / Nothing Yet
     if (GetGlobalInt(202)==1){PlayMusic(21); thirstlock.Visible=false;}
else if (GetGlobalInt(202)==0){PlayMusic(cued); thirstlock.Visible=true;}}

else if (lcd.NormalGraphic==504){lcd.NormalGraphic=503; PlaySound(59); Wait(5);// NoisePulse / Nothing
     if (GetGlobalInt(203)==1){PlayMusic(29); thirstlock.Visible=false;}
else if (GetGlobalInt(203)==0){PlayMusic(cued); thirstlock.Visible=true;}}


else if (lcd.NormalGraphic==505){lcd.NormalGraphic=504; PlaySound(59); Wait(5);//CBM / Nothing Yet
     if (GetGlobalInt(204)==1){PlayMusic(19); thirstlock.Visible=false;}
else if (GetGlobalInt(204)==0){PlayMusic(cued); thirstlock.Visible=true;}}


else if (lcd.NormalGraphic==506){lcd.NormalGraphic=505; PlaySound(59); Wait(5);//Crystaline Caves / Nothing
     if (GetGlobalInt(205)==1){PlayMusic(19); thirstlock.Visible=false;}
else if (GetGlobalInt(205)==0){PlayMusic(cued); thirstlock.Visible=true;}}

else if (lcd.NormalGraphic==507){lcd.NormalGraphic=506; PlaySound(59); Wait(5);//Commodorish / Franklin
     if (GetGlobalInt(206)==1){PlayMusic(32); thirstlock.Visible=false;}
else if (GetGlobalInt(206)==0){PlayMusic(cued); thirstlock.Visible=true;}}

else if (lcd.NormalGraphic==508){lcd.NormalGraphic=507; PlaySound(59); Wait(5);// Elements: Earth / Dream
     if (GetGlobalInt(207)==1){PlayMusic(cued); thirstlock.Visible=false;}
else if (GetGlobalInt(207)==0){PlayMusic(cued); thirstlock.Visible=true;}}

else if (lcd.NormalGraphic==509){lcd.NormalGraphic=508; PlaySound(59); Wait(5);// Elements: Air / Dream
     if (GetGlobalInt(208)==1){PlayMusic(cued); thirstlock.Visible=false;}
else if (GetGlobalInt(208)==0){PlayMusic(cued); thirstlock.Visible=true;}}

else if (lcd.NormalGraphic==510){lcd.NormalGraphic=509; PlaySound(59); Wait(5);//Elements: Water / Dream
     if (GetGlobalInt(209)==1){PlayMusic(cued); thirstlock.Visible=false;}
else if (GetGlobalInt(209)==0){PlayMusic(cued); thirstlock.Visible=true;}}

else if (lcd.NormalGraphic==511){lcd.NormalGraphic=510; PlaySound(59); Wait(5);//Elements: Fire / Dream
     if (GetGlobalInt(210)==1){PlayMusic(cued); thirstlock.Visible=false;}
else if (GetGlobalInt(210)==0){PlayMusic(cued); thirstlock.Visible=true;}}

else if (lcd.NormalGraphic==512){lcd.NormalGraphic=511; PlaySound(59); Wait(5);//Urban Ratz / Load Screen
     if (GetGlobalInt(211)==1){PlayMusic(3); thirstlock.Visible=false;}
else if (GetGlobalInt(211)==0){PlayMusic(cued); thirstlock.Visible=true;}}

else if (lcd.NormalGraphic==513){lcd.NormalGraphic=512; PlaySound(59); Wait(5);//CometoNothing / Downtown
     if (GetGlobalInt(212)==1){PlayMusic(28); thirstlock.Visible=false;}
else if (GetGlobalInt(212)==0){PlayMusic(cued); thirstlock.Visible=true;}}

else if (lcd.NormalGraphic==514){
     lcd.NormalGraphic=513; PlaySound(59); Wait(5); //Joggers / Main Theme
     if (GetGlobalInt(213)==1) {
        //PlayMusic(15);
        aMusic15_Joggers.Play();
        thirstlock.Visible=false;
     } else if (GetGlobalInt(213)==0) {
        PlayMusic(cued); thirstlock.Visible=true;
     }
}

else if (lcd.NormalGraphic==515){lcd.NormalGraphic=514; PlaySound(59); Wait(5);// RoboGhosts / Roastierry
     if (GetGlobalInt(214)==1){PlayMusic(22); thirstlock.Visible=false;}
else if (GetGlobalInt(214)==0){PlayMusic(cued); thirstlock.Visible=true;}}

else if (lcd.NormalGraphic==516){lcd.NormalGraphic=515; PlaySound(59); Wait(5);//NinjaMaggots / 13th Ave
     if (GetGlobalInt(215)==1){PlayMusic(25); thirstlock.Visible=false;}
else if (GetGlobalInt(215)==0){PlayMusic(cued); thirstlock.Visible=true;}}

else if (lcd.NormalGraphic==517){lcd.NormalGraphic=516; PlaySound(59); Wait(5);//BigScratch / Machinery
     if (GetGlobalInt(216)==1){PlayMusic(13); thirstlock.Visible=false;}
else if (GetGlobalInt(216)==0){PlayMusic(cued); thirstlock.Visible=true;}}

else if (lcd.NormalGraphic==518){lcd.NormalGraphic=517; PlaySound(59); Wait(5);//GoodMorning / Dream
     if (GetGlobalInt(217)==1){PlayMusic(17); thirstlock.Visible=false;}
else if (GetGlobalInt(217)==0){PlayMusic(cued); thirstlock.Visible=true;}}

else if (lcd.NormalGraphic==519){lcd.NormalGraphic=518; PlaySound(59); Wait(5);//RoboRevolt/ Collins
     if (GetGlobalInt(218)==1){PlayMusic(23); thirstlock.Visible=false;}
else if (GetGlobalInt(218)==0){PlayMusic(cued); thirstlock.Visible=true;}}

else if (lcd.NormalGraphic==520){lcd.NormalGraphic=519; PlaySound(59); Wait(5);//Barbara / Florin
     if (GetGlobalInt(219)==1){PlayMusic(26); thirstlock.Visible=false;}
else if (GetGlobalInt(219)==0){PlayMusic(cued); thirstlock.Visible=true;}}

else if (lcd.NormalGraphic==521){lcd.NormalGraphic=520; PlaySound(59); Wait(5);//Chip.Munk / Mall
     if (GetGlobalInt(220)==1){PlayMusic(30); thirstlock.Visible=false;}
else if (GetGlobalInt(220)==0){PlayMusic(cued); thirstlock.Visible=true;}}

else if (lcd.NormalGraphic==1982){lcd.NormalGraphic=521; PlaySound(59); Wait(5); //Salto / Love
     if (GetGlobalInt(221)==1){PlayMusic(cued); thirstlock.Visible=false;}
else if (GetGlobalInt(221)==0){PlayMusic(cued); thirstlock.Visible=true;}}

else if (lcd.NormalGraphic==1983){lcd.NormalGraphic=1982; PlaySound(59); Wait(5);//Brennan / Bridge Night
     if (GetGlobalInt(222)==1){PlayMusic(10); thirstlock.Visible=false;}
else if (GetGlobalInt(222)==0){PlayMusic(cued); thirstlock.Visible=true;}}

else if (lcd.NormalGraphic==1984){lcd.NormalGraphic=1983; PlaySound(59); Wait(5);//CommerceUnread / Mainmenu
     if (GetGlobalInt(223)==1){PlayMusic(16); thirstlock.Visible=false;}
else if (GetGlobalInt(223)==0){PlayMusic(cued); thirstlock.Visible=true;}}
}}

//////////  Edpopup ------------------------------ Edpopup ------//
function drink_coffeeA_OnClick(GUIControl *control, MouseButton button)
{edbanner.NormalGraphic=1176; editem.NormalGraphic=30; gEatdrink.Visible=true; PlaySound(40);}

function drink_coffeeB_OnClick(GUIControl *control, MouseButton button)
{edbanner.NormalGraphic=1176; editem.NormalGraphic=31; gEatdrink.Visible=true; PlaySound(40);}

function drink_coffeeC_OnClick(GUIControl *control, MouseButton button)
{edbanner.NormalGraphic=1176; editem.NormalGraphic=32; gEatdrink.Visible=true; PlaySound(40);}

function drink_coffeeD_OnClick(GUIControl *control, MouseButton button)
{edbanner.NormalGraphic=1176; editem.NormalGraphic=168; gEatdrink.Visible=true; PlaySound(40);}

function drink_Chai_OnClick(GUIControl *control, MouseButton button)
{edbanner.NormalGraphic=1176; editem.NormalGraphic=419; gEatdrink.Visible=true; PlaySound(40);}

function drink_crest_OnClick(GUIControl *control, MouseButton button)
{edbanner.NormalGraphic=1176; editem.NormalGraphic=1264; gEatdrink.Visible=true; PlaySound(40);}

function drink_rinse_OnClick(GUIControl *control, MouseButton button)
{edbanner.NormalGraphic=1176; editem.NormalGraphic=1277; gEatdrink.Visible=true; PlaySound(40);}

function drink_Cocoa_OnClick(GUIControl *control, MouseButton button)
{edbanner.NormalGraphic=1176; editem.NormalGraphic=422; gEatdrink.Visible=true; PlaySound(40);}

function drink_Milk_OnClick(GUIControl *control, MouseButton button)
{edbanner.NormalGraphic=1176; editem.NormalGraphic=413; gEatdrink.Visible=true; PlaySound(40);}

function eat_Bagel_Plain_OnClick(GUIControl *control, MouseButton button)
{edbanner.NormalGraphic=1177; editem.NormalGraphic=1179; gEatdrink.Visible=true; PlaySound(40);}

function eat_hotdog_OnClick(GUIControl *control, MouseButton button)
{edbanner.NormalGraphic=1177; editem.NormalGraphic=5191; gEatdrink.Visible=true; PlaySound(40);}

function drink_americano_OnClick(GUIControl *control, MouseButton button)
{editem.NormalGraphic=1760; edbanner.NormalGraphic=1176; gEatdrink.Visible=true; PlaySound(40);}

function drink_latte_OnClick(GUIControl *control, MouseButton button)
{editem.NormalGraphic=1781; edbanner.NormalGraphic=1176; gEatdrink.Visible=true; PlaySound(40);}

function drink_cappuccino_OnClick(GUIControl *control, MouseButton button)
{editem.NormalGraphic=1769; edbanner.NormalGraphic=1176; gEatdrink.Visible=true; PlaySound(40);}

function drink_chailatte_OnClick(GUIControl *control, MouseButton button)
{editem.NormalGraphic=1772; edbanner.NormalGraphic=1176; gEatdrink.Visible=true; PlaySound(40);}

function drink_mocha_OnClick(GUIControl *control, MouseButton button)
{editem.NormalGraphic=1776; edbanner.NormalGraphic=1176; gEatdrink.Visible=true; PlaySound(40);}

//////////  Drink / Eat-------------Physiology----------------- Drink / Eat------//
function eatdrinkbutton_OnClick(GUIControl *control, MouseButton button){
  CloseAll(); ssanim_char.NormalGraphic=269;

if (editem.NormalGraphic==30){// Coffee A
coffee_a_remaining-=1; gEatdrink.Visible=false; 
caffthresh=(caffthresh / 2); vitality.Width+=(caffthresh);
if (GetGlobalInt(1)==3){Vinnycoffeefreakout();}
PCBigsip_m();}

if (editem.NormalGraphic==31){// Coffee B
coffee_b_remaining-=1; gEatdrink.Visible=false;  
caffthresh=(caffthresh / 2); vitality.Width+=(caffthresh);
if (GetGlobalInt(1)==3){caffeine.Width=110; Vinnycoffeefreakout();}
else {PCBigsip_m();}
}

if (editem.NormalGraphic==32){// Coffee C
coffee_c_remaining-=1; gEatdrink.Visible=false;  
caffthresh=(caffthresh / 2); vitality.Width+=(caffthresh);
if (GetGlobalInt(1)==3){caffeine.Width=110; Vinnycoffeefreakout();}
else {PCBigsip_m();}
}

if (editem.NormalGraphic==168){// Coffee D
coffee_d_remaining-=1; gEatdrink.Visible=false;  nutrition.Width-=3; 
caffthresh=(caffthresh / 2); vitality.Width+=(caffthresh);
if (GetGlobalInt(1)==3){caffeine.Width=110; Vinnycoffeefreakout();}
else {PCBigsip_m();}
}

if (editem.NormalGraphic==419){// Chai
chai_remaining-=1; gEatdrink.Visible=false;  nutrition.Width+=3; 
caffthresh=(caffthresh / 2); vitality.Width+=(caffthresh);
if (GetGlobalInt(1)==3){caffeine.Width=110; CloseAll(); Vinnycoffeefreakout();}
else {PCBigsip_m();}
}

if (editem.NormalGraphic==422){// Cocoa
cocoa_remaining-=1; gEatdrink.Visible=false;  nutrition.Width+=8; vitality.Width+=3;
PCBigsip_m();}

if (editem.NormalGraphic==1760){// Americano
if (upCoffee==("S")){coffee_s_remaining-=1;}
if (upCoffee==("A")){coffee_a_remaining-=1;}
if (upCoffee==("B")){coffee_b_remaining-=1;}
if (upCoffee==("C")){coffee_c_remaining-=1;}
if (upCoffee==("D")){coffee_d_remaining-=1;}
gEatdrink.Visible=false;  
caffthresh=(caffthresh / 2); vitality.Width+=(caffthresh);
if (GetGlobalInt(1)==3){caffeine.Width=110; Vinnycoffeefreakout();}
else {PCBigsip_m();}
}

if (editem.NormalGraphic==1781){// Latte
if (upCoffee==("S")){coffee_s_remaining-=1;}
if (upCoffee==("A")){coffee_a_remaining-=1;}
if (upCoffee==("B")){coffee_b_remaining-=1;}
if (upCoffee==("C")){coffee_c_remaining-=1;}
if (upCoffee==("D")){coffee_d_remaining-=1;}
milk_remaining-=1;
gEatdrink.Visible=false;  
caffthresh=(caffthresh / 2); vitality.Width+=(caffthresh);
if (GetGlobalInt(1)==3){caffeine.Width=110; Vinnycoffeefreakout();}
else {PCBigsip_m();}
}

if (editem.NormalGraphic==1769){// Cappuccino
if (upCoffee==("S")){coffee_s_remaining-=1;}
if (upCoffee==("A")){coffee_a_remaining-=1;}
if (upCoffee==("B")){coffee_b_remaining-=1;}
if (upCoffee==("C")){coffee_c_remaining-=1;}
if (upCoffee==("D")){coffee_d_remaining-=1;}
milk_remaining-=1;
gEatdrink.Visible=false;  
caffthresh=(caffthresh / 2); vitality.Width+=(caffthresh);
if (GetGlobalInt(1)==3){caffeine.Width=110; Vinnycoffeefreakout();}
else {PCBigsip_m();}
}

if (editem.NormalGraphic==1776){// Mocha
if (upCoffee==("S")){coffee_s_remaining-=1;}
if (upCoffee==("A")){coffee_a_remaining-=1;}
if (upCoffee==("B")){coffee_b_remaining-=1;}
if (upCoffee==("C")){coffee_c_remaining-=1;}
if (upCoffee==("D")){coffee_d_remaining-=1;}
milk_remaining-=1; cocoa_remaining-=1;
gEatdrink.Visible=false;  
caffthresh=(caffthresh / 2); vitality.Width+=(caffthresh);
if (GetGlobalInt(1)==3){caffeine.Width=110; Vinnycoffeefreakout();}
else {PCBigsip_m();}
}

if (editem.NormalGraphic==1772){// Chai Latte
milk_remaining-=1; chai_remaining-=1;
gEatdrink.Visible=false;  
caffthresh=(caffthresh / 2); vitality.Width+=(caffthresh);
if (GetGlobalInt(1)==3){caffeine.Width=110; Vinnycoffeefreakout();}
else {PCBigsip_m();}
}

if (editem.NormalGraphic==413){// Milk
if ((GetGlobalInt(1)==2)&&(bd_favfood.Text==("Milk"))){//Picky
gPick.Centre(); close_pick.Visible=false; CloseAll(); PlaySound(60);
pick.NormalGraphic=6108; gPick.Visible=true; pick.Animate(204, 4, 2, eOnce); Wait(80); gPick.Visible=false;}
else{  
milk_remaining-=1; gEatdrink.Visible=false;  nutrition.Width+=10; vitality.Width+=1; fMilk+=1;
PCBigsip_m();}}

if (editem.NormalGraphic==1264){// Crest
crest_remaining-=1; gEatdrink.Visible=false;  nutrition.Width-=2; vitality.Width+=20;
if (GetGlobalInt(1)==3){caffeine.Width=110;}
PCBigsip_m();}

if (editem.NormalGraphic==1277){// Rinse
rinse_remaining-=1; gEatdrink.Visible=false;  vitality.Width+=20; nutrition.Width-=10;
if (GetGlobalInt(1)==3){caffeine.Width=110;}
PCBigsip_m();}

if (editem.NormalGraphic==1179){// Plain Bagel
bagel_plain_remaining-=1; gEatdrink.Visible=false;  vitality.Width+=5; fBagel+=1;
if (nutrition.Width >= 50)nutrition.Width=110; else if (nutrition.Width < 60)nutrition.Width+=50;
PCBigeat_m("Bagel");}

if (editem.NormalGraphic==7061){// Gondola Bar
if ((GetGlobalInt(1)==2)&&(bd_favfood.Text==("Gondola Bars"))){//Picky
gPick.Centre(); close_pick.Visible=false; CloseAll(); PlaySound(60);
pick.NormalGraphic=6108; gPick.Visible=true; pick.Animate(204, 4, 2, eOnce); Wait(80); gPick.Visible=false;}
else{  
granolas_remaining-=1; gEatdrink.Visible=false;  vitality.Width+=5; fBar+=1;
if (nutrition.Width >= 85){nutrition.Width=110;} else {nutrition.Width+=25;}
PCBigeat_m("Gondola Bar");}}

if (editem.NormalGraphic==9623){// Hot Dog Bun
if ((GetGlobalInt(1)==2)&&(bd_favfood.Text==("Hot Dog Bun"))){//Picky
gPick.Centre(); close_pick.Visible=false; CloseAll(); PlaySound(60);
pick.NormalGraphic=6108; gPick.Visible=true; pick.Animate(204, 4, 2, eOnce); Wait(80); gPick.Visible=false;}
else{  
buns_remaining-=1; gEatdrink.Visible=false;  fBun+=1;
if (nutrition.Width >= 100){nutrition.Width=110;} else {nutrition.Width+=10;}
PCBigeat_m("Hot Dog");}}

if (editem.NormalGraphic==9624){// Chili Can
chilli_remaining-=1; gEatdrink.Visible=false;  //fChili+=1;
if (nutrition.Width >= 100){nutrition.Width=110;} else {nutrition.Width+=10;}
PCBigeat_m("Fork");}

   
if (editem.NormalGraphic==160){// Bigwich
if ((GetGlobalInt(1)==2)&&(bd_favfood.Text==("The Bigwich"))){//Picky
gPick.Centre(); close_pick.Visible=false; CloseAll(); PlaySound(60);
pick.NormalGraphic=6108; gPick.Visible=true; pick.Animate(204, 4, 2, eOnce); Wait(80); gPick.Visible=false;}
else{  
cSlot2.LoseInventory(Bigwich); gEatdrink.Visible=false; 
vitality.Width-=10; nutrition.Width=110; fBigwich+=1;
PCBigeat_m("Sandwich");}}

if (editem.NormalGraphic==5191){// Hot Dog Eatin'
if ((buns_remaining==0)||(player.InventoryQuantity[Buns.ID]==0)){TopUp("You need buns!","Can't have a hot dog without a bun!");}
if ((buns_remaining!=0)&&(player.InventoryQuantity[Buns.ID]!=0)){
gEatdrink.Visible=false; vitality.Width-=15;
if (nutrition.Width >= 50)nutrition.Width=110; else if (nutrition.Width < 60)nutrition.Width+=50;
hotdogs_remaining-=1; buns_remaining-=1; fHotDog+=1;
PCBigeat_m("Hot Dog");}}

if (editem.NormalGraphic==159){// Veggie Bigwich
if ((GetGlobalInt(1)==2)&&(bd_favfood.Text==("Veggie Bigwich"))){//Picky
gPick.Centre(); close_pick.Visible=false; CloseAll(); PlaySound(60);
pick.NormalGraphic=6108; gPick.Visible=true; pick.Animate(204, 4, 2, eOnce); Wait(80); gPick.Visible=false;}
else{  
cSlot2.LoseInventory(Bigwichv); gEatdrink.Visible=false;
vitality.Width+=10; nutrition.Width=110; fBigwichV+=1;
PCBigeat_m("Sandwich");}}

if (editem.NormalGraphic==161){// Stale Day Old
cSlot2.LoseInventory(Dayold); gEatdrink.Visible=false;  
triptaphan(20); nutrition.Width+=40; fStale+=1;
PCBigeat_m("Sandwich");}

if (editem.NormalGraphic==4496){// Old Sandwich
cSlot2.LoseInventory(Dayold); gEatdrink.Visible=false;
PCBigeat_m("Sandwich");
triptaphan(110); nutrition.Width=10;}

if (editem.NormalGraphic==4631){// Glemfood
catfood_remaining-=1; pick.NormalGraphic=4608; gPick.Centre(); gPick.Visible=true; close_pick.Visible=false; 
pick.Animate(119, 3, 5, eOnce); Wait(380); gPick.Visible=false;
gEatdrink.Visible=false;  triptaphan(30); nutrition.Width=110;}

////////////////==========// MEDS //========/////////////////////////////////////////
if (editem.NormalGraphic==9654){// Apaptol
apaptol_remaining-=1; gEatdrink.Visible=false;  triptaphan(10); nutrition.Width+=20; PCBigsip_m();
PCBigpill_m((Apaptol.ID));
}

if (editem.NormalGraphic==9645){// Spell: Lemon
spelllemon_remaining-=1; gEatdrink.Visible=false;  nutrition.Width+=5; 
  if(GetGlobalInt(1)==1){if (caffeine.Width>=90){caffeine.Width=110;} else {caffeine.Width+=20;}}
  PCBigpill_m((Spelllemon.ID));
  }

if (editem.NormalGraphic==9646){// Spell: Unflavored
spellunflavor_remaining-=1; gEatdrink.Visible=false;  nutrition.Width+=5;
  if(GetGlobalInt(1)==1){if (caffeine.Width>=90){caffeine.Width=110;} else {caffeine.Width+=20;}}
  PCBigpill_m((Spellunflav.ID));
  }

if (editem.NormalGraphic==9647){// Pain Relief
painrelief_remaining-=1; gEatdrink.Visible=false;  triptaphan(10); nutrition.Width+=20; PCBigpill_m((Painrelief.ID));}

if (editem.NormalGraphic==9648){// Multivitamin
multivitamin_remaining-=1; gEatdrink.Visible=false;  nutrition.Width+=5; vitality.Width+=5; PCBigpill_m((Multivitamin.ID));}

if (editem.NormalGraphic==9649){// Urinary
urinary_remaining-=1; gEatdrink.Visible=false;  triptaphan(10); PCBigpill_m((Urinary.ID));}

if (editem.NormalGraphic==9650){// Gel Caps
gelcaps_remaining-=1; gEatdrink.Visible=false;  triptaphan(10); nutrition.Width+=20; PCBigpill_m((Gelcaps.ID));}

if (editem.NormalGraphic==9651){// Sun Room
sunroom_remaining-=1; gEatdrink.Visible=false;  nutrition.Width+=5; PCBigpill_m((Sunroom.ID));
  caffthresh=(caffthresh / 2); vitality.Width+=(caffthresh);
  if (GetGlobalInt(1)==3){caffeine.Width=110;}}
  
if (editem.NormalGraphic==9652){// Moon Room
moonroom_remaining-=1; gEatdrink.Visible=false;  nutrition.Width+=5; PCBigpill_m((Moonroom.ID));
  if (vitality.Width>=25){vitality.Width-=20;}
  else{vitality.Width=20;}
  }




}

//////////  Fagan's Jokes ------------------------------ Fagan's Jokes------//
function fagansjokes(){
int split=Random(2);
  if (GetGlobalInt(1)==1){//Andrus Drinking
  if (drunkenness<=6){
  if (split==0){
  PCTalk(); customerlisten(); fmu_text.Text=("Ha! Is good, yeah?"); blab2();
  PCListen(); customertalk(); fmu_text.Text=("Like that, huh?"); blab1();
  PCListen(); customerlisten(); fmu_text.Text=(" "); fmu_speaker.Text=(" ");}
  if (split==1){
  PCTalk(); customerlisten(); fmu_text.Text=("Drink is to not the same as in Ukraine."); blab3();
  PCListen(); customertalk(); fmu_text.Text=("So what do you drink there, instead?"); blab2();
  PCTalk(); customerlisten(); fmu_text.Text=("We drink Horilka. Just like Russian Vodka, but is spicy."); blab4();
  PCListen(); customertalk(); fmu_text.Text=("Spicy vodka?"); blab1();
  PCTalk(); customerlisten(); fmu_text.Text=("H'yep. Like your black table pepper."); blab3();
  PCListen(); customertalk(); fmu_text.Text=("Wow."); blab1();
  PCListen(); customertalk(); fmu_text.Text=("You know - I could sprinkle some pepper into a glass of scotch, if you want."); blab4();
  PCTalk(); customerlisten(); fmu_text.Text=("Ha!"); blab1();
  PCListen(); customerlisten(); fmu_text.Text=(" "); fmu_speaker.Text=(" ");}
  if (split==2){
  PCTalk(); customerlisten(); fmu_text.Text=("Is not any good for curing thirst, huh?"); blab3();
  PCListen(); customertalk(); fmu_text.Text=("What do you mean? It just makes you more thirsty?"); blab3();
  PCTalk(); customerlisten(); fmu_text.Text=("You're right. I should drink more to make thirst go away."); blab4();
  PCListen(); customerlisten(); fmu_text.Text=(" "); fmu_speaker.Text=(" ");}
  PCListen(); customertalk(); fmu_text.Text=("Ha!"); blab1();
  PCTalk(); customerlisten(); fmu_text.Text=("Yarr!"); blab1();
  PCListen(); customerlisten(); fmu_text.Text=(" "); fmu_speaker.Text=(" ");}
  else if ((drunkenness>6)&&(drunkenness<=12)){
  if (split==0){
  PCListen(); customertalk(); fmu_text.Text=("Enjoying yourself?"); blab1();
  PCTalk(); customerlisten(); fmu_text.Text=("To be living is to be in horror."); blab2();
  PCListen(); customerlisten(); fmu_text.Text=("..."); fmu_speaker.Text=("Seany: ");blab1();
  fmu_text.Text=(" "); fmu_speaker.Text=(" ");  fmu1.Animate(112, 2, 3, eRepeat); fmu2.Animate(33, 2, 3, eRepeat); blab1();
  PCListen(); customerlisten(); fmu_text.Text=(" "); fmu_speaker.Text=(" ");}
  if (split==1){
  PCListen(); customertalk(); fmu_text.Text=("How's work?"); blab1();
  PCTalk(); customerlisten(); fmu_text.Text=("Appetit prikhodit vo vremya yedy."); blab3();
  PCListen(); customertalk(); fmu_text.Text=("Oh yeah? What's that about?"); blab2();
  PCTalk(); customerlisten(); fmu_text.Text=("Big appetites only come from regular eating."); blab3();
  PCListen(); customerlisten(); fmu_text.Text=("..."); fmu_speaker.Text=("Seany: "); blab1();
  fmu1.Animate(112, 2, 3, eRepeat); fmu2.Animate(33, 2, 3, eRepeat); blab1();
  PCListen(); customerlisten(); fmu_text.Text=(" "); fmu_speaker.Text=(" ");}
  if (split==2){
  PCTalk(); customerlisten(); fmu_text.Text=("Vai na serogo, seryy vsyo svezyot."); blab3();
  PCListen(); customertalk(); fmu1.Animate(112, 2, 3, eRepeat); fmu_text.Text=("Uhh... What?"); blab1();
  PCTalk(); customerlisten(); fmu_text.Text=("I'm the gray horse."); blab1();
  PCListen(); customerlisten(); fmu1.Animate(112, 3, 3, eOnce); fmu_text.Text=("..."); blab2();
  PCListen(); customerlisten(); fmu_text.Text=(" "); fmu_speaker.Text=(" ");}}
  else if (drunkenness>12){
  PCTalk(); customerlisten(); fmu_text.Text=("Yo7u kgnow what is fhnny?"); blab2();
  PCTalk(); customerlisten(); fmu_text.Text=("Tvrday I w5s th%in(king about the reasonable");  blab1();
  PCTalk(); fmu1.Animate(16, 9, 3, eOnce); customerlisten(); fmu2.Animate(33, 4, 3, eRepeat); fmu_text.Text=("B-hork!"); disaster.Animate(130, 0, 0, eOnce); WaitMouseKey(400);
  customertalk(); fmu2.Animate(33, 5, 2, eRepeat); fmu_text.Text=("Oh, Damnit!"); blab1();
  customertalk(); fmu2.Animate(33, 5, 2, eRepeat); fmu_text.Text=("God, Damnit!"); blab1();
  customerlisten(); fmu_text.Text=(" "); fmu_speaker.Text=(" ");
  expenselist.AddItem("25.00 - Taxi Fare");
  FadeOut(5); Money-=25.00; gFaganMenu.Visible=false; mouse.Visible=false; 
  sleep();
  }
}


  if (GetGlobalInt(1)==2){//Melanie Drinks
  if (drunkenness<=3){
  if (split==0){
  PCTalk(); customerlisten(); fmu_text.Text=("Phew!"); blab1();
  PCListen(); customertalk(); fmu_text.Text=("You alright?"); blab1();
  PCTalk(); customerlisten(); fmu_text.Text=("...alcohol, huh? Sheesh."); blab2();
  PCListen(); customerlisten(); fmu_text.Text=(" "); fmu_speaker.Text=(" ");}
  if (split==1){
  PCTalk(); customerlisten(); fmu_text.Text=("Wow!"); blab1();
  PCListen(); customerlisten(); fmu_text.Text=("..."); fmu_speaker.Text=("Seany: "); blab1(); //Blank Stare
  PCListen(); customertalk(); fmu_text.Text=("You okay?"); blab1();
  PCTalk(); customerlisten(); fmu_text.Text=("Yeah! I just... don't really drink that often."); blab3();
  PCListen(); customerlisten(); fmu_text.Text=(" "); fmu_speaker.Text=(" ");}
  if (split==2){
  PCTalk(); customerlisten(); fmu_text.Text=("These are good!"); blab1();
  PCListen(); customertalk(); fmu_text.Text=("I only stock the best, kiddo."); blab2();
  PCListen(); customerlisten(); fmu_text.Text=(" "); fmu_speaker.Text=(" ");}
}
  if ((drunkenness>3)&&(drunkenness<8)){
  if (split==0){
  PCTalk(); customerlisten();  fmu_text.Text=("I'm gonna startafrlrblr..."); blab1();
  PCListen(); customertalk(); fmu_text.Text=("What was that?"); blab1();
  PCListen(); customerlisten(); fmu_text.Text=("...!"); fmu_speaker.Text=("Melanie: "); fmu1.Animate(24, 6, 3, eRepeat); blab1();//Mel: "!!!"
  fmu1.Animate(24, 5, 3, eRepeat); customerlisten(); fmu_text.Text=("Pfff! Hahahaha!"); fmu_speaker.Text=("Melanie: "); blab1();
  fmu1.Animate(24, 5, 3, eRepeat); customertalk();  fmu_text.Text=("Had enough, yet?"); blab1();
  PCListen(); customerlisten(); fmu_text.Text=(" "); fmu_speaker.Text=(" ");}
  if (split==1){  
  PCTalk(); customerlisten();  fmu_text.Text=("What is your life like?"); blab2();
  PCListen(); customertalk(); fmu_text.Text=("What do you mean?"); blab1();
  PCTalk(); customerlisten();  fmu_text.Text=("Well, I just mean..."); blab1();
  PCTalk(); customerlisten();  fmu_text.Text=("You know, like I don't know you about anything."); blab2();
  PCTalk(); customerlisten(); fmu_text.Text=("Oh, wait. I mean..."); blab1();
  PCTalk(); customerlisten(); fmu_text.Text=("know about your anything... your anything about your..."); blab3();
  PCListen(); customerlisten(); fmu_text.Text=("...!"); fmu_speaker.Text=("Melanie: "); fmu1.Animate(24, 6, 3, eRepeat); blab1();//Mel: "!!!"
  fmu1.Animate(24, 5, 3, eRepeat); customerlisten(); fmu_text.Text=("Pfff!"); fmu_speaker.Text=("Melanie: "); blab1();
  fmu1.Animate(24, 5, 3, eRepeat); customertalk();  fmu_text.Text=("Oh, boy."); blab1();
  PCListen(); customerlisten(); fmu_text.Text=(" "); fmu_speaker.Text=(" ");}
  if (split==2){
  PCListen(); customertalk(); fmu_text.Text=("Maybe you should slow down, lady."); blab2();
  PCTalk(); customerlisten(); fmu_text.Text=("Why should I be the one'd should slown dow?"); blab3();
    PCTalk(); customerlisten(); fmu_text.Text=("I mean dowse loans.. sled..."); blab2();
  PCListen(); customerlisten(); fmu_text.Text=("...!"); fmu_speaker.Text=("Melanie: "); fmu1.Animate(24, 6, 3, eRepeat); blab1();//Mel: "!!!"
  fmu1.Animate(24, 5, 3, eRepeat); customerlisten(); fmu_text.Text=("Pfff!"); fmu_speaker.Text=("Melanie: "); blab1();
  fmu1.Animate(24, 5, 3, eRepeat); customertalk();  fmu_text.Text=("Alright... Okay, okay..."); blab1();
  PCListen(); customerlisten(); fmu_text.Text=(" "); fmu_speaker.Text=(" ");}}
  else if (drunkenness>=8){
  PCTalk(); customerlisten(); fmu_text.Text=("You said something."); blab1();
  PCListen(); customertalk(); fmu_text.Text=("I did? What'd I say?"); blab2();
  PCTalk(); customerlisten(); fmu_text.Text=("You were saying that I could"); WaitMouseKey(50);
  PCTalk(); fmu1.Animate(24, 7, 3, eOnce); customerlisten(); fmu2.Animate(33, 4, 3, eRepeat); fmu_text.Text=("B-hork!"); disaster.Animate(130, 0, 0, eOnce); WaitMouseKey(400);
  customertalk(); fmu2.Animate(33, 5, 2, eRepeat); fmu_text.Text=("Oh, Damnit!"); blab1();
  customertalk(); fmu2.Animate(33, 5, 2, eRepeat); fmu_text.Text=("God, Damnit!"); blab1();
  customerlisten(); fmu_text.Text=(" "); fmu_speaker.Text=(" ");
  FadeOut(5); Money-=25.00; gFaganMenu.Visible=false; mouse.Visible=false; 
  expenselist.AddItem("25.00 - Taxi Fare");
  sleep();}
}

  if (GetGlobalInt(1)==3){//Vinny's Drinking.
  if (drunkenness<=3){
  if (split==0){
  PCTalk(); customerlisten(); fmu_text.Text=("Boosh."); blab1();
  PCListen(); customertalk(); fmu_text.Text=("Boosh?"); blab1();
  PCTalk(); customerlisten(); fmu_text.Text=("Yeah. Boosh."); blab1();
  PCTalk(); customerlisten(); fmu_text.Text=("It's the verbal expression of alcohol-induced relaxation."); blab4();
  PCListen(); customertalk(); fmu_text.Text=("Oh."); blab1();
  PCListen(); customertalk(); fmu_text.Text=("That's a new one."); blab1();
  PCListen(); customerlisten(); fmu_text.Text=(" "); fmu_speaker.Text=(" ");}
  if (split==1){
  PCTalk(); customerlisten(); fmu_text.Text=("How's the bar, O'Fagan?"); blab2();
  PCListen(); customertalk(); fmu_text.Text=("Ah, ya know."); blab1();
  PCListen(); customertalk(); fmu_text.Text=("Can't complain. "); blab1();
  PCTalk(); customerlisten(); fmu_text.Text=("...you can't complain?"); blab2();
  PCListen(); customerlisten(); fmu_text.Text=("..."); fmu_speaker.Text=("Seany: "); blab1(); //Blank Stare
  PCTalk(); customerlisten(); fmu_text.Text=("Of course you can complain!"); blab2();
  PCTalk(); customerlisten(); fmu_text.Text=("There's always plenty to complain about!"); blab3();
  PCListen(); customertalk(); fmu_text.Text=("Oh yeah? How's that?"); blab2();
  PCTalk(); customerlisten(); fmu_text.Text=("What about our cultural treatment of plastic flatware?"); blab4();
  PCListen(); customerlisten(); fmu_text.Text=("..."); fmu_speaker.Text=("Seany: "); blab1(); //Blank Stare
  PCTalk(); customerlisten(); fmu_text.Text=("Modern Society has developed incredibly complex synthetic materials."); blab5();
  PCTalk(); customerlisten(); fmu_text.Text=("We form them into forks and spoons, and ship them all over the world."); blab5();
  PCListen(); customerlisten(); fmu_text.Text=("..."); fmu_speaker.Text=("Seany: "); blab1(); //Blank Stare
  PCTalk(); customerlisten(); fmu_text.Text=("I'm just saying... Think about how much work goes into making a plastic fork."); blab5();
  PCTalk(); customerlisten(); fmu_text.Text=("And yet we consider it to be unworthy of the effort to wash for repeated use."); blab5();
  PCListen(); customerlisten(); fmu_text.Text=("..."); fmu_speaker.Text=("Seany: "); blab1(); //Blank Stare
  PCListen(); customertalk(); fmu_text.Text=("Touche'."); blab1();
  PCTalk(); customerlisten(); fmu_text.Text=("See? There's always something worth criticizing."); blab4();
  PCListen(); customertalk(); fmu_text.Text=("Makes sense."); blab1();
  PCListen(); customertalk(); fmu_text.Text=("But wouldn't they melt, in the dishwasher?"); blab4();
  PCListen(); customerlisten(); fmu_text.Text=("..."); fmu_speaker.Text=("Vinny: "); blab1(); //Blank Stare
  PCTalk(); customerlisten(); fmu_text.Text=("Touche'.."); blab1();
  PCListen(); customerlisten(); fmu_text.Text=(" "); fmu_speaker.Text=(" ");}
  if (split==2){
  PCTalk(); customerlisten(); fmu_text.Text=("Thanks for the drink."); blab1();
  PCListen(); customertalk(); fmu_text.Text=("Thanks for your money."); blab1();
  PCListen(); customerlisten(); fmu_text.Text=("..."); fmu_speaker.Text=("Vinny: "); blab1(); //Blank Stare
  PCTalk(); customerlisten(); fmu_text.Text=("We're all doing our part."); blab2();
  PCListen(); customertalk(); fmu_text.Text=("Get you another drink?"); blab2();
  PCListen(); customerlisten(); fmu_text.Text=(" "); fmu_speaker.Text=(" ");}}
  else if ((drunkenness>3)&&(drunkenness<10)){
  if (split==0){
  PCListen(); customertalk(); fmu_text.Text=("Enjoying yourself?"); blab1();
  PCTalk(); customerlisten(); fmu_text.Text=("Yeah, I was just thinking about cabinetry."); blab4();
  PCListen(); customerlisten(); fmu_text.Text=("..."); fmu_speaker.Text=("Vinny: "); blab1(); //Blank Stare
  PCListen(); customertalk(); fmu_text.Text=("Like carpenters who make cabinets?"); blab3();
  PCTalk(); customerlisten(); fmu_text.Text=("Yeah."); blab1();
  PCTalk(); customerlisten(); fmu_text.Text=("Sometimes I just wonder why we're concealing our food and plateware."); blab4();
  PCListen(); customertalk(); fmu_text.Text=("Well, I always thought cabinets kept out rats and spiders."); blab4();
  PCTalk(); customerlisten(); fmu_text.Text=("Yeah, I guess."); blab2();
  PCTalk(); customerlisten(); fmu_text.Text=("But when I drink, I get the inclination that it's part of civility."); blab4();
  PCTalk(); customerlisten(); fmu_text.Text=("Sanity and sanitation. That kind of thing. Psychological cleanliness."); blab5();
  PCListen(); customerlisten(); fmu_text.Text=("..."); fmu_speaker.Text=("Vinny: "); blab1(); //Blank Stare
  PCListen(); customertalk(); fmu_text.Text=("'nother drink?"); blab1();
  PCListen(); customerlisten(); fmu_text.Text=(" "); fmu_speaker.Text=(" ");}
  if (split==1){
  PCListen(); customertalk(); fmu_text.Text=("Tell me a joke."); blab2();
  PCListen(); customerlisten(); fmu_text.Text=(" "); fmu_speaker.Text=(" ");
  vinny_jokes.Start();}

  if (split==2){
  PCTalk(); customerlisten(); fmu_text.Text=("..."); blab1();
  PCListen(); customertalk(); fmu_text.Text=("How you holding up?"); blab1();
  PCTalk(); customerlisten(); fmu_text.Text=("I'm good.."); blab1();
  PCListen(); customerlisten(); fmu_text.Text=(" "); fmu_speaker.Text=(" ");}}
  
  else if (drunkenness>=10){
  PCTalk(); customerlisten(); fmu_text.Text=("Who's thhhe, uhh..."); blab1();
  PCTalk(); customerlisten(); fmu_text.Text=("Whho is the ic4on of your dbesire?"); blab3();
  PCListen(); customertalk(); fmu_text.Text=("What?"); blab1();
  PCTalk(); customerlisten(); fmu_text.Text=("Thhe Icon od desire bing the The visual re/resentation  9f –erfce\ct femaile o\pn? .l "); blab4();
  PCTalk(); fmu1.Animate(25, 9, 3, eOnce); customerlisten(); fmu2.Animate(33, 4, 3, eRepeat); fmu_text.Text=("B-hork!"); disaster.Animate(130, 0, 0, eOnce); WaitMouseKey(400);
  customertalk(); fmu2.Animate(33, 5, 2, eRepeat); fmu_text.Text=("Oh, Damnit!"); blab1();
  customertalk(); fmu2.Animate(33, 5, 2, eRepeat); fmu_text.Text=("God, Damnit!"); blab1();
  customerlisten(); fmu_text.Text=(" "); fmu_speaker.Text=(" ");
  FadeOut(5); Money-=25.00; gFaganMenu.Visible=false; mouse.Visible=false; 
  expenselist.AddItem("25.00 - Taxi Fare");
  sleep();}
}
  
  
  if (GetGlobalInt(1)==4){//Logan Drinkin'.
  if (drunkenness<8){
  PCListen(); customertalk(); fmu_text.Text=("Ha!"); blab1();
  PCTalk(); customerlisten(); fmu_text.Text=("Yarr!"); blab1();
  PCListen(); customerlisten(); fmu_text.Text=(" "); fmu_speaker.Text=(" ");}
  else if (drunkenness>=8){
  PCTalk(); customerlisten(); fmu_text.Text=("That'n will have been my last'n."); blab3();
  PCListen(); customertalk(); fmu_text.Text=("All set?"); blab1();
  PCTalk(); customerlisten(); fmu_text.Text=("Yeah, I'm not feeling too good, just now. "); WaitMouseKey(80);
  PCTalk(); fmu1.Animate(17, 6, 3, eOnce); customerlisten(); fmu2.Animate(33, 4, 3, eRepeat); fmu_text.Text=("B-hork!"); disaster.Animate(130, 0, 0, eOnce); WaitMouseKey(400);
  customertalk(); fmu2.Animate(33, 5, 2, eRepeat); fmu_text.Text=("Oh, Damnit!"); blab1();
  customertalk(); fmu2.Animate(33, 5, 2, eRepeat); fmu_text.Text=("God, Damnit!"); blab1();
  customerlisten(); fmu_text.Text=(" "); fmu_speaker.Text=(" ");
  FadeOut(5); Money-=25.00; gFaganMenu.Visible=false; mouse.Visible=false; 
  expenselist.AddItem("25.00 - Taxi Fare");
  sleep();}}
}



//////////  BUY Food or Drink ------------------------------ BUY Food or Drink ------//
function menu_item_1_OnClick(GUIControl *control, MouseButton button){PlaySound(41);
  if (menu_item_1.NormalGraphic==1840)//Beer
{  if (Money>=2.00){
if (GetGlobalInt(1)==1){PCTalk(); fmu_text.Text=("I'll have beer, please."); blab2();}
if (GetGlobalInt(1)==2){PCTalk(); fmu_text.Text=("One beer, I think."); blab1();}
if (GetGlobalInt(1)==3){PCTalk(); fmu_text.Text=("A beer, sir."); blab1();}
if (GetGlobalInt(1)==4){PCTalk(); fmu_text.Text=("How 'bout a beer?"); blab1();}
PCListen(); customertalk(); fmu_text.Text=("One beer - comin' up!");blab1();
customerlisten(); fmu_text.Text=(" "); fmu_speaker.Text=(" ");
fmu2.Animate(33, 3, 3, eOnce); PCBigsip_m(); 
Money-=2.00; PlaySound(4); expense_misc+=2.00;
expenselist.AddItem("2.00 - Beer at Seanny O'Fagan's");
TopUp("Bought Beer", "Spent $2.00!"); vitality.Width-=10; drunkenness+=1; fagansjokes();}
else if (Money < 2.00){PlaySound(60); Insufficiency();nutrition.Width+=10; vitality.Width -=10;}}

  if (menu_item_1.NormalGraphic==1857)//Pizza
{  
int faithresp=Random(3);
if ((pizzasbought==3)&&(GetGlobalInt(422)==0)){//Aren't you worried about cholesterol?
if (GetGlobalInt(1)==1){PCTalk(); fmu_text.Text=("Good. Okay - Pizza."); blab1();}
if (GetGlobalInt(1)==2){PCTalk(); fmu_text.Text=("I'll have a slice of pizza, I think."); blab3();}
if (GetGlobalInt(1)==3){PCTalk(); fmu_text.Text=("Another slice, please!"); blab1();}
if (GetGlobalInt(1)==4){PCTalk(); customerlisten(); fmu_text.Text=("Get me a slice of pizza."); blab1();}
PCListen(); customertalk(); fmu_text.Text=("I'm sorry... But I have to ask."); blab3();
PCListen(); customertalk(); fmu_text.Text=("No offense, but aren't you concerned about cholesterol?"); blab4();
if (GetGlobalInt(1)==1){customerlisten(); PCTalk(); fmu_text.Text=("Umm... What? ...Who?"); blab3();}
if (GetGlobalInt(1)==2){customerlisten(); PCTalk(); fmu_text.Text=("Uhhh....."); blab1();}
if (GetGlobalInt(1)==3){customerlisten(); PCTalk(); fmu_text.Text=("...Mine? Or everybody's?"); blab2();}
if (GetGlobalInt(1)==4){customerlisten(); PCTalk(); customerlisten(); fmu_text.Text=("What?"); blab1();}
PCListen(); customertalk(); fmu_text.Text=("Well, diet is only part of the equation."); blab4();
PCListen(); customertalk(); fmu_text.Text=("But high cholesterol can lead to atherosclerosis."); blab4();
PCListen(); customertalk(); fmu_text.Text=(" "); fmu_speaker.Text=(" "); dFaith_0.Start();}
else {
if (GetGlobalInt(422)==10){//FREE PIZZA!
if ((GetGlobalInt(1)==2)&&(bd_favfood.Text==("Pizza"))){//Picky
gPick.Centre(); close_pick.Visible=false; CloseAll(); PlaySound(60);
pick.NormalGraphic=6108; gPick.Visible=true; pick.Animate(204, 4, 2, eOnce); Wait(80); gPick.Visible=false;}
else{
  
if (GetGlobalInt(1)==1){//Andrus
if (faithresp==0){
PCTalk(); fmu_text.Text=("Pizza?"); blab1();
PCListen(); customertalk(); fmu_text.Text=("Sure!"); blab1();}
else if (faithresp==1){
PCTalk(); fmu_text.Text=("That pizza, please."); blab2();
PCListen(); customertalk(); fmu_text.Text=("Sure, ok."); blab1();}
else if (faithresp==2){
PCTalk(); fmu_text.Text=("Good. Okay - Pizza."); blab2();
PCListen(); customertalk(); fmu_text.Text=("Yeah."); blab1();}
else if (faithresp==3){
PCTalk(); fmu_text.Text=("Good. Okay - Pizza."); blab2();
PCListen(); customertalk(); fmu_text.Text=("Yeah, I'll get it."); blab2();}}

if (GetGlobalInt(1)==2){//Melanie
if (faithresp==0){
PCTalk(); fmu_text.Text=("I'll have a slice of pizza, I think."); blab3();
PCListen(); customertalk(); fmu_text.Text=("Right away, ma'am."); blab2();}
else if (faithresp==1){
PCTalk(); fmu_text.Text=("I'd like a slice of pizza."); blab2();
PCListen(); customertalk(); fmu_text.Text=("Whatever you want."); blab1();}
else if (faithresp==2){
PCTalk(); fmu_text.Text=("How about a piece of pizza?"); blab2();
PCListen(); customertalk(); fmu_text.Text=("Yeah."); blab1();}
else if (faithresp==3){
PCTalk(); fmu_text.Text=("That pizza's pretty good."); blab2();
PCTalk(); fmu_text.Text=("I'll have one more slice."); blab2();
PCListen(); customertalk(); fmu_text.Text=("Yeah, I'll get it."); blab2();}}
  
if (GetGlobalInt(1)==3){
if (faithresp==0){
PCTalk(); fmu_text.Text=("How's the pizza, today?"); blab1();
PCListen(); customertalk(); fmu_text.Text=("Same as always!"); blab1();
PCTalk(); customerlisten(); fmu_text.Text=("Then I'll have me a slice."); blab2();
PCListen(); customertalk(); fmu_text.Text=("Sure."); blab1();}
else if (faithresp==1){
PCTalk(); fmu_text.Text=("I'd like a slice of pizza."); blab2();
PCListen(); customertalk(); fmu_text.Text=("Whatever you want."); blab1();}
else if (faithresp==2){
PCTalk(); fmu_text.Text=("Does your pizza also come in equilateral, or just isosceles?"); blab4();
PCListen(); customertalk(); fmu_text.Text=("Just isosceles."); blab2();
PCTalk(); customerlisten(); fmu_text.Text=("I'm sure it tastes the same, either way."); blab3();
PCListen(); customertalk(); fmu_text.Text=("Probably."); blab1();}
else if (faithresp==3){
PCTalk(); fmu_text.Text=("So... What of pizza?"); blab2();
PCListen(); customertalk(); fmu_text.Text=("Yeah, I'll get it."); blab2();}}

if (GetGlobalInt(1)==4){PCTalk(); customerlisten(); fmu_text.Text=("Get me a slice of pizza."); blab1();
                        PCListen(); customertalk(); fmu_text.Text=("Sure."); blab1();}
customerlisten(); PCListen(); fmu_text.Text=(" "); fmu_speaker.Text=(" ");
fmu2.Animate(96, 2, 3, eOnce); PCBigeat_m("Pizza"); 
  TopUp("Got Pizza", "Got Pizza!"); vitality.Width-=7; pizzasbought+=1; fPizza+=1;
if (nutrition.Width >= 50)nutrition.Width=110; else if (nutrition.Width < 60)nutrition.Width+=50;
PCListen(); customertalk(); fmu_text.Text=("No charge!"); blab1();
PCTalk(); customerlisten(); fmu_text.Text=("Thanks!"); blab1();
PCListen(); customerlisten(); fmu_text.Text=(" "); fmu_speaker.Text=(" ");}}

else if (Money>=2.49){//PAY PIZZA!
if ((GetGlobalInt(1)==2)&&(bd_favfood.Text==("Pizza"))){//Picky
gPick.Centre(); close_pick.Visible=false; CloseAll(); PlaySound(60);
pick.NormalGraphic=6108; gPick.Visible=true; pick.Animate(204, 4, 2, eOnce); Wait(80); gPick.Visible=false;}
else{
  
if (GetGlobalInt(1)==1){
if (faithresp==0){
PCTalk(); fmu_text.Text=("Pizza?"); blab1();
PCListen(); customertalk(); fmu_text.Text=("Sure!"); blab1();}
else if (faithresp==1){
PCTalk(); fmu_text.Text=("That pizza, please."); blab2();
PCListen(); customertalk(); fmu_text.Text=("Right away, sir!"); blab1();}
else if (faithresp==2){
PCTalk(); fmu_text.Text=("Good. Okay - Pizza."); blab2();
PCListen(); customertalk(); fmu_text.Text=("Yes, sir!"); blab1();}
else if (faithresp==3){
PCTalk(); fmu_text.Text=("Good. Okay - Pizza."); blab2();
PCListen(); customertalk(); fmu_text.Text=("Of course!"); blab2();}}

if (GetGlobalInt(1)==2){
if (faithresp==0){
PCTalk(); fmu_text.Text=("I'll have a slice of pizza, I think."); blab3();
PCListen(); customertalk(); fmu_text.Text=("Right away, ma'am!"); blab2();}
else if (faithresp==1){
PCTalk(); fmu_text.Text=("I'd like a slice of pizza."); blab2();
PCListen(); customertalk(); fmu_text.Text=("Whatever you'd like!"); blab1();}
else if (faithresp==2){
PCTalk(); fmu_text.Text=("How about a piece of pizza?"); blab2();
PCListen(); customertalk(); fmu_text.Text=("Sure!"); blab1();}
else if (faithresp==3){
PCTalk(); fmu_text.Text=("That pizza's pretty good."); blab2();
PCTalk(); fmu_text.Text=("I'll have one more slice."); blab2();
PCListen(); customertalk(); fmu_text.Text=("Right away!"); blab2();}}

if (GetGlobalInt(1)==3){
if (faithresp==0){
PCTalk(); fmu_text.Text=("How's the pizza, today?"); blab1();
PCListen(); customertalk(); fmu_text.Text=("Same as always!"); blab1();
PCTalk(); customerlisten(); fmu_text.Text=("Then I'll have me a slice."); blab2();
PCListen(); customertalk(); fmu_text.Text=("Right away!"); blab1();}
else if (faithresp==1){
PCTalk(); fmu_text.Text=("I'd like a slice of pizza."); blab2();
PCListen(); customertalk(); fmu_text.Text=("Whatever you like!"); blab1();}
else if (faithresp==2){
PCTalk(); fmu_text.Text=("Does your pizza also come in equilateral, or just isosceles?"); blab4();
PCListen(); customertalk(); fmu_text.Text=("huh?"); blab1();
PCTalk(); customerlisten(); fmu_text.Text=("Nevermind... I'm sure it tastes the same, either way."); blab4();
PCListen(); customertalk(); fmu_text.Text=("Whatever you say, sir!"); blab2();}
else if (faithresp==3){
PCTalk(); fmu_text.Text=("So... What of pizza?"); blab2();
PCListen(); customertalk(); fmu_text.Text=("Anything you'd like, sir!"); blab2();}}
  
if (GetGlobalInt(1)==4){PCTalk(); customerlisten(); fmu_text.Text=("Get me a slice of pizza."); blab2();
                        PCListen(); customertalk(); fmu_text.Text=("Whatever you like, sir."); blab2();}
customerlisten(); PCListen(); fmu_text.Text=(" "); fmu_speaker.Text=(" ");
fmu2.Animate(96, 2, 3, eOnce); PCBigeat_m("Pizza"); 
  Money-=2.49; PlaySound(4); expense_misc+=2.49;
  expenselist.AddItem("2.49 - Pizza");
  TopUp("Got Pizza", "Spent $2.49!"); vitality.Width-=7; pizzasbought+=1; fPizza+=1;
if (nutrition.Width >= 50)nutrition.Width=110; else if (nutrition.Width < 60)nutrition.Width+=50;}}

else if (Money < 2.49){Insufficiency();}}}

  if (menu_item_1.NormalGraphic==2054)//Comics
{
if (GetGlobalInt(1)==1){customerlisten(); PCTalk(); fmu_text.Text=("Hmm... Tell me about the comics."); blab3();
                        PCListen(); customertalk(); fmu_text.Text=("Sure, we've got a few..."); blab2();}
if (GetGlobalInt(1)==2){customerlisten(); PCTalk(); fmu_text.Text=("Maybe you can help me out - "); blab2();
                        PCListen(); customertalk(); fmu_text.Text=("I'll do my best."); blab1();
                        PCTalk(); customerlisten(); fmu_text.Text=("I don't know anything about comic books."); blab3();}
if (GetGlobalInt(1)==3){customerlisten(); PCTalk(); fmu_text.Text=("Do you carry comic books?"); blab2();
                        PCListen(); customertalk(); fmu_text.Text=("Yes, sir!"); blab1();}
if (GetGlobalInt(1)==4){PCTalk(); customerlisten(); fmu_text.Text=("You got comics?"); blab1();}

PCListen(); customertalk(); fmu_text.Text=("Was there something you were looking for specifically?"); blab4();
customerlisten(); PCListen(); fmu_text.Text=(" "); fmu_speaker.Text=(" ");
gComics.BackgroundGraphic=5070; comics_inv.CharacterToUse=Marcus;
gComics.Visible=true;}

}

function menu_item_2_OnClick(GUIControl *control, MouseButton button){PlaySound(41);
if (menu_item_2.NormalGraphic==1841)//Scotch
{  if (Money>=5.00){
if (GetGlobalInt(1)==1){PCTalk(); fmu_text.Text=("Yes - Scotch to drink, please."); blab2();}
if (GetGlobalInt(1)==2){PCTalk(); fmu_text.Text=("I'll have a scotch, I think."); blab2();}
if (GetGlobalInt(1)==3){PCTalk(); fmu_text.Text=("One scotch, please."); blab2();}
if (GetGlobalInt(1)==4){PCTalk(); fmu_text.Text=("Make it a scotch, Seany."); blab2();}
PCListen(); customertalk(); fmu_text.Text=("One scotch - comin' up!");blab2();
customerlisten(); fmu_text.Text=(" "); fmu_speaker.Text=(" ");
fmu2.Animate(33, 3, 3, eOnce); PCBigsip_m(); 
  Money-=5.00; PlaySound(4); expense_misc+=5.00;
  expenselist.AddItem("5.00 - Scotch at Seanny O'Fagan's");
  TopUp("Bought Scotch", "Spent $5.00!"); vitality.Width-=15; drunkenness+=2; fagansjokes();}
else if (Money < 5.00){Insufficiency();}}

if (menu_item_2.NormalGraphic==1859)//Salad
{  
if (GetGlobalInt(422)==10){//FREE SALAD!
if ((GetGlobalInt(1)==2)&&(bd_favfood.Text==("Salad"))){//Picky
gPick.Centre(); close_pick.Visible=false; CloseAll(); PlaySound(60);
pick.NormalGraphic=6108; gPick.Visible=true; pick.Animate(204, 4, 2, eOnce); Wait(80); gPick.Visible=false;}
else{  

if (GetGlobalInt(1)==1){PCTalk(); fmu_text.Text=("Yes - Salad to have, please."); blab3();
                        PCListen(); customertalk(); fmu_text.Text=("Whatever you like, sir."); blab2();}
if (GetGlobalInt(1)==2){PCTalk(); fmu_text.Text=("I'll have a salad, I think."); blab2();
                        PCListen(); customertalk(); fmu_text.Text=("Right away, ma'am."); blab2();}
if (GetGlobalInt(1)==3){PCTalk(); fmu_text.Text=("One salad, please."); blab2();
                        PCListen(); customertalk(); fmu_text.Text=("Sure! Right away!"); blab2();}
if (GetGlobalInt(1)==4){PCTalk(); fmu_text.Text=("Oh, jeez."); blab1();
                        PCTalk(); fmu_text.Text=("I guess I'll have a salad."); blab2();
                        PCTalk(); fmu_text.Text=("I mean... I guess."); blab2();
                        PCListen(); fmu_speaker.Text=("Logan: "); fmu_text.Text=("..."); blab1();
                        PCListen(); customertalk(); fmu_text.Text=("Salad, then?"); blab1();
                        PCTalk(); customerlisten(); fmu_text.Text=("Yeah, fine."); blab1();
                        PCListen(); fmu_speaker.Text=("Logan: "); fmu_text.Text=("..."); blab1();
                        PCListen(); customertalk(); fmu_text.Text=("You don't have to get the salad, if you don't want it."); blab3();
                        PCTalk(); customerlisten(); fmu_text.Text=("Just get the damn salad, please?"); blab2();
                        PCListen(); customertalk(); fmu_text.Text=("Whatever you like, sir."); blab1();}
customerlisten(); PCListen(); fmu_text.Text=(" "); fmu_speaker.Text=(" ");
fmu2.Animate(96, 2, 3, eOnce); PCBigeat_m("Fork"); 
  TopUp("Got Salad", "Got Salad!"); vitality.Width+=7; fSalad+=1;
if (nutrition.Width >= 50)nutrition.Width=110; else if (nutrition.Width < 60)nutrition.Width+=50;
PCListen(); customertalk(); fmu_text.Text=("No charge!"); blab1();
PCTalk(); customerlisten(); fmu_text.Text=("Thanks!"); blab1();
PCListen(); customerlisten(); fmu_text.Text=(" "); fmu_speaker.Text=(" ");}}
else if (Money>=3.49){//Pay Salad
if ((GetGlobalInt(1)==2)&&(bd_favfood.Text==("Salad"))){//Picky
gPick.Centre(); close_pick.Visible=false; CloseAll(); PlaySound(60);
pick.NormalGraphic=6108; gPick.Visible=true; pick.Animate(204, 4, 2, eOnce); Wait(80); gPick.Visible=false;}
else{  
if (GetGlobalInt(1)==1){PCTalk(); fmu_text.Text=("Yes - Salad to have, please."); blab2();
                        PCListen(); customertalk(); fmu_text.Text=("Whatever you like, sir."); blab2();}
if (GetGlobalInt(1)==2){PCTalk(); fmu_text.Text=("I'll have a salad, I think."); blab2();
                        PCListen(); customertalk(); fmu_text.Text=("Right away, ma'am."); blab1();}
if (GetGlobalInt(1)==3){PCTalk(); fmu_text.Text=("One salad, please."); blab1();
                        PCListen(); customertalk(); fmu_text.Text=("Sure! Right away!"); blab1();}
if (GetGlobalInt(1)==4){PCTalk(); fmu_text.Text=("Oh, jeez."); blab1();
                        PCTalk(); fmu_text.Text=("I guess I'll have a salad."); blab2();
                        PCTalk(); fmu_text.Text=("I mean... I guess."); blab1();
                        PCListen(); fmu_speaker.Text=("Logan: "); fmu_text.Text=("..."); blab1();
                        PCListen(); customertalk(); fmu_text.Text=("Salad, then?"); blab1();
                        PCTalk(); customerlisten(); fmu_text.Text=("Yeah, fine."); blab1();
                        PCListen(); fmu_speaker.Text=("Logan: "); fmu_text.Text=("..."); blab1();
                        PCListen(); customertalk(); fmu_text.Text=("You don't have to get the salad, if you don't want it."); blab3();
                        PCTalk(); customerlisten(); fmu_text.Text=("Just get the damn salad, please?"); blab2();
                        PCListen(); customertalk(); fmu_text.Text=("Whatever you like, sir."); blab1();}
customerlisten(); PCListen(); fmu_text.Text=(" "); fmu_speaker.Text=(" ");
fmu2.Animate(96, 2, 3, eOnce); PCBigeat_m("Fork"); 
  Money-=3.49; PlaySound(4); expense_misc+=3.49;
  expenselist.AddItem("3.49 - Salad");
  TopUp("Got Salad", "Spent $3.49!"); vitality.Width+=7; fSalad+=1;
if (nutrition.Width >= 50)nutrition.Width=110; else if (nutrition.Width < 60)nutrition.Width+=50;}}
else if (Money < 3.49){Insufficiency();}}

  if (menu_item_2.NormalGraphic==2056)//Fiction
{
if (GetGlobalInt(1)==1){PCTalk(); fmu_text.Text=("Is fiction called, umm..."); blab1();
                        PCTalk(); fmu_text.Text=("It's to called fiction? You've got any?"); blab3();
                        PCListen(); customertalk(); fmu_text.Text=("Sure, we've got some great new fiction in stock.."); blab4();}
if (GetGlobalInt(1)==2){PCTalk(); fmu_text.Text=("Can you show me your fiction?"); blab2();
                        PCListen(); customertalk(); fmu_text.Text=("Sure, we've got some great new fiction in stock.."); blab4();}
if (GetGlobalInt(1)==3){PCTalk(); fmu_text.Text=("What've you got in the way of fictional material?"); blab3();
                        PCListen(); customertalk(); fmu_text.Text=("Sure, we've got some great new fiction in stock.."); blab4();}
if (GetGlobalInt(1)==4){PCTalk(); customerlisten(); fmu_text.Text=("Where's the fiction at?"); blab1();}

PCListen(); customertalk(); fmu_text.Text=("Was there something you were looking for specifically?"); blab4();
customerlisten(); PCListen(); fmu_text.Text=(" "); fmu_speaker.Text=(" ");
gComics.BackgroundGraphic=5089; comics_inv.CharacterToUse=Eddie;
gComics.Visible=true;}
}
  
function menu_item_3_OnClick(GUIControl *control, MouseButton button){PlaySound(41);
if (menu_item_3.NormalGraphic==1844)//Crisps 
{  if (Money>=2.00){
if ((GetGlobalInt(1)==2)&&(bd_favfood.Text==("Crisps"))){//Picky
gPick.Centre(); close_pick.Visible=false; CloseAll(); PlaySound(60);
pick.NormalGraphic=6108; gPick.Visible=true; pick.Animate(204, 4, 2, eOnce); Wait(80); gPick.Visible=false;}
else{  
if (GetGlobalInt(1)==1){PCTalk(); fmu_text.Text=("You have potato chips, please?"); blab2();}
if (GetGlobalInt(1)==2){PCTalk(); fmu_text.Text=("I'll just have some chips, I think."); blab2();}
if (GetGlobalInt(1)==3){PCTalk(); fmu_text.Text=("Anything to eat, back there?"); blab2();}
if (GetGlobalInt(1)==4){PCTalk(); fmu_text.Text=("Crisps, I guess."); blab1();}
PCListen(); customertalk(); fmu_text.Text=("Yeah, sure.");blab1();
customerlisten(); fmu_text.Text=(" "); fmu_speaker.Text=(" ");
fmu2.Animate(33, 3, 3, eOnce);PCBigeat_m("Crisps"); 
  Money-=2.00; PlaySound(4); expense_misc+=2.00; fCrisps+=1;
  expenselist.AddItem("2.00 - Crisps at Seanny O'Fagan's");
TopUp("Bought Crisps", "Spent $2.00"); nutrition.Width+=20; vitality.Width-=5; fagansjokes();}}
  else if (Money < 2.00){Insufficiency();}}  
  
if (menu_item_3.NormalGraphic==1855)//Crest 
{
  if (GetGlobalInt(422)==10){//FREE POP!
  if (GetGlobalInt(1)==1){PCTalk(); fmu_text.Text=("One soda to drink."); blab2();
                        PCListen(); customertalk(); fmu_text.Text=("Okay!"); blab1();}
if (GetGlobalInt(1)==2){PCTalk(); fmu_text.Text=("Pipeline Crest, please."); blab2();
                        PCListen(); customertalk(); fmu_text.Text=("Right away, ma'am."); blab1();}
if (GetGlobalInt(1)==3){PCTalk(); fmu_text.Text=("I'll have a crest, if you don't mind."); blab3();
                        PCListen(); customertalk(); fmu_text.Text=("Of course!"); blab1();}
if (GetGlobalInt(1)==4){PCTalk(); customerlisten(); fmu_text.Text=("I'll take a pipeline."); blab1();
                        PCListen(); customertalk(); fmu_text.Text=("Whatever you like, sir."); blab1();}
customerlisten(); PCListen(); fmu_text.Text=(" "); fmu_speaker.Text=(" ");
  fmu2.Animate(96, 2, 3, eOnce); PCBigsip_m(); 
  TopUp("Got Crest", "Got Crest!"); vitality.Width+=5;  nutrition.Width-=5;
  PCListen(); customertalk(); fmu_text.Text=("No charge!"); blab1();
PCTalk(); customerlisten(); fmu_text.Text=("Thanks!"); blab1();
PCListen(); customerlisten(); fmu_text.Text=(" "); fmu_speaker.Text=(" ");
  if (GetGlobalInt(1)==3){caffeine.Width=110;}}
  
  else if (Money>=1.25){//PAY POP!
if (GetGlobalInt(1)==1){PCTalk(); fmu_text.Text=("One soda to drink."); blab1();
                        PCListen(); customertalk(); fmu_text.Text=("Okay!"); blab1();}
if (GetGlobalInt(1)==2){PCTalk(); fmu_text.Text=("Pipeline Crest, please."); blab2();
                        PCListen(); customertalk(); fmu_text.Text=("Right away, ma'am."); blab1();}
if (GetGlobalInt(1)==3){PCTalk(); fmu_text.Text=("I'll have a crest, if you don't mind."); blab3();
                        PCListen(); customertalk(); fmu_text.Text=("Of course!"); blab1();}
if (GetGlobalInt(1)==4){PCTalk(); customerlisten(); fmu_text.Text=("I'll take a pipeline."); blab1();
                        PCListen(); customertalk(); fmu_text.Text=("Whatever you like, sir."); blab1();}
customerlisten(); PCListen(); fmu_text.Text=(" "); fmu_speaker.Text=(" ");
  fmu2.Animate(96, 2, 3, eOnce); PCBigsip_m(); 
  Money-=1.25; PlaySound(4); expense_misc+=1.25;
  expenselist.AddItem("1.25 - Soda");
  TopUp("Got Pipeline Crest", "Spent $1.25!"); vitality.Width+=5;  nutrition.Width-=5;
  if (GetGlobalInt(1)==3){caffeine.Width=110;}}
  else if (Money < 1.25){Insufficiency();}}  

  if (menu_item_3.NormalGraphic==2058)//Recipes
{
if (GetGlobalInt(1)==1){customerlisten(); PCTalk(); fmu_text.Text=("You have cooking instructionals?"); blab2();
                        customerlisten(); PCTalk(); fmu_text.Text=("To, umm, show for cooking?"); blab2();
                        PCListen(); customertalk(); fmu_text.Text=("They're called recipe books. I can show you some, if you'd like."); blab4();
                        customerlisten(); PCTalk(); fmu_text.Text=("Yes, good. Thanks."); blab1();}
if (GetGlobalInt(1)==2){customerlisten(); PCTalk(); fmu_text.Text=("You have recipe books, don't you?"); blab2();
                        PCListen(); customertalk(); fmu_text.Text=("Sure, we've got some great recipe books."); blab3();}
if (GetGlobalInt(1)==3){customerlisten(); PCTalk(); fmu_text.Text=("I was looking for some new recipes."); blab2();
                        PCListen(); customertalk(); fmu_text.Text=("Sure!"); blab1();}
if (GetGlobalInt(1)==4){PCTalk(); customerlisten(); fmu_text.Text=("Where's your recipes?"); blab1();}

PCListen(); customertalk(); fmu_text.Text=("Were you seeking a specific title?"); blab3();
customerlisten(); PCListen(); fmu_text.Text=(" "); fmu_speaker.Text=(" ");
dEddie_recipe.Start();}
}



function smoke_button_OnClick(GUIControl *control, MouseButton button){
//Food, Cigs, Etc....
     if (gItemDesc.BackgroundGraphic==414){gItemDesc.Visible=false; edbanner.NormalGraphic=1176; editem.NormalGraphic=413; gEatdrink.Visible=true; PlaySound(40);}//milk
else if (gItemDesc.BackgroundGraphic==420){gItemDesc.Visible=false; edbanner.NormalGraphic=1176; editem.NormalGraphic=419; gEatdrink.Visible=true; PlaySound(40);}//Chai
else if (gItemDesc.BackgroundGraphic==423){gItemDesc.Visible=false; edbanner.NormalGraphic=1176; editem.NormalGraphic=422; gEatdrink.Visible=true; PlaySound(40);}//Cocoa
else if (gItemDesc.BackgroundGraphic==1260){gItemDesc.Visible=false; edbanner.NormalGraphic=1176; editem.NormalGraphic=1277; gEatdrink.Visible=true; PlaySound(40);}//Rinse
else if (gItemDesc.BackgroundGraphic==1263){gItemDesc.Visible=false; edbanner.NormalGraphic=1176; editem.NormalGraphic=1264; gEatdrink.Visible=true; PlaySound(40);}//Crest
else if (gItemDesc.BackgroundGraphic==1180){gItemDesc.Visible=false; edbanner.NormalGraphic=1177; editem.NormalGraphic=1179; gEatdrink.Visible=true; PlaySound(40);}//Bagel
else if (gItemDesc.BackgroundGraphic==4490){gItemDesc.Visible=false; edbanner.NormalGraphic=1177; editem.NormalGraphic=160; gEatdrink.Visible=true; PlaySound(40);}//Bigwich
else if (gItemDesc.BackgroundGraphic==4492){gItemDesc.Visible=false; edbanner.NormalGraphic=1177; editem.NormalGraphic=159; gEatdrink.Visible=true; PlaySound(40);}//BigwichV
else if (gItemDesc.BackgroundGraphic==164){gItemDesc.Visible=false; edbanner.NormalGraphic=1177; editem.NormalGraphic=161; gEatdrink.Visible=true; PlaySound(40);}//Day Old
else if (gItemDesc.BackgroundGraphic==4495){gItemDesc.Visible=false; edbanner.NormalGraphic=1177; editem.NormalGraphic=4496; gEatdrink.Visible=true; PlaySound(40);}//Old Sandwich
else if (gItemDesc.BackgroundGraphic==7062){gItemDesc.Visible=false; edbanner.NormalGraphic=1177; editem.NormalGraphic=7061; gEatdrink.Visible=true; PlaySound(40);}//Gondola Bar
else if (gItemDesc.BackgroundGraphic==5188){gItemDesc.Visible=false; edbanner.NormalGraphic=1177; editem.NormalGraphic=9623; gEatdrink.Visible=true; PlaySound(40);}//HotDog Bun
else if (gItemDesc.BackgroundGraphic==3219){daily_paper();}//Newspaper
else if (gItemDesc.BackgroundGraphic==198){daily_paper();}//Newspaper
else if (gItemDesc.BackgroundGraphic==1540){gItemDesc.Visible=false; edbanner.NormalGraphic=1177; editem.NormalGraphic=4631; gEatdrink.Visible=true; PlaySound(40);}//Glemfood
else if (gItemDesc.BackgroundGraphic==3168){CloseAll(); PlaySound(40); gPick.Centre(); close_pick.Visible=false; pick.NormalGraphic=2370; gPick.Visible=true; dTest1.Start(); Mouse.Visible=true;}//Test

///PILLS
else if (gItemDesc.BackgroundGraphic==9642){gItemDesc.Visible=false; edbanner.NormalGraphic=9653; editem.NormalGraphic=9652; gEatdrink.Visible=true; PlaySound(40);}//Moonroom
else if (gItemDesc.BackgroundGraphic==9640){gItemDesc.Visible=false; edbanner.NormalGraphic=9653; editem.NormalGraphic=9651; gEatdrink.Visible=true; PlaySound(40);}//Sunroom
else if (gItemDesc.BackgroundGraphic==9638){gItemDesc.Visible=false; edbanner.NormalGraphic=9653; editem.NormalGraphic=9650; gEatdrink.Visible=true; PlaySound(40);}//Apaptol Gelcaps
else if (gItemDesc.BackgroundGraphic==9636){gItemDesc.Visible=false; edbanner.NormalGraphic=9653; editem.NormalGraphic=9649; gEatdrink.Visible=true; PlaySound(40);}//Urinary
else if (gItemDesc.BackgroundGraphic==9634){gItemDesc.Visible=false; edbanner.NormalGraphic=9653; editem.NormalGraphic=9648; gEatdrink.Visible=true; PlaySound(40);}//Multivitamin
else if (gItemDesc.BackgroundGraphic==9632){gItemDesc.Visible=false; edbanner.NormalGraphic=9653; editem.NormalGraphic=9647; gEatdrink.Visible=true; PlaySound(40);}//Pain Relief
else if (gItemDesc.BackgroundGraphic==9630){gItemDesc.Visible=false; edbanner.NormalGraphic=9653; editem.NormalGraphic=9646; gEatdrink.Visible=true; PlaySound(40);}//Spell_Unflav
else if (gItemDesc.BackgroundGraphic==9628){gItemDesc.Visible=false; edbanner.NormalGraphic=9653; editem.NormalGraphic=9645; gEatdrink.Visible=true; PlaySound(40);}//Spell_Lemon
else if (gItemDesc.BackgroundGraphic==7066){gItemDesc.Visible=false; edbanner.NormalGraphic=9653; editem.NormalGraphic=9654; gEatdrink.Visible=true; PlaySound(40);}//Apaptol



else if (gItemDesc.BackgroundGraphic==5205){//Canned chili needs canopener
  if (cSlot2.InventoryQuantity[Multitool.ID]<1){
      PlaySound(60); TopUp("Appliance Needed", "...I can't get into it. How could I open this?"); vitality.Width -=5; return;}
    else{
    gItemDesc.Visible=false; edbanner.NormalGraphic=1177; editem.NormalGraphic=9624; gEatdrink.Visible=true; PlaySound(40);}//Canned Chili
}


else if (gItemDesc.BackgroundGraphic==1549){//////////  SMOKE ------------------------------ SMOKING------//
 if (GetGlobalInt(1)==1){
 if (cigarettes_remaining>0){    
  if ((cSlot2.InventoryQuantity[Ligher_cheap.ID]==0)&&(cSlot2.InventoryQuantity[Lighter.ID]==0)){Wait(5); PlaySound(60); TopUp("Need Lighter", "You need something to light your cigarette.");}
  if ((cSlot2.InventoryQuantity[Ligher_cheap.ID]!=0)||(cSlot2.InventoryQuantity[Lighter.ID]!=0)){
  if ((player.Room==12)||(player.Room==15)||(player.Room==16)||(player.Room==18)||(player.Room==27)||(player.Room==30)||(player.Room==31)||(player.Room==32)||(player.Room==33))
  {gPick.Centre(); close_pick.Visible=false; CloseAll(); PlaySound(60); int smokeanimrandom = Random(1);
  if (smokeanimrandom==0){pick.NormalGraphic=2370; gPick.Visible=true; pick.Animate(117, 0, 2, eOnce); Wait(100); gPick.Visible=false;}
  else if (smokeanimrandom!=0){pick.NormalGraphic=2370; gPick.Visible=true; pick.Animate(117, 5, 2, eOnce); Wait(100); gPick.Visible=false;}}
    else{
  PlaySound(28); CloseAll(); 
  gPick.Centre(); close_pick.Visible=false; CloseAll();
  int sga=Random(2);
  if (GetGlobalInt(101)==8){pick.NormalGraphic=2641; gPick.Visible=true; Wait(50); pick.Animate(117, 4, 3, eOnce);}
  else if (kickedout==1){pick.NormalGraphic=6265; gPick.Visible=true; Wait(50); pick.Animate(117, 6, 3, eOnce);}
     else{
     if (sga==0){pick.NormalGraphic=2441; gPick.Visible=true; Wait(50); pick.Animate(117, 1, 3, eOnce);}
else if (sga==1){pick.NormalGraphic=2442; gPick.Visible=true; Wait(50); pick.Animate(117, 2, 3, eOnce);}
else if (sga==2){pick.NormalGraphic=2444; gPick.Visible=true; Wait(50); pick.Animate(117, 3, 3, eOnce);}}
  Wait(250); gPick.Visible=false;
  caffeine.Width=110; withdrawel=0; player.UnlockView(); 
  if (cigarettes_remaining==1){TopUp("Out of Cigarettes!","That was your last cigarette!");
  cSlot2.LoseInventory(Cigarettes); empties_remaining+=1;
  if (cSlot2.InventoryQuantity[EmptyPack.ID]==0){cSlot2.AddInventory(EmptyPack);}}
  cigarettes_remaining-=1; nutrition.Width+=15;}}}}
if (GetGlobalInt(1)!=1){
Wait(5); PlaySound(60); TopUp("No Thanks", "You'd rather not get started.");}
player.UnlockView();}}


function warp_vinnys_OnClick(GUIControl *control, MouseButton button){
if (GetGlobalInt(1)==3){
PlaySound(28); FadeOut(5); Wait(5); player.ChangeRoom(6,  331, 131); Mouse.Visible=false; Warp.Visible=false;}
else if (GetGlobalInt(1)==1){
PlaySound(28); FadeOut(5); Wait(5); player.ChangeRoom(7, 21, 193);Mouse.Visible=false;Warp.Visible=false;}
else if (GetGlobalInt(1)==4){
PlaySound(28); FadeOut(5); Wait(5);  player.ChangeRoom(8,  400, 191);Mouse.Visible=false;Warp.Visible=false;}
else if (GetGlobalInt(1)==2){
PlaySound(28); FadeOut(5); Wait(5);    player.ChangeRoom(2,  398, 191);Mouse.Visible=false;Warp.Visible=false;}}
function warp_pawnshp_OnClick(GUIControl *control, MouseButton button){PlaySound(28); SetGlobalInt(90, 1); FadeOut(5); Wait(5);    player.ChangeRoom(33, 83, 144); Mouse.Visible=false;Warp.Visible=false;}
function warp_clamant_OnClick(GUIControl *control, MouseButton button){PlaySound(28); FadeOut(5); Wait(5);    player.ChangeRoom(32, 354, 185); Mouse.Visible=false;Warp.Visible=false;}
function warp_franklin_OnClick(GUIControl *control, MouseButton button){PlaySound(28); FadeOut(5); Wait(5); player.ChangeRoom(5,  158, 158);Mouse.Visible=false;Warp.Visible=false;}
function warp_bridge_OnClick(GUIControl *control, MouseButton button){PlaySound(28); FadeOut(5); Wait(5); player.ChangeRoom(13,  84, 113);Mouse.Visible=false;Warp.Visible=false;}
function warp_downtown_OnClick(GUIControl *control, MouseButton button){PlaySound(28); FadeOut(5); Wait(5); player.ChangeRoom(14,  17, 161);Mouse.Visible=false;Warp.Visible=false;}//Downtown
function warp_downtown2_OnClick(GUIControl *control, MouseButton button){PlaySound(28); FadeOut(5); Wait(5); player.ChangeRoom(17,  17, 161);Mouse.Visible=false;Warp.Visible=false;}//Downtown2
function warp_mall_OnClick(GUIControl *control, MouseButton button){PlaySound(28); FadeOut(5); Wait(5); player.ChangeRoom(19,  25, 160);Mouse.Visible=false;Warp.Visible=false;}//mall
function warp_florin_OnClick(GUIControl *control, MouseButton button){PlaySound(28); FadeOut(5); Wait(5); player.ChangeRoom(20,  26, 183);Mouse.Visible=false;Warp.Visible=false;}//florin
function warp_superstore_OnClick(GUIControl *control, MouseButton button){PlaySound(28); FadeOut(5); Wait(5); player.ChangeRoom(21,  29, 173);Mouse.Visible=false;Warp.Visible=false;}//superstore
function warp_13th_OnClick(GUIControl *control, MouseButton button){PlaySound(28); FadeOut(5); Wait(5); player.ChangeRoom(22,  41, 160);Mouse.Visible=false;Warp.Visible=false;}//13th
function warp_collins_OnClick(GUIControl *control, MouseButton button){PlaySound(28); FadeOut(5); Wait(5); player.ChangeRoom(26,  20, 160);Mouse.Visible=false;Warp.Visible=false;}//Collins
function warp_bigby_OnClick(GUIControl *control, MouseButton button){PlaySound(28); FadeOut(5); Wait(5);player.ChangeRoom(15, 111, 155);Mouse.Visible=false;Warp.Visible=false;}//Bigby
function warp_machine_OnClick(GUIControl *control, MouseButton button){PlaySound(28); FadeOut(5); Wait(5); SetGlobalInt(94, 0); player.ChangeRoom(12, 203, 152);Mouse.Visible=false;Warp.Visible=false;}//Machine
function warp_fagan_OnClick(GUIControl *control, MouseButton button){PlaySound(28); FadeOut(5); Wait(5);player.ChangeRoom(16,100, 141);Mouse.Visible=false;Warp.Visible=false;}//Fagans
function warp_court_OnClick(GUIControl *control, MouseButton button){SetGlobalInt(90, 1); PlaySound(28); FadeOut(5); Wait(5);player.ChangeRoom(18, 265, 155);Mouse.Visible=false;Warp.Visible=false;}//Court
function warp_roast_OnClick(GUIControl *control, MouseButton button){PlaySound(28); FadeOut(5); Wait(5);player.ChangeRoom(27, 203, 152);Mouse.Visible=false;Warp.Visible=false;}//Roast
function warp_cass_OnClick(GUIControl *control, MouseButton button){PlaySound(28); FadeOut(5); Wait(5);player.ChangeRoom(30,236, 110);Mouse.Visible=false;Warp.Visible=false;}//Cass
function warp_pizza_OnClick(GUIControl *control, MouseButton button){PlaySound(28); SetGlobalInt(90, 0); FadeOut(5); Wait(5); player.ChangeRoom(31,100, 141);Mouse.Visible=false;Warp.Visible=false;}//Pizza
function warp_eddies_OnClick(GUIControl *control, MouseButton button){PlaySound(28); SetGlobalInt(90, 1); FadeOut(5); Wait(5); player.ChangeRoom(31, 85, 142);Mouse.Visible=false;Warp.Visible=false;}//Eddie
function warp_credits_OnClick(GUIControl *control, MouseButton button){PlaySound(28); FadeOut(5); Wait(5); player.ChangeRoom(24, 318, 196);Mouse.Visible=false;Warp.Visible=false;}//Credits
function warp_domp_OnClick(GUIControl *control, MouseButton button){PlaySound(28); SetGlobalInt(90, 0); FadeOut(5); Wait(5); player.ChangeRoom(33, 85, 145);Mouse.Visible=false;Warp.Visible=false;}//Eddie

function caff_up_OnClick(GUIControl *control, MouseButton button){PlaySound(9); caffeine.Width=110; nutrition.Width=110; vitality.Width=100; if (GetGlobalInt(1)==1){kibbles.Width=110;} Wait(2);}
function hundred_up_OnClick(GUIControl *control, MouseButton button){Money+=100.00; PlaySound(4); incomelist.AddItem("100.00 - Debug Key"); income_misc+=100.00; income_today+=100.00; income_total+=100.00;}
function hundred_down_OnClick(GUIControl *control, MouseButton button){Money-=100.00; PlaySound(60); expenselist.AddItem("100.00 - Debug Key"); expense_misc+=100.00; expense_total+=100.00;}
function warp_save_OnClick(GUIControl *control, MouseButton button){PlaySound(28); gSavegame.Visible=true; 
Mouse.Visible=true; cityscroll2.Animate(132, 0, 2, eRepeat); lstSaveGames.FillSaveGameList(); Warp.Visible=false;}


function warp_breezy_OnClick(GUIControl *control, MouseButton button){PlaySound(28); FadeOut(5); Wait(5);
   if (GetGlobalInt(1)==1){player.ChangeRoom(7, 21, 193);Mouse.Visible=false;Warp.Visible=false;}//Breezy->Andrus
   if (GetGlobalInt(1)==2){player.ChangeRoom(38, 40, 160);Mouse.Visible=false;Warp.Visible=false;}//School->Melanie
}

function warp_dayplus_OnClick(GUIControl *control, MouseButton button){PlaySound(8); dayofweek+=1; dayspassed+=1;}
function warp_dayminus_OnClick(GUIControl *control, MouseButton button){PlaySound(8); dayofweek-=1; dayspassed-=1;}
function warp_hourplus_OnClick(GUIControl *control, MouseButton button){PlaySound(8); hour+=1;}
function warp_hourminus_OnClick(GUIControl *control, MouseButton button){PlaySound(8); hour-=1;}
function warp_moneyplus_OnClick(GUIControl *control, MouseButton button){PlaySound(8); Money+=50.00;}
function warp_moneyminus_OnClick(GUIControl *control, MouseButton button){PlaySound(8); Money-=50.00;}

function read_paper_OnClick(GUIControl *control, MouseButton button){daily_paper();}

function button_expenses_OnClick(GUIControl *control, MouseButton button)
{PlaySound(28); gItemDesc.BackgroundGraphic=2607; 
itemprice.Visible=false; price_blackout.Visible=false;
sgw.Visible=false; smoke_button.Visible=false; remaining_label.Text=(" "); prev_button.Visible=true; 
next_button.Visible=true; gItemDesc.Visible = true;}


function r_americano_OnClick(GUIControl *control, MouseButton button){
  if (Money >= (3.25)){
if (GetGlobalInt(1)==1){PCTalk(); customerlisten(); rmu_text.Text=("Yes. Americano for drinking, please. "); blab3();}
if (GetGlobalInt(1)==2){PCTalk(); customerlisten(); rmu_text.Text=("I'd like to try one of your Americanos, please."); blab3();}
if (GetGlobalInt(1)==3){PCTalk(); customerlisten(); rmu_text.Text=("An Americano, sirs."); blab2();}
if (GetGlobalInt(1)==4){PCTalk(); customerlisten(); rmu_text.Text=("Get me a coffee."); blab1();}
int slappy = Random(5);
if (slappy==0){PCListen(); customertalk(); rmu_text.Text=("It's our pleasure."); blab1();}
if (slappy==1){PCListen(); customertalk(); rmu_text.Text=("Anything you'd like."); blab1();}
if (slappy==2){PCListen(); customertalk(); rmu_text.Text=("Excellent choice."); blab1();}
if (slappy==3){PCListen(); customertalk(); rmu_text.Text=("We're sure you'll enjoy it."); blab2();}
if (slappy==4){PCListen(); customertalk(); rmu_text.Text=("A fine drink."); blab1();}
if (slappy==5){PCListen(); customertalk(); rmu_text.Text=("But of course. "); blab1();}
  rmu_label.Text=(" "); rmu_text.Text=(" "); customerlisten();
  expenselist.AddItem("3.25 - Americano at Roastierry");
  Money-=3.25; PlaySound(4); expense_misc+=3.25;
  PlaySound(9); TopUp("Got Americano", "Spent $3.25!");
  if (GetGlobalInt(1)==3){caffeine.Width=110;} nutrition.Width+=5;
  caffthresh=(caffthresh / 2); vitality.Width+=(caffthresh);
  PCBigsip_m();}
  else if (Money < (3.25)){Insufficiency();}
}

function r_latte_OnClick(GUIControl *control, MouseButton button){
  if (Money >= (3.25)){
if (GetGlobalInt(1)==1){PCTalk(); customerlisten(); rmu_text.Text=("The latte please. "); blab1();}
if (GetGlobalInt(1)==2){PCTalk(); customerlisten(); rmu_text.Text=("A caffe latte sounds nice."); blab2();}
if (GetGlobalInt(1)==3){PCTalk(); customerlisten(); rmu_text.Text=("I'll have a latte."); blab1();}
if (GetGlobalInt(1)==4){PCTalk(); customerlisten(); rmu_text.Text=("Get me one of them lattes."); blab1();}
int slappy = Random(5);
if (slappy==0){PCListen(); customertalk(); rmu_text.Text=("It's our pleasure."); blab1();}
if (slappy==1){PCListen(); customertalk(); rmu_text.Text=("Anything you'd like."); blab1();}
if (slappy==2){PCListen(); customertalk(); rmu_text.Text=("Excellent choice."); blab1();}
if (slappy==3){PCListen(); customertalk(); rmu_text.Text=("We're sure you'll enjoy it."); blab2();}
if (slappy==4){PCListen(); customertalk(); rmu_text.Text=("A fine drink."); blab1();}
if (slappy==5){PCListen(); customertalk(); rmu_text.Text=("But of course. "); blab1();}
  rmu_label.Text=(" "); rmu_text.Text=(" "); customerlisten();
  expenselist.AddItem("3.25 - Latte at Roastierry");
  Money-=3.25; PlaySound(4); expense_misc+=3.25;
  PlaySound(9); TopUp("Got Latte", "Spent $3.25!");
  if (GetGlobalInt(1)==3){caffeine.Width=110;} nutrition.Width+=15;
  caffthresh=(caffthresh / 2); vitality.Width+=(caffthresh);
  PCBigsip_m();}
  else if (Money < (3.25)){Insufficiency();}
}

function r_chailatte_OnClick(GUIControl *control, MouseButton button){
  if (Money >= (3.25)){
if (GetGlobalInt(1)==1){PCTalk(); customerlisten(); rmu_text.Text=("Yes. Chai latte? "); blab1();}
if (GetGlobalInt(1)==2){PCTalk(); customerlisten(); rmu_text.Text=("I'd like to try one of your chai lattes, please."); blab3();}
if (GetGlobalInt(1)==3){PCTalk(); customerlisten(); rmu_text.Text=("Chai Latte?"); blab1();}
if (GetGlobalInt(1)==4){PCTalk(); customerlisten(); rmu_text.Text=("Get me a, uhh..."); blab1();
                        PCTalk(); customerlisten(); rmu_text.Text=("Oh, jeez."); blab1();
                        PCTalk(); customerlisten(); rmu_text.Text=("I'll try a 'chai latte'..."); blab2();
                        PCTalk(); customerlisten(); rmu_text.Text=("Whatever that is."); blab1();}
int slappy = Random(5);
if (slappy==0){PCListen(); customertalk(); rmu_text.Text=("It's our pleasure."); blab1();}
if (slappy==1){PCListen(); customertalk(); rmu_text.Text=("Anything you'd like."); blab1();}
if (slappy==2){PCListen(); customertalk(); rmu_text.Text=("Excellent choice."); blab1();}
if (slappy==3){PCListen(); customertalk(); rmu_text.Text=("We're sure you'll enjoy it."); blab2();}
if (slappy==4){PCListen(); customertalk(); rmu_text.Text=("A fine drink."); blab1();}
if (slappy==5){PCListen(); customertalk(); rmu_text.Text=("But of course. "); blab1();}
  rmu_label.Text=(" "); rmu_text.Text=(" "); customerlisten();
  Money-=3.25; PlaySound(4); expense_misc+=3.25;
  expenselist.AddItem("3.25 - Chai Latte at Roastierry");
  PlaySound(9); TopUp("Got Chai Latte", "Spent $3.25!");
  if (GetGlobalInt(1)==3){caffeine.Width=110;} nutrition.Width+=20;
  caffthresh=(caffthresh / 2); vitality.Width+=(caffthresh);
  PCBigsip_m();}
  else if (Money < (3.25)){Insufficiency();}
}

function r_mocha_OnClick(GUIControl *control, MouseButton button){
  if (Money >= (3.25)){
if (GetGlobalInt(1)==1){PCTalk(); customerlisten(); rmu_text.Text=("Yes. I would have a mocha, please. "); blab2();}
if (GetGlobalInt(1)==2){PCTalk(); customerlisten(); rmu_text.Text=("How are your caffe mochas?"); blab2();}
if (GetGlobalInt(1)==3){PCTalk(); customerlisten(); rmu_text.Text=("I'll try a mocha, today."); blab1();}
if (GetGlobalInt(1)==4){PCTalk(); customerlisten(); rmu_text.Text=("Get me a, uhh..."); blab1();
                        PCTalk(); customerlisten(); rmu_text.Text=("I'll try a mocha, I guess."); blab2();}

PCListen(); customertalk(); rmu_text.Text=("Our specialty."); blab1();

  rmu_label.Text=(" "); rmu_text.Text=(" "); customerlisten();
  Money-=3.25; PlaySound(4); expense_misc+=3.25;
  expenselist.AddItem("3.25 - Mocha at Roastierry");
  PlaySound(9); TopUp("Got Mocha", "Spent $3.25!");
  if (GetGlobalInt(1)==3){caffeine.Width=110;} nutrition.Width+=20;
  caffthresh=(caffthresh / 2); vitality.Width+=(caffthresh);
  PCBigsip_m();}
  else if (Money < (3.25)){Insufficiency();}
}

function r_cappuccino_OnClick(GUIControl *control, MouseButton button){
  if (Money >= (3.25)){
if (GetGlobalInt(1)==1){PCTalk(); customerlisten(); rmu_text.Text=("Yes. A cappuccino please. "); blab2();}
if (GetGlobalInt(1)==2){PCTalk(); customerlisten(); rmu_text.Text=("I'd like one of your cappuccinos, please."); blab2();}
if (GetGlobalInt(1)==3){PCTalk(); customerlisten(); rmu_text.Text=("Let me ask you something."); blab1();
                        PCListen(); customertalk(); rmu_text.Text=("Yes?"); blab1();
                        PCTalk(); customerlisten(); rmu_text.Text=("Are italian coffees considered unmasculine?"); blab4();
                        PCListen(); customerlisten(); rmu_label.Text=("Arthur: "); rmu_text.Text=("...?"); rmu2.Animate(35, 3, 4, eOnce); WaitMouseKey(30);
                        PCTalk(); customerlisten(); rmu_text.Text=("Not right now, huh?"); blab1();
                        PCTalk(); customerlisten(); rmu_text.Text=("Then I'll have a cappuccino."); blab2();}
if (GetGlobalInt(1)==4){PCTalk(); customerlisten(); rmu_text.Text=("Cappuccino's just coffee and milk, right?"); blab3();
                        PCListen(); customertalk(); rmu_text.Text=("More or less... "); blab1();
                        PCListen(); customertalk(); rmu_text.Text=("Actually, it's--"); blab1();
                        PCTalk(); customerlisten(); rmu_text.Text=("Whatever. I'll take one."); blab2();}
int slappy = Random(5);
if (slappy==0){PCListen(); customertalk(); rmu_text.Text=("It's our pleasure."); blab1();}
if (slappy==1){PCListen(); customertalk(); rmu_text.Text=("Anything you'd like."); blab1();}
if (slappy==2){PCListen(); customertalk(); rmu_text.Text=("Excellent choice."); blab1();}
if (slappy==3){PCListen(); customertalk(); rmu_text.Text=("We're sure you'll enjoy it."); blab1();}
if (slappy==4){PCListen(); customertalk(); rmu_text.Text=("A fine drink."); blab1();}
if (slappy==5){PCListen(); customertalk(); rmu_text.Text=("But of course. "); blab1();}
  rmu_label.Text=(" "); rmu_text.Text=(" "); customerlisten();
  Money-=3.25; PlaySound(4); expense_misc+=3.25;
  expenselist.AddItem("3.25 - Cappuccino at Roastierry");
  PlaySound(9); TopUp("Got Cappuccino", "Spent $3.25!");
  if (GetGlobalInt(1)==3){caffeine.Width=110;} nutrition.Width+=15;
  caffthresh=(caffthresh / 2); vitality.Width+=(caffthresh);
  PCBigsip_m();}
  else if (Money < (3.25)){Insufficiency();}

}


function btnConfirmSave_OnClick(GUIControl *control, MouseButton button)
 {PlaySound(28);
   int totalSaves = lstSaveGames.ItemCount; //number of saves on list
 String saveName = txtSaveName.Text; //holds value of txtSaveName
 
 //Check for a save name. If none, tell them.  Else, go on.
 if(saveName == "")
 {
   TopUp("What's the Name of the Game?","Please enter a name for your saved game.");
   return;
 }
 //If there is no saved games yet, just save it.
 if(lstSaveGames.SelectedIndex == -1)
 {
   gSavegame.Visible = false; Mouse.Visible=false; cityscroll2.NormalGraphic=3296;
   SaveGameSlot(totalSaves+1, saveName);
 }
 else
 {
   int checkSave = 0; //runs through the list and checks for double entries
   while(checkSave != totalSaves)
   {
     if(saveName == lstSaveGames.Items[checkSave]) // one matches, so overwrite it.
     {
       //if so, overwrite the selected save game
       gSavegame.Visible = false; Mouse.Visible=false; cityscroll2.NormalGraphic=3296;
       SaveGameSlot(savegameindex[checkSave], saveName);
       return;
     }
     checkSave++;
   }
   //if we've made it here, then there is no match; just save to a new slot.
   if(totalSaves < 20)
   {
     gSavegame.Visible = false; Mouse.Visible=false; cityscroll2.NormalGraphic=3296;
     SaveGameSlot(totalSaves+1, saveName);
   }
   else
   {
     Display("The maximum number of saved games has been reached; overwrite or delete some old ones.[PS: Holy cow. That's a lot of saves.");
   }
 }}

function btnDeleteSave_OnClick(GUIControl *control, MouseButton button)
 {if(lstSaveGames.SelectedIndex != -1)
 { PlaySound(60); DeleteSaveSlot(savegameindex[lstSaveGames.SelectedIndex]);
   //Save Dialog Prep
   lstSaveGames.FillSaveGameList();}
 else{PlaySound(28); TopUp("What's the target?","Please select a saved game to delete.");}}

function lstSaveGames_OnSelectionChange(GUIControl *control){txtSaveName.Text = lstSaveGames.Items[lstSaveGames.SelectedIndex];}

function lstLoadGames_OnSelectionChange(GUIControl *control)
{PlaySound(28); txtLoadName.Text=lstLoadGames.Items[lstLoadGames.SelectedIndex];}

function Button16_OnClick(GUIControl *control, MouseButton button)
{
 if(lstLoadGames.SelectedIndex != -1)
 {PlaySound(60); 
   DeleteSaveSlot(savegameindex[lstLoadGames.SelectedIndex]);
   //Load Dialog Prep
   lstLoadGames.FillSaveGameList();}
 else {PlaySound(28);  TopUp("What's the target?","Please select a saved game to delete.");}
}

function Button17_OnClick(GUIControl *control, MouseButton button){PlaySound(28); gLoadgame.Visible = false; cityscroll.NormalGraphic=3296;}
function btnCancelSave_OnClick(GUIControl *control, MouseButton button){
  PlaySound(28); gSavegame.Visible = false; cityscroll2.NormalGraphic=3296;
  if (gameover==true){gGameover.Visible=true;}
}


function Button9_OnClick(GUIControl *control, MouseButton button)
{
 int totalLoads = lstLoadGames.ItemCount; //holds number of saves in the list
 String loadName = txtLoadName.Text; //holds TXT for Save Name; from use
 
 //check that a name was entered to avoid problems
 if(loadName == "") 
 {
   TopUp("Which one?","Please select a saved game to be loaded.");
   return;
 }
 if(lstLoadGames.SelectedIndex == -1) //no highlighted item
 {
  TopUp("Which one?","Please select a saved game to be loaded");
 }
 else if(lstLoadGames.SelectedIndex >= 0) //an item is selected... 
 {
   RestoreGameSlot(savegameindex[lstLoadGames.SelectedIndex]);
   gLoadgame.Visible = false; cityscroll.NormalGraphic=3296;
 }
}



function dialog_request (int xvalue) {
mouse.Visible=true;
speakmind(xvalue);
}//Enddialog

function pwn_sellbtn_OnClick(GUIControl *control, MouseButton button)
   { PlaySound(41); 
     if (pwnbuyorsell==0){
     if (Mouse.Mode==eModeTalkto){Mouse.Mode=eModeLookat;} else if (Mouse.Mode==eModeLookat){Mouse.Mode=eModeTalkto;}
     pwn_sellbtn.NormalGraphic=3634; pwn_sellbtn.MouseOverGraphic=3635; pwnbuyorsell=1; pwn_coverup.Visible=true;}
else if (pwnbuyorsell==1){
     if (Mouse.Mode==eModeTalkto){Mouse.Mode=eModeLookat;} else if (Mouse.Mode==eModeLookat){Mouse.Mode=eModeTalkto;}
     pwn_sellbtn.NormalGraphic=3630; pwn_sellbtn.MouseOverGraphic=3631; pwnbuyorsell=0; pwn_coverup.Visible=false;}
}


function TJNoway(){
int Pshaw = Random(7);

if (Teejanger>=5){
TJtalkmad(); PCListen(); pwn_text.Text=("All right. That's enough for today. "); blab3();
TJtalkmad(); PCListen(); pwn_text.Text=("We're closed. Thanks for coming in."); blab3();
TJlistenmad(); PCListen(); pwn_text.Text=(" "); pwnlabel.Text=(" "); 
FadeOut(5); gPawn.Visible=false; 
mouse.Mode=eModeLookat; pwnbuyorsell=0; pwn_sellbtn.NormalGraphic=3630; pwn_sellbtn.MouseOverGraphic=3631; mouse.Visible=false;
Wait(10); FadeIn(5); player.ChangeRoom(5, 430, 160);}

else if (Teejanger==4){TJtalkmad(); pwn2.Animate(137, 5, 3, eRepeat); PCListen(); pwn_text.Text=("This is gettin' really old. "); blab3();
customerlisten(); PCListen(); pwn_text.Text=(" "); pwnlabel.Text=(" "); Teejanger+=1;}

else if (Teejanger<4){
if (Pshaw==0){customertalk(); PCListen(); pwn_text.Text=("Yeah, right. "); blab1();}

else if (Pshaw==1){customertalk(); PCListen(); pwn_text.Text=("You know... I got stuff to do. "); blab3();
customertalk(); PCListen(); pwn_text.Text=("We could do this all day. "); blab2();}  

else if (Pshaw==2){customertalk(); PCListen(); pwn_text.Text=("Come on, now. "); blab1();
customertalk(); PCListen(); pwn_text.Text=("Show me something I might actually want. "); blab2();}

else if (Pshaw==3){customertalk(); PCListen(); pwn_text.Text=("No. "); blab1();}  
else if (Pshaw==4){customertalk(); PCListen(); pwn_text.Text=("Not interested, sorry. "); blab2();}
else if (Pshaw==5){TJtalkmad(); PCListen();  pwn2.Animate(137, 5, 3, eRepeat);//exhausted anim
pwn_text.Text=("You want to come back later? "); blab2();
TJtalkmad(); PCListen(); pwn2.Animate(137, 5, 3, eRepeat);  //exhausted anim
pwn_text.Text=("I've got some thing that needs to get done. "); blab3();}

else if (Pshaw==6){customertalk(); PCListen(); pwn_text.Text=("You know... I got other stuff to do. "); blab3();}
else if (Pshaw==7){customerlisten(); PCListen(); pwnlabel.Text=("T.J.: "); pwn_text.Text=("... "); blab3();}

customerlisten(); PCListen(); pwn_text.Text=(" "); pwnlabel.Text=(" "); Teejanger+=1;}}

int watchpawned = 0;
function WatchA_Talk(){
if (watchpawned==0){
customertalk(); PCListen(); pwn_text.Text=("Nice watch. "); blab1();
PCTalk(); customerlisten(); pwn_text.Text=("Thanks. "); blab1();
PCListen(); customerlisten(); pwn_text.Text=(" "); pwn2.Animate(137, 2, 3, eOnce); Wait(40);//Appraisal
customertalk(); PCListen(); pwn_text.Text=("Twenty. "); blab1();
PCTalk(); customerlisten(); pwn_text.Text=("What? "); blab1();
customertalk(); PCListen(); pwn_text.Text=("I said twenty bucks. "); blab2();
PCListen(); customerlisten(); pwn_text.Text=(" "); pwnlabel.Text=(" "); watchpawned=1;
dPawnWatch.SetOptionState(3, eOptionOn); dPawnWatch.Start();}
else if (watchpawned!=0){
customertalk(); PCListen(); pwn_text.Text=("That thing? "); blab1();
customertalk(); PCListen(); pwn_text.Text=("I said twenty bucks on that. "); blab2();
PCTalk(); customerlisten(); pwn_text.Text=("What? "); blab1();
customertalk(); PCListen(); pwn_text.Text=("Yeah, remember? "); blab1();
PCListen(); customerlisten(); pwn_text.Text=(" "); pwnlabel.Text=(" ");
dPawnWatch.SetOptionState(3, eOptionOn); dPawnWatch.Start();}}

function WatchB_Talk(){
  if (watchpawned==0){
customertalk(); PCListen(); pwn_text.Text=("Nice watch. "); blab1();
PCTalk(); customerlisten(); pwn_text.Text=("Thanks. "); blab1();
PCListen(); customerlisten(); pwn_text.Text=(" "); pwn2.Animate(137, 2, 3, eOnce); Wait(40);//Appraisal
customertalk(); PCListen(); pwn_text.Text=("Eighty. "); blab1();
PCTalk(); customerlisten(); pwn_text.Text=("What? "); blab1();
customertalk(); PCListen(); pwn_text.Text=("Eighty bucks. "); blab1();
PCListen(); customerlisten(); pwn_text.Text=(" "); pwnlabel.Text=(" "); watchpawned=1;
dPawnWatch.SetOptionState(1, eOptionOn); dPawnWatch.Start();}
else if (watchpawned!=0){
customertalk(); PCListen(); pwn_text.Text=("That thing? "); blab1();
customertalk(); PCListen(); pwn_text.Text=("I said eighty bucks on that. "); blab2();
PCTalk(); customerlisten(); pwn_text.Text=("What? "); blab1();
customertalk(); PCListen(); pwn_text.Text=("Yeah, remember? "); blab1();
PCListen(); customerlisten(); pwn_text.Text=(" "); pwnlabel.Text=(" ");
dPawnWatch.SetOptionState(1, eOptionOn); dPawnWatch.Start();}
}

function WatchC_Talk(){
  if (watchpawned==0){
customertalk(); PCListen(); pwn_text.Text=("Nice watch. "); blab1();
PCTalk(); customerlisten(); pwn_text.Text=("Thanks. "); blab1();
PCListen(); customerlisten(); pwn_text.Text=(" "); pwn2.Animate(137, 2, 3, eOnce); Wait(40);//Appraisal
customertalk(); PCListen(); pwn_text.Text=("Forty. "); blab1();
PCTalk(); customerlisten(); pwn_text.Text=("What? "); blab1();
customertalk(); PCListen(); pwn_text.Text=("Forty bucks. "); blab1();
PCListen(); customerlisten(); pwn_text.Text=(" "); pwnlabel.Text=(" "); watchpawned=1;
dPawnWatch.SetOptionState(2, eOptionOn); dPawnWatch.Start();}
else if (watchpawned!=0){
customertalk(); PCListen(); pwn_text.Text=("That thing? "); blab1();
customertalk(); PCListen(); pwn_text.Text=("I said forty bucks on that. "); blab2();
PCTalk(); customerlisten(); pwn_text.Text=("What? "); blab1();
customertalk(); PCListen(); pwn_text.Text=("Yeah, remember? "); blab1();
PCListen(); customerlisten(); pwn_text.Text=(" "); pwnlabel.Text=(" ");
dPawnWatch.SetOptionState(2, eOptionOn); dPawnWatch.Start();}
}

function WatchD_Talk(){
  if (watchpawned==0){
customertalk(); PCListen(); pwn_text.Text=("Nice watch. "); blab1();
PCTalk(); customerlisten(); pwn_text.Text=("Thanks. "); blab1();
PCListen(); customerlisten(); pwn_text.Text=(" "); pwn2.Animate(137, 2, 3, eOnce); Wait(40);//Appraisal
customertalk(); PCListen(); pwn_text.Text=("Nah. "); blab1();
PCTalk(); customerlisten(); pwn_text.Text=("What? "); blab1();
customertalk(); PCListen(); pwn_text.Text=("I said no thanks. "); blab2();
PCListen(); customerlisten(); pwn_text.Text=(" "); pwnlabel.Text=(" "); watchpawned=1;}
else if (watchpawned!=0){
customertalk(); PCListen(); pwn_text.Text=("That thing? "); blab1();
customertalk(); PCListen(); pwn_text.Text=("I said no thanks. "); blab2();
PCTalk(); customerlisten(); pwn_text.Text=("What? "); blab1();
customertalk(); PCListen(); pwn_text.Text=("Yeah, remember? "); blab1();
PCListen(); customerlisten(); pwn_text.Text=(" "); pwnlabel.Text=(" ");}
}
int lighterpawned=0;
function Lighter_Talk(){
  if (lighterpawned==0){
customertalk(); PCListen(); pwn_text.Text=("That butane? "); blab1();
PCTalk(); customerlisten(); pwn_text.Text=("Yes. "); blab1();
PCListen(); customerlisten(); pwn_text.Text=(" "); pwn2.Animate(137, 2, 3, eOnce); Wait(40);//Appraisal
customertalk(); PCListen(); pwn_text.Text=("What's the inscription? "); blab2();
customertalk(); PCListen(); pwn_text.Text=("Is that in Russian? "); blab2();
PCTalk(); customerlisten(); pwn_text.Text=("What? "); blab1();
customertalk(); PCListen(); pwn_text.Text=("The writing... What is it? "); blab3();
PCTalk(); customerlisten(); pwn_text.Text=("That is Pavlo Tychyna poem. "); blab2();
PCTalk(); customerlisten(); pwn_text.Text=("In Ukranian language letters. "); blab2();
customertalk(); PCListen(); pwn_text.Text=("Well, it's a nice lighter. "); blab2();
customertalk(); PCListen(); pwn_text.Text=("I'll give you twenty bucks. "); blab2();
PCListen(); customerlisten(); pwn_text.Text=(" "); pwnlabel.Text=(" "); lighterpawned=1;
dPawn_Lighter.Start();}
else if (lighterpawned!=0){
customertalk(); PCListen(); pwn_text.Text=("The lighter? "); blab1();
customertalk(); PCListen(); pwn_text.Text=("I thought we said twenty dollars. "); blab1();
PCTalk(); customerlisten(); pwn_text.Text=("Oh. "); blab1();
customertalk(); PCListen(); pwn_text.Text=("Yeah, remember that? "); blab1();
PCListen(); customerlisten(); pwn_text.Text=(" "); pwnlabel.Text=(" ");
dPawn_Lighter.Start();}
}

int stampspawned=0;
function Stamps_Talk(){
  if (stampspawned==0){
PCListen(); customerlisten(); pwn_text.Text=(" "); pwn2.Animate(137, 2, 3, eOnce); Wait(40);//Appraisal
customertalk(); PCListen(); pwn_text.Text=("Ohhhh...."); blab1();
customertalk(); PCListen(); pwn_text.Text=("Eddie give that to ya? "); blab2();
PCTalk(); customerlisten(); pwn_text.Text=("Yes. "); blab1();
customertalk(); PCListen(); pwn_text.Text=("Yeah - he brought that in a few weeks ago. "); blab4();
customertalk(); PCListen(); pwn_text.Text=("I'll give you fifty bucks. "); blab2();
PCListen(); customerlisten(); pwn_text.Text=(" "); pwnlabel.Text=(" "); stampspawned=1;
dPawn_Stamps.Start();}
else if (stampspawned!=0){
customertalk(); PCListen(); pwn_text.Text=("The stamps? "); blab1();
customertalk(); PCListen(); pwn_text.Text=("I thought we said fifty dollars. "); blab1();
PCTalk(); customerlisten(); pwn_text.Text=("Oh. "); blab1();
customertalk(); PCListen(); pwn_text.Text=("Yeah, remember? "); blab1();
PCListen(); customerlisten(); pwn_text.Text=(" "); pwnlabel.Text=(" ");
dPawn_Stamps.Start();}}

function Lighterp_Talk(){
customertalk(); PCListen(); pwn_text.Text=("The lighter? "); blab1();
customertalk(); PCListen(); pwn_text.Text=("Yeah - I remember it. "); blab1();
PCTalk(); customerlisten(); pwn_text.Text=("Oh. "); blab1();
customertalk(); PCListen(); pwn_text.Text=("Twenty bucks. "); blab1();
PCListen(); customerlisten(); pwn_text.Text=(" "); pwnlabel.Text=(" ");
dPawn_Lighter.Start();}

int ringpawned=0;
function Diamondring_Talk(){
  if (ringpawned==0){
customertalk(); PCListen(); pwn_text.Text=("That's a nice ring. "); blab2();
PCTalk(); customerlisten(); pwn_text.Text=("Thanks. "); blab1();
PCTalk(); customerlisten(); pwn_text.Text=("But I don't need it. "); blab2();
PCTalk(); customerlisten(); pwn_text.Text=("I'm ready to, uhh. You know... "); blab2();
PCTalk(); customerlisten(); pwn_text.Text=("I don't need it, you know? "); blab2();
PCTalk(); customerlisten(); pwn_text.Text=("I'd rather have the money. You know? "); blab2();
PCListen(); customerlisten(); pwn_text.Text=(" "); pwn2.Animate(137, 2, 3, eOnce); Wait(40);//Appraisal
customertalk(); PCListen(); pwn_text.Text=("I can give you three hundred bucks. "); blab3();
PCTalk(); customerlisten(); pwn_text.Text=("What? "); blab1();
customertalk(); PCListen(); pwn_text.Text=("It's a good ring. It's got some wear, on the band. "); blab3();
customertalk(); PCListen(); pwn_text.Text=("There's a small flaw in the stone, but it's high carat. "); blab4();
customertalk(); PCListen(); pwn_text.Text=("Three hundred's a fair offer, I think. "); blab3();
PCListen(); customerlisten(); pwn_text.Text=(" "); pwnlabel.Text=(" "); ringpawned=1; dPawnRing.Start();}
else if (ringpawned!=0){
customertalk(); PCListen(); pwn_text.Text=("Oh, right. "); blab1();
customertalk(); PCListen(); pwn_text.Text=("Well, the offer's the same. "); blab2();
PCTalk(); customerlisten(); pwn_text.Text=("What was it, again? "); blab2();
customertalk(); PCListen(); pwn_text.Text=("$300.00, remember? "); blab2();
PCListen(); customerlisten(); pwn_text.Text=(" "); pwnlabel.Text=(" "); dPawnRing.Start();}
}

int toothpawned=0;
function GoldTooth_Talk(){
  if (toothpawned==0){
customertalk(); PCListen(); pwn_text.Text=("What the hell...? "); blab2();
PCListen(); customerlisten(); pwn_text.Text=(" "); pwn2.Animate(137, 2, 3, eOnce); Wait(40);//Appraisal
customertalk(); PCListen(); pwn_text.Text=("A gold tooth?"); blab2();
PCTalk(); customerlisten(); pwn_text.Text=("Yes. "); blab1();
PCTalk(); customerlisten(); pwn_text.Text=("I don't need it anymore. "); blab2();
PCListen(); customerlisten(); pwn_text.Text=(" "); pwn2.Animate(137, 2, 3, eOnce); Wait(40);//Appraisal
customertalk(); PCListen(); pwn_text.Text=("I'll give you fifteen bucks. "); blab3();
PCTalk(); customerlisten(); pwn_text.Text=("You will? "); blab1();
customertalk(); PCListen(); pwn_text.Text=("It's a newer tooth. Very little wear. "); blab3();
customertalk(); PCListen(); pwn_text.Text=("Probably a canine. A showpiece. And high carat. "); blab4();
customertalk(); PCListen(); pwn_text.Text=("Fifteen's a fair offer, I think. "); blab3();
PCListen(); customerlisten(); pwn_text.Text=(" "); pwnlabel.Text=(" "); toothpawned=1; dPawnTooth.Start();}
else if (toothpawned!=0){
customertalk(); PCListen(); pwn_text.Text=("Oh, right. "); blab1();
customertalk(); PCListen(); pwn_text.Text=("Well, the offer's the same. "); blab2();
PCTalk(); customerlisten(); pwn_text.Text=("What was it, again? "); blab2();
customertalk(); PCListen(); pwn_text.Text=("$15.00, remember? "); blab2();
PCListen(); customerlisten(); pwn_text.Text=(" "); pwnlabel.Text=(" "); dPawnTooth.Start();}
}

int bookpawned=0;
function pawnbook(){
  if (bookpawned==0){
customertalk(); PCListen(); pwn_text.Text=("Oh, look at that. "); blab2();
PCListen(); customerlisten(); pwn_text.Text=(" "); pwn2.Animate(137, 2, 3, eOnce); Wait(40);//Appraisal
customertalk(); PCListen(); pwn_text.Text=("Huh. "); blab1();
customertalk(); PCListen(); pwn_text.Text=("I don't take books, though. "); blab2();
PCTalk(); customerlisten(); pwn_text.Text=("You don't? "); blab1();
customertalk(); PCListen(); pwn_text.Text=("No, I sure don't. "); blab2();
boxadd("Eddie"); boxadd("Eddie's Books");
customertalk(); PCListen(); pwn_text.Text=("There's a guy named Eddie, who runs a bookstore downtown. "); blab4();
customertalk(); PCListen(); pwn_text.Text=("He might take it. "); blab2();
PCTalk(); customerlisten(); pwn_text.Text=("Oh. "); blab1();
customertalk(); PCListen(); pwn_text.Text=("Got anything else? "); blab1();
PCListen(); customerlisten(); pwn_text.Text=(" "); pwnlabel.Text=(" "); bookpawned+=1;}
else if (bookpawned!=0){
customertalk(); PCListen(); pwn_text.Text=("I don't take books, remember? "); blab2();
PCListen(); customerlisten(); pwn_text.Text=(" "); pwnlabel.Text=(" "); bookpawned+=1;}}

function Arcano_Talk(){pawnbook();}
function Coeur_Talk(){pawnbook();}
function Drinkbook_Talk(){pawnbook();}
function Cookbook_Talk(){pawnbook();}
function Orwell_Talk(){pawnbook();}
function BigBox_Talk(){pawnbook();}

int permitpawned=0;
function pawnpermit(){
if (permitpawned==0){
customertalk(); PCListen(); pwn_text.Text=("What's that? A license or something? "); blab2();
PCListen(); customerlisten(); pwn_text.Text=(" "); pwn2.Animate(137, 2, 3, eOnce); Wait(40);//Appraisal
boxadd("Permits");
customertalk(); PCListen(); pwn_text.Text=("A vendor's permit, huh? "); blab1();
customertalk(); PCListen(); pwn_text.Text=("I can't take that. "); blab2();
PCTalk(); customerlisten(); pwn_text.Text=("You can't? "); blab1();
customertalk(); PCListen(); pwn_text.Text=("No, they have to be issued by the city. "); blab2();
customertalk(); PCListen(); pwn_text.Text=("...but there might be a guy who could help you out..."); blab4();
PCTalk(); customerlisten(); pwn_text.Text=("Who? "); blab1();
boxadd("Bramford"); boxadd("The Courthouse");
customertalk(); PCListen(); pwn_text.Text=("Go talk to Bramford. He's the custodian at the courthouse."); blab4();
customertalk(); PCListen(); pwn_text.Text=("Ask him about your permit. He might buy it from you."); blab4();
PCTalk(); customerlisten(); pwn_text.Text=("Got it."); blab1();
PCListen(); customerlisten(); pwn_text.Text=(" "); pwnlabel.Text=(" "); permitpawned+=1;}
else if (permitpawned!=0){
customertalk(); PCListen(); pwn_text.Text=("I can't take your permits, remember? "); blab2();
PCListen(); customerlisten(); pwn_text.Text=(" "); pwnlabel.Text=(" "); bookpawned+=1;}}


int phonepawned=0;
function Cellphone_Talk(){
if (phonepawned==0){
customertalk(); PCListen(); pwn_text.Text=("What's that? It's a phone, right?"); blab2();
PCListen(); customerlisten(); pwn_text.Text=(" "); pwn2.Animate(137, 2, 3, eOnce); Wait(40);//Appraisal
customertalk(); PCListen(); pwn_text.Text=("Nah. No way."); blab1();
customertalk(); PCListen(); pwn_text.Text=("I ain't buying that thing. "); blab2();
PCTalk(); customerlisten(); pwn_text.Text=("You won't? "); blab1();
customertalk(); PCListen(); pwn_text.Text=("Man, they're coming out with them so dang fast you just can't keep up. "); blab2();
customertalk(); PCListen(); pwn_text.Text=("A phone's about the worst investment you can make! Damn things go obselete pretty quick."); blab4();
customertalk(); PCListen(); pwn_text.Text=("That thing'd just sit on my shelf collecting dust. No thanks."); blab2();
PCListen(); customerlisten(); pwn_text.Text=(" "); pwnlabel.Text=(" "); phonepawned+=1;}
else if (phonepawned!=0){
customertalk(); PCListen(); pwn_text.Text=("Oh I don't want that thing."); blab2();
customertalk(); PCListen(); pwn_text.Text=("Remember?"); blab2();
PCListen(); customerlisten(); pwn_text.Text=(" "); pwnlabel.Text=(" "); phonepawned+=1;}}

int crownpawned=0;
function CrownCard_Talk(){
if (crownpawned==0){
customertalk(); PCListen(); pwn_text.Text=("Wait a minute... Is that...?"); blab2();
PCListen(); customerlisten(); pwn_text.Text=(" "); pwn2.Animate(137, 2, 3, eOnce); Wait(40);//Appraisal
customertalk(); PCListen(); pwn_text.Text=("Ah - the infamous \"Crown Card\"."); blab1();
customertalk(); PCListen(); pwn_text.Text=("I've already got one."); blab2();
PCTalk(); customerlisten(); pwn_text.Text=("You do? "); blab1();
customertalk(); PCListen(); pwn_text.Text=("Yeah, and I'd probably get mine taken away if anybody knew I was selling them. "); blab2();
customertalk(); PCListen(); pwn_text.Text=("I'm sure somebody would buy it from you, though."); blab4();
customertalk(); PCListen(); pwn_text.Text=("Lots of people wantin' to get in. Only so many cards in existence."); blab2();
PCListen(); customerlisten(); pwn_text.Text=(" "); pwnlabel.Text=(" "); crownpawned+=1;}
else if (crownpawned!=0){
customertalk(); PCListen(); pwn_text.Text=("I've already got one, remember?"); blab2();
customertalk(); PCListen(); pwn_text.Text=("Somebody will probably buy it from you, though."); blab2();
PCListen(); customerlisten(); pwn_text.Text=(" "); pwnlabel.Text=(" "); crownpawned+=1;}}


function Permit_franklin_Talk(){pawnpermit();}
function Permit_13_Talk(){pawnpermit();}
function Permit_brennan_Talk(){pawnpermit();}
function Permit_Collins_Talk(){pawnpermit();}
function Permit_downtown_Talk(){pawnpermit();}
function Permit_florin_Talk(){pawnpermit();}

int cdpawned=0;
function pawncd(){
if (cdpawned==0){
PCListen(); customerlisten(); pwn_text.Text=(" "); pwn2.Animate(137, 2, 3, eOnce); Wait(40);//Appraisal
customertalk(); PCListen(); pwn_text.Text=("I've got dozens of copies of that cd. "); blab2();
customertalk(); PCListen(); pwn_text.Text=("You can keep it - I don't need another one."); blab1();
PCListen(); customerlisten(); pwn_text.Text=(" "); pwnlabel.Text=(" "); cdpawned+=1;}
else if (cdpawned!=0){
customertalk(); PCListen(); pwn_text.Text=("I'm not interested buying any cds. "); blab2();
PCListen(); customerlisten(); pwn_text.Text=(" "); pwnlabel.Text=(" "); cdpawned+=1;}}

function Thirsty_Talk(){pawncd();}
function STU_Talk(){pawncd();}
function Pocketmaster_Talk(){pawncd();}
function Mat64_Talk(){pawncd();}
function LoBat_Talk(){pawncd();}

function Emachine_Talk(){
customertalk(); PCListen(); pwn_text.Text=("Whoa, no kidding? "); blab2();
PCListen(); customerlisten(); pwn_text.Text=(" "); pwn2.Animate(137, 2, 3, eOnce); Wait(80);//Appraisal
customertalk(); PCListen(); pwn_text.Text=("You want to sell this? "); blab2();
customertalk(); PCListen(); pwn_text.Text=("No way. "); blab1();
PCTalk(); customerlisten(); pwn_text.Text=("How much? "); blab1();
customertalk(); PCListen(); pwn_text.Text=("I don't know... I'd have to make some calls... "); blab4();
customertalk(); PCListen(); pwn_text.Text=("Why don't you come back, tomorrow."); blab4();
customertalk(); PCListen(); pwn_text.Text=("I'll have a buyer for you. "); blab2();
PCTalk(); customerlisten(); pwn_text.Text=("OK. "); blab1();
PCListen(); customerlisten(); pwn_text.Text=(" "); pwnlabel.Text=(" ");}

int espressopawned=0;
function espressomachine_Talk(){
  if (espressopawned==0){
customertalk(); PCListen(); pwn_text.Text=("An espresso machine, huh? "); blab2();
customertalk(); PCListen(); pwn_text.Text=("Let me see it... "); blab1();
PCListen(); customerlisten(); pwn_text.Text=(" "); pwn2.Animate(137, 2, 3, eOnce); Wait(40);//Appraisal
customertalk(); PCListen(); pwn_text.Text=("Yeah, OK. "); blab1();
customertalk(); PCListen(); pwn_text.Text=("Eighty bucks. "); blab1();
customertalk(); PCListen(); pwn_text.Text=("Eighty bucks. "); blab1();
PCListen(); customerlisten(); pwn_text.Text=(" "); pwnlabel.Text=(" ");
dPawnEspresso.Start(); espressopawned=1;}
else if (espressopawned!=0){
customertalk(); PCListen(); pwn_text.Text=("Oh, right. "); blab1();
customertalk(); PCListen(); pwn_text.Text=("Well, I'll still take it. "); blab2();
PCTalk(); customerlisten(); pwn_text.Text=("What was your offer? "); blab1();
customertalk(); PCListen(); pwn_text.Text=("Eighty. "); blab1();
PCListen(); customerlisten(); pwn_text.Text=(" "); pwnlabel.Text=(" "); dPawnEspresso.Start();}}

int makerpawned=0;
function maker_Talk(){
  if (makerpawned==0){
customertalk(); PCListen(); pwn_text.Text=("A coffee maker. "); blab1();
customertalk(); PCListen(); pwn_text.Text=("Come on. "); blab1();
PCTalk(); customerlisten(); pwn_text.Text=("Please at least look at it? "); blab2();
customertalk(); PCListen(); pwn_text.Text=("Let me see it... "); blab2();
PCListen(); customerlisten(); pwn_text.Text=(" "); pwn2.Animate(137, 2, 3, eOnce); Wait(80);//Appraisal
customertalk(); PCListen(); pwn_text.Text=("Yeah, OK. "); blab1();
customertalk(); PCListen(); pwn_text.Text=("Ten bucks. "); blab1();
PCListen(); customerlisten(); pwn_text.Text=(" "); pwnlabel.Text=(" ");
dPawnMaker.Start(); makerpawned=1;}
else if (makerpawned!=0){
customertalk(); PCListen(); pwn_text.Text=("That again?"); blab1();
customertalk(); PCListen(); pwn_text.Text=("Well, I'll still take it. "); blab1();
PCTalk(); customerlisten(); pwn_text.Text=("What was your offer? "); blab1();
customertalk(); PCListen(); pwn_text.Text=("Ten whole dollars. "); blab1();
PCListen(); customerlisten(); pwn_text.Text=(" "); pwnlabel.Text=(" "); dPawnMaker.Start();}}

function Headunit_Talk(){
customertalk(); PCListen(); pwn_text.Text=("Don't need it anymore? "); blab2();
PCListen(); customerlisten(); pwn_text.Text=(" "); pwn2.Animate(137, 2, 3, eOnce); Wait(40);//Appraisal
customertalk(); PCListen(); pwn_text.Text=("Yeah, I remember that thing. "); blab2();
customertalk(); PCListen(); pwn_text.Text=("Forty bucks? "); blab1();
PCListen(); customerlisten(); pwn_text.Text=(" "); pwnlabel.Text=(" ");
dHeadpawn.Start();}

int passpawned=0;
function BusPass_Talk(){
  if (passpawned==0){
customertalk(); PCListen(); pwn_text.Text=("A bus pass. "); blab1();
customertalk(); PCListen(); pwn_text.Text=("Come on. "); blab1();
PCListen(); customerlisten(); pwn_text.Text=(" "); pwn2.Animate(137, 2, 3, eOnce); Wait(80);//Appraisal
customertalk(); PCListen(); pwn_text.Text=("It's got your name and picture on it. "); blab2();
customertalk(); PCListen(); pwn_text.Text=("Show me something else. "); blab1();
PCListen(); customerlisten(); pwn_text.Text=(" "); pwnlabel.Text=(" ");
passpawned=1;}
else if (passpawned!=0){TJNoway();}}


int knifepawned=0;
function Pocketknife_Talk(){
  if (knifepawned==0){
customertalk(); PCListen(); pwn_text.Text=("Pocket knife, huh? "); blab1();
PCTalk(); customerlisten(); pwn_text.Text=("Yes. "); blab1();
PCListen(); customerlisten(); pwn_text.Text=(" "); pwn2.Animate(137, 2, 3, eOnce); Wait(40);//Appraisal
customertalk(); PCListen(); pwn_text.Text=("You know..."); blab1();
PCListen(); customerlisten(); pwn_text.Text=(" "); pwn2.Animate(137, 2, 3, eOnce); Wait(40);//Appraisal
customertalk(); PCListen(); pwn_text.Text=("I'm gonna pass."); blab1();
customertalk(); PCListen(); pwn_text.Text=("No thanks."); blab1();
PCTalk(); customerlisten(); pwn_text.Text=("What? "); blab1();
customertalk(); PCListen(); pwn_text.Text=("I said no thanks. "); blab2();
PCListen(); customerlisten(); pwn_text.Text=(" "); pwnlabel.Text=(" "); knifepawned=1;}
else if (knifepawned!=0){
customertalk(); PCListen(); pwn_text.Text=("That thing? "); blab1();
customertalk(); PCListen(); pwn_text.Text=("I said no thanks. "); blab2();
PCTalk(); customerlisten(); pwn_text.Text=("What? "); blab1();
customertalk(); PCListen(); pwn_text.Text=("Yeah, remember? "); blab1();
PCListen(); customerlisten(); pwn_text.Text=(" "); pwnlabel.Text=(" ");}}

int chainpawned=0;
function Chainwallet_Talk(){
  if (knifepawned==0){
customertalk(); PCListen(); pwn_text.Text=("What's that? Some kind of wallet "); blab1();
PCTalk(); customerlisten();
if (GetGlobalInt(1)==1){pwn_text.Text=("That is being yes. "); blab1();}
if (GetGlobalInt(1)==2){pwn_text.Text=("Sure, I guess. "); blab1();}
if (GetGlobalInt(1)==3){pwn_text.Text=("Yeah, I guess so. "); blab1();}
if (GetGlobalInt(1)==4){pwn_text.Text=("Yeah. "); blab1();}
PCListen(); customerlisten(); pwn_text.Text=(" "); pwn2.Animate(137, 2, 3, eOnce); Wait(40);//Appraisal
customertalk(); PCListen(); pwn_text.Text=("You know..."); blab1();
PCListen(); customerlisten(); pwn_text.Text=(" "); pwn2.Animate(137, 2, 3, eOnce); Wait(40);//Appraisal
customertalk(); PCListen(); pwn_text.Text=("Normally, I would pass on this."); blab1();
customertalk(); PCListen(); pwn_text.Text=("But it's in good shape, and it's nice leather."); blab1();
PCTalk(); customerlisten(); pwn_text.Text=("So...? "); blab1();
customertalk(); PCListen(); pwn_text.Text=("Five bucks? "); blab2();
PCListen(); customerlisten(); pwn_text.Text=(" "); pwnlabel.Text=(" "); chainpawned=1;
dPwnWallet.Start();}
else if (chainpawned!=0){
customertalk(); PCListen(); pwn_text.Text=("That thing? "); blab1();
customertalk(); PCListen(); pwn_text.Text=("Five bucks, right? "); blab2();
customertalk(); PCListen(); pwn_text.Text=("Isn't that what we said?"); blab1();
PCListen(); customerlisten(); pwn_text.Text=(" "); pwnlabel.Text=(" ");
dPwnWallet.Start();}}

function EmptyPack_Talk(){TJNoway();}
function Ligher_cheap_Talk(){TJNoway();}
function paper_single_Talk(){TJNoway();}
function TestDone_Talk(){TJNoway();}
function Testoffaith_Talk(){TJNoway();}
function Oldpapers_Talk(){TJNoway();}
function Ticket_Talk(){TJNoway();}
function Contract_G_Talk(){TJNoway();}
function Cigarettes_Talk(){TJNoway();}
function Catfood_Talk(){TJNoway();}
function A3Key_Talk(){TJNoway();}
function A3Key2_Talk(){TJNoway();}
function Napkins_Talk(){TJNoway();}
function Cups_Talk(){TJNoway();}
function Crest_Talk(){TJNoway();}
function Rinse_Talk(){TJNoway();}
function CoffeeA_Talk(){TJNoway();}
function CoffeeB_Talk(){TJNoway();}
function CoffeeC_Talk(){TJNoway();}
function CoffeeD_Talk(){TJNoway();}
function Georgetonian_Talk(){TJNoway();}
function Chai_Talk(){TJNoway();}
function Milk_Talk(){TJNoway();}
function Cocoa_Talk(){TJNoway();}
function Syrups_Talk(){TJNoway();}
function Bagel_Plain_Talk(){TJNoway();}
function Cooler_Talk(){TJNoway();}
function Sugar_Talk(){TJNoway();}
function Recipebook_V_Talk(){TJNoway();}
function CreamCheese_Talk(){TJNoway();}
function Jelly_Talk(){TJNoway();}
function Peanutbutter_Talk(){TJNoway();}
function Capers_Talk(){TJNoway();}
function Lox_Talk(){TJNoway();}
function Flour_Talk(){TJNoway();}
function Salt_Talk(){TJNoway();}
function Yeast_Talk(){TJNoway();}
function Buttermilk_Talk(){TJNoway();}
function Vcheese_Talk(){TJNoway();}
function Dayold_Talk(){TJNoway();}
function Oldsand_Talk(){TJNoway();}
function Bigwich_Talk(){TJNoway();}
function Bigwichv_Talk(){TJNoway();}
function ProvNotes_Talk(){pawnbook();}
function pingpong_Talk(){pawnbook();}
function Calamity_Talk(){pawnbook();}
function Carbon_Talk(){pawnbook();}
function Tigers_Talk(){pawnbook();}
function Scandalrag_Talk(){pawnbook();}
function Acrocircus_Talk(){pawnbook();}
function Dragonfeet_Talk(){pawnbook();}
function Fatalsteps_Talk(){pawnbook();}
function Indianlore_Talk(){pawnbook();}

function Card_Bas_Talk(){TJNoway();}
function Buns_Talk(){TJNoway();}
function Chilli_Talk(){TJNoway();}
function Jalapenos_Talk(){TJNoway();}
function Ketchup_Talk(){TJNoway();}
function Mustard_Talk(){TJNoway();}
function Relish_Talk(){TJNoway();}
function Sauerkraut_Talk(){TJNoway();}
function Cream_Talk(){TJNoway();}
function Whipped_Talk(){TJNoway();}


function savescroll_up_OnClick(GUIControl *control, MouseButton button){PlaySound(58); lstSaveGames.ScrollUp();}
function savescroll_down_OnClick(GUIControl *control, MouseButton button){PlaySound(59); lstSaveGames.ScrollDown();}
function loadscroll_up_OnClick(GUIControl *control, MouseButton button){PlaySound(58); lstLoadGames.ScrollUp();}
function loadscroll_down_OnClick(GUIControl *control, MouseButton button){PlaySound(59); lstLoadGames.ScrollDown();}

function rm_biscuits_OnClick(GUIControl *control, MouseButton button){
if ((GetGlobalInt(1)==2)&&(bd_favfood.Text==("Biscuits+Gravy"))){//Picky
gPick.Centre(); close_pick.Visible=false; CloseAll(); PlaySound(60);
pick.NormalGraphic=6108; gPick.Visible=true; pick.Animate(204, 4, 2, eOnce); Wait(80); gPick.Visible=false;}
else{
PlaySound(40); 
if (!raxbylist.Contains("Biscuits+Gravy")){raxbylist.AddItem("Biscuits+Gravy"); raxtotal+=5.00;}
else if (raxbylist.Contains("Biscuits+Gravy")){RemoveRaxItem("Biscuits+Gravy"); raxtotal-=5.00;}}}

function rm_fryup_OnClick(GUIControl *control, MouseButton button){
if ((GetGlobalInt(1)==2)&&(bd_favfood.Text==("Fryup Roll"))){//Picky
gPick.Centre(); close_pick.Visible=false; CloseAll(); PlaySound(60);
pick.NormalGraphic=6108; gPick.Visible=true; pick.Animate(204, 4, 2, eOnce); Wait(80); gPick.Visible=false;}
else{PlaySound(40);  
if (!raxbylist.Contains("Fry-up + Roll")){raxbylist.AddItem("Fry-up + Roll"); raxtotal+=5.00;}
else if (raxbylist.Contains("Fry-up + Roll")){RemoveRaxItem("Fry-up + Roll"); raxtotal-=5.00;}}}

function rm_pancakes_OnClick(GUIControl *control, MouseButton button){
if ((GetGlobalInt(1)==2)&&(bd_favfood.Text==("Pancakes"))){//Picky
gPick.Centre(); close_pick.Visible=false; CloseAll(); PlaySound(60);
pick.NormalGraphic=6108; gPick.Visible=true; pick.Animate(204, 4, 2, eOnce); Wait(80); gPick.Visible=false;}
else{  
PlaySound(40);
if (!raxbylist.Contains("Pancakes")){raxbylist.AddItem("Pancakes"); raxtotal+=4.00;}
else if (raxbylist.Contains("Pancakes")){RemoveRaxItem("Pancakes"); raxtotal-=4.00;}}}

function rm_scrapple_OnClick(GUIControl *control, MouseButton button){
if ((GetGlobalInt(1)==2)&&(bd_favfood.Text==("Scrapple"))){//Picky
gPick.Centre(); close_pick.Visible=false; CloseAll(); PlaySound(60);
pick.NormalGraphic=6108; gPick.Visible=true; pick.Animate(204, 4, 2, eOnce); Wait(80); gPick.Visible=false;}
else{PlaySound(40);
if (!raxbylist.Contains("Scrapple Plate")){raxbylist.AddItem("Scrapple Plate"); raxtotal+=3.00;}
else if (raxbylist.Contains("Scrapple Plate")){RemoveRaxItem("Scrapple Plate"); raxtotal-=3.00;}}}

function rm_soup_OnClick(GUIControl *control, MouseButton button){
if ((GetGlobalInt(1)==2)&&(bd_favfood.Text==("Soup"))){//Picky
gPick.Centre(); close_pick.Visible=false; CloseAll(); PlaySound(60);
pick.NormalGraphic=6108; gPick.Visible=true; pick.Animate(204, 4, 2, eOnce); Wait(80); gPick.Visible=false;}
else{  
PlaySound(40);
if (!raxbylist.Contains("Soup")){raxbylist.AddItem("Soup"); raxtotal+=3.00;}
else if (raxbylist.Contains("Soup")){RemoveRaxItem("Soup"); raxtotal-=3.00;}}}

function rm_scraphash_OnClick(GUIControl *control, MouseButton button){
if ((GetGlobalInt(1)==2)&&(bd_favfood.Text==("Scrap Plate"))){//Picky
gPick.Centre(); close_pick.Visible=false; CloseAll(); PlaySound(60);
pick.NormalGraphic=6108; gPick.Visible=true; pick.Animate(204, 4, 2, eOnce); Wait(80); gPick.Visible=false;}
else{  
PlaySound(40);
if (!raxbylist.Contains("Collins St. Scrap")){raxbylist.AddItem("Collins St. Scrap"); raxtotal+=6.00;}
else if (raxbylist.Contains("Collins St. Scrap")){RemoveRaxItem("Collins St. Scrap"); raxtotal-=6.00;}}}

function rm_meatloaf_OnClick(GUIControl *control, MouseButton button){
if ((GetGlobalInt(1)==2)&&(bd_favfood.Text==("Meatloaf"))){//Picky
gPick.Centre(); close_pick.Visible=false; CloseAll(); PlaySound(60);
pick.NormalGraphic=6108; gPick.Visible=true; pick.Animate(204, 4, 2, eOnce); Wait(80); gPick.Visible=false;}
else{PlaySound(40);
if (!raxbylist.Contains("Meatloaf")){raxbylist.AddItem("Meatloaf"); raxtotal+=8.00;}
else if (raxbylist.Contains("Meatloaf")){RemoveRaxItem("Meatloaf"); raxtotal-=8.00;}}}

function rm_pie_OnClick(GUIControl *control, MouseButton button){
if ((GetGlobalInt(1)==2)&&(bd_favfood.Text==("Pie"))){//Picky
gPick.Centre(); close_pick.Visible=false; CloseAll(); PlaySound(60);
pick.NormalGraphic=6108; gPick.Visible=true; pick.Animate(204, 4, 2, eOnce); Wait(80); gPick.Visible=false;}
else{PlaySound(40);
if (!raxbylist.Contains("Pie")){raxbylist.AddItem("Pie"); raxtotal+=2.00;}
else if (raxbylist.Contains("Pie")){RemoveRaxItem("Pie"); raxtotal-=2.00;}}}

function rm_coffee_OnClick(GUIControl *control, MouseButton button){PlaySound(40);
if (!raxbylist.Contains("Coffee")){raxbylist.AddItem("Coffee"); raxtotal+=1.40;}
else if (raxbylist.Contains("Coffee")){RemoveRaxItem("Coffee"); raxtotal-=1.40;}}

function rm_juice_OnClick(GUIControl *control, MouseButton button){PlaySound(40);
if (!raxbylist.Contains("Juice")){raxbylist.AddItem("Juice"); raxtotal+=1.50;}
else if (raxbylist.Contains("Juice")){RemoveRaxItem("Juice"); raxtotal-=1.50;}}

function rm_order_OnClick(GUIControl *control, MouseButton button){
  if (Money>=raxtotal){
//===================foodchecks=============//
gPick.Centre(); close_pick.Visible=false; gPick.Visible=true; 
if (raxbylist.Contains("Biscuits+Gravy")){triptaphan(10); nutrition.Width+=50;  fBiscuits+=1; pick.Animate(156, 0, 1, eOnce); Wait(75);}
if (raxbylist.Contains("Fry-up + Roll")){triptaphan(10); nutrition.Width+=60;  fFryup+=1; pick.Animate(156, 1, 1, eOnce); Wait(75);}
if (raxbylist.Contains("Pancakes")){triptaphan(15); nutrition.Width+=50; fPancakes+=1; pick.Animate(156, 2, 1, eOnce); Wait(75);}
if (raxbylist.Contains("Scrapple Plate")){triptaphan(18); nutrition.Width+=50; fScrapple+=1; pick.Animate(156, 3, 1, eOnce); Wait(75);}
if (raxbylist.Contains("Soup")){nutrition.Width+=30; pick.Animate(156, 4, 1, eOnce); fSoup+=1; Wait(75);}

if (raxbylist.Contains("Collins St. Scrap")){triptaphan(40); nutrition.Width=110; fHash+=1; pick.Animate(156, 6, 1, eOnce); Wait(75);
int greasyspoon=Random(10);//Never know what you're gonna get.
//greasyspoon=10;//Certainty!
if (greasyspoon==10){pick.NormalGraphic=7196; TopUp("Wait a minute...","The last bite was hard and sharp...");
TopUp("There's something...","What is it...?");
PlaySound(9); TopItem("Got a Gold Tooth!","Strange?",7195);
cSlot2.AddInventory(GoldTooth);}
}

if (raxbylist.Contains("Meatloaf")){triptaphan(15); nutrition.Width=110; fMeatloaf+=1;pick.Animate(156, 3, 1, eOnce); Wait(75);}
if (raxbylist.Contains("Pie")){nutrition.Width+=20; fPie+=1; pick.Animate(156, 5, 1, eOnce); Wait(75);}

if (raxbylist.Contains("Coffee")){caffthresh=(caffthresh / 2); vitality.Width+=(caffthresh); 
if (GetGlobalInt(1)==1){pick.Animate(119, 1, 3, eOnce); Wait(60);}
if (GetGlobalInt(1)==2){pick.Animate(120, 1, 2, eOnce); Wait(60);}
if (GetGlobalInt(1)==3){pick.Animate(118, 1, 2, eOnce); Wait(60); caffeine.Width=110;}
if (GetGlobalInt(1)==3){}}

if (raxbylist.Contains("Juice")){vitality.Width+=5; nutrition.Width+=15; 
if (GetGlobalInt(1)==1){pick.Animate(119, 1, 3, eOnce); Wait(60);}
if (GetGlobalInt(1)==2){pick.Animate(120, 1, 2, eOnce); Wait(60);}
if (GetGlobalInt(1)==3){pick.Animate(118, 1, 2, eOnce); Wait(60);}
if (GetGlobalInt(1)==4){}}

expenselist.AddItem(String.Format("%.2f - Meal at Dompactor Raxby",raxtotal));
Money-=(raxtotal); PlaySound(4); TopUp("Order Up!", String.Format("Lost $%.2f",raxtotal)); expense_misc+=(raxtotal);
//raxtotal=0.00;//Waiting to reset this for tip calculation.
raxbylist.Clear(); gRaxbymenu.Visible=false; mouse.Visible=false; gPick.Visible=false;
TalkPop(); Wait(40); dName.Visible=true; dText.Visible=true; 
PCListen(); customerlisten(); Mouse.Visible=false;
PCListen(); customertalk(); dText.Text=("Can I get you anything else?"); blab3(); dSteph1.Start(); 

}//ORDER UP!

else if (Money<raxtotal){
PlaySound(60); TopUp("Insufficient funds!",String.Format("You only have $%.2f!",Money)); 
vitality.Width -=10;}}

//=========///COOOOOOOOOOOOOOOOOOKKKKKKKKKKIIIIIIIIIIIIINGGGGGGGGGGGGGGGG///////////=============//////////
//===========//dynamic bagelry//=========//
function dynamiteBagels(){
String newbatchname;
int newbatchgraphic;

//Possibilities....
if (spcMix==("Cocoa")){newbatchname=("Chocolate Bagel"); newbatchgraphic=7202;}
if (spcMix==("Peanut Butter")){newbatchname=("Peanut Bagel"); newbatchgraphic=7201;}
if (spcMix==("Jelly")){newbatchname=("Grape Bagel"); newbatchgraphic=7203;}
if (spcMix==("Lox")){newbatchname=("Fishy Bagel"); newbatchgraphic=7203;}
if (spcMix==("Chai")){newbatchname=("Tea Bagel"); newbatchgraphic=7201;}
if (spcMix==("Coffee")){newbatchname=("Coffee Bagel"); newbatchgraphic=7201;}
if (spcMix==("Capers")){newbatchname=("Capery Bagel"); newbatchgraphic=7203;}
if (spcMix==("Pipeline")){newbatchname=("Cola Bagel"); newbatchgraphic=7201;}
if (spcMix==("Catfood")){newbatchname=("Catfood Bagel"); newbatchgraphic=7203;}
if (spcMix==("Jalapeno")){newbatchname=("Jalapeno Bagel"); newbatchgraphic=7201;}
if (spcMix==("Chili")){newbatchname=("Chili Bagel"); newbatchgraphic=7202;}
if (spcMix==("Ketchup")){newbatchname=("Ketchup Bagel"); newbatchgraphic=7202;}
if (spcMix==("Mustard")){newbatchname=("Mustard Bagel"); newbatchgraphic=7201;}
if (spcMix==("Relish")){newbatchname=("Relish Bagel"); newbatchgraphic=7203;}
if (spcMix==("Sauerkraut")){newbatchname=("Kraut Bagel"); newbatchgraphic=7203;}
if (spcMix==("Cinnamon")){newbatchname=("Cinnamon Bagel"); newbatchgraphic=7202;}
if (spcMix==("Camphor ")){newbatchname=("Camphor Bagel"); newbatchgraphic=7202;}
if (spcMix==("Taco")){newbatchname=("Taco Bagel"); newbatchgraphic=7201;}

if ((player.InventoryQuantity[spcBagels1.ID]!=0)&&(player.InventoryQuantity[spcBagels2.ID]!=0)&&(player.InventoryQuantity[spcBagels3.ID]!=0)&&(player.InventoryQuantity[spcBagels4.ID]!=0)&&(newbatchname!=(spcBagels1.Name))&&(newbatchname!=(spcBagels2.Name))&&(newbatchname!=(spcBagels3.Name))&&(newbatchname!=(spcBagels4.Name))){
TopUp("That's enough special bagels for today...","Try selling what you've got, first.");}

else{
if ((player.InventoryQuantity[spcBagels1.ID]==0)||(newbatchname==(spcBagels1.Name))){//First Batch
spcbagels1_remaining+=12; player.AddInventory(spcBagels1);
spcBagels1.Name=String.Format("%s",newbatchname); spcBagels1.Graphic=(newbatchgraphic);}

else if (((player.InventoryQuantity[spcBagels1.ID]!=0)&&(player.InventoryQuantity[spcBagels2.ID]==0))||(newbatchname==(spcBagels1.Name))){
spcbagels2_remaining+=12; player.AddInventory(spcBagels2);
spcBagels2.Name=String.Format("%s",newbatchname); spcBagels2.Graphic=(newbatchgraphic);}

else if (((player.InventoryQuantity[spcBagels1.ID]!=0)&&(player.InventoryQuantity[spcBagels2.ID]!=0)&&(player.InventoryQuantity[spcBagels3.ID]==0))||(newbatchname==(spcBagels1.Name))){
spcbagels3_remaining+=12; player.AddInventory(spcBagels3);
spcBagels3.Name=String.Format("%s",newbatchname); spcBagels3.Graphic=(newbatchgraphic);}

else if (((player.InventoryQuantity[spcBagels1.ID]!=0)&&(player.InventoryQuantity[spcBagels2.ID]!=0)&&(player.InventoryQuantity[spcBagels3.ID]!=0)&&(player.InventoryQuantity[spcBagels4.ID]==0))||(newbatchname==(spcBagels1.Name))){
spcbagels4_remaining+=12; player.AddInventory(spcBagels4);
spcBagels4.Name=String.Format("%s",newbatchname); spcBagels4.Graphic=(newbatchgraphic);}

quant_1.Text=("0"); quant_2.Text=("0"); quant_3.Text=("0"); quant_4.Text=("0"); 
Stand.LoseAllInv(); 
gPick.Visible=false; pick.X=38; pick.Y=16; close_pick.Visible=true; Wait(10); FadeIn(2);
if (Stand.InventoryQuantity[Crud.ID]!=0){Stand.LoseAllInv();}
PlaySound(9);  TopItem("Bagelature! Good work!"," ",1178);
Bagel_PlainGross-=1.70;}
}

function cb1_OnClick(GUIControl *control, MouseButton button){
if (cb1.NormalGraphic==1201){//Vinny's book
PlaySound(41); gItemDesc.BackgroundGraphic=1202;
sgw.Visible=false; smoke_button.Visible=false; price_blackout.Visible=false; itemprice.Visible=false;
remaining_label.Text=(" "); prev_button.Visible=true; next_button.Visible=true; gItemDesc.Visible = true;}
}

//=========BAKE=============BAKE=============//
function bake_OnClick(GUIControl *control, MouseButton button){
if (themix.ItemCount==0){PlaySound(60); TopUp("First - Add ingredients", "Nothing to bake!");}
else{
PlaySound(41); gPick.Centre(); pick.X=0; pick.Y=0; close_pick.Visible=false;//Prepare Animation
pick.NormalGraphic=3644; gPick.Visible=true;  pick.Animate(170, 0, 3, eOnce); Wait(60);//Run Animation
FadeOut(2); Wait(10); 
if (GetGlobalInt(1)==2){pick.NormalGraphic=4422; Wait(5); FadeIn(2); pick.Animate(170, 7, 3, eRepeat); Wait(120);}//Mel
if (GetGlobalInt(1)==3){pick.NormalGraphic=4350; Wait(5); FadeIn(2); pick.Animate(170, 1, 3, eOnce); Wait(120);}//Vinny
FadeOut(2);  Wait(10); 
//Process Baking Here...

if ((Stand.InventoryQuantity[Dough_bagel.ID]!=0)&&(themix.ItemCount==1)){//Bagels!
quant_1.Text=("0"); quant_2.Text=("0"); quant_3.Text=("0"); quant_4.Text=("0"); 
Stand.LoseAllInv(); bagel_plain_remaining+=12;
if (player.InventoryQuantity[Bagel_Plain.ID]==0){player.AddInventory(Bagel_Plain);}
gPick.Visible=false; pick.X=38; pick.Y=16; close_pick.Visible=true; Wait(10); FadeIn(2);
PlaySound(9); 
TopItem("Bagelature! Good work!"," ",1178);
Bagel_PlainGross-=1.70;}

else if ((Stand.InventoryQuantity[dough_bagelS.ID]!=0)&&(themix.ItemCount==1)){//Bagels!
if (spcMix==("Cocoa")){dynamiteBagels();}
else if (spcMix==("Peanut Butter")){dynamiteBagels();}
else if (spcMix==("Jelly")){dynamiteBagels();}
else if (spcMix==("Lox")){dynamiteBagels();}
else if (spcMix==("Chai")){dynamiteBagels();}
else if (spcMix==("Coffee")){dynamiteBagels();}
else if (spcMix==("Capers")){dynamiteBagels();}
else if (spcMix==("Pipeline")){dynamiteBagels();}
else if (spcMix==("Catfood")){dynamiteBagels();}
else if (spcMix==("Jalapeno")){dynamiteBagels();}
else if (spcMix==("Chili")){dynamiteBagels();}
else if (spcMix==("Ketchup")){dynamiteBagels();}
else if (spcMix==("Mustard")){dynamiteBagels();}
else if (spcMix==("Relish")){dynamiteBagels();}
else if (spcMix==("Sauerkraut")){dynamiteBagels();}
else if (spcMix==("Cinnamon")){dynamiteBagels();}
else if (spcMix==("Camphor ")){dynamiteBagels();}
else if (spcMix==("Taco")){dynamiteBagels();}
else {}//Weird Special->Crud
//Stand.LoseAllInv(); Stand.AddInventory(Crud);
//quant_1.Text=("1"); quant_2.Text=("0"); quant_3.Text=("0"); quant_4.Text=("0");
//gPick.Visible=false; pick.X=38; pick.Y=16; close_pick.Visible=true; Wait(10); FadeIn(2);
}

else {//Crud!
Stand.LoseAllInv(); Stand.AddInventory(Crud);
quant_1.Text=("1"); quant_2.Text=("0"); quant_3.Text=("0"); quant_4.Text=("0");
gPick.Visible=false; pick.X=38; pick.Y=16; close_pick.Visible=true; Wait(10); FadeIn(2);
}}}


//=========BOIL=============BOIL=============//
function boil_OnClick(GUIControl *control, MouseButton button){
if (themix.ItemCount==0){PlaySound(60); TopUp("First - Add ingredients", "Nothing to boil!");}
else{
PlaySound(41);
gPick.Centre(); pick.X=0; pick.Y=0; close_pick.Visible=false;//Prepare Animation
pick.NormalGraphic=3644; gPick.Visible=true;  pick.Animate(170, 2, 3, eRepeat); Wait(80);//Run Animation
//Process Boiling Here...

if ((xMilk==4)&&(xButtermilk==2)&&(themix.ItemCount==2)){//Creamcheese
Stand.LoseAllInv(); Stand.AddInventory(Fluid_dairy); 
PlaySound(9); TopUp("Hmm....", "Got dairy fluid!");
quant_1.Text=("1"); quant_2.Text=("0"); quant_3.Text=("0"); quant_4.Text=("0");}

else if ((Stand.InventoryQuantity[Dough_good.ID]!=0)&&(themix.ItemCount==1)){//BAGELETURE2
Stand.LoseAllInv(); Stand.AddInventory(Dough_bagel); 
PlaySound(9); TopUp("Almost there!", "Got bagel dough!!");
quant_1.Text=("12"); quant_2.Text=("0"); quant_3.Text=("0"); quant_4.Text=("0");}

else if ((Stand.InventoryQuantity[dough_special.ID]!=0)&&(themix.ItemCount==1)){//BAGELETURE2
Stand.LoseAllInv(); Stand.AddInventory(dough_bagelS); 
PlaySound(9); TopUp("Almost there!", "Got special bagel dough!!");
quant_1.Text=("12"); quant_2.Text=("0"); quant_3.Text=("0"); quant_4.Text=("0");}

else {//Crud
Stand.LoseAllInv(); Stand.AddInventory(Crud);
quant_1.Text=("1"); quant_2.Text=("0"); quant_3.Text=("0"); quant_4.Text=("0");}

gPick.Visible=false; pick.X=38; pick.Y=16; close_pick.Visible=true; chefblank(); Wait(10);}}

//=========CHILL=============CHILL=============//
function chill_OnClick(GUIControl *control, MouseButton button){
if (themix.ItemCount==0){PlaySound(60); TopUp("First - Add ingredients", "Nothing to chill!");}
else{
PlaySound(41);
gPick.Centre(); pick.X=0; pick.Y=0; close_pick.Visible=false;//Prepare Animation
pick.NormalGraphic=3644; gPick.Visible=true;  pick.Animate(170, 3, 3, eOnce); Wait(80);//Run Animation
FadeOut(2); Wait(10); 
if (GetGlobalInt(1)==2){pick.NormalGraphic=4422; Wait(5); FadeIn(2); pick.Animate(170, 7, 3, eRepeat); Wait(80);}//Mel
if (GetGlobalInt(1)==3){pick.NormalGraphic=4350; Wait(5); FadeIn(2); pick.Animate(170, 1, 3, eOnce); Wait(120);}//Vinny
FadeOut(2);  Wait(10); 
//Process Chill Here...


if ((Stand.InventoryQuantity[Creamymix.ID]!=0)&&(themix.ItemCount==1)){//Creamcheese4
Stand.LoseAllInv(); vcheese_remaining+=10;
if (player.InventoryQuantity[Vcheese.ID]==0){player.AddInventory(Vcheese); }
gPick.Visible=false; pick.X=38; pick.Y=16; chefblank(); close_pick.Visible=true; Wait(10); FadeIn(2);
PlaySound(9); 
TopItem("Homemade cream cheese! Good Work!"," ",1259);
quant_1.Text=("0"); quant_2.Text=("0"); quant_3.Text=("0"); quant_4.Text=("0");}

else {//Crud!
Stand.LoseAllInv(); Stand.AddInventory(Crud);
quant_1.Text=("1"); quant_2.Text=("0"); quant_3.Text=("0"); quant_4.Text=("0");
gPick.Visible=false; pick.X=38; pick.Y=16; close_pick.Visible=true; Wait(10); FadeIn(2);}}}

//=========FRY=============FRY=============//
function fry_OnClick(GUIControl *control, MouseButton button){
if (themix.ItemCount==0){PlaySound(60); TopUp("First - Add ingredients", "Nothing to fry!");}
else {
PlaySound(41);
gPick.Centre(); pick.X=0; pick.Y=0; close_pick.Visible=false;//Prepare Animation
pick.NormalGraphic=3644; gPick.Visible=true;  pick.Animate(170, 4, 3, eRepeat); Wait(80);//Run Animation
//All frying ends up in crud
Stand.LoseAllInv(); Stand.AddInventory(Crud);
quant_1.Text=("1"); quant_2.Text=("0"); quant_3.Text=("0"); quant_4.Text=("0");
gPick.Visible=false; pick.X=38; pick.Y=16; close_pick.Visible=true; chefblank(); Wait(10);
}}

//=========MIX=============MIX=============//
function Button20_OnClick(GUIControl *control, MouseButton button){
if (themix.ItemCount==0){PlaySound(60); TopUp("First - Add ingredients", "Nothing to mix!");}
else{
PlaySound(41); gPick.Centre(); pick.X=0; pick.Y=0; close_pick.Visible=false;//Prepare Animation
pick.NormalGraphic=3644; gPick.Visible=true;  pick.Animate(170, 5, 3, eOnce); Wait(80);//Run Animation
//Process Mixing Here...
if ((xSalt==1)&&(Stand.InventoryQuantity[Curds.ID]!=0)&&(themix.ItemCount==2)){//Creamcheese2
Stand.LoseAllInv(); Stand.AddInventory(Creamymix); 
PlaySound(9); TopUp("Hmm....", "Got creamy mixture!");
quant_1.Text=("1"); quant_2.Text=("0"); quant_3.Text=("0"); quant_4.Text=("0");}
else if ((xSalt==3)&&(xSugar==1)&&(xYeast==2)&&(xFlour==8)&&(themix.ItemCount==4)){//Bagel Dough
Stand.LoseAllInv(); Stand.AddInventory(Dough_good); 
PlaySound(9); TopUp("Hmm....", "Got dough!");
quant_1.Text=("1"); quant_2.Text=("0"); quant_3.Text=("0"); quant_4.Text=("0");}


//=====//Special, Dynamic Bagel processing....///===============////
else if ((Stand.InventoryQuantity[Dough_good.ID]!=0)&&(themix.ItemCount==2)){//Special Bagel Dough

if (Stand.InventoryQuantity[Cocoa.ID]!=0){spcMix=("Cocoa");}
if (Stand.InventoryQuantity[Peanutbutter.ID]!=0){spcMix=("Peanut Butter");}
if (Stand.InventoryQuantity[Jelly.ID]!=0){spcMix=("Jelly");}
if (Stand.InventoryQuantity[Lox.ID]!=0){spcMix=("Lox");}
if (Stand.InventoryQuantity[Chai.ID]!=0){spcMix=("Chai");}
if (Stand.InventoryQuantity[CoffeeA.ID]!=0){spcMix=("Coffee");}
if (Stand.InventoryQuantity[CoffeeB.ID]!=0){spcMix=("Coffee");}
if (Stand.InventoryQuantity[CoffeeC.ID]!=0){spcMix=("Coffee");}
if (Stand.InventoryQuantity[CoffeeD.ID]!=0){spcMix=("Coffee");}
if (Stand.InventoryQuantity[CoffeeS.ID]!=0){spcMix=("Coffee");}
if (Stand.InventoryQuantity[Capers.ID]!=0){spcMix=("Capers");}
if (Stand.InventoryQuantity[Rinse.ID]!=0){spcMix=("Pipeline");}
if (Stand.InventoryQuantity[Crest.ID]!=0){spcMix=("Pipeline");}
if (Stand.InventoryQuantity[Catfood.ID]!=0){spcMix=("Catfood");}
if (Stand.InventoryQuantity[Jalapenos.ID]!=0){spcMix=("Jalapeno");}
if (Stand.InventoryQuantity[Chilli.ID]!=0){spcMix=("Chili");}
if (Stand.InventoryQuantity[Ketchup.ID]!=0){spcMix=("Ketchup");}
if (Stand.InventoryQuantity[Mustard.ID]!=0){spcMix=("Mustard");}
if (Stand.InventoryQuantity[Relish.ID]!=0){spcMix=("Relish");}
if (Stand.InventoryQuantity[Sauerkraut.ID]!=0){spcMix=("Sauerkraut");}
if (Stand.InventoryQuantity[Cinnamon.ID]!=0){spcMix=("Cinnamon");}
if (Stand.InventoryQuantity[Camphor.ID]!=0){spcMix=("Camphor ");}
if (Stand.InventoryQuantity[TacoSeasoning.ID]!=0){spcMix=("Taco");}

Stand.LoseAllInv(); Stand.AddInventory(dough_special); 
PlaySound(9); TopUp("Hmm....", "Got some special dough...");
quant_1.Text=("1"); quant_2.Text=("0"); quant_3.Text=("0"); quant_4.Text=("0");}


else {//Crud
Stand.LoseAllInv(); Stand.AddInventory(Crud);
quant_1.Text=("1"); quant_2.Text=("0"); quant_3.Text=("0"); quant_4.Text=("0");}

//End FRY
gPick.Visible=false; pick.X=38; pick.Y=16; close_pick.Visible=true; chefblank(); Wait(10);}}

//=========STRAIN=============STRAIN=============//
function strain_OnClick(GUIControl *control, MouseButton button){
if (themix.ItemCount==0){PlaySound(60); TopUp("First - Add ingredients", "Nothing to strain!");}
else{
PlaySound(41); gPick.Centre(); pick.X=0; pick.Y=0; close_pick.Visible=false;//Prepare Animation
pick.NormalGraphic=3644; gPick.Visible=true;  pick.Animate(170, 6, 3, eRepeat); Wait(80);//Run Animation
//Process Straining Here...

if ((Stand.InventoryQuantity[Fluid_dairy.ID]!=0)&&(themix.ItemCount==1)){//Creamcheese2
Stand.LoseAllInv(); Stand.AddInventory(Curds); 
PlaySound(9); TopUp("Hmm....", "Got curds!");
quant_1.Text=("1"); quant_2.Text=("0"); quant_3.Text=("0"); quant_4.Text=("0");}

else {//Crud
Stand.LoseAllInv(); Stand.AddInventory(Crud);
quant_1.Text=("1"); quant_2.Text=("0"); quant_3.Text=("0"); quant_4.Text=("0");}

gPick.Visible=false; pick.X=38; pick.Y=16; close_pick.Visible=true; chefblank(); Wait(10);}}


//=========CRUD=============CRUD=============//
function Crud_Look(){
gPick.Centre(); pick.X=0; pick.Y=0; close_pick.Visible=false;//Prepare Animation
if (GetGlobalInt(1)==2){pick.NormalGraphic=4441; gPick.Visible=true; pick.Animate(170, 7, 5, eRepeat); Wait(120);}//Mel
if (GetGlobalInt(1)==3){pick.NormalGraphic=4441; gPick.Visible=true; pick.Animate(170, 9, 3, eOnce); Wait(120);}//Vinny
pick.Animate(170, 8, 2, eOnce); Wait(60);
FadeOut(2);  Wait(10); gPick.Visible=false; pick.X=38; pick.Y=16; close_pick.Visible=true; 
quant_1.Text=("0"); quant_2.Text=("0"); quant_3.Text=("0"); quant_4.Text=("0");
Stand.LoseAllInv(); chefblank(); Wait(10); FadeIn(2);}


//=========Gohome=============Gohome=============//
function gohome(){
gInfo.Visible=false; SetTimer(18, 0); SetTimer(17, 0); PlaySound(28);

     if (GetGlobalInt(98)==5) {FadeOut(5); Wait(5); player.ChangeRoom(5,  158, 158); SetTimer(2, 40);}//Franklin
else if (GetGlobalInt(98)==13) {FadeOut(5); Wait(5); player.ChangeRoom(13,  84, 113); SetTimer(2, 40);}//Brennan Ave Bridge
else if (GetGlobalInt(98)==14) {FadeOut(5); Wait(5); player.ChangeRoom(14,  17, 161); SetTimer(2, 40);}//Downtown
else if (GetGlobalInt(98)==7) {FadeOut(5); Wait(5); player.ChangeRoom(7, 21, 193);}//Andrus
else if (GetGlobalInt(98)==2) {FadeOut(5); Wait(5); player.ChangeRoom(2,  398, 191);}//Melanie
else if (GetGlobalInt(98)==6) {FadeOut(5); Wait(5); player.ChangeRoom(6,  331, 131);}//Vinny
else if (GetGlobalInt(98)==8) {FadeOut(5); Wait(5); player.ChangeRoom(8,  400, 191);}//Logan

else if (GetGlobalInt(98)==19)  {PlaySound(60); Wait(80); TopUp("Not just yet...", "The mall is under construction.");}
  //FadeOut(5); Wait(5); player.ChangeRoom(19,  25, 160);}//Mall

else if (GetGlobalInt(98)==20)  {FadeOut(5); Wait(5); player.ChangeRoom(20,  26, 183); SetTimer(2, 40);}//Florin
else if (GetGlobalInt(98)==21)  {FadeOut(5); Wait(5); player.ChangeRoom(21,  29, 173); SetTimer(2, 40);}//Superstore
else if (GetGlobalInt(98)==22)  {FadeOut(5); Wait(5); player.ChangeRoom(22,  41, 160); SetTimer(2, 40);}//13th
else if (GetGlobalInt(98)==26)  {FadeOut(5); Wait(5); player.ChangeRoom(26,  20, 160); SetTimer(2, 40);}//Collins
else if (GetGlobalInt(98)==34)  {FadeOut(5); Wait(5); player.ChangeRoom(34,  20, 160); SetTimer(2, 40);}//Park
else if (GetGlobalInt(98)==38)  {FadeOut(5); Wait(5); player.ChangeRoom(38,  40, 160); SetTimer(2, 40);}//School

else if (GetGlobalInt(98)==5)  {PlaySound(60); TopUp("Not just yet...", "The airport is under construction.");}
gTravel.Visible=false;}


function taxi_OnClick(GUIControl *control, MouseButton button){//Cab
if (taxifare>Money){Insufficiency();}
else{
Money-=(taxifare); expense_travel+=(taxifare); expense_total+=(taxifare);
expenselist.AddItem(String.Format("%.2f - Taxi Fare",taxifare));
PlaySound(9); TopUp("Taxi!", String.Format("Spent $%.2f on cab fare!",taxifare));
gInfo.Visible=false; SetTimer(18, 0); SetTimer(17, 0); PlaySound(28);

gPick.Centre(); pick.X=0; pick.Y=0; close_pick.Visible=false;//Prepare Animation
//Run Animation
if (GetGlobalInt(1)==1){pick.NormalGraphic=7283; gPick.Visible=true;  pick.Animate(203, 2, 2, eOnce); }//Andrus
if (GetGlobalInt(1)==2){pick.NormalGraphic=7329; gPick.Visible=true;  pick.Animate(203, 3, 2, eOnce); }//Mel
if (GetGlobalInt(1)==3){pick.NormalGraphic=7384; gPick.Visible=true;  pick.Animate(203, 4, 2, eOnce); }//Vinny
if (GetGlobalInt(1)==4){pick.NormalGraphic=7428; gPick.Visible=true;  pick.Animate(203, 5, 2, eOnce); }//Logan

Wait(120);
FadeOut(5); 
gPick.Visible=false; pick.X=38; pick.Y=16; close_pick.Visible=true; 

     if (GetGlobalInt(99)==5) {player.ChangeRoom(5,  158, 158); SetTimer(2, 40);}//Franklin
else if (GetGlobalInt(99)==13) {player.ChangeRoom(13,  84, 113); SetTimer(2, 40);}//Brennan Ave Bridge
else if (GetGlobalInt(99)==14) {player.ChangeRoom(14,  17, 161); SetTimer(2, 40);}//Downtown
else if (GetGlobalInt(99)==7) {player.ChangeRoom(7, 21, 193);}//Andrus
else if (GetGlobalInt(99)==2) {player.ChangeRoom(2,  398, 191);}//Melanie
else if (GetGlobalInt(99)==6) {player.ChangeRoom(6,  331, 131);}//Vinny
else if (GetGlobalInt(99)==8) {player.ChangeRoom(8,  400, 191);}//Logan
else if (GetGlobalInt(99)==19)  {PlaySound(60); Wait(80); TopUp("Not just yet...", "The mall is under construction.");}
  //player.ChangeRoom(19,  25, 160);}//Mall
else if (GetGlobalInt(99)==20)  {player.ChangeRoom(20,  26, 183); SetTimer(2, 40);}//Florin
else if (GetGlobalInt(99)==21)  {player.ChangeRoom(21,  29, 173); SetTimer(2, 40);}//Superstore
else if (GetGlobalInt(99)==22)  {player.ChangeRoom(22,  41, 160); SetTimer(2, 40);}//13th
else if (GetGlobalInt(99)==26)  {player.ChangeRoom(26,  20, 160); SetTimer(2, 40);}//Collins
else if (GetGlobalInt(99)==34)  {player.ChangeRoom(34,  20, 160); SetTimer(2, 40);}//Park
else if (GetGlobalInt(99)==38)  {player.ChangeRoom(38,  35, 160); SetTimer(2, 40);}//School
else if (GetGlobalInt(99)==5)  {PlaySound(60); TopUp("Not just yet...", "The airport is under construction.");}
gTravel.Visible=false;}

}//End Cab

function foot_OnClick(GUIControl *control, MouseButton button){//Walking
     if (GetGlobalInt(99)==5)SetGlobalInt(95, 3);//Franklin
else if (GetGlobalInt(99)==13)SetGlobalInt(95, 5);//Brennan Ave Bridge
else if (GetGlobalInt(99)==14)SetGlobalInt(95, 2);//Downtown
else if (GetGlobalInt(99)==7)SetGlobalInt(95, 9);//Andrus
else if (GetGlobalInt(99)==2)SetGlobalInt(95, 0);//Melanie
else if (GetGlobalInt(99)==6)SetGlobalInt(95, 8);//Vinny
else if (GetGlobalInt(99)==8)SetGlobalInt(95, 0);//Logan
else if (GetGlobalInt(99)==20)SetGlobalInt(95, 7);//Florin
else if (GetGlobalInt(99)==21)SetGlobalInt(95, 4);//Superstore
else if (GetGlobalInt(99)==22)SetGlobalInt(95, 6);//13th
else if (GetGlobalInt(99)==26)SetGlobalInt(95, 1);//Collins
else if (GetGlobalInt(99)==34)SetGlobalInt(95, 0);//Park
else if (GetGlobalInt(99)==38)SetGlobalInt(95, 0);//School

else if (GetGlobalInt(99)==19)  {PlaySound(60); Wait(80); TopUp("Not just yet...", "The mall is under construction.");}
  //FadeOut(5); Wait(5); player.ChangeRoom(19,  25, 160);}//Mall
else if (GetGlobalInt(99)==5)  {PlaySound(60); TopUp("Not just yet...", "The airport is under construction.");}
gTravel.Visible=false;

PlaySound(28);  FadeOut(5); Wait(5); 
gInfo.Visible=false; SetTimer(18, 0); SetTimer(17, 0); gTravel.Visible=false;
//Walken!
mouse.Visible=false; 
gPick.Centre(); pick.X=0; pick.Y=0; close_pick.Visible=false;//Prepare Animation
if ((milhour<8)||(milhour>20)){//Woman a love in the night time.
pick.NormalGraphic=7506; gPick.Visible=true;  Wait(5); FadeIn(10); pick.Animate(252, 1, 3, eOnce); Wait(80);}//Run Animation
else {//Woman a love in the day time.
pick.NormalGraphic=7503; gPick.Visible=true;  Wait(5); FadeIn(10); pick.Animate(252, 0, 3, eOnce); Wait(80);}//Run Animation

FadeOut(5);
gPick.Visible=false; pick.X=38; pick.Y=16; close_pick.Visible=true; 


player.ChangeRoom(36,  21, 160); SetTimer(2, 40);}

function bus_OnClick(GUIControl *control, MouseButton button){
if (((GetGlobalInt(1)==3)||(GetGlobalInt(1)==4))&&(GetGlobalInt(52)==1)){PlaySound(60); TopUp("No Carts Allowed!","You can't get on the bus with your stand!");}
else{
if (cSlot2.InventoryQuantity[BusPass.ID]==0){
if (busfare>Money){Insufficiency();}
else{
Money-=(busfare); expense_travel+=(busfare); expense_total+=(busfare);
expenselist.AddItem(String.Format("%.2f - Bus Fare",busfare));
PlaySound(9);
       musique=(music_slider.Value);
     if (musique<=17) SetMusicVolume(-3);
else if ((musique>=18)&&(musique<=34))SetMusicVolume(-2);
else if ((musique>=35)&&(musique<=50))SetMusicVolume(-1);
else if ((musique>=51)&&(musique<=68))SetMusicVolume(0);
else if ((musique>=69)&&(musique<=85))SetMusicVolume(1);
else if ((musique>=86)&&(musique<=95))SetMusicVolume(2);
else if (musique>=96)SetMusicVolume(3);
SetMusicMasterVolume((music_slider.Value));
NatMusic(44);
if (GetGlobalInt(1)==1){TopUp("Travel By Bus.", String.Format("Spent $%.2f on bus fare!",busfare));}//Andrus
if (GetGlobalInt(1)==2){TopUp("Public Transit!", String.Format("Spent $%.2f on bus fare!",busfare));}//Mel
if (GetGlobalInt(1)==3){TopUp("Bussin' it.", String.Format("Spent $%.2f on bus fare!",busfare));}//Vinny
if (GetGlobalInt(1)==4){TopUp("Taking the stupid bus.", String.Format("Spent $%.2f on bus fare!",busfare));}//Logan


//buswaiters
buswait_pc.Animate(290, GetGlobalInt(1)-1, 2, eRepeat);
if (GetGlobalInt(98)==5){gBusWait.BackgroundGraphic=9572;}//franklin
if (GetGlobalInt(98)==13){gBusWait.BackgroundGraphic=9568;}//bridge
if (GetGlobalInt(98)==14){gBusWait.BackgroundGraphic=9570;}//downdown
if (GetGlobalInt(98)==7){gBusWait.BackgroundGraphic=9573;}//Andrus
if (GetGlobalInt(98)==2){gBusWait.BackgroundGraphic=9574;}//Melanie
if (GetGlobalInt(98)==6){gBusWait.BackgroundGraphic=9575;}//Vinny
if (GetGlobalInt(98)==8){gBusWait.BackgroundGraphic=9575;}//logan?
if (GetGlobalInt(98)==20){gBusWait.BackgroundGraphic=9571;}//Florin
if (GetGlobalInt(98)==21){gBusWait.BackgroundGraphic=9576;}//Nolan&Croson's
if (GetGlobalInt(98)==22){gBusWait.BackgroundGraphic=9567;}//13thAve
if (GetGlobalInt(98)==26){gBusWait.BackgroundGraphic=9569;}//Collins
if (GetGlobalInt(98)==34){gBusWait.BackgroundGraphic=9577;}//Park
if (GetGlobalInt(98)==38){gBusWait.BackgroundGraphic=9578;}//School
buswait_pullup.NormalGraphic=9585;//blank
buswait_crow.NormalGraphic=9606;//blank
buswait_crow2.NormalGraphic=9606;//blank
int crowroller=Random(10);
if (crowroller==0){buswait_crow.Animate(291, 1, 2, eRepeat);}
if (crowroller==1){buswait_crow2.Animate(291, 1, 2, eRepeat);}
gBusWait.Visible=true;
buswait_pullup.Animate(289, 0, 2, eOnce);
while (buswait_pullup.Graphic!=9605){Wait(1);}


gPick.Centre(); pick.X=0; pick.Y=0; close_pick.Visible=false;//Prepare Animation
pick.NormalGraphic=5287; 
gPick.Visible=true;  
gBusWait.Visible=false;
//blanking the waitscene stuff to prevent "too many buttons animating" crash
buswait_pc.NormalGraphic=9606;//blank
buswait_pullup.NormalGraphic=9585;//blank
buswait_crow.NormalGraphic=9606;//blank
buswait_crow2.NormalGraphic=9606;//blank
pick.Animate(203, 1, 3, eOnce); Wait(100);//Run Animation
FadeOut(5); 
gPick.Visible=false; pick.X=38; pick.Y=16; close_pick.Visible=true; 


//Timestuff first, then changeroom.
if (hour<=10){hour+=1;}//Normal
else if (hour==11){hour=12;//AM to PM
          if (ampm==0){ampm=1;}//AM->Noon
     else if (ampm==1){ampm=0; dayofweek+=1; dayspassed+=1; minute+=1;//PM->Midnight
                      if (GetGlobalInt(1)==2){
                        cellalarmed_pickup=false; 
                        cellalarmed_go2school=false;
                        mel_pickeduptoday=false;
                        int beccabaker1=Random(5);
                          if (beccabaker1==0){becca_dish1=("Scrambled eggs");}
                          if (beccabaker1==1){becca_dish1=("Breakfast burritos");}
                          if (beccabaker1==1){becca_dish1=("Pancakes");}
                          if (beccabaker1==3){becca_dish1=("Biscuits and Gravy");}
                          if (beccabaker1==4){becca_dish1=("Quiches");}
                          if (beccabaker1==5){becca_dish1=("Mini Donuts");}
                        int beccabaker2=Random(5);
                          if (beccabaker2==0){becca_dish2=("Phad Thai");}
                          if (beccabaker2==2){becca_dish2=("Spaghetti");}
                          if (beccabaker2==2){becca_dish2=("Pumpkin Curry");}
                          if (beccabaker2==3){becca_dish2=("Veggie Burgers");}
                          if (beccabaker2==4){becca_dish2=("Mushroom Wellingtons");}
                          if (beccabaker2==5){becca_dish2=("Lettuce Wraps");}
                        }
     if (dayofweek==8){dayofweek=1;}}}//Sunday -> Monday
else if (hour==12){hour=1;}//12 -> 1
//Value Depletions
vitality.Width-=10; nutrition.Width-=10; kibbles.Width-=6; 
if ((GetGlobalInt(1)==1)||(GetGlobalInt(1)==3)){caffeine.Width-=20;}

Wait(5);

     if (GetGlobalInt(99)==5) {FadeOut(5); Wait(5); player.ChangeRoom(5,  158, 158); SetTimer(2, 40);}//Franklin
else if (GetGlobalInt(99)==13) {FadeOut(5); Wait(5); player.ChangeRoom(13,  84, 113); SetTimer(2, 40);}//Brennan Ave Bridge
else if (GetGlobalInt(99)==14) {FadeOut(5); Wait(5); player.ChangeRoom(14,  17, 161); SetTimer(2, 40);}//Downtown
else if (GetGlobalInt(99)==7) {FadeOut(5); Wait(5); player.ChangeRoom(7, 21, 193);}//Andrus
else if (GetGlobalInt(99)==2) {FadeOut(5); Wait(5); player.ChangeRoom(2,  398, 191);}//Melanie
else if (GetGlobalInt(99)==6) {FadeOut(5); Wait(5); player.ChangeRoom(6,  331, 131);}//Vinny
else if (GetGlobalInt(99)==8) {FadeOut(5); Wait(5); player.ChangeRoom(8,  400, 191);}//Logan
else if (GetGlobalInt(99)==19)  {PlaySound(60); Wait(80); TopUp("Not just yet...", "The mall is under construction.");}
  //FadeOut(5); Wait(5); player.ChangeRoom(19,  25, 160);}//Mall
else if (GetGlobalInt(99)==20)  {FadeOut(5); Wait(5); player.ChangeRoom(20,  26, 183); SetTimer(2, 40);}//Florin
else if (GetGlobalInt(99)==21)  {FadeOut(5); Wait(5); player.ChangeRoom(21,  29, 173); SetTimer(2, 40);}//Superstore
else if (GetGlobalInt(99)==22)  {FadeOut(5); Wait(5); player.ChangeRoom(22,  41, 160); SetTimer(2, 40);}//13th
else if (GetGlobalInt(99)==26)  {FadeOut(5); Wait(5); player.ChangeRoom(26,  20, 160); SetTimer(2, 40);}//Collins
else if (GetGlobalInt(99)==34)  {FadeOut(5); Wait(5); player.ChangeRoom(34,  20, 160); SetTimer(2, 40);}//Park
else if (GetGlobalInt(99)==38)  {FadeOut(5); Wait(5); player.ChangeRoom(38,  35, 160); SetTimer(2, 40);}//School
else if (GetGlobalInt(99)==5)  {PlaySound(60); TopUp("Not just yet...", "The airport is under construction.");}}
}//End "No bus pass" version

if (cSlot2.InventoryQuantity[BusPass.ID]!=0){
PlaySound(9); 
       musique=(music_slider.Value);
     if (musique<=17) SetMusicVolume(-3);
else if ((musique>=18)&&(musique<=34))SetMusicVolume(-2);
else if ((musique>=35)&&(musique<=50))SetMusicVolume(-1);
else if ((musique>=51)&&(musique<=68))SetMusicVolume(0);
else if ((musique>=69)&&(musique<=85))SetMusicVolume(1);
else if ((musique>=86)&&(musique<=95))SetMusicVolume(2);
else if (musique>=96)SetMusicVolume(3);
SetMusicMasterVolume((music_slider.Value));
NatMusic(44);
TopUp("Bussin' it.", "Used bus pass!"); 
gInfo.Visible=false; SetTimer(18, 0); SetTimer(17, 0);
PlaySound(28);

//buswaiters
buswait_pc.Animate(290, GetGlobalInt(1)-1, 2, eRepeat);
if (GetGlobalInt(98)==5){gBusWait.BackgroundGraphic=9572;}//franklin
if (GetGlobalInt(98)==13){gBusWait.BackgroundGraphic=9568;}//bridge
if (GetGlobalInt(98)==14){gBusWait.BackgroundGraphic=9570;}//downdown
if (GetGlobalInt(98)==7){gBusWait.BackgroundGraphic=9573;}//Andrus
if (GetGlobalInt(98)==2){gBusWait.BackgroundGraphic=9574;}//Melanie
if (GetGlobalInt(98)==6){gBusWait.BackgroundGraphic=9575;}//Vinny
if (GetGlobalInt(98)==8){gBusWait.BackgroundGraphic=9575;}//logan?
if (GetGlobalInt(98)==20){gBusWait.BackgroundGraphic=9571;}//Florin
if (GetGlobalInt(98)==21){gBusWait.BackgroundGraphic=9576;}//Nolan&Croson's
if (GetGlobalInt(98)==22){gBusWait.BackgroundGraphic=9567;}//13thAve
if (GetGlobalInt(98)==26){gBusWait.BackgroundGraphic=9569;}//Collins
if (GetGlobalInt(98)==34){gBusWait.BackgroundGraphic=9577;}//Park
if (GetGlobalInt(98)==38){gBusWait.BackgroundGraphic=9578;}//School
buswait_pullup.NormalGraphic=9585;
buswait_crow.NormalGraphic=9606;//blank
buswait_crow2.NormalGraphic=9606;//blank
int crowroller=Random(10);
if (crowroller==0){buswait_crow.Animate(291, 1, 2, eRepeat);}
if (crowroller==1){buswait_crow2.Animate(291, 1, 2, eRepeat);}
gBusWait.Visible=true;
buswait_pullup.Animate(289, 0, 2, eOnce);
while (buswait_pullup.Graphic!=9605){Wait(1);}


gPick.Centre(); pick.X=0; pick.Y=0; close_pick.Visible=false;//Prepare Animation
pick.NormalGraphic=5287; 
gPick.Visible=true;  
gBusWait.Visible=false;
//blanking the waitscene stuff to prevent "too many buttons animating" crash
buswait_pc.NormalGraphic=9606;//blank
buswait_pullup.NormalGraphic=9585;//blank
buswait_crow.NormalGraphic=9606;//blank
buswait_crow2.NormalGraphic=9606;//blank
pick.Animate(203, 1, 3, eOnce); Wait(100);//Run Animation
FadeOut(5); 
gPick.Visible=false; pick.X=38; pick.Y=16; close_pick.Visible=true; 

//Timestuff first, then changeroom.
if (hour<=10){hour+=1;}//Normal
else if (hour==11){hour=12;//AM to PM
          if (ampm==0){ampm=1;}//AM->Noon
     else if (ampm==1){ampm=0; dayofweek+=1; dayspassed+=1; minute+=1;//PM->Midnight
                      if (GetGlobalInt(1)==2){
                        cellalarmed_pickup=false; 
                        cellalarmed_go2school=false;
                        mel_pickeduptoday=false;
                        int beccabaker1=Random(5);
                          if (beccabaker1==0){becca_dish1=("Scrambled eggs");}
                          if (beccabaker1==1){becca_dish1=("Breakfast burritos");}
                          if (beccabaker1==1){becca_dish1=("Pancakes");}
                          if (beccabaker1==3){becca_dish1=("Biscuits and Gravy");}
                          if (beccabaker1==4){becca_dish1=("Quiches");}
                          if (beccabaker1==5){becca_dish1=("Mini Donuts");}
                        int beccabaker2=Random(5);
                          if (beccabaker2==0){becca_dish2=("Phad Thai");}
                          if (beccabaker2==2){becca_dish2=("Spaghetti");}
                          if (beccabaker2==2){becca_dish2=("Pumpkin Curry");}
                          if (beccabaker2==3){becca_dish2=("Veggie Burgers");}
                          if (beccabaker2==4){becca_dish2=("Mushroom Wellingtons");}
                          if (beccabaker2==5){becca_dish2=("Lettuce Wraps");}
                        }
     if (dayofweek==8){dayofweek=1;}}}//Sunday -> Monday
   
else if (hour==12){hour=1;}//12 -> 1

//Value Depletions
vitality.Width-=10; nutrition.Width-=10; kibbles.Width-=6; 
if ((GetGlobalInt(1)==1)||(GetGlobalInt(1)==3)){caffeine.Width-=20;}

Wait(5);

     if (GetGlobalInt(99)==5) {FadeOut(5); Wait(5); player.ChangeRoom(5,  158, 158); SetTimer(2, 40);}//Franklin
else if (GetGlobalInt(99)==13) {FadeOut(5); Wait(5); player.ChangeRoom(13,  84, 113); SetTimer(2, 40);}//Brennan Ave Bridge
else if (GetGlobalInt(99)==14) {FadeOut(5); Wait(5); player.ChangeRoom(14,  17, 161); SetTimer(2, 40);}//Downtown
else if (GetGlobalInt(99)==7) {FadeOut(5); Wait(5); player.ChangeRoom(7, 21, 193);}//Andrus
else if (GetGlobalInt(99)==2) {FadeOut(5); Wait(5); player.ChangeRoom(2,  398, 191);}//Melanie
else if (GetGlobalInt(99)==6) {FadeOut(5); Wait(5); player.ChangeRoom(6,  331, 131);}//Vinny
else if (GetGlobalInt(99)==8) {FadeOut(5); Wait(5); player.ChangeRoom(8,  400, 191);}//Logan
else if (GetGlobalInt(99)==19)  {PlaySound(60); Wait(80); TopUp("Not just yet...", "The mall is under construction.");}
  //FadeOut(5); Wait(5); player.ChangeRoom(19,  25, 160);}//Mall
else if (GetGlobalInt(99)==20)  {FadeOut(5); Wait(5); player.ChangeRoom(20,  26, 183); SetTimer(2, 40);}//Florin
else if (GetGlobalInt(99)==21)  {FadeOut(5); Wait(5); player.ChangeRoom(21,  29, 173); SetTimer(2, 40);}//Superstore
else if (GetGlobalInt(99)==22)  {FadeOut(5); Wait(5); player.ChangeRoom(22,  41, 160); SetTimer(2, 40);}//13th
else if (GetGlobalInt(99)==26)  {FadeOut(5); Wait(5); player.ChangeRoom(26,  20, 160); SetTimer(2, 40);}//Collins
else if (GetGlobalInt(99)==34)  {FadeOut(5); Wait(5); player.ChangeRoom(34,  20, 160); SetTimer(2, 40);}//Park
else if (GetGlobalInt(99)==38)  {FadeOut(5); Wait(5); player.ChangeRoom(38,  35, 160); SetTimer(2, 40);}//School
else if (GetGlobalInt(99)==5)  {PlaySound(60); TopUp("Not just yet...", "The airport is under construction.");}
}//End Bus Pass Version
gTravel.Visible=false;
}//End No Cart Bus Attempt
}//End Bus

function topicbox_OnSelectionChanged(GUIControl *control){//New Method
PlaySound(40); Mouse.Visible=false; askabout();}

function Button11_OnClick(GUIControl *control, MouseButton button){askabout();}

function close_topics2_OnClick(GUIControl *control, MouseButton button){
if (gDialog.Visible==true){
  gTopics2.Visible=false; PlaySound(28);
if (GetGlobalInt(1)==1){
PCTalk(); customerlisten(); dText.Text=("That is all I am needing of asking."); blab1();}
if (GetGlobalInt(1)==2){
PCTalk(); customerlisten(); dText.Text=("Thanks for your help."); blab1();}
if (GetGlobalInt(1)==3){
PCTalk(); customerlisten(); dText.Text=("So..."); blab1();
PCTalk(); customerlisten(); dText.Text=("Ah... Nevermind."); blab1();}
if (GetGlobalInt(1)==4){
PCTalk(); customerlisten(); dText.Text=("Forget it."); blab1();}

dText.Text=(" "); dName.Text=(" "); //Blank
PCListen(); customerlisten();//Shut up
Mouse.Visible=false;//mouse hide
BuyorTalk();}
else if (gDialog.Visible==false){gTopics2.Visible=false; PlaySound(28); mouse.Visible=false;}
}


function goQuit_OnClick(GUIControl *control, MouseButton button) {
    PlaySound(28); Wait(5);
    StopMusic(); PlaySound(75); FadeOut(1); Wait(100);
    QuitGame(0);
}
//RestartGame();}//ARCADE->Cart Life Never Ends
//gPanel.Visible=false;}

function goRestart_OnClick(GUIControl *control, MouseButton button) {
    PlaySound(28); RestartGame(); gGameover.Visible=false;
}

function goRestore_OnClick(GUIControl *control, MouseButton button){
    PlaySound(28);
    lstLoadGames.FillSaveGameList();
    lstLoadGames.SelectedIndex = 0;
    gPanel.Visible=false;
    gLoadgame.Visible = true;
    cityscroll.Animate(132, 0, 2, eRepeat);
    gGameover.Visible=false;
}

function income_btn_OnClick(GUIControl *control, MouseButton button) {
    PlaySound(40); recorde_btmline.Text=String.Format("$%.2f - Total Income",income_total);
    gRecordIncome.X=115; gRecordIncome.Visible=true;
}

function expense_btn_OnClick(GUIControl *control, MouseButton button){
    PlaySound(40);
    float totalspent = (expense_equipment + expense_misc + expense_supplies + expense_upgrade + expense_travel + expense_permits + total_fines);
    recorde_btmline2.Text=String.Format("$%.2f - Total Expenses",totalspent);
    gRecordExpense.X=115; gRecordExpense.Visible=true;
}

//STOCKIT
function putawayinput_OnActivate(GUIControl *control) {
    String input = putawayinput.Text;
    Parser.ParseText(input);

    if (input.UpperCase()==("COMMERCE UNREAD")){//Cut Cheat
    stocklevel.NormalGraphic=6213; depletor.NormalGraphic=6257; depletor.Visible=false;
    podermover.Animate(230, 4, 2, eOnce); Stack.ChangeRoom(1); Wait(5);
    if (player.InventoryQuantity[Georgetonian.ID]==0){player.AddInventory(Georgetonian);}
    gStock.Visible=false;
    if ((player.Room==5)&&(GetGlobalInt(101)<3)){//Tutorial
    Stand.LockViewFrame(39, 0, 1);
    TalkPop(); Wait(40);
    PCListen(); customertalk(); dText.Text=("All right, good job.");  blab3();
    PCListen(); customertalk(); dText.Text=("Don't forget to adjust the price, before you sell them.");  blab3();
    PCListen(); customertalk(); dText.Text=("To do that, start by opening your main menu.");  blab4();
    PCListen(); customertalk(); dText.Text=("To get there, hit the space bar.");  blab2();
    PCListen(); customerlisten(); dName.Text=(" "); dText.Text=(" "); SetGlobalInt(107, 1); SetGlobalInt(101, 2); StopPop();}
    else{//FinishedSetup
    SaleInProgress=0;
    if (GetGlobalInt(101) ==2){} else if (GetGlobalInt(101) ==1){} else {
          lockup.Transparency=0; lockup.ChangeRoom(Stand.Room); lockup.FollowCharacter(Stand, FOLLOW_EXACTLY, 100);
          PlaySound(18); player.LockView(68); player.Animate(1, 3, eOnce, eNoBlock, eForwards);
          lockup.LockView(70); lockup.Animate(0, 2, eOnce, eBlock, eForwards); SetGlobalInt(52, 0); Wait(5);
          player.LockView(71); player.Animate(0, 3, eRepeat, eNoBlock, eForwards); player.x=(Stand.x); player.y=(Stand.y);
        player.ChangeView(71); cAndrus.SetIdleView(136, 3); SetTimer(2, 40); readytosell=true;}
        if ((firstsetup==0)&&(GetGlobalInt(101)>4)){//Prayer
    FadeOut(15); close_pick.Visible=false;
    gPick.Centre(); pick.NormalGraphic=3680; pick.X=0; pick.Y=0;//Prepare Animation
    gPick.Visible=true;  pick.Animate(141, 1, 8, eOnce);
    Wait(5); FadeIn(15);
    StartCutscene(eSkipAnyKeyOrMouseClick);//Start Cutscene
    Wait(460);//Run Animation
    EndCutscene();
    FadeOut(15); Wait(5); gPick.Visible=false; pick.X=38; pick.Y=16; firstsetup=1; FadeIn(15);}
        else if (firstsetup!=0){}
    }
    }//End Cut Cheat

    else if ((input.UpperCase())==(putawayexample.Text.UpperCase())){//Good!
      if (georgeisnorthbound==false){//Work work work work...
      PlaySound(41); putawayinput.Text=("");

      if (cutbanding.NormalGraphic==6181){//Cut it!
        cutbanding.NormalGraphic=6207; cutbanding.MouseOverGraphic=6207;
        foldpapers.NormalGraphic=6183; foldpapers.MouseOverGraphic=6184;
        podermover.Animate(230, 2, 2, eOnce);
        Mouse.Visible=true;
        putawayexample.Visible=false; putawayinput.Visible=false;
        putawaytype.Visible=false; typeoverblock.Visible=false;
        }

    else if (foldpapers.NormalGraphic==6183){//Folded it!
        if (depletor.NormalGraphic==6257){depletor.NormalGraphic=6258;
        String xample; int xamplerand=Random(5);
          if (xamplerand==0){xample=("Fold.");}
          if (xamplerand==1){xample=("Folding newspapers.");}
          if (xamplerand==2){xample=("It folds into halves.");}
          if (xamplerand==3){xample=("Fold it in half.");}
          if (xamplerand==4){xample=("Folding again.");}
          if (xamplerand==5){xample=("Leave a nice crease.");}
          putawayexample.Text=String.Format("%s",xample); typeoverblock.NormalGraphic=6188; typeoverblock.Animate(229, 0, 2, eOnce);
          podermover.Animate(230, 3, 2, eOnce);
          }

        else if (depletor.NormalGraphic==6258){
            depletor.NormalGraphic=6259;
            String xample; int xamplerand=Random(5);
            if (xamplerand==0){xample=("Fold.");}
            if (xamplerand==1){xample=("Folding newspapers.");}
            if (xamplerand==2){xample=("It folds into halves.");}
            if (xamplerand==3){xample=("Fold it in half.");}
            if (xamplerand==4){xample=("Folding again.");}
            if (xamplerand==5){xample=("Leave a nice crease.");}
            putawayexample.Text=String.Format("%s",xample); typeoverblock.NormalGraphic=6188; typeoverblock.Animate(229, 0, 2, eOnce);
            podermover.Animate(230, 3, 2, eOnce);
          }

        else if (depletor.NormalGraphic==6259){depletor.NormalGraphic=6260;
          String xample; int xamplerand=Random(5);
          if (xamplerand==0){xample=("Fold.");}
          if (xamplerand==1){xample=("Folding newspapers.");}
          if (xamplerand==2){xample=("It folds into halves.");}
          if (xamplerand==3){xample=("Fold it in half.");}
          if (xamplerand==4){xample=("Folding again.");}
          if (xamplerand==5){xample=("Leave a nice crease.");}
          putawayexample.Text=String.Format("%s",xample); typeoverblock.NormalGraphic=6188; typeoverblock.Animate(229, 0, 2, eOnce);
          podermover.Animate(230, 3, 2, eOnce);
          }

     else if (depletor.NormalGraphic==6260){
       depletor.NormalGraphic=6261;String xample; int xamplerand=Random(5);
          if (xamplerand==0){xample=("Fold.");}
          if (xamplerand==1){xample=("Folding newspapers.");}
          if (xamplerand==2){xample=("It folds into halves.");}
          if (xamplerand==3){xample=("Fold it in half.");}
          if (xamplerand==4){xample=("Folding again.");}
          if (xamplerand==5){xample=("Leave a nice crease.");}
          putawayexample.Text=String.Format("%s",xample); typeoverblock.NormalGraphic=6188; typeoverblock.Animate(229, 0, 2, eOnce);
          podermover.Animate(230, 3, 2, eOnce);
          }

      else if (depletor.NormalGraphic==6261){
          podermover.Animate(230, 3, 2, eOnce); depletor.Visible=false;
          foldpapers.NormalGraphic=6207; foldpapers.MouseOverGraphic=6207;
          stockbins.NormalGraphic=6185; stockbins.MouseOverGraphic=6186;
          //podermover.Animate(230, 2, 2, eOnce);//??
          Mouse.Visible=true;
          putawayexample.Visible=false; putawayinput.Visible=false;
          putawaytype.Visible=false; typeoverblock.Visible=false;
          depletor.NormalGraphic=6258; depletor.Visible=true;}
          }

     else if (stockbins.NormalGraphic==6185){//Stocked it!
          if (stocklevel.Visible==false){
          stocklevel.NormalGraphic=6209; depletor.NormalGraphic=6258;
          stocklevel.Visible=true;
          podermover.Animate(230, 4, 2, eOnce);
          String xample; int xamplerand=Random(5);
          if (xamplerand==0){xample=("Stocking shelves.");}
          if (xamplerand==1){xample=("Stack them neatly.");}
          if (xamplerand==2){xample=("Keep them organized.");}
          if (xamplerand==3){xample=("They will be easy to reach now.");}
          if (xamplerand==4){xample=("Hopefully these will all sell.");}
          if (xamplerand==5){xample=("Almost done now.");}
          putawayexample.Text=String.Format("%s",xample);
          typeoverblock.NormalGraphic=6188; typeoverblock.Animate(229, 0, 2, eOnce);
          }

    else if ((stocklevel.Visible==true)&&(stocklevel.NormalGraphic==6209)){
    stocklevel.NormalGraphic=6210; depletor.NormalGraphic=6259;
    podermover.Animate(230, 4, 2, eOnce);
    String xample; int xamplerand=Random(5);
    if (xamplerand==0){xample=("Stocking shelves.");}
    if (xamplerand==1){xample=("Stack them neatly.");}
    if (xamplerand==2){xample=("Keep them organized.");}
    if (xamplerand==3){xample=("They will be easy to reach now.");}
    if (xamplerand==4){xample=("Hopefully these will all sell.");}
    if (xamplerand==5){xample=("Almost done now.");}
    putawayexample.Text=String.Format("%s",xample);
    typeoverblock.NormalGraphic=6188; typeoverblock.Animate(229, 0, 2, eOnce);}

    else if (stocklevel.NormalGraphic==6210){
    stocklevel.NormalGraphic=6211; depletor.NormalGraphic=6260;
    podermover.Animate(230, 4, 2, eOnce);
    String xample; int xamplerand=Random(5);
    if (kickedout==0){
    if (xamplerand==0){xample=("Stocking shelves.");}
    if (xamplerand==1){xample=("Stack them neatly.");}
    if (xamplerand==2){xample=("Keep them organized.");}
    if (xamplerand==3){xample=("They will be easy to reach now.");}
    if (xamplerand==4){xample=("Hopefully these will all sell.");}
    if (xamplerand==5){xample=("Almost done now.");}}
    if (kickedout==1){
    if (xamplerand==0){xample=("Folding again.");}
    if (xamplerand==1){xample=("No blood from mere paper cuts.");}
    if (xamplerand==2){xample=("Would this paper print my obituary?");}
    if (xamplerand==3){xample=("So many stories go unread.");}
    if (xamplerand==4){xample=("What difference do papers make?");}
    if (xamplerand==5){xample=("I am not needed in the world.");}}
    putawayexample.Text=String.Format("%s",xample);
    typeoverblock.NormalGraphic=6188; typeoverblock.Animate(229, 0, 2, eOnce);}

    else if (stocklevel.NormalGraphic==6211){
    stocklevel.NormalGraphic=6212; depletor.NormalGraphic=6261;
    podermover.Animate(230, 4, 2, eOnce);
    String xample; int xamplerand=Random(5);
    if (kickedout==0){
    if (xamplerand==0){xample=("Stocking shelves.");}
    if (xamplerand==1){xample=("Stack them neatly.");}
    if (xamplerand==2){xample=("Keep them organized.");}
    if (xamplerand==3){xample=("They will be easy to reach now.");}
    if (xamplerand==4){xample=("Hopefully these will all sell.");}
    if (xamplerand==5){xample=("Almost done now.");}}
    if (kickedout==1){
    if (xamplerand==0){xample=("Stocking shelves.");}
    if (xamplerand==1){xample=("These shelves will be empty again soon.");}
    if (xamplerand==2){xample=("Carolina, you never loved another man.");}
    if (xamplerand==3){xample=("Would it be peaceful to drown in water?");}
    if (xamplerand==4){xample=("What difference do papers make?");}
    if (xamplerand==5){xample=("I am not needed in the world.");}}
    putawayexample.Text=String.Format("%s",xample);
    typeoverblock.NormalGraphic=6188; typeoverblock.Animate(229, 0, 2, eOnce);}

    else if (stocklevel.NormalGraphic==6212){
    stocklevel.NormalGraphic=6213; depletor.NormalGraphic=6257; depletor.Visible=false;
    podermover.Animate(230, 4, 2, eOnce); Stack.ChangeRoom(1); Wait(5);
    if (player.InventoryQuantity[Georgetonian.ID]==0){player.AddInventory(Georgetonian);}
    gStock.Visible=false;

    if ((player.Room==5)&&(GetGlobalInt(101)<3)){//Tutorial
    Stand.LockViewFrame(39, 0, 1);
    TalkPop(); Wait(40);
    PCListen(); customertalk(); dText.Text=("All right, good job.");  blab3();
    PCListen(); customertalk(); dText.Text=("Don't forget to adjust the price, before you sell them.");  blab3();
    PCListen(); customertalk(); dText.Text=("To do that, start by opening your main menu.");  blab4();
    PCListen(); customertalk(); dText.Text=("To get there, hit the space bar.");  blab2();
    PCListen(); customerlisten(); dName.Text=(" "); dText.Text=(" "); SetGlobalInt(107, 1); SetGlobalInt(101, 2); StopPop();}
    else{//FinishedSetup
    SaleInProgress=0;
    if (GetGlobalInt(101) ==2){} else if (GetGlobalInt(101) ==1){} else {
        lockup.Transparency=0; lockup.ChangeRoom(Stand.Room); lockup.FollowCharacter(Stand, FOLLOW_EXACTLY, 100);
        PlaySound(18); player.LockView(68); player.Animate(1, 3, eOnce, eNoBlock, eForwards);
        lockup.LockView(70); lockup.Animate(0, 2, eOnce, eBlock, eForwards); SetGlobalInt(52, 0); Wait(5);
        player.LockView(71); player.Animate(0, 3, eRepeat, eNoBlock, eForwards); player.x=(Stand.x); player.y=(Stand.y);
      player.ChangeView(71); cAndrus.SetIdleView(136, 3); SetTimer(2, 40); readytosell=true;}
      if ((firstsetup==0)&&(GetGlobalInt(101)>4)){//Prayer
    FadeOut(15); close_pick.Visible=false;
    gPick.Centre(); pick.NormalGraphic=3680; pick.X=0; pick.Y=0;//Prepare Animation
    gPick.Visible=true;  pick.Animate(141, 1, 8, eOnce);
    Wait(5); FadeIn(15);
    StartCutscene(eSkipAnyKeyOrMouseClick);//Start Cutscene
    Wait(460);//Run Animation
    EndCutscene();
    FadeOut(15); Wait(5); gPick.Visible=false; pick.X=38; pick.Y=16; firstsetup=1; FadeIn(15);}
      else if (firstsetup!=0){}
    }
    }}
    }//End Regular Good

    else{//So everything comes true, as was predicted, The train leaves for heaven - Straight ahead !

    if (cutbanding.NormalGraphic==7796){//Draw Knife
    cutbanding.NormalGraphic=6207; cutbanding.MouseOverGraphic=6207;
    //foldpapers.NormalGraphic=6183; foldpapers.MouseOverGraphic=6184;
    podermover.Animate(230, 6, 2, eOnce);//Draw knife
    Wait(20);//while(podermover.Graphic!=7783){Wait(1);}
    podermover.Animate(230, 7, 2, eRepeat);//Draw knife
    Mouse.Visible=true;
    putawayexample.Visible=false; putawayinput.Visible=false;
    putawaytype.Visible=false; typeoverblock.Visible=false;
    foldpapers.NormalGraphic=7798; foldpapers.MouseOverGraphic=7799;
    }

    else if (foldpapers.NormalGraphic==7798){//The End.
    Game.StopAudio(); Walkbies.NormalGraphic=7794;
    foldpapers.Visible=false; cutbanding.Visible=false;
    typeoverblock.Visible=false; Mouse.Visible=false;
    putawayexample.Visible=false; putawayinput.Visible=false;
    putawaytype.Visible=false; typeoverblock.Visible=false;
    podermover.Animate(230, 8, 2, eOnce);
    Wait(200);//animating
    FadeOut(10);
    Wait(5);
    George.ChangeRoom(4, 100, 100);//Bye, George.
    gDialog.Visible=false;
    gStock.Visible=false;
    Wait(5);
    music_slider.Value=0;
    player.ChangeRoom(15, 160, 155);

    }
    }//Final Type Scene is over.

    }//End Good

    else if ((input.UpperCase())!=(putawayexample.Text.UpperCase())){//Bad!


    if (cutbanding.NormalGraphic==6181){//Bad Cut!
    if (kickedout==0){paper_remaining-=3;
    gPick.Centre(); pick.NormalGraphic=6344; pick.X=0; pick.Y=0; close_pick.Visible=false;//Prepare Animation
    gPick.Visible=true;  FadeIn(64); pick.Animate(231, 2, 2, eOnce);//Run Anim
    Wait(100);//Animation
    gPick.Visible=false; pick.X=38; pick.Y=16; close_pick.Visible=true;
    cutbanding.NormalGraphic=6207; cutbanding.MouseOverGraphic=6207;
    foldpapers.NormalGraphic=6183; foldpapers.MouseOverGraphic=6184;
    podermover.Animate(230, 2, 2, eOnce);
    Mouse.Visible=true;
    putawayexample.Visible=false; putawayinput.Visible=false;
    putawaytype.Visible=false; typeoverblock.Visible=false;}
    if (kickedout!=0){SetFadeColor(200, 0, 0); FadeOut(64); Wait(5); FadeIn(64); SetFadeColor(0, 0, 0); TopUp("Bad Cut!","You cut your hand!");
    FadeOut(64);
    gPick.Centre(); pick.NormalGraphic=6293; pick.X=0; pick.Y=0; close_pick.Visible=false;//Prepare Animation
    gPick.Visible=true;  FadeIn(64); pick.Animate(164, 7, 2, eOnce);//Run Anim
    Wait(220);//Animation
    gPick.Visible=false; pick.X=38; pick.Y=16; close_pick.Visible=true;}}

    else if (foldpapers.NormalGraphic==6183){//Bad Fold!
    paper_remaining-=1;
    gPick.Centre(); pick.NormalGraphic=6344; pick.X=0; pick.Y=0; close_pick.Visible=false;//Prepare Animation
    gPick.Visible=true;  FadeIn(64); pick.Animate(231, 0, 2, eOnce);//Run Anim
    Wait(60);//Animation
    gPick.Visible=false; pick.X=38; pick.Y=16; close_pick.Visible=true;}

    else if (stockbins.NormalGraphic==6185){//Bad Stock!
    paper_remaining-=1;
    gPick.Centre(); pick.NormalGraphic=6344; pick.X=0; pick.Y=0; close_pick.Visible=false;//Prepare Animation
    gPick.Visible=true;  FadeIn(64); pick.Animate(231, 1, 2, eOnce);//Run Anim
    Wait(60);//Animation
    gPick.Visible=false; pick.X=38; pick.Y=16; close_pick.Visible=true;}
    if (paper_remaining<=0){gStock.Visible=false; TopUp("Nothing left!","You destroyed all of your papers!");}
    }//End Bad
    putawayinput.Text=("");
}//End Text Input





function cutbanding_OnClick(GUIControl *control, MouseButton button){//Cut
if (cutbanding.NormalGraphic==6181){//WOrk work work
  PlaySound(28);
  String xample;
  int xamplerand=Random(5);
  if (kickedout==0){
  if (xamplerand==0){xample=("Cut.");}
  if (xamplerand==1){xample=("Cut the bands.");}
  if (xamplerand==2){xample=("Remove the ties.");}
  if (xamplerand==3){xample=("Cut the ties.");}
  if (xamplerand==4){xample=("Cutting plastic.");}
  if (xamplerand==5){xample=("Cut off ties.");}}
  if (kickedout==1){
  if (xamplerand==0){xample=("The old knife is sharp enough...");}
  if (xamplerand==1){xample=("The blade is reliable.");}
  if (xamplerand==2){xample=("At least I have this knife.");}
  if (xamplerand==3){xample=("I still have my knife.");}
  if (xamplerand==4){xample=("This knife is always capable.");}
  if (xamplerand==5){xample=("The knife is really all I need.");}}
  
  putawayexample.Text=String.Format("%s",xample);
  typeoverblock.NormalGraphic=6188;
  //Goforit!
  Mouse.Visible=false;
  putawayexample.Visible=true; putawayinput.Visible=true; 
  putawaytype.Visible=true; typeoverblock.Visible=true;
  typeoverblock.Animate(229, 0, 2, eOnce);
  podermover.Animate(230, 1, 2, eOnce);
  }

if (cutbanding.NormalGraphic==7796){//Here's Your Ticket...
  PlaySound(28);
  putawayexample.Text=String.Format("TEBE C'ORT!");
  typeoverblock.NormalGraphic=6188;
  //Goforit!
  Mouse.Visible=false;
  putawayexample.Visible=true; putawayinput.Visible=true; 
  putawaytype.Visible=true; typeoverblock.Visible=true;
  typeoverblock.Animate(229, 0, 2, eOnce);
  //podermover.Animate(230, 1, 2, eOnce);
}
}

function foldpapers_OnClick(GUIControl *control, MouseButton button){//Fold 'em
if (foldpapers.NormalGraphic==6183){
PlaySound(28);
depletor.NormalGraphic=6257; depletor.Visible=true;
String xample;
int xamplerand=Random(5);
if (kickedout==0){
if (xamplerand==0){xample=("Fold.");}
if (xamplerand==1){xample=("Folding newspapers.");}
if (xamplerand==2){xample=("It folds into halves.");}
if (xamplerand==3){xample=("Fold it in half.");}
if (xamplerand==4){xample=("Folding again.");}
if (xamplerand==5){xample=("Leave a nice crease.");}}
if (kickedout==1){
if (xamplerand==0){xample=("Folding again.");}
if (xamplerand==1){xample=("No blood from mere paper cuts.");}
if (xamplerand==2){xample=("If I had to go, would they remember me?");}
if (xamplerand==3){xample=("...");}
if (xamplerand==4){xample=("What difference do papers make?");}
if (xamplerand==5){xample=("I am not needed in the world.");}}

putawayexample.Text=String.Format("%s",xample);
typeoverblock.NormalGraphic=6188;
//Goforit!
Mouse.Visible=false;
putawayexample.Visible=true; putawayinput.Visible=true; 
putawaytype.Visible=true; typeoverblock.Visible=true;
typeoverblock.Animate(229, 0, 2, eOnce);
podermover.NormalGraphic=6238;
}//end reg
else if (foldpapers.NormalGraphic==7798){//Here's Your Traincar
  PlaySound(28);
putawayexample.Text=("Devil Take You.");
typeoverblock.NormalGraphic=6188; typeoverblock.Animate(229, 0, 2, eOnce);
  //Goforit!
  Mouse.Visible=false;
  putawayexample.Visible=true; putawayinput.Visible=true; 
  putawaytype.Visible=true; typeoverblock.Visible=true;
  typeoverblock.Animate(229, 0, 2, eOnce);
}

}

function stockbins_OnClick(GUIControl *control, MouseButton button){//Night Stocker
if (stockbins.NormalGraphic==6185){
PlaySound(28);
String xample; int xamplerand=Random(5);
if (kickedout==0){
if (xamplerand==0){xample=("Stocking shelves.");}
if (xamplerand==1){xample=("Stack them neatly.");}
if (xamplerand==2){xample=("Keep them organized.");}
if (xamplerand==3){xample=("They will be easy to reach now.");}
if (xamplerand==4){xample=("Hopefully these will all sell.");}
if (xamplerand==5){xample=("Almost done now.");}}
if (kickedout==1){
if (xamplerand==0){xample=("Stocking shelves.");}
if (xamplerand==1){xample=("These shelves will be empty again soon.");}
if (xamplerand==2){xample=("Carolina, you never loved another man.");}
if (xamplerand==3){xample=("Would it be peaceful to drown in water?");}
if (xamplerand==4){xample=("What difference do papers make?");}
if (xamplerand==5){xample=("I am not needed in the world.");}}

putawayexample.Text=String.Format("%s",xample);
typeoverblock.NormalGraphic=6188;
//Goforit!
Mouse.Visible=false;
putawayexample.Visible=true; putawayinput.Visible=true; 
putawaytype.Visible=true; typeoverblock.Visible=true;
typeoverblock.Animate(229, 0, 2, eOnce); 
podermover.NormalGraphic=6251;}}


function tbNames_OnClick(GUIControl *control, MouseButton button){
PlaySound(28);
if (tbNames.NormalGraphic==6776){}
else if ((tbNames.NormalGraphic==7483)||(tbNames.NormalGraphic==7487)){
  gBuyortalk.Visible=false;
  PCTalk(); customerlisten();
  if (GetGlobalInt(1)==1){dText.Text=("Since I am being..."); blab1();}
  if (GetGlobalInt(1)==2){dText.Text=("You know... I was gonna..."); blab1();}
  if (GetGlobalInt(1)==3){dText.Text=("Oh, you know what...?"); blab1();}
  PCTalk(); customerlisten(); dText.Text=("Uhh...."); blab1();
  PCListen(); customerlisten(); dText.Text=("..."); blab1(); Wait(40);
  PCTalk(); customerlisten(); dText.Text=("I forgot what I was saying.");
  customerlisten(); PCListen(); dText.Text=(" ");
  BuyorTalk();
  }
else if (tbNames.NormalGraphic==6772){speakmind(350);}
else if (tbNames.NormalGraphic==6780){speakmind(350);}}
function tbSale_OnClick(GUIControl *control, MouseButton button){speakmind(351);}
function tbQuestion_OnClick(GUIControl *control, MouseButton button){
  if ((tbQuestion.NormalGraphic==7481)||(tbQuestion.NormalGraphic==7485)){//Too Hungry/Tired
      gBuyortalk.Visible=false;
  PCTalk(); customerlisten();
  if (GetGlobalInt(1)==1){dText.Text=("Are you knowing about..."); blab1();}
  if (GetGlobalInt(1)==2){dText.Text=("I was gonna ask..."); blab1();}
  if (GetGlobalInt(1)==3){dText.Text=("Oh, hey. Do you know anything about..."); blab1();}
  PCTalk(); customerlisten(); dText.Text=("Uhh...."); blab1();
  PCListen(); customerlisten(); dText.Text=("..."); blab1(); Wait(40);
  PCTalk(); customerlisten(); dText.Text=("I forgot what I was going to ask you.");
  customerlisten(); PCListen(); dText.Text=(" ");
  BuyorTalk();
  }
  else{speakmind(352);}}
function tbGoodbye_OnClick(GUIControl *control, MouseButton button){speakmind(353);}


function TipBox_OnActivate(GUIControl *control){//TipperGore
  String input = TipBox.Text;
  Parser.ParseText(input);
  float tipamount=(input.AsFloat);
  if (salebuyer==("Glenda")){//Glendapuzzles
   gTip.Visible=false;
   int playeranswer = input.IndexOf(todays_answer);
   
   if (String.IsNullOrEmpty(input)){//No answer
   PCTalk(); customerlisten(); 
   if (GetGlobalInt(1)==1){dText.Text=("I am not knowing of one."); blab1();}
   if (GetGlobalInt(1)==2){dText.Text=("Wow. Beats me."); blab1();}
   if (GetGlobalInt(1)==3){dText.Text=("I have no idea."); blab1();}
   if (GetGlobalInt(1)==4){dText.Text=("Yeah. I don't know."); blab1();}
   PCListen(); customertalk();  dText.Text=("Yeah, it's a tough one."); blab1();
   PCListen(); customertalk();  dText.Text=("Thanks, anyways."); blab1();
   PCListen(); customerlisten(); dText.Text=(" "); pwnlabel.Text=(" ");
   StopPop(); customerbreakaway();}

 if (playeranswer!=-1) {
   //if (input.CompareTo(todays_answer)==0){//Match?
   //if (input.UpperCase()==todays_answer.UpperCase()){//Right answer!
   PCTalk(); customerlisten();  dText.Text=String.Format("%s.",input); blab1();
   PCListen(); customertalk();  int omigarshk=Random(5);
   if (omigarshk==0){dText.Text=("I don't think..."); blab1();
                     PCListen(); customertalk();  dText.Text=("Oh, wait..."); blab1();
   }
   if (omigarshk==1){dText.Text=("Agh! Of course!"); blab1();}
   if (omigarshk==2){dText.Text=String.Format("\"%s,\" huh?",todays_answer); blab1();
                     PCListen(); customertalk();  dText.Text=("Wait a second..."); blab1();}
   if (omigarshk==3){dText.Text=("Let me check..."); blab1();}
   if (omigarshk==4){dText.Text=String.Format("Of course! Why couldn't I think of %s?", todays_answer); blab1();}
   if (omigarshk==5){dText.Text=String.Format("%s! You've got it!", todays_answer); blab1();}
   
   PCListen(); customertalk();  dText.Text=("You're right!"); blab1();
   PCListen(); customerlisten(); dText.Text=(" "); 
      //PlaySound(99); tipamount=10.00;//No more Tipping!
      //topitm_desc.Text=String.Format("Got a $%.2f tip!",tipamount);
      //if (small_customer>0){incomelist.AddItem(String.Format("%.2f  - tip from %s",tipamount, salebuyer));}
      //if (small_customer<=0){incomelist.AddItem(String.Format("%.2f  - tip from customer",tipamount, salebuyer));}
      //Money+=tipamount; income_tipstoday+=tipamount; income_total+=tipamount;
      //topcost.Text=(" ");  topitm.Visible=false;   topitm_sale.Visible=false;   top_reveal.Visible=true;
      //top_reveal.NormalGraphic=5630;   Infobg.NormalGraphic=5617;   TopInfo.Centre();   TopInfo.Visible=true;
      //Infobg.Animate(192, 4, 1, eOnce);  top_reveal.Animate(207, 1, 1, eOnce);
      //WaitMouseKey(barspeed);//Variable Attribute depends on text speed
      //TopInfo.Visible=false;  topitm_desc.Text=(" ");  topcost.Text=(" "); top_reveal.Visible=false;
   PCListen(); customertalk();  dText.Text=("Thanks!"); blab1();
   PCListen(); customerlisten(); dText.Text=(" "); pwnlabel.Text=(" ");
   StopPop(); customerbreakaway();}
  
 if (playeranswer==-1) {
  //if (input.CompareTo(todays_answer)!=0){//No Match? //if (input.UpperCase()!=todays_answer.UpperCase()){//Wrong answer!
  int cleansheets=0;
  int profanitycheck = input.IndexOf("Fuck");
  if (profanitycheck!=-1){cleansheets=1;
   PCTalk(); customerlisten();  dText.Text=String.Format("%s?",input); blab1();
   PCListen(); customertalk(); dText.Text=("Wha...?!"); 
  PCListen(); customertalk();  dText.Text=("Well, I never!"); blab1();}
  if (profanitycheck!=-1){cleansheets=1;
   PCTalk(); customerlisten();  dText.Text=String.Format("%s?",input); blab1();
   PCListen(); customertalk(); dText.Text=("Wha...?!"); 
  PCListen(); customertalk();  dText.Text=("Well, I never!"); blab1();}
  profanitycheck = input.IndexOf("Cunt");
  if (profanitycheck!=-1){cleansheets=1;
   PCTalk(); customerlisten();  dText.Text=String.Format("%s?",input); blab1();
   PCListen(); customertalk(); dText.Text=("Wha...?!"); 
  PCListen(); customertalk();  dText.Text=("Well, I never!"); blab1();}
  profanitycheck = input.IndexOf("Cock");
  if (profanitycheck!=-1){cleansheets=1;
   PCTalk(); customerlisten();  dText.Text=String.Format("%s?",input); blab1();
   PCListen(); customertalk(); dText.Text=("Wha...?!"); 
  PCListen(); customertalk();  dText.Text=("Well, I never!"); blab1();}
  profanitycheck = input.IndexOf("blow");
  if (profanitycheck!=-1){cleansheets=1;
   PCTalk(); customerlisten();  dText.Text=String.Format("%s?",input); blab1();
   PCListen(); customertalk(); dText.Text=("Wha...?!"); 
  PCListen(); customertalk();  dText.Text=("Well, I never!"); blab1();}
  profanitycheck = input.IndexOf("shit");
  if (profanitycheck!=-1){cleansheets=1;
   PCTalk(); customerlisten();  dText.Text=String.Format("%s?",input); blab1();
   PCListen(); customertalk(); dText.Text=("Wha...?!"); 
  PCListen(); customertalk();  dText.Text=("Well, I never!"); blab1();}
    if (cleansheets==0){
       PCTalk(); customerlisten();  dText.Text=String.Format("%s?",input); blab1();
      PCListen(); customertalk();  dText.Text=String.Format("%s, huh? Well...",input); blab1();
      PCListen(); customertalk();  dText.Text=("It doesn't fit."); blab1();
      PCListen(); customertalk();  dText.Text=("Thanks, anyways."); blab1();}
      PCListen(); customerlisten(); dText.Text=(" "); pwnlabel.Text=(" ");
      StopPop();  customerbreakaway();
  }//End Wrong
  }//End Glenda
  
  
  if ((input.UpperCase()!=("COLLIER"))&&(player.Room==2)) {

    //cheatbike: denied!
    PlaySound(60); TipBox.Text=(" "); TopUp("Access Denied","Incorrect password.");

  } else if (input.UpperCase()==("COLLIER")) { //cheatbike: Activate!

    cheatbiking=true;
    gTip.Visible=false;
    TipBox.Text=("0.00");
    TopUp("Debug Keys Enabled.","Debug keys enabled.[Press z for debug menu.");
  }

  
  if (input.AsFloat>Money){//Too Generous...
    if (player.Room!=2){Insufficiency(); TipBox.Text=("0.00"); Wait(5);}
    }
  if (input.AsFloat<0.00){//Negative Cheatbreaker
    if (player.Room!=2){
      TopUp("Oh, come on.","If you need money that badly, go to the pawn shop.");
      TipBox.Text=("0.00"); Wait(5);
      }
  }
  
  else if (input.AsFloat==0.00){//Give nothing...
  gTip.Visible=false; 
  if (player.Room==2){PlaySound(60); TipBox.Text=(" "); TopUp("Access Denied","Incorrect password.");}
  
  if (player.Room==33){//Dompactor
  TopUp("No tip.","No tip for the waitress.");
  PCListen(); customertalk(); dText.Text=("Wow, thanks...");//Waiter rant? Ask Jenny.
  PCListen(); customerlisten(); StopPop(); Stephanie.Walk(53, 144, eNoBlock, eAnywhere);}
  
  if (salebuyer==("Winston")){//Winston
  TopUp("No change.","Gave nothing.");
  customertalk(); PCListen(); dText.Text=("Alright, well..."); blab1();
  customertalk(); PCListen(); dText.Text=("God bless you - have a nice day."); blab1();
  PCListen(); customerlisten(); dText.Text=(" "); dName.Text=(" "); StopPop(); customerbreakaway();}
  
  if (salebuyer==("Omar")){//Winston
  TopUp("No love today.","No tip for Omar.");
  customertalk(); PCListen(); dText.Text=("See you around, uh?"); blab1();
  PCListen(); customerlisten(); dText.Text=(" "); pwnlabel.Text=(" "); StopPop();}
  if (salebuyer==("Andrus")){//Andrus
  TopUp("No love today.","No tip for andrus.");
  customertalk(); PCListen(); dText.Text=("Thank you for coming by here."); blab1();
  PCListen(); customerlisten(); dText.Text=(" "); pwnlabel.Text=(" "); StopPop();}
  if (salebuyer==("Vinny")){//Vinny
  TopUp("No love today.","No tip for Vinny.");
  customertalk(); PCListen(); dText.Text=("Cheers! See you around!"); blab1();
  PCListen(); customerlisten(); dText.Text=(" "); pwnlabel.Text=(" "); StopPop();}
  if (salebuyer==("Logan")){//Logan
  TopUp("No love today.","No tip for logan.");
  customertalk(); PCListen(); dText.Text=("Have a good one."); blab1();
  PCListen(); customerlisten(); dText.Text=(" "); pwnlabel.Text=(" "); StopPop();}
  if (salebuyer==("Melanie")){//Melanie
  TopUp("No love today.","No tip for melanie.");
  customertalk(); PCListen(); dText.Text=("Have a nice day!"); blab1();
  PCListen(); customerlisten(); dText.Text=(" "); pwnlabel.Text=(" "); StopPop();}
  
  }//End "Gave Nothing"
  
  else if ((input.AsFloat<=Money)&&(input.AsFloat!=0.00)){//Ahh...
  
  if (player.Room==2){PlaySound(60); TipBox.Text=(" "); TopUp("Access Denied","Incorrect password.");}
  
  else{
  Money-=tipamount; expense_misc+=tipamount; gTip.Visible=false;
  expense_total+=tipamount;///This was missing?!?!?!?!?!?
  
  if (player.Room==33){//Stephanie at the Dompactor Raxby
  TopUp("Left a tip!",String.Format("Left %.2f for the waitress.",tipamount));
  expenselist.AddItem(String.Format("%.2f - Left a Tip at Raxby",tipamount));
  
  PCListen(); customertalk();
  int stephdeparture;
  if (tipamount<1.00){dText.Text=("Gee, thanks..."); stephdeparture=0;}
  if ((tipamount>=1.00)&&(tipamount<3.00)){dText.Text=("Thank you!"); blab1(); stephdeparture=(Random(3)+1);}
  if ((tipamount>=3.00)&&(tipamount<5.00)){dText.Text=("Thanks!"); blab1(); stephdeparture=(Random(3)+1);}
  if ((tipamount>=5.00)&&(tipamount<10.00)){dText.Text=("Hey, thanks so much!"); blab1(); stephdeparture=(Random(3)+1);}
  if (tipamount>=10.00){dText.Text=("Oh, wow..."); blab1(); stephdeparture=0;
                        customerlisten(); dText.Text=("..."); blab1();
                        customertalk(); dText.Text=("Look, I don't know what you want out of this, but..."); blab1();
                        customertalk(); dText.Text=("I'm gonna take it."); blab1();
                        customertalk(); dText.Text=String.Format("I'm gonna put all $%.2f in my apron pocket.",tipamount); blab1();
                        customertalk(); dText.Text=("Then, I'm gonna say, \"Have a good one! Thanks for coming in!\""); blab1();
                        customertalk(); dText.Text=String.Format("And the fact that it's a $%.2f tip doesn't change that.",tipamount); blab1();
                        customerlisten(); PCTalk(); dText.Text=("Okay."); blab1();
                        customertalk(); PCListen(); dText.Text=("Okay."); blab1();
                        customertalk(); PCListen(); dText.Text=("Well..."); blab1();
                        customertalk(); PCListen(); dText.Text=("Have a good one! Thanks for coming in!"); blab1();}

  PCListen(); customertalk();
  if (stephdeparture==0){}
  if (stephdeparture==1){dText.Text=("Remember - We're open all night!"); blab2();
  PCListen(); customertalk(); dText.Text=("Come again whenever you like!"); blab2();}
  if (stephdeparture==2){dText.Text=("We appreciate the business!"); blab2();}
  if (stephdeparture==3){
  if ((hour>=1)&&(hour<5)&&(ampm==0)){dText.Text=("Enjoy the rest of your night!"); blab2();}
  if ((hour>=5)&&(hour<12)&&(ampm==0)){dText.Text=("Have a good morning!"); blab2();}
  if ((hour>=1)&&(hour<8)&&(ampm==1)){dText.Text=("Have a good afternoon!"); blab2();}
  if ((hour>=8)&&(hour<12)&&(ampm==1)){dText.Text=("Have a nice night!"); blab2();}
  if (hour==12){dText.Text=("Hope you enjoyed your meal!"); blab2();}}
  if (stephdeparture==4){dText.Text=("See you!"); blab2();}
  StopPop(); Stephanie.Walk(53, 144, eNoBlock, eAnywhere);}
  
  if (player.Room!=33){
 
  if (salebuyer==("Omar")){//Omartip
  if (small_Omar==0){
    TopUp("Vendor tips vendor.",String.Format("Gave $%.2f to the vendor.",tipamount));
    expenselist.AddItem(String.Format("%.2f - Tipped Food Vendor",tipamount));}
  if (small_Omar==1){
    TopUp("Vendor tips vendor.",String.Format("Gave $%.2f to Omar.",tipamount));
    expenselist.AddItem(String.Format("%.2f - Tipped Omar",tipamount));}
  customertalk(); PCListen(); 
  if (tipamount<1.00){dText.Text=("Wow, thanks. You so generous, you know?"); blab1();
  customertalk(); PCListen(); dText.Text=("Man, even the cops be tipping better than you, uh?"); blab1();}
  if ((tipamount>=1.00)&&(tipamount<3.00)){dText.Text=("Thanks again, uh?"); blab1();
  customertalk(); PCListen(); dText.Text=("You gonna have a good day, you know?"); blab1();}
  if ((tipamount>=3.00)&&(tipamount<5.00)){dText.Text=("No shit, huh?"); blab1();
  customertalk(); PCListen(); dText.Text=("Thanks a lot, man!"); blab1();}
  if ((tipamount>=5.00)&&(tipamount<20.00)){dText.Text=("No shit, huh?"); blab1();
  customertalk(); PCListen(); dText.Text=("Thanks a lot, man!"); blab1();
  customertalk(); dText.Text=("I make you the best lunch next time!"); blab1();
  customertalk(); dText.Text=("Whatever you want, I make it for you, you know?"); blab1();}
  if (tipamount>=20.00){dText.Text=("What the hell is this, uh?"); blab1();
  customertalk(); PCListen(); dText.Text=("You trying to unload some dirty bills on Omar, or what?"); blab1();
  customertalk(); dText.Text=("Get out of here, uh?"); blab1();
  customertalk(); dText.Text=("You come back, I'm calling city cops, you know? Ain't no counterfeit allowed, uh?"); blab1();}
  PCListen(); customerlisten(); dText.Text=(" "); pwnlabel.Text=(" "); StopPop();}
  
  if (salebuyer==("Andrus")){//Andrustip
  if (small_Andrus==0){
    TopUp("Vendor tips vendor.",String.Format("Gave $%.2f to the vendor.",tipamount));
    expenselist.AddItem(String.Format("%.2f - Tipped Newsagent",tipamount));}
  if (small_Andrus==1){
    TopUp("Vendor tips vendor.",String.Format("Gave $%.2f to Andrus.",tipamount));
    expenselist.AddItem(String.Format("%.2f - Tipped Andrus",tipamount));}
  customertalk(); PCListen(); 
  if (tipamount<1.00){dText.Text=("Thank you again."); blab1();}
  if ((tipamount>=1.00)&&(tipamount<3.00)){dText.Text=("Yes - thank you!"); blab1();
  customertalk(); PCListen(); dText.Text=("Please to have the good day, okay?"); blab1();}
  if ((tipamount>=3.00)&&(tipamount<9.00)){dText.Text=("Thank you! So much!"); blab1();
  customertalk(); PCListen(); dText.Text=("That is being a good tip to leave!"); blab1();
  customertalk(); PCListen(); dText.Text=("See you again soon, okay?"); blab1();}
  if ((tipamount>=9.00)&&(tipamount<20.00)){dText.Text=("That is being..."); blab1();
  customertalk(); PCListen(); dText.Text=("That is being the very good tip!"); blab1();
  customertalk(); dText.Text=("I am to be telling everybody of this tip you are leaving!"); blab1();
  customertalk(); dText.Text=("I am giving you the free paper tomorrow, okay? Thank you!"); blab1();}
  if (tipamount>=20.00){dText.Text=("I am... I am being confused?"); blab1();
  customertalk(); PCListen(); dText.Text=("This is being the counterfeit money?"); blab1();
  customertalk(); dText.Text=("Please... Don't be doing this to me. No."); blab1();
  customertalk(); dText.Text=("I am not needing of the trouble this is bringing... Just to be going now, okay?"); blab1();}
  PCListen(); customerlisten(); dText.Text=(" "); pwnlabel.Text=(" "); StopPop();}

  if (salebuyer==("Melanie")){//Meltip
  if (small_Mel==0){
    TopUp("Vendor tips vendor.",String.Format("Gave $%.2f to the vendor.",tipamount));
    expenselist.AddItem(String.Format("%.2f - Tipped Barrista",tipamount));}
  if (small_Mel==1){
    TopUp("Vendor tips vendor.",String.Format("Gave $%.2f to Melanie.",tipamount));
    expenselist.AddItem(String.Format("%.2f - Tipped Melanie",tipamount));}
  customertalk(); PCListen(); 
  if (tipamount<1.00){dText.Text=("Thanks again!"); blab1();}
  if ((tipamount>=1.00)&&(tipamount<5.00)){dText.Text=("Hey - thank you!"); blab1();
  customertalk(); PCListen(); dText.Text=("Have a great day, okay?"); blab1();}
  if ((tipamount>=5.00)&&(tipamount<10.00)){dText.Text=("Thank you so much!"); blab1();
  customertalk(); PCListen(); dText.Text=("Listen, big tipper..."); blab1();
  customertalk(); PCListen(); dText.Text=("I really appreciate this, all right?"); blab1();
  customertalk(); PCListen(); dText.Text=("Seriously. Thanks."); blab1();}
  if ((tipamount>=10.00)&&(tipamount<20.00)){dText.Text=("Wow!"); blab1();
  customertalk(); PCListen(); dText.Text=("That's quite a tip!"); blab1();
  customertalk(); dText.Text=("I am gonna tell everybody about this, you realize..."); blab1();
  customertalk(); dText.Text=("Now you're in trouble because everybody's gonna expect this kind of tip, everywhere you go."); blab1();
  customerlisten(); dText.Text=(" "); 
  customertalk(); PCListen(); dText.Text=("Listen, big tipper..."); blab1();
  customertalk(); PCListen(); dText.Text=("I really appreciate this, all right?"); blab1();
  customertalk(); PCListen(); dText.Text=("Seriously. Thanks. So much."); blab1();}
  if (tipamount>=20.00){dText.Text=("What... exactly is this?"); blab1();
  customertalk(); PCListen(); dText.Text=("Are you giving me counterfeit bills?"); blab1();
  customertalk(); dText.Text=("Come on... I don't need this kind of trouble. No."); blab1();
  customertalk(); dText.Text=("Just take your funny money and go, okay?"); blab1();}
  PCListen(); customerlisten(); dText.Text=(" "); pwnlabel.Text=(" "); StopPop();}

  if (salebuyer==("Vinny")){//Vinnytip
  if (small_Vinny==0){
    TopUp("Vendor tips vendor.",String.Format("Gave $%.2f to the vendor.",tipamount));
    expenselist.AddItem(String.Format("%.2f - Tipped Bagel Guy",tipamount));}
  if (small_Vinny==1){
    TopUp("Vendor tips vendor.",String.Format("Gave $%.2f to Vinny.",tipamount));
    expenselist.AddItem(String.Format("%.2f - Tipped Vinny",tipamount));}
  customertalk(); PCListen(); 
  if (tipamount<1.00){dText.Text=("Cheers!"); blab1();}
  if ((tipamount>=1.00)&&(tipamount<5.00)){dText.Text=("Hey, thanks a lot!"); blab1();
  int adjective=Random(3);
  customertalk(); PCListen(); 
  if (adjective==0){dText.Text=("You have yourself a speldid day, okay?");}
  if (adjective==1){dText.Text=("You have yourself an outstanding day, okay?");}
  if (adjective==2){dText.Text=("You have yourself an especially rewarding day, okay?");}
  if (adjective==3){dText.Text=("You have yourself an implausibly good day, okay?");}
  blab1();}
  if ((tipamount>=5.00)&&(tipamount<20.00)){dText.Text=("Whoa... thanks so much!"); blab1();
  customertalk(); PCListen(); dText.Text=("You know what I'm gonna do with this tip?"); blab1();
  int bigplans=Random(3);
  customertalk(); PCListen(); 
  if (bigplans==0){dText.Text=("I'm gonna buy a mansion."); blab1();
      customertalk(); PCListen(); dText.Text=("Twelve bedrooms."); blab1();
      customertalk(); PCListen(); dText.Text=("Mezzanine."); blab1();
      customertalk(); PCListen(); dText.Text=("Cathedral ceilings."); blab1();
      customertalk(); PCListen(); dText.Text=("You can come sleep on the couch whenever you want."); blab1();}
  if (bigplans==1){dText.Text=("Finally gonna get that tuxedo I've had my eye on."); blab1();
  customertalk(); PCListen(); dText.Text=("White silk."); blab1();
  customertalk(); PCListen(); dText.Text=("Penguin tails."); blab1();
  customertalk(); PCListen(); dText.Text=("Matching white cane and top hat."); blab1();
  customertalk(); PCListen(); dText.Text=("...and the white platform dancing formals, of course."); blab1();
  customertalk(); PCListen(); dText.Text=("You can be my date. We'll go to the opera."); blab1();}
  if (bigplans==2){dText.Text=("Gonna get that maid I've always wanted."); blab1();
  customertalk(); PCListen(); dText.Text=("She'll do all of that laundry."); blab1();
  customertalk(); PCListen(); dText.Text=("Wash the dishes, do the sink."); blab1();
  customertalk(); PCListen(); dText.Text=("Fluff the pillows."); blab1();
  customertalk(); PCListen(); dText.Text=("Hey - come over some time, we'll trash the place."); blab1();
  customertalk(); PCListen(); dText.Text=("I want to get my money's worth."); blab1();}
  if (bigplans==3){dText.Text=("I'm finally gonna get a vendor's permit for this cart."); blab1();
  customertalk(); PCListen(); dText.Text=("I'm gonna be totally compliant with the law. Finally!"); blab1();
  customertalk(); PCListen(); dText.Text=("Maybe I'll get some gloves, too."); blab1();
  boxadd("Loyal Pawn"); 
  customertalk(); PCListen(); dText.Text=("And I can finally get my watch out of the pawn shop!"); blab1();
  customertalk(); PCListen(); dText.Text=("Next time you buy food from me, we won't be breaking the law!"); blab1();}
  }
  if (tipamount>=20.00){dText.Text=("What... exactly is this?"); blab1();
  customertalk(); PCListen(); dText.Text=("Are you giving me counterfeit bills?"); blab1();
  customertalk(); dText.Text=("Come on... I don't need this kind of trouble. No."); blab1();
  customertalk(); dText.Text=("Just take your funny money and go, okay?"); blab1();}
  PCListen(); customerlisten(); dText.Text=(" "); pwnlabel.Text=(" "); StopPop();
  }

  if (salebuyer==("Logan")){//Logantip
  if (small_Logan==0){
    TopUp("Vendor tips vendor.",String.Format("Gave $%.2f to the vendor.",tipamount));
    expenselist.AddItem(String.Format("%.2f - Tipped Hot Dog Guy",tipamount));}
  if (small_Mel==1){
    TopUp("Vendor tips vendor.",String.Format("Gave $%.2f to Logan.",tipamount));
    expenselist.AddItem(String.Format("%.2f - Tipped Logan",tipamount));}
  customertalk(); PCListen(); 
  if (tipamount<1.00){dText.Text=("Oh, wow. I'm touched."); blab1();}
  if ((tipamount>=1.00)&&(tipamount<5.00)){dText.Text=("Thanks!"); blab1();}
  if ((tipamount>=5.00)&&(tipamount<10.00)){dText.Text=("Hey, all right! Thanks!"); blab1();}
  if ((tipamount>=10.00)&&(tipamount<20.00)){dText.Text=("Whoa...!"); blab1();
  customertalk(); PCListen(); dText.Text=("That's a hell of a tip, though!"); blab1();
  customertalk(); dText.Text=("Listen... Next one's on me, okay?"); blab1();
  customertalk(); dText.Text=("One free dog, whenever you want it."); blab1();}
  if (tipamount>=20.00){dText.Text=("What... exactly are you trying to pull?"); blab1();
  customertalk(); PCListen(); dText.Text=("You giving me counterfeit bills?"); blab1();
  customertalk(); dText.Text=("Listen pal... I don't need this shit, all right? I got enough problems."); blab1();
  customertalk(); dText.Text=("Get the hell out of here, all right?"); blab1();}
  PCListen(); customerlisten(); dText.Text=(" "); pwnlabel.Text=(" "); StopPop();
  }

  if (salebuyer==("Winston")){//Winston
  if (small_Winston==0){TopUp("Spared some spare change.",String.Format("Gave $%.2f to the stranger.",tipamount));}
  if (small_Winston==1){TopUp("Spared some spare change.",String.Format("Gave $%.2f to Winston.",tipamount));}
  customertalk(); PCListen(); 
  if (tipamount<1.00){dText.Text=("Thanks again. Have a nice day."); blab1();}
  if ((tipamount>=1.00)&&(tipamount<3.00)){dText.Text=("Hey, thanks!"); blab1();}
  if ((tipamount>=3.00)&&(tipamount<5.00)){dText.Text=("Wow - thanks so much!"); blab1();}
  if ((tipamount>=5.00)&&(tipamount<10.00)){dText.Text=("Oh my goodness..."); blab1();
  customertalk(); PCListen(); dText.Text=("This is so generous! Thank you so much!"); blab1();
  customertalk(); dText.Text=("God bless you! Have a good day!"); blab1();}
  if (tipamount>=10.00){dText.Text=("Oh my goodness..."); blab1();
  customertalk(); PCListen(); dText.Text=("This is so generous! Thank you so much!"); blab1();
  customertalk(); dText.Text=("God bless you! Have a good day!"); blab1();}

PCTalk(); customerlisten(); 
if (GetGlobalInt(1)==1){dText.Text=("You are welcome. "); blab1();}
if (GetGlobalInt(1)==2){dText.Text=("You too! "); blab1();}
if (GetGlobalInt(1)==3){dText.Text=("You too, man. "); blab1();}
if (GetGlobalInt(1)==4){dText.Text=("Psh. "); blab1();}
PCListen(); customerlisten(); dText.Text=(" "); pwnlabel.Text=(" ");
StopPop(); customerbreakaway();}
  }}}
vendorbought=false;
}//End Tip Amount Process


function warp_plotplus_OnClick(GUIControl *control, MouseButton button){//Plot Advance Button
PlaySound(28); 
if (GetGlobalInt(1)==1){SetGlobalInt(101, (GetGlobalInt(101)+1)); 
TopUp("Andrus Plot State:",String.Format("%d",GetGlobalInt(101)));}
if (GetGlobalInt(1)==2){melplot=melplot+1; 
TopUp("Mel Plot State:",String.Format("%d",melplot));}
Wait(5);
}

function warp_plotreverse_OnClick(GUIControl *control, MouseButton button){//Plot Reverse Button
PlaySound(28); 
if (GetGlobalInt(1)==1){SetGlobalInt(101, (GetGlobalInt(101)-1)); 
TopUp("Andrus Plot State:",String.Format("%d",GetGlobalInt(101)));}
if (GetGlobalInt(1)==2){melplot=melplot-1; 
TopUp("Mel Plot State:",String.Format("%d",melplot));}
Wait(5);
}

function Towels_Look(){PlaySound(41); gItemDesc.BackgroundGraphic=7058;
sgw.Visible=false; smoke_button.Visible=false; price_blackout.Visible=false; itemprice.Visible=false;
remaining_label.Text=(" "); prev_button.Visible=false; next_button.Visible=false; gItemDesc.Visible = true;}

function Kuddletoy_Look(){PlaySound(41); gItemDesc.BackgroundGraphic=7056;
sgw.Visible=false; smoke_button.Visible=false; price_blackout.Visible=false; itemprice.Visible=false;
remaining_label.Text=(" "); prev_button.Visible=false; next_button.Visible=false; gItemDesc.Visible = true;}

function Perfume_Look(){PlaySound(41); gItemDesc.BackgroundGraphic=7054;
sgw.Visible=false; smoke_button.Visible=false; price_blackout.Visible=false; itemprice.Visible=false;
remaining_label.Text=(" "); prev_button.Visible=false; next_button.Visible=false; gItemDesc.Visible = true;}

function Candle_Look(){PlaySound(41); gItemDesc.BackgroundGraphic=7052;
sgw.Visible=false; smoke_button.Visible=false; price_blackout.Visible=false; itemprice.Visible=false;
remaining_label.Text=(" "); prev_button.Visible=false; next_button.Visible=false; gItemDesc.Visible = true;}

function bTowels_Look(){buysticker.Visible=true; buyblackout.Visible=true;
PlaySound(41); gBuyItem.BackgroundGraphic=7058;
if (player.Room==15){buyprice=(22.06);}//Bigby
if (player.Room==21){buyprice=(22.06);}//Superstore
if (player.Room==27){buyprice=(22.06);}//Roaster
if (player.Room==20){buyprice=(22.06);}//Organique
buysticker.Text=String.Format("$%.2f",buyprice);
gBuyItem.Visible=true;}

function bKuddletoy_Look(){buysticker.Visible=true; buyblackout.Visible=true;
PlaySound(41); gBuyItem.BackgroundGraphic=7056;
if (player.Room==15){buyprice=(6.78);}//Bigby
if (player.Room==21){buyprice=(6.78);}//Superstore
if (player.Room==27){buyprice=(6.78);}//Roaster
if (player.Room==20){buyprice=(6.78);}//Organique
buysticker.Text=String.Format("$%.2f",buyprice);
gBuyItem.Visible=true;}

function bPerfume_Look(){buysticker.Visible=true; buyblackout.Visible=true;
PlaySound(41); gBuyItem.BackgroundGraphic=7054;
if (player.Room==15){buyprice=(11.33);}//Bigby
if (player.Room==21){buyprice=(11.33);}//Superstore
if (player.Room==27){buyprice=(11.33);}//Roaster
if (player.Room==20){buyprice=(11.33);}//Organique
buysticker.Text=String.Format("$%.2f",buyprice);
gBuyItem.Visible=true;}

function bCandle_Look(){buysticker.Visible=true; buyblackout.Visible=true;
PlaySound(41); gBuyItem.BackgroundGraphic=7052;
if (player.Room==15){buyprice=(4.26);}//Bigby
if (player.Room==21){buyprice=(4.26);}//Superstore
if (player.Room==27){buyprice=(4.26);}//Roaster
if (player.Room==20){buyprice=(4.26);}//Organique
buysticker.Text=String.Format("$%.2f",buyprice);
gBuyItem.Visible=true;}


function bWatchD_Look(){PlaySound(41); buyblackout.Visible=true; buysticker.Visible=true; 
gBuyItem.BackgroundGraphic=3628; buyprice=(7.88);
buysticker.Text=String.Format("$%.2f",buyprice); gBuyItem.Visible=true;}

function bGondolas_Look(){PlaySound(41); buyblackout.Visible=true; buysticker.Visible=true; 
gBuyItem.BackgroundGraphic=7060;
if (player.Room==15){buyprice=(9999.99);}//Bigby
if (player.Room==21){buyprice=(3.48);}//Superstore
if (player.Room==27){buyprice=(9999.99);}//Roaster
if (player.Room==20){buyprice=(5.50);}//Organique
buysticker.Text=String.Format("$%.2f",buyprice); gBuyItem.Visible=true;}

function Gondolas_Look(){
PlaySound(41); gItemDesc.BackgroundGraphic=7062; prev_button.Visible=false; next_button.Visible=false;
sgw.Visible=false; smoke_button.Visible=false;
price_blackout.Visible=true; itemprice.Visible=true; 
itemprice.Text=("$3.48");
remaining_label.Text=String.Format("%d",granolas_remaining);gItemDesc.Visible = true;
smoke_button.NormalGraphic=1957; smoke_button.MouseOverGraphic=1958; smoke_button.Visible=true;}

function Freshener_Look(){PlaySound(41); gItemDesc.BackgroundGraphic=7064;
sgw.Visible=false; smoke_button.Visible=false; price_blackout.Visible=false; itemprice.Visible=false;
remaining_label.Text=(" "); prev_button.Visible=false; next_button.Visible=false; gItemDesc.Visible = true;}

function bFreshener_Look(){PlaySound(41); buyblackout.Visible=true; buysticker.Visible=true; 
gBuyItem.BackgroundGraphic=7064; buyprice=(1.48);
buysticker.Text=String.Format("$%.2f",buyprice); gBuyItem.Visible=true;}

function Voliton1_Look(){PlaySound(41); gItemDesc.BackgroundGraphic=8174;
sgw.Visible=false; smoke_button.Visible=false; price_blackout.Visible=false; itemprice.Visible=false;
remaining_label.Text=(" "); prev_button.Visible=false; next_button.Visible=false; gItemDesc.Visible = true;}

function Voliton2_Look(){PlaySound(41); gItemDesc.BackgroundGraphic=8174;
sgw.Visible=false; smoke_button.Visible=false; price_blackout.Visible=false; itemprice.Visible=false;
remaining_label.Text=(" "); prev_button.Visible=false; next_button.Visible=false; gItemDesc.Visible = true;}

function Multitool_Look(){PlaySound(41); gItemDesc.BackgroundGraphic=9626;
sgw.Visible=false; smoke_button.Visible=false; price_blackout.Visible=false; itemprice.Visible=false;
remaining_label.Text=(" "); prev_button.Visible=false; next_button.Visible=false; gItemDesc.Visible = true;}

function Cellphone_Look(){PlaySound(41); gItemDesc.BackgroundGraphic=7580;
sgw.Visible=false; smoke_button.Visible=false; price_blackout.Visible=false; itemprice.Visible=false;
remaining_label.Text=(" "); prev_button.Visible=false; next_button.Visible=false; gItemDesc.Visible = true;}

function GoldTooth_Look(){PlaySound(41); gItemDesc.BackgroundGraphic=7194;
sgw.Visible=false; smoke_button.Visible=false; price_blackout.Visible=false; itemprice.Visible=false;
remaining_label.Text=(" "); prev_button.Visible=false; next_button.Visible=false; gItemDesc.Visible = true;}

function Apaptol_Look(){PlaySound(41); gItemDesc.BackgroundGraphic=7066;
sgw.Visible=false; price_blackout.Visible=false; itemprice.Visible=false;
remaining_label.Text=String.Format("%d",apaptol_remaining); prev_button.Visible=false; next_button.Visible=false;
smoke_button.NormalGraphic=9643; smoke_button.MouseOverGraphic=9644; smoke_button.Visible=true;
gItemDesc.Visible = true;}

function bApaptol_Look(){PlaySound(41); buyblackout.Visible=true; buysticker.Visible=true; 
gBuyItem.BackgroundGraphic=7066; buyprice=(4.17);
buysticker.Text=String.Format("$%.2f",buyprice); gBuyItem.Visible=true;}

function Moonroom_Look(){PlaySound(41); gItemDesc.BackgroundGraphic=9642;
sgw.Visible=false; price_blackout.Visible=true; itemprice.Text=("$5.99"); itemprice.Visible=true;
remaining_label.Text=String.Format("%d",moonroom_remaining); prev_button.Visible=false; next_button.Visible=false;
smoke_button.NormalGraphic=9643; smoke_button.MouseOverGraphic=9644; smoke_button.Visible=true;//Take A Pill
gItemDesc.Visible = true;}

function bMoonroom_Look(){PlaySound(41); buyblackout.Visible=true; buysticker.Visible=true; 
gBuyItem.BackgroundGraphic=9642; buyprice=(5.99);
buysticker.Text=String.Format("$%.2f",buyprice); gBuyItem.Visible=true;}

function Sunroom_Look(){PlaySound(41); gItemDesc.BackgroundGraphic=9640;
sgw.Visible=false; price_blackout.Visible=true; itemprice.Text=("$5.99"); itemprice.Visible=true;
remaining_label.Text=String.Format("%d",sunroom_remaining); prev_button.Visible=false; next_button.Visible=false;
smoke_button.NormalGraphic=9643; smoke_button.MouseOverGraphic=9644; smoke_button.Visible=true;//Take A Pill
gItemDesc.Visible = true;}

function bSunroom_Look(){PlaySound(41); buyblackout.Visible=true; gBuyItem.BackgroundGraphic=9640;
buysticker.Visible=true; buyprice=(5.99);
buysticker.Text=String.Format("$%.2f",buyprice); gBuyItem.Visible=true;}

function Gelcaps_Look(){PlaySound(41); gItemDesc.BackgroundGraphic=9638;
sgw.Visible=false; price_blackout.Visible=true; itemprice.Text=("$11.99"); itemprice.Visible=true;
remaining_label.Text=String.Format("%d",gelcaps_remaining); prev_button.Visible=false; next_button.Visible=false;
smoke_button.NormalGraphic=9643; smoke_button.MouseOverGraphic=9644; smoke_button.Visible=true;//Take A Pill
gItemDesc.Visible = true;}

function bGelcaps_Look(){PlaySound(41); buyblackout.Visible=true; gBuyItem.BackgroundGraphic=9638;
buysticker.Visible=true; buyprice=(11.99);
buysticker.Text=String.Format("$%.2f",buyprice); gBuyItem.Visible=true;}

function Urinary_Look(){PlaySound(41); gItemDesc.BackgroundGraphic=9636;
sgw.Visible=false; price_blackout.Visible=true; itemprice.Text=("$4.72"); itemprice.Visible=true;
remaining_label.Text=String.Format("%d",urinary_remaining); prev_button.Visible=false; next_button.Visible=false;
smoke_button.NormalGraphic=9643; smoke_button.MouseOverGraphic=9644; smoke_button.Visible=true;//Take A Pill
gItemDesc.Visible = true;}

function bUrinary_Look(){PlaySound(41); buyblackout.Visible=true; gBuyItem.BackgroundGraphic=9636;
buysticker.Visible=true; buyprice=(4.72);
buysticker.Text=String.Format("$%.2f",buyprice); gBuyItem.Visible=true;}

function Multivitamin_Look(){PlaySound(41); gItemDesc.BackgroundGraphic=9634;
sgw.Visible=false; price_blackout.Visible=true; itemprice.Text=("$3.14"); itemprice.Visible=true;
remaining_label.Text=String.Format("%d",multivitamin_remaining); prev_button.Visible=false; next_button.Visible=false;
smoke_button.NormalGraphic=9643; smoke_button.MouseOverGraphic=9644; smoke_button.Visible=true;//Take A Pill
gItemDesc.Visible = true;}

function bMultivitamin_Look(){PlaySound(41); buyblackout.Visible=true; gBuyItem.BackgroundGraphic=9634;
buysticker.Visible=true; buyprice=(3.14);
buysticker.Text=String.Format("$%.2f",buyprice); gBuyItem.Visible=true;}

function Painrelief_Look(){PlaySound(41); gItemDesc.BackgroundGraphic=9632;
sgw.Visible=false; price_blackout.Visible=true; itemprice.Text=("$7.23"); itemprice.Visible=true;
remaining_label.Text=String.Format("%d",painrelief_remaining); prev_button.Visible=false; next_button.Visible=false;
smoke_button.NormalGraphic=9643; smoke_button.MouseOverGraphic=9644; smoke_button.Visible=true;//Take A Pill
gItemDesc.Visible = true;}

function bPainrelief_Look(){PlaySound(41); buyblackout.Visible=true; gBuyItem.BackgroundGraphic=9632;
buysticker.Visible=true; buyprice=(7.23);
buysticker.Text=String.Format("$%.2f",buyprice); gBuyItem.Visible=true;}

function Spellunflav_Look(){PlaySound(41); gItemDesc.BackgroundGraphic=9630;
sgw.Visible=false; price_blackout.Visible=true; itemprice.Text=("$2.86"); itemprice.Visible=true;
remaining_label.Text=String.Format("%d",spellunflavor_remaining); prev_button.Visible=false; next_button.Visible=false;
smoke_button.NormalGraphic=9643; smoke_button.MouseOverGraphic=9644; smoke_button.Visible=true;//Take A Pill
gItemDesc.Visible = true;}

function bSpellunflav_Look(){PlaySound(41); buyblackout.Visible=true; gBuyItem.BackgroundGraphic=9630;
buysticker.Visible=true; buyprice=(2.86);
buysticker.Text=String.Format("$%.2f",buyprice); gBuyItem.Visible=true;}

function Spelllemon_Look(){PlaySound(41); gItemDesc.BackgroundGraphic=9628;
sgw.Visible=false; price_blackout.Visible=true; itemprice.Text=("$2.86"); itemprice.Visible=true;
remaining_label.Text=String.Format("%d",spelllemon_remaining); prev_button.Visible=false; next_button.Visible=false;
smoke_button.NormalGraphic=9643; smoke_button.MouseOverGraphic=9644; smoke_button.Visible=true;//Take A Pill
gItemDesc.Visible = true;}

function bSpelllemon_Look(){PlaySound(41); buyblackout.Visible=true; gBuyItem.BackgroundGraphic=9628;
buysticker.Visible=true; buyprice=(2.86);
buysticker.Text=String.Format("$%.2f",buyprice); gBuyItem.Visible=true;}


////Talk: TJ at the pawnshop.

function Candle_Talk(){TJNoway();}
function Perfume_Talk(){TJNoway();}
function Kuddletoy_Talk(){TJNoway();}
function Towels_Talk(){TJNoway();}
function Gondolas_Talk(){TJNoway();}
function Freshener_Talk(){TJNoway();}
function Apaptol_Talk(){TJNoway();}
function Muffler_Talk(){TJNoway();}
function TacoSeasoning_Talk(){TJNoway();}
function Camphor_Talk(){TJNoway();}
function Voliton1_Talk(){TJNoway();}
function Voliton2_Talk(){TJNoway();}
function Multitool_Talk(){TJNoway();}
//
function Moonroom_Talk(){TJNoway();}
function Sunroom_Talk(){TJNoway();}
function Gelcaps_Talk(){TJNoway();}
function Spellunflav_Talk(){TJNoway();}
function Spelllemon_Talk(){TJNoway();}
function Urinary_Talk(){TJNoway();}
function Painrelief_Talk(){TJNoway();}
function Multivitamin_Talk(){TJNoway();}

function TextBox1_OnActivate(GUIControl *control){
  String input = spawnbox.Text;
  Parser.ParseText(input);
  int i;
  while (i<Game.CharacterCount){
  if (input.CompareTo(character[i].Name)!=0){}
  else {
    Display("Spawned %s!",character[i].Name);
    character[i].Baseline=player.Baseline-1;
    character[i].ChangeRoom(player.Room, player.x-100, player.y);
    hunger[character[i].ID]=1;//Spawning them hungry, too.
    if (character[i].Name==("TJ")){hunger[TJ.ID]=1; TJ.UnlockView(); TJ.ChangeView(174);}//hungry_tj=true; 
    if (character[i].Name==("Basinski")){SetGlobalInt(43, 1); hunger[Basinski.ID]=1;}//Basinski - Hungry?}
    character[i].chasedown();
    Warp2.Visible=false;
    mouse.Visible=false;
    }
  i++;
  }
Wait(5);
}



function getup_OnClick(GUIControl *control, MouseButton button){
  gBadream.Visible=false; 
  mouse.Visible=false;
  dSaveprompt.Start();
  }
function checktime_OnClick(GUIControl *control, MouseButton button){
if ((cSlot2.InventoryQuantity[WatchA.ID]!=0)||(cSlot2.InventoryQuantity[WatchB.ID]!=0)||(cSlot2.InventoryQuantity[WatchC.ID]!=0)||(cSlot2.InventoryQuantity[WatchD.ID]!=0)||(cSlot2.InventoryQuantity[Cellphone.ID]!=0)){
  String checktimedisplay=String.Format("%02d:%02d",hour, minute);
  TopUp("...what time is it...?",String.Format("%s!",checktimedisplay));}
else{//No Watch
  if ((milhour>=22)||(milhour<=4)){TopUp("...what time is it...?",("It's still pretty dark outside..."));}
   if ((milhour>=5)&&(milhour<=7)){TopUp("...what time is it...?",("Looks like the sun will be up soon..."));}
  if ((milhour>=8)&&(milhour<=12)){TopUp("...what time is it...?",("Looks like the sun is up..."));}
  if ((milhour>=13)&&(milhour<=18)){TopUp("...what time is it...?",("It looks like daylight outside..."));}
  if ((milhour>=19)&&(milhour<=21)){TopUp("...what time is it...?",("Looks like the sun's going down outside..."));}
  }
}
function back2sleep_OnClick(GUIControl *control, MouseButton button){//Back to sleep...
  //PlaySound(28); CloseAll(); Mouse.Visible=false; sleep(); gBadream.Visible=false;}//Old Version -> Sleep function (eight hours?!)
  PlaySound(28); FadeOut(5); CloseAll(); Mouse.Visible=false; hour+=1; milhour+=1; gBadream.Visible=false;//New Version, one hour passes
  clockspeed=27;//Aghg!
  Wait(40); FadeIn(5);
  Wait(5);
  dSaveprompt.Start();
  }
  
  
  
function folks_prevbutton_OnClick(GUIControl *control, MouseButton button){
  PlaySound(28); PlaySound(44);
  if (gFolks.BackgroundGraphic==8010){//Previous
  int i=0;
  while (i<28){
    Button *theButton = gFolks.Controls[i].AsButton;
    if (theButton== null) {}//Display("Control 2 is not a button!!!!");
    else {theButton.NormalGraphic=8064; Wait(1);}
  i++;}
  gFolks.BackgroundGraphic=8009; 
      folks_prevbutton.X=110; folks_prevbutton.Y=98;
      folks_prevbutton.NormalGraphic=8061;
      folks_prevbutton.MouseOverGraphic=8062;
  folkify(0);}
  
  else if (gFolks.BackgroundGraphic==8009){
      int i=27;
  while (i>-1){
    Button *theButton = gFolks.Controls[i].AsButton;
    if (theButton== null) {}//Display("Control 2 is not a button!!!!");
    else {theButton.NormalGraphic=8064; Wait(1);}
  i-=1;}
  gFolks.BackgroundGraphic=8010; //folks_nextbutton.Visible=false; folks_prevbutton.Visible=true;
      folks_prevbutton.X=51; folks_prevbutton.Y=98;
      folks_prevbutton.NormalGraphic=8059;
      folks_prevbutton.MouseOverGraphic=8060;
  folkify(1);}
  
}


function end_restart_OnClick(GUIControl *control, MouseButton button){
    PlaySound(28); StopMusic(); 
    if (end_restart.NormalGraphic==9372){//buy now!
        TopUp("Please Wait","Now connecting to the internet...");
        //ShellExecute("open", "rundll32.exe", "url.dll,FileProtocolHandler http://www.richardhofmeier.com/cartlife");
    }
    if (end_restart.NormalGraphic==8005){//Author's Site
        TopUp("Please Wait","Now connecting to the internet...");
        //ShellExecute("open", "rundll32.exe", "url.dll,FileProtocolHandler http://www.richardhofmeier.com/");
    } 
}

function end_quit_OnClick(GUIControl *control, MouseButton button){ //Epilogue
    PlaySound(28);
    if (end_quit.MouseOverGraphic==8003){
        //Epilogue Functionality
        TopUp("Congratulations!","You've succeeded with this character!");
        //StopMusic();
        //if (GetGlobalInt(1)==1){epilogue_andrus();}//in progress
        //if (GetGlobalInt(1)==2){epilogue_melanie();}//in progress
        //if (GetGlobalInt(1)==3){epilogue_vinny();}//in progress

        //End Epilogue Functionality
    } else if (end_quit.MouseOverGraphic==9371) {
        PlaySound(60);
    }
}

function end_restore_OnClick(GUIControl *control, MouseButton button) {
    PlaySound(28); Wait(5);
    PlaySound(75); FadeOut(3); Wait(120); RestartGame();
}

function Slider_Americano_OnChange(GUIControl *control) {PlaySound(42);}
function Slider_Latte_OnChange(GUIControl *control) {PlaySound(42);}
function Slider_Cappuccino_OnChange(GUIControl *control){PlaySound(42);}
function Slider_Chailatte_OnChange(GUIControl *control){PlaySound(42);}
function Slider_Mocha_OnChange(GUIControl *control){PlaySound(42);}


//=============/// FOR AGS, THESE EXPORTS HAVE TO GO NEAR THE BOTTOM OF THIS GLOBAL SCRIPT //============//
export tiprecord; 
//export day; export deliveryitem; export deliverydrop; export deliveryday; export Money; export musique; 
//export coffee_d_remaining; export bagel_plain_remaining; export paper_remaining; export drunkenness; 
//export walmartia; export localbucks; export dayofweek; export dayspassed; export hour; export minute; 
//export blab1; export blab2; export blab3; export blab4; export blab5; export pizzasbought;
//export Teejanger; export ampm; export stand_look; export stereopower; export NatMusic; export cued;
//export balance_start; export boxadd;
//export taxifare; export busfare; export timefare;
//export small_Bigby; export small_Alice;
//export nmbr;// Courthouse Number
//export dsply;//Courthouse Display

//export keyword; export keytype;
//export salebuyer; 

//==// CURTAINCALLER //==//
// At the end of the game, the player can click each character's portrait and get a sentence or two about them.
function curtaincaller(int portrait_sprite) {
    gInfo.ZOrder=999;
    Character* actor_spotlight;
    String char_bio=("This is merely a superficial history of a person you'd only just begun to know.");
    if (portrait_sprite==8063){}//Locked
    if (portrait_sprite==8064){}//Blank
    if (portrait_sprite==8011){
        actor_spotlight=Andrus;
        char_bio=("The Ukranian newsagent is fond of selling the tea and newspaper together. He's new to Georgetown and is living at Breezy's Motel");
    }
    if (portrait_sprite==8012){
        actor_spotlight=cBarneys;
        //conditional
        char_bio=("The Barney twins are third generation coffee bean devotees. Their allegience to their \"aromatic goddess\" is paramount, and their drinks are, currently, unrivaled.");
    }
    if (portrait_sprite==8013){
        actor_spotlight=Basinski;
        char_bio=("Every morning at seven, Basinski will come down the street on his way to work. A generous tipper and regular patron of street vendors everywhere.");
    }
    if (portrait_sprite==8014){
        actor_spotlight=Rebecca;
        char_bio=("A culinary arts student intent on someday becoming a rock star chef, Rebecca Emberley does her cooking with much love.");
    }
    if (portrait_sprite==8015){
        actor_spotlight=Betsy;
        char_bio=("The plucky cinemaphile is never fussy about the particulars, just as long as she stays drifting, far from home.");
    }
    if (portrait_sprite==8016){actor_spotlight=Bramford;
    char_bio=("Just a humble public servant, and nothing more."); }
    if (portrait_sprite==8017){actor_spotlight=Carolina;
    char_bio=("Though she's now forever gone, her memory is held term to her final demand: your life is yours to create, as was her own."); }
    if (portrait_sprite==8018){actor_spotlight=Chris;
    char_bio=("The milk-chugging sociology student is just looking to get into grad school now that this is all finished."); }
    if (portrait_sprite==8019){actor_spotlight=Christin;
    char_bio=("The Georgetown broadcaster of the year is working harder for you than you'd ever care to know."); }
    if (portrait_sprite==8020){actor_spotlight=DC;
    char_bio=("He doesn't walk slow. Maybe everybody else just walks really fast. Did you ever think about that?"); }
    if (portrait_sprite==8021){actor_spotlight=Dick;
    char_bio=("As a boy, he roped pretty girls off their bicycles. He spied on the russians, took cream pies to the face on stage, and now he hauls coal by the long ton up steep mountain passes. \"I'll take another cup of coffee,\" he says."); }
    if (portrait_sprite==8022){actor_spotlight=Dwayne;
    char_bio=("Unopened envelopes everywhere. There are so many little things to worry about?"); }
    if (portrait_sprite==8023){actor_spotlight=Eddie;
    char_bio=("\"The aim of life is to live, and to live means to be aware, Joyously, drunkenly, serenely, divinely aware.\" - Henry Miller."); }
    if (portrait_sprite==8024){actor_spotlight=Evangeline;
    char_bio=("This old grey town just ain't what it used to be, now that she's gone away."); }
    if (portrait_sprite==8025){actor_spotlight=Faith;
    char_bio=("The heart asks pleasure first.");}
    if (portrait_sprite==8026){actor_spotlight=George;
    if (georgeisnorthbound==true){char_bio=("The Devil Take George Chin.");}
    else {char_bio=("Under the non-stop flickering blur of gameshows or the flourescent overheads of the office, dollar sign eyes are blinking harder with age ."); }
    }
    if (portrait_sprite==8027){actor_spotlight=Glenda;
    char_bio=("\"Typing sounds -- You wait in a line that isn't there.\" - Eddie's Senryu on Glenda Marsh");}
    if (portrait_sprite==8028){actor_spotlight=Harry;
    char_bio=("Batte col remo qualunque s'adagia.");}
    if (portrait_sprite==8029){actor_spotlight=Jenny;
    char_bio=("This game is dedicated to Jenny, whose worth is beyong the capacity of any means to measure, though it does nothing to reflect her indelible characteristics which are never mundane, nor tragic, nor self-pitying, nor everyday, nor tiresome, nor gray.");}
    if (portrait_sprite==8030){actor_spotlight=Jessi;
    char_bio=("Thankfully, there are lots of nerdy, impassioned and amazing people in this town to make it really interesting. She's staying in character by being boring, moderate, and cautious.");}
    if (portrait_sprite==8031){actor_spotlight=Johns;
    char_bio=("He's just doing his job, and there's worse ways to spend a day in uniform, he'll tell you that.");}
    if (portrait_sprite==8032){actor_spotlight=Julian;
    char_bio=("Oh, you know... He's just a young man... in the world...");}
    if (portrait_sprite==8033){actor_spotlight=Stephen;
    char_bio=("He started a twitter account just to bug this game's author to release it. Also, he declared his friends' presence in this game to be the best thing in the world without having even seen it.");}//?
    if (portrait_sprite==8034){actor_spotlight=Kyam;
    char_bio=("Known to get a cup of coffee once in a while. Known to drink a soda now and then. In his mind: his own language, never to be spoken aloud.");}
    if (portrait_sprite==8035){actor_spotlight=Laura;
    char_bio=("Only a girl who has a mother with desperate hopes of raising a daughter to one day be the smarter and more capable of the two.");}
    if (portrait_sprite==8036){actor_spotlight=Logan;
    char_bio=("A baby got born, a boy became a man. Now, there's a hot dog stand on the bridge. What's all this about \"what should I do with my life\"? Just live, that's what. Eat some protein, for crying out loud.");}
    if (portrait_sprite==8037){actor_spotlight=Marcus;
    char_bio=("Zoinks!");}
    if (portrait_sprite==8038){actor_spotlight=Matts;
    char_bio=("The chosen son is just on his way through town, and he's seen things you wouldn't believe.");}
    if (portrait_sprite==8039){actor_spotlight=Meadow;
    char_bio=("Her star shine hasn't dimmed, she's just more comfortable in her own skin now that she's grown up. ");}
    if (portrait_sprite==8040){actor_spotlight=Melanie;
    char_bio=("Her mom often told her, \"Keep swimming!\" ...but she was only saying that because she didn't understand Melanie's position or her problems. She couldn't see the girl inside.");}
    if (portrait_sprite==8041){actor_spotlight=Melody;
    char_bio=("The strong flavours, the thick britticisms and the bloody apron, are just a disguise. The truth is only nature, but isn't it the destiny of civilization to create art from those raw materials?");}
    if (portrait_sprite==8042){actor_spotlight=Nelly;
    char_bio=("Who knows why she's washed up here? Only a matter of time before she gets what she needs to haul anchor.");}
    if (portrait_sprite==8043){actor_spotlight=Omar;
    char_bio=("\"Life's pretty good, you know? People here love me.\"");}
    if (portrait_sprite==8044){actor_spotlight=Richard;
    char_bio=("Thanks for playing cart life.");}
    if (portrait_sprite==8045){actor_spotlight=Sebastian;
    char_bio=("Walking the thin line between the gutter and the stars.");}
    if (portrait_sprite==8046){actor_spotlight=Seth;
    char_bio=("Consistency is paramount.");}
    if (portrait_sprite==8047){actor_spotlight=Stephanie;
    char_bio=("The waitress hates the way her hair smells when her shift ends, but the shape of it - and the imagined garden of this hair as it lays on a white pillow - occupy her many regular diners.");}
    if (portrait_sprite==8048){actor_spotlight=Suchin;
    //conditional
    char_bio=("Pushing the broom or being pulled by it, she couldn't tell you. But she knows the tool will outlive her, and the hotel will outlive everything she's ever known.");}
    if (portrait_sprite==8049){actor_spotlight=Thales;
    char_bio=("He's had worse jobs, and there are still parts of town he's never seen, but one thing's for sure: these boots wreck a man's feet to hell.");}
    if (portrait_sprite==8050){actor_spotlight=TheThree;
    char_bio=("They came in on different trains for the noises, sounds and sweet airs of city life. They're spending the hours in the night kitchen, in the summer house. They will return again.");}
    if (portrait_sprite==8051){actor_spotlight=Thomas;
    char_bio=("Work harder, hard worker. Today's test takers are tomorrow's best bakers.");}
    if (portrait_sprite==8052){actor_spotlight=cTimothy;
    //conditional
    char_bio=("Nobody knows why he's in the wheelchair, or even when he started using it. Maybe he just likes sitting down?");}
    if (portrait_sprite==8053){actor_spotlight=TJ;
    char_bio=("Nobody could force themself to actually remember, every day, how lucky they are. You'd get paralyzed with guilt. We just shut up and drink what's on the table.");}
    if (portrait_sprite==8054){actor_spotlight=Toney;
    char_bio=("You can't read the words anymore because it's been washed so many times, but the shirt says \"Warning: contents under pressure\".");}
    if (portrait_sprite==8055){actor_spotlight=Troy;
    char_bio=("Are you running? Has the road you're on left you burned out and exhausted? Do you hope to find redemption, when it's time, and for the white lights of the stage to shine from heaven?");}
    if (portrait_sprite==8056){actor_spotlight=Vinny;
    char_bio=("Eye contact gets too much press. The real story is that a complete stranger cooked what's in stomach cavity fueling your blood and firing your synapses; the raw materials from which your fingernails are made.");}
    if (portrait_sprite==8057){actor_spotlight=Ward;
    char_bio=("People are dumb. Really, when you get right down to it, most people are scared to death because they have no idea what's going on around them.");}
    if (portrait_sprite==8058){actor_spotlight=Winston;
    char_bio=("The stores are open, but he ain't got no money. Maybe this afternoon he'll spange up enough to buy some gondola bars, sit on the bridge, and listen to the bugs.");}
    if (portrait_sprite==8097){actor_spotlight=Clarence;
    char_bio=("A man's lawn is his testament of man's domain over nature. It's man's nostalgaic love for nature that inspires him to sculpt it so artfully.");}
    if (portrait_sprite==9353){actor_spotlight=Judge;
    char_bio=("People conceal things in order to fool other people about them. They want to appear healthier than they are, smarter, more honest and so forth.");}

    //etc etc

    if ((portrait_sprite!=8063)&&(portrait_sprite!=8064)){//Not Blank
      PlaySound(99);
      topitm_charname.Visible=true;
      topcost.Visible=false;
      topitm_sale.Visible=false;
      topitm_desc.Y=20;//20?
      topitm_desc.Font=eFontFont8;
      topitm_charname.Text=String.Format("%s",actor_spotlight.Name);
      topitm_desc.Text=String.Format("%s",char_bio);
      topitm.NormalGraphic=portrait_sprite;
      topitm.Visible=true;
      Infobg.NormalGraphic=9354;
      TopInfo.Centre();
      TopInfo.Visible=true;
      Infobg.Animate(192, 5, 1, eOnce);
      WaitMouseKey(999999);//Variable Attribute depends on text speed
      TopInfo.Visible=false;
      topitm_desc.Text=(" ");
      topcost.Text=(" ");
      topcost.Visible=true;
      topitm_sale.Visible=false;
    }

}

function lock_cream_OnClick(GUIControl *control, MouseButton button){}

///These moves take the click from a general button to a specific graphic.
function mp0_OnClick(GUIControl *control, MouseButton button){curtaincaller(mp0.Graphic);}
function mp1_OnClick(GUIControl *control, MouseButton button){curtaincaller(mp1.Graphic);}
function mp2_OnClick(GUIControl *control, MouseButton button){curtaincaller(mp2.Graphic);}
function mp3_OnClick(GUIControl *control, MouseButton button){curtaincaller(mp3.Graphic);}
function mp4_OnClick(GUIControl *control, MouseButton button){curtaincaller(mp4.Graphic);}
function mp5_OnClick(GUIControl *control, MouseButton button){curtaincaller(mp5.Graphic);}
function mp6_OnClick(GUIControl *control, MouseButton button){curtaincaller(mp6.Graphic);}
function mp7_OnClick(GUIControl *control, MouseButton button){curtaincaller(mp7.Graphic);}
function mp8_OnClick(GUIControl *control, MouseButton button){curtaincaller(mp8.Graphic);}
function mp9_OnClick(GUIControl *control, MouseButton button){curtaincaller(mp9.Graphic);}
function mp10_OnClick(GUIControl *control, MouseButton button){curtaincaller(mp10.Graphic);}
function mp11_OnClick(GUIControl *control, MouseButton button){curtaincaller(mp11.Graphic);}
function mp12_OnClick(GUIControl *control, MouseButton button){curtaincaller(mp12.Graphic);}
function mp13_OnClick(GUIControl *control, MouseButton button){curtaincaller(mp13.Graphic);}
function mp14_OnClick(GUIControl *control, MouseButton button){curtaincaller(mp14.Graphic);}
function mp15_OnClick(GUIControl *control, MouseButton button){curtaincaller(mp15.Graphic);}
function mp16_OnClick(GUIControl *control, MouseButton button){curtaincaller(mp16.Graphic);}
function mp17_OnClick(GUIControl *control, MouseButton button){curtaincaller(mp17.Graphic);}
function mp18_OnClick(GUIControl *control, MouseButton button){curtaincaller(mp18.Graphic);}
function mp19_OnClick(GUIControl *control, MouseButton button){curtaincaller(mp19.Graphic);}
function mp20_OnClick(GUIControl *control, MouseButton button){curtaincaller(mp20.Graphic);}
function mp21_OnClick(GUIControl *control, MouseButton button){curtaincaller(mp21.Graphic);}
function mp22_OnClick(GUIControl *control, MouseButton button){curtaincaller(mp22.Graphic);}
function mp23_OnClick(GUIControl *control, MouseButton button){curtaincaller(mp23.Graphic);}
function mp24_OnClick(GUIControl *control, MouseButton button){curtaincaller(mp24.Graphic);}
function mp25_OnClick(GUIControl *control, MouseButton button){curtaincaller(mp25.Graphic);}
function mp26_OnClick(GUIControl *control, MouseButton button){curtaincaller(mp26.Graphic);}
function mp27_OnClick(GUIControl *control, MouseButton button){curtaincaller(mp27.Graphic);}



function newgame(){
  gOverwrite.Visible=false; mouse.Visible=false;
  gFullblack.Visible=false; gFullblack.Transparency=0; gFullblack.ZOrder=99999;
  StopMusic(); PlaySound(67);
   gPick.Centre(); pick.NormalGraphic=4238; pick.X=0; pick.Y=0; close_pick.Visible=false;//Prep
  pick.NormalGraphic=6601; gPick.Visible=true; WaitMouseKey(120); //FadeOut(1); 
  //Trivia Questions all start in the middle.
  slogBagel=(Random(27)+1); slogCoffee=(Random(27)+1); slogHotdog=(Random(28)+1);
  slogMisc=(Random(1)+1); slogPaper=(Random(28)+1); slogSoda=1;
  
  if (GetGlobalInt(1)==1){//New Game: Andrus
  npcAndrus_location=0; npcLogan_location=13; npcMelanie_location=17; npcVinny_location=22;
  Andrus.ChangeRoom(25, 0, 0);
  SetGlobalInt(1,1); FadeOut(1); cAndrus.SetAsPlayer(); gGui1.BackgroundGraphic=15;
  upgrade_4.NormalGraphic=1278; upgrade_D.NormalGraphic=1273;//Start with Battery
  small_Bigby=1; boxadd("Tim Bigby"); boxadd("Breezy's Motel"); boxadd("5th & Franklin");
  m_newcart.NormalGraphic=3794; m_newcart.MouseOverGraphic=3795;
  //cSlot2.AddInventory(WatchD); //Buy your watch
  cSlot2.AddInventory(Lighter); cSlot2.AddInventory(Pocketknife);
  TJ.AddInventory(bDiamond); TJ.AddInventory(bWatchC); stand_look=0;
  gStand_Gui.BackgroundGraphic=180; Money=2250.00; balance_start=2250.00;//Why the difference?
  gPrice_Gui.BackgroundGraphic=184; gUpgrades_Gui.BackgroundGraphic=194;
  //cLogan.ChangeRoom(24, 80, 82); 
  cMelanie.ChangeRoom(24, 103, 82); cEgo.ChangeRoom(24, 163, 82); bmood.Visible=false;
  cigarettes_remaining+=2; cSlot2.AddInventory(Cigarettes);//Add Smokes
  Stand.ChangeRoom(5, 335, 160); // Move Newsstand to Franklin
  SetGlobalInt(52, 1); vitality.Width=110; caffeine.Width=110; nutrition.Width=110; kibbles.Width=110;
  Wait(5); gPick.Visible=false; pick.X=38; pick.Y=16; close_pick.Visible=true; Wait(5);
  player.ChangeRoom(23,179, 197);}//ANDRUS REGULAR START! = 1 (Teal) 

  else if (GetGlobalInt(1)==2){//New Game: Melanie
  caffeine.Visible=false; bmood.Visible=true; bmood.Text=("Arriving tomorrow");
  npcAndrus_location=5; npcLogan_location=13; npcMelanie_location=0; npcVinny_location=22;
  Melanie.ChangeRoom(25, 0, 0); melplot=0;
  SetGlobalInt(1,2); FadeOut(1); cMelanie.SetAsPlayer(); gGui1.BackgroundGraphic=6;  
  cSlot2.AddInventory(WatchB); cSlot2.AddInventory(Cellphone);//Starting Inventory
  cSlot2.AddInventory(Divorcepapers); cSlot2.AddInventory(Diamondring);//Starting Inventory
  upgrade_4.NormalGraphic=1278; upgrade_D.NormalGraphic=1273;//Start with Battery
  small_rebecca=1; small_laura=1; small_seth=1;
  melplot=0;
  TJ.AddInventory(bLighter);
  gStand_Gui.BackgroundGraphic=182; Money=1560.00; balance_start=1560.00;
  gPrice_Gui.BackgroundGraphic=186; gUpgrades_Gui.BackgroundGraphic=196; SetGlobalInt(52, 1);
  cAndrus.ChangeRoom(24, 50, 82); cEgo.ChangeRoom(24, 163, 82);
  kibbles.Visible=false; stand_look=0; TJ.AddInventory(bWatchC); 
  lockup.FollowCharacter(Stand,FOLLOW_EXACTLY, 100); lockup.LockView(88);
  Wait(5); gPick.Visible=false; pick.X=38; pick.Y=16; close_pick.Visible=true; Wait(5);
  //Time Stuff
  dayspassed=-1;
  dayofweek=0;
  player.ChangeRoom(23,179, 197);}//Melanie! = 2 (Coffee Color) 
  
  else if (GetGlobalInt(1)==3){//New Game: Vinny
  npcAndrus_location=5; npcLogan_location=13; npcMelanie_location=17; npcVinny_location=0;
  Vinny.ChangeRoom(25, 0, 0); small_Mel=1;
  SetGlobalInt(1,3); FadeOut(1); Money=202.60; balance_start=202.60;
  small_Alice=1; topicbox.AddItem("Alice"); topicbox.AddItem("Georgetown Machinery");
  cSlot2.AddInventory(WatchC); TJ.AddInventory(bDiamond); TJ.AddInventory(bLighter); stand_look=0;
  gUpgrades_Gui.BackgroundGraphic=197; cSlot2.AddInventory(Recipebook_V); kibbles.Visible=false;
  cAndrus.ChangeRoom(24, 50, 82); cMelanie.ChangeRoom(24, 103, 82);
  vitality.Width=110; caffeine.Width=110; nutrition.Width=110; bmood.Visible=false; player.AddInventory(CoffeeD); coffee_d_remaining=5;
  Wait(5); gPick.Visible=false; pick.X=38; pick.Y=16; close_pick.Visible=true; Wait(5);
  player.ChangeRoom(23,179, 197);}//VINNY! = 3 (no tint)
  
  else if (GetGlobalInt(1)==4){//New Game: Logan
  npcAndrus_location=5; npcLogan_location=0; npcMelanie_location=17; npcVinny_location=22;
  Logan.ChangeRoom(25, 0, 0);
  PlaySound(60);
  SetGlobalInt(1,4); FadeOut(1); cLogan.SetAsPlayer(); gGui1.BackgroundGraphic=16;  
  cSlot2.AddInventory(WatchA); TJ.AddInventory(bDiamond); TJ.AddInventory(bWatchC); TJ.AddInventory(bLighter);
  gStand_Gui.BackgroundGraphic=2617; gPrice_Gui.BackgroundGraphic=2464; Money=5000.00; balance_start=5000.00;
  gUpgrades_Gui.BackgroundGraphic=195; 
  cMelanie.ChangeRoom(24, 136, 82); cAndrus.ChangeRoom(24, 25, 82); cEgo.ChangeRoom(24, 190, 82); 
  kibbles.Visible=false; bmood.Visible=true; caffeine.Visible=false;
  Wait(5); gPick.Visible=false; pick.X=38; pick.Y=16; close_pick.Visible=true; Wait(5);
  player.ChangeRoom(23,179, 197);}//Logan! = 4 (FPS Brown) 
  //rep=100; hour=6; minute=20; ampm=0; player.ChangeRoom(17,179, 197);}//Downtown2 Direct Flight
  
}//End Newgame

function Overwriter(){
  int charstate;
  if (GetGlobalInt(1)==1){charstate=playstate_andrus;}
  if (GetGlobalInt(1)==2){charstate=playstate_melanie;}
  if (GetGlobalInt(1)==3){charstate=playstate_vinny;}
  if (GetGlobalInt(1)==4){charstate=0;}
  
  if (charstate==0){newgame();}
  else if (charstate==1){//in progress
  mouse.Visible=true;
  ow1.NormalGraphic=9375; ow1.MouseOverGraphic=9376;
  ow2.NormalGraphic=9379; ow2.MouseOverGraphic=9380;
  ow3.NormalGraphic=9385; ow3.MouseOverGraphic=9385;
  PlaySound(28);
  gOverwrite.Centre();
  gOverwrite.ZOrder=99;
  gFullblack.ZOrder=90;
  gFullblack.Visible=true; gFullblack.Transparency=30;
  gOverwrite.Visible=true;
  }
  else if ((charstate==2)||(charstate==3)){//Bad Ending or Skipped Town
  mouse.Visible=true;
  ow1.NormalGraphic=9375; ow1.MouseOverGraphic=9376;
  ow2.NormalGraphic=9381; ow2.MouseOverGraphic=9382;
  ow3.NormalGraphic=9385; ow3.MouseOverGraphic=9385;
  PlaySound(28);
  gOverwrite.Centre();
  gOverwrite.ZOrder=99;
  gFullblack.ZOrder=90;
  gFullblack.Visible=true; gFullblack.Transparency=30;
  gOverwrite.Visible=true;}
  
  else if (charstate>=4){//Good Ending
  mouse.Visible=true;
  ow1.NormalGraphic=9375; ow1.MouseOverGraphic=9376;
  ow2.NormalGraphic=9381; ow2.MouseOverGraphic=9382;
  ow3.NormalGraphic=9383; ow3.MouseOverGraphic=9384;
  PlaySound(28);
  gOverwrite.Centre();
  gOverwrite.ZOrder=99;
  gFullblack.ZOrder=90;
  gFullblack.Visible=true; gFullblack.Transparency=30;
  gOverwrite.Visible=true;}

}//End Overwrite Function

//Char Select "Overwrite" Menu
function ow1_OnClick(GUIControl *control, MouseButton button){//To Begin Again, From the Beginning
    if (ow1.NormalGraphic==9375){newgame();}}
 
function ow2_OnClick(GUIControl *control, MouseButton button){//Either "Continue" or "View Ending"
 gOverwrite.Visible=false; mouse.Visible=false;
 gFullblack.Visible=false; gFullblack.Transparency=0; gFullblack.ZOrder=99999;
 if (ow2.NormalGraphic==9379){//continue
  if (GetGlobalInt(1)==1){RestoreGameSlot(1);}//in progress
  if (GetGlobalInt(1)==2){RestoreGameSlot(2);}//in progress
  if (GetGlobalInt(1)==3){RestoreGameSlot(3);}//in progress
  }
 if (ow2.NormalGraphic==9381){//View Ending
    StopMusic(); PlaySound(67); FadeOut(5); Wait(40);
    if (GetGlobalInt(1)==1){
      if (playstate_andrus==2){ending_andrus_leaves();}
      if (playstate_andrus==3){ending_andrus_dies();}
      if (playstate_andrus==4){ending_andrus_wins();}
    }
    if (GetGlobalInt(1)==2){
      if (playstate_melanie==2){ending_melanie_leaves();}
      if (playstate_melanie==3){ending_melanie_dies();}
      //if (playstate_melanie==4){ending_melanie_wins();}
    }
    if (GetGlobalInt(1)==3){
      if (playstate_vinny==2){ending_vinny_leaves();}//is this even going to be an option? YES.
      //if (playstate_vinny==3){ending_vinny_dies();}
      //if (playstate_vinny==4){ending_vinny_wins();}
    }
  }
}

function ow3_OnClick(GUIControl *control, MouseButton button){//View Epilogue, if available
  if (ow3.NormalGraphic==9385){PlaySound(28);}//Locked
  else if (ow3.NormalGraphic==9384){//view epilo-- No, wait.. I mean... Congrats!
    TopUp("Congratulations!","You've succeeded with this character!");
    //gOverwrite.Visible=false; mouse.Visible=false;
    //gFullblack.Visible=false; gFullblack.Transparency=0; gFullblack.ZOrder=99999;
    //if (GetGlobalInt(1)==1){epilogue_andrus();}//in progress
    //if (GetGlobalInt(1)==2){epilogue_melanie();}//in progress
    //if (GetGlobalInt(1)==3){epilogue_vinny();}//in progress
  }
}
function ow_cancel_OnClick(GUIControl *control, MouseButton button){PlaySound(28); gOverwrite.Visible=false; gFullblack.Visible=false; mouse.Visible=false;}

//function cr_Keys_OnClick(GUIControl *control, MouseButton button){
  //cr_Keys.Visible=false;
  //Mouse.Mode=eModeKeys;
//}

//==// HERE'S WHERE THE KEY-JANGLING BUG DOTH DWELL //==//
function cr_lock_OnClick(GUIControl *control, MouseButton button){///
  if ((cranked==false)&&(cr_Lock.Graphic!=9805)){
    cranked=true; 
    //aSound28.Play();
    cr_Lock.MouseOverGraphic=9805;
    cr_Lock.NormalGraphic=9805;
    cr_Lock.PushedGraphic=9805;
    cr_Lock.Animate(296, 1, 2, eOnce);//Keyswing
      if (GetGlobalInt(1)==1){aRegister3a.Play();}
      if (GetGlobalInt(1)==2){aRegister3b.Play();}
      if (GetGlobalInt(1)==3){aRegister3c.Play();}
    }
  else{
      if ((changeclimbing<(ChangeAnswer+0.01))&&(changeclimbing>(ChangeAnswer-0.01))){//Good?
      PlaySound(4); vitality.Width-=1;
      //gCashRegister.Visible=false;
      mouse.Visible=false;
      donecranked=true; donecranko=0;
      if (GetGlobalInt(1)==1){aRegister3a.Play();}
      if (GetGlobalInt(1)==2){aRegister3b.Play();}
      if (GetGlobalInt(1)==3){aRegister3c.Play();}
      //checkout
      checkout();
      }//End Good Answer
      //Bad!
      else{Botch();}
    }
}

function billtake(Button *Control){
  if (Control.Visible==true){
    Control.Visible=false;
    
    aSound117.Play();
    //if ((Control.NormalGraphic>=xLowest)&&(Control.NormalGraphic<=xHighest)){cr_X.NormalGraphic=Random(range)+xLowest;}//
    
    if ((Control.NormalGraphic>=9792)&&(Control.NormalGraphic<=9799)){//20s
      //cr_20.NormalGraphic=Random(7)+9784;}//20s
      cr_20.NormalGraphic=((Control.NormalGraphic-9792)+9784); changeclimbing-=20.00;
      }
    if ((Control.NormalGraphic>=9806)&&(Control.NormalGraphic<=9813)){//10s
      cr_10.NormalGraphic=((Control.NormalGraphic-9806)+9814); changeclimbing-=10.00;
      }
    if ((Control.NormalGraphic>=9822)&&(Control.NormalGraphic<=9829)){//5s
      cr_5.NormalGraphic=((Control.NormalGraphic-9822)+9830); changeclimbing-=5.00;
      }    
    if ((Control.NormalGraphic>=9838)&&(Control.NormalGraphic<=9845)){//1s
      cr_1.NormalGraphic=((Control.NormalGraphic-9838)+9846); changeclimbing-=1.00;
      }    
  }
  
          //Update on change
          changebillslot[Control.ID-9]=0;
          cr_Printleft.Text=String.Format("$%.2f[[[$%.2f[[[$%.2f",billvalue,saleprice, changeclimbing);
          cr_Printright.Text=String.Format("$%.2f[[[$%.2f[[[$%.2f",billvalue,saleprice, changeclimbing);
}
    

function cr_Paybill0_OnClick(GUIControl *control, MouseButton button){billtake(cr_Paybill0);}
function cr_Paybill1_OnClick(GUIControl *control, MouseButton button){billtake(cr_Paybill1);}
function cr_Paybill2_OnClick(GUIControl *control, MouseButton button){billtake(cr_Paybill2);}
function cr_Paybill3_OnClick(GUIControl *control, MouseButton button){billtake(cr_Paybill3);}
function cr_Paybill4_OnClick(GUIControl *control, MouseButton button){billtake(cr_Paybill4);}



function cr_20_OnClick(GUIControl *control, MouseButton button){
  aSound117.Play();
  int lowest_billslot=0;
  int adjusto=Random(7);
  cr_20.NormalGraphic=(adjusto+9784);
  int o=0; while (o<4){
    if (changebillslot[o]>0){
      lowest_billslot+=1;
      }
    o++;    
  }
  //Display("Lowest Bill Slot: %d",lowest_billslot);
  lowest_billslot+=9;//Bills start at control ID 9.
  Button *billspot = gCashRegister.Controls[lowest_billslot].AsButton;
  billspot.NormalGraphic=(adjusto+9792);
  //Display("Now button number %d to sprite number %d.",billspot.ID, adjusto+9792);
  changeclimbing+=20.00;
  changebillslot[lowest_billslot-9]+=1;
  billspot.Visible=true;
          cr_Printleft.Text=String.Format("$%.2f[[[$%.2f[[[$%.2f",billvalue,saleprice, changeclimbing);
          cr_Printright.Text=String.Format("$%.2f[[[$%.2f[[[$%.2f",billvalue,saleprice, changeclimbing);
}

function cr_10_OnClick(GUIControl *control, MouseButton button){
  aSound117.Play();
  int lowest_billslot=0;
  int adjusto=Random(7);
  cr_10.NormalGraphic=(adjusto+9814);
  int o=0; while (o<4){
    if (changebillslot[o]>0){
      lowest_billslot+=1;
      }
    o++;    
  }
  //Display("Lowest Bill Slot: %d",lowest_billslot);
  lowest_billslot+=9;//Bills start at control ID 9.
  Button *billspot = gCashRegister.Controls[lowest_billslot].AsButton;
  billspot.NormalGraphic=(adjusto+9806);//Big Version
  //Display("Now button number %d to sprite number %d.",billspot.ID, adjusto+9814);
  changeclimbing+=10.00;
  changebillslot[lowest_billslot-9]+=1;
  billspot.Visible=true;
          cr_Printleft.Text=String.Format("$%.2f[[[$%.2f[[[$%.2f",billvalue,saleprice, changeclimbing);
          cr_Printright.Text=String.Format("$%.2f[[[$%.2f[[[$%.2f",billvalue,saleprice, changeclimbing);
}

function cr_5_OnClick(GUIControl *control, MouseButton button){
  aSound117.Play();
  int lowest_billslot=0;
  int adjusto=Random(7);
  cr_5.NormalGraphic=(adjusto+9830);//Lowest Drawer Bill
  int o=0; while (o<4){
    if (changebillslot[o]>0){
      lowest_billslot+=1;
      }
    o++;    
  }
  //Display("Lowest Bill Slot: %d",lowest_billslot);
  lowest_billslot+=9;//Bills start at control ID 9.
  Button *billspot = gCashRegister.Controls[lowest_billslot].AsButton;
  billspot.NormalGraphic=(adjusto+9822);//Big Version
  //Display("Now button number %d to sprite number %d.",billspot.ID, adjusto+9814);
  changeclimbing+=5.00;
  changebillslot[lowest_billslot-9]+=1;
  billspot.Visible=true;
          cr_Printleft.Text=String.Format("$%.2f[[[$%.2f[[[$%.2f",billvalue,saleprice, changeclimbing);
          cr_Printright.Text=String.Format("$%.2f[[[$%.2f[[[$%.2f",billvalue,saleprice, changeclimbing);
}

function cr_1_OnClick(GUIControl *control, MouseButton button){
  aSound117.Play();
  int lowest_billslot=0;
  int adjusto=Random(7);
  cr_1.NormalGraphic=(adjusto+9846);//Lowest Drawer Bill
  int o=0; while (o<4){
    if (changebillslot[o]>0){
      lowest_billslot+=1;
      }
    o++;    
  }
  //Display("Lowest Bill Slot: %d",lowest_billslot);
  lowest_billslot+=9;//Bills start at control ID 9.
  Button *billspot = gCashRegister.Controls[lowest_billslot].AsButton;
  billspot.NormalGraphic=(adjusto+9838);//Big Version
  //Display("Now button number %d to sprite number %d.",billspot.ID, adjusto+9814);
  changeclimbing+=1.00;
  changebillslot[lowest_billslot-9]+=1;
  billspot.Visible=true;
          cr_Printleft.Text=String.Format("$%.2f[[[$%.2f[[[$%.2f",billvalue,saleprice, changeclimbing);
          cr_Printright.Text=String.Format("$%.2f[[[$%.2f[[[$%.2f",billvalue,saleprice, changeclimbing);
}

function changetake(Button *Control){

  if (Control.Visible==true){
    Control.Visible=false;
    aSound118.Play();//Ba-LING
        
   
    if ((Control.NormalGraphic>=9882)&&(Control.NormalGraphic<=9886)){//Quarters
      cr_drawerQ.NormalGraphic=((Control.NormalGraphic-9882)+9854); changeclimbing-=0.25;
      }
    if ((Control.NormalGraphic>=9870)&&(Control.NormalGraphic<=9874)){//Dimes
      cr_drawerD.NormalGraphic=((Control.NormalGraphic-9870)+9859); changeclimbing-=0.10;
      }
    if ((Control.NormalGraphic>=9875)&&(Control.NormalGraphic<=9877)){//Nickles
      cr_drawerN.NormalGraphic=((Control.NormalGraphic-9875)+9864); changeclimbing-=0.05;
      }    
    if ((Control.NormalGraphic>=9878)&&(Control.NormalGraphic<=9881)){//Pennies
      cr_drawerP.NormalGraphic=((Control.NormalGraphic-9878)+9867); changeclimbing-=0.01;
      }    
  }
  
          //Update on change
          changeslot[Control.ID-21]=0;
          cr_Printleft.Text=String.Format("$%.2f[[[$%.2f[[[$%.2f",billvalue,saleprice, changeclimbing);
          cr_Printright.Text=String.Format("$%.2f[[[$%.2f[[[$%.2f",billvalue,saleprice, changeclimbing);
}

function cr_change0_OnClick(GUIControl *control, MouseButton button){changetake(cr_change0);}
function cr_change1_OnClick(GUIControl *control, MouseButton button){changetake(cr_change1);}
function cr_change2_OnClick(GUIControl *control, MouseButton button){changetake(cr_change2);}
function cr_change3_OnClick(GUIControl *control, MouseButton button){changetake(cr_change3);}
function cr_change4_OnClick(GUIControl *control, MouseButton button){changetake(cr_change4);}
function cr_change5_OnClick(GUIControl *control, MouseButton button){changetake(cr_change5);}
function cr_change6_OnClick(GUIControl *control, MouseButton button){changetake(cr_change6);}
function cr_change7_OnClick(GUIControl *control, MouseButton button){changetake(cr_change7);}
function cr_change8_OnClick(GUIControl *control, MouseButton button){changetake(cr_change8);}

function cr_drawerQ_OnClick(GUIControl *control, MouseButton button){
  aSound118.Play();//Ba-LING
  int lowest_slot=0;
  int adjusto=Random(4);
  cr_drawerQ.NormalGraphic=(adjusto+9854);//Lowest Drawer Bill
  int o=0; while (o<8){
    if (changeslot[o]>0){
      lowest_slot+=1;
      }
    o++;    
  }
  //Display("Lowest Change Slot: %d",lowest_slot);
  changeslot[lowest_slot]=1;
  lowest_slot+=21;//Bills start at control ID 21.
  Button *billspot = gCashRegister.Controls[lowest_slot].AsButton;//This is the variable for the resulting image
  billspot.NormalGraphic=(adjusto+9882);//Big Version
  //Display("Now button number %d to sprite number %d.",billspot.ID, adjusto+9814);
  changeclimbing+=0.25;
  //changeslot[lowest_slot-21]+=1;
  billspot.Visible=true;//The resulting image results.
          cr_Printleft.Text=String.Format("$%.2f[[[$%.2f[[[$%.2f",billvalue,saleprice, changeclimbing);
          cr_Printright.Text=String.Format("$%.2f[[[$%.2f[[[$%.2f",billvalue,saleprice, changeclimbing);
}

function cr_drawerD_OnClick(GUIControl *control, MouseButton button){
  aSound118.Play();//Ba-LING
  int lowest_slot=0;
  int adjusto=Random(4);//How many images, total?
  cr_drawerD.NormalGraphic=(adjusto+9859);//Lowest Drawer Bill
  int o=0; while (o<8){
    if (changeslot[o]>0){
      lowest_slot+=1;
      }
    o++;    
  }
  //Display("Lowest Bill Slot: %d",lowest_billslot);
  changeslot[lowest_slot]=1;
  lowest_slot+=21;//Bills start at control ID 21.
  Button *billspot = gCashRegister.Controls[lowest_slot].AsButton;//This is the variable for the resulting image
  billspot.NormalGraphic=(adjusto+9870);//Big Version
  //Display("Now button number %d to sprite number %d.",billspot.ID, adjusto+9814);
  changeclimbing+=0.10;//Value?
  changeslot[lowest_slot-21]+=1;
  billspot.Visible=true;//The resulting image results.
          cr_Printleft.Text=String.Format("$%.2f[[[$%.2f[[[$%.2f",billvalue,saleprice, changeclimbing);
          cr_Printright.Text=String.Format("$%.2f[[[$%.2f[[[$%.2f",billvalue,saleprice, changeclimbing);
}

function cr_drawerN_OnClick(GUIControl *control, MouseButton button){
  aSound118.Play();//Ba-LING
  int lowest_slot=0;
  int adjusto=Random(2);//How many images, total?
  cr_drawerN.NormalGraphic=(adjusto+9864);//Lowest Drawer Bill
  int o=0; while (o<8){
    if (changeslot[o]>0){
      lowest_slot+=1;
      }
    o++;    
  }
  //Display("Lowest Bill Slot: %d",lowest_billslot);
  changeslot[lowest_slot]=1;
  lowest_slot+=21;//Bills start at control ID 21.
  Button *billspot = gCashRegister.Controls[lowest_slot].AsButton;//This is the variable for the resulting image
  billspot.NormalGraphic=(adjusto+9875);//Big Version
  //Display("Now button number %d to sprite number %d.",billspot.ID, adjusto+9814);
  changeclimbing+=0.05;//Value?
  changeslot[lowest_slot-21]+=1;
  billspot.Visible=true;//The resulting image results.
          cr_Printleft.Text=String.Format("$%.2f[[[$%.2f[[[$%.2f",billvalue,saleprice, changeclimbing);
          cr_Printright.Text=String.Format("$%.2f[[[$%.2f[[[$%.2f",billvalue,saleprice, changeclimbing);
}

function cr_drawerP_OnClick(GUIControl *control, MouseButton button){
  aSound118.Play();//Ba-LING
  int lowest_slot=0;
  int adjusto=Random(2);//How many images, total?
  cr_drawerP.NormalGraphic=(adjusto+9867);//Lowest Drawer Bill
  int o=0; while (o<8){
    if (changeslot[o]>0){
      lowest_slot+=1;
      }
    o++;    
  }
  //Display("Lowest Bill Slot: %d",lowest_billslot);
  changeslot[lowest_slot]=1;
  lowest_slot+=21;//Bills start at control ID 21.
  Button *billspot = gCashRegister.Controls[lowest_slot].AsButton;//This is the variable for the resulting image
  billspot.NormalGraphic=(adjusto+9878);//Big Version
  //Display("Now button number %d to sprite number %d.",billspot.ID, adjusto+9814);
  changeclimbing+=0.01;//Value?
  changeslot[lowest_slot-21]+=1;
  billspot.Visible=true;//The resulting image results.
          cr_Printleft.Text=String.Format("$%.2f[[[$%.2f[[[$%.2f",billvalue,saleprice, changeclimbing);
          cr_Printright.Text=String.Format("$%.2f[[[$%.2f[[[$%.2f",billvalue,saleprice, changeclimbing);
}


function cr_Drawer_OnClick(GUIControl *control, MouseButton button){
    if ((mouse.y>=82)&&(mouse.y<115)) {
        if (cr_Lock.Graphic!=9805) {

        } else if ( (changeclimbing < (ChangeAnswer + 0.01))
            && (changeclimbing > (ChangeAnswer-0.01)) )
        {
            //Good?
            PlaySound(4); vitality.Width-=1;
            //gCashRegister.Visible=false;
            donecranked=true; donecranko=0;
            if (GetGlobalInt(1)==1){aRegister3a.Play();}
            if (GetGlobalInt(1)==2){aRegister3b.Play();}
            if (GetGlobalInt(1)==3){aRegister3c.Play();}
            //checkout
            mouse.Visible=false;
            checkout();
            //End Good Answer
        } else {
            Botch();
        }
    }
    //else{Display("Mouse.x: %d[Mouse.y: %d",mouse.x, mouse.y);}
}
